!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=113)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("lodash")},function(e,t){e.exports=require("react-bootstrap")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(0));t.default=function(e){if(e.name)return l.createElement("i",{className:"fa fa-"+e.name,"aria-hidden":"true"});if(e.names){var t=e.names.map((function(e){return"fa-"+e})).join(" ");return l.createElement("i",{className:"fa "+t,"aria-hidden":"true"})}return null}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getSignal=t.getAbortController=t.Delete=t.Put=t.PostForm=t.Post=t.Get=void 0;var l=i(n(60)),o=function(e,t){return t?e+"?"+l.stringify(t):e},u=function(e){if(!e.ok)throw Error(e.statusText);return e};t.Get=function(e){var t=o(e.path,e.qs),n={Accept:"application/json","Content-Type":"application/json"},r=e.signal;return fetch(t,{credentials:"same-origin",headers:n,signal:r}).then(u).then((function(e){return e.json()}))};t.Post=function(e){var t=o(e.path,e.qs),n={Accept:"application/json","Content-Type":"application/json"},r=e.body?JSON.stringify(e.body):"";return fetch(t,{credentials:"same-origin",headers:n,method:"POST",body:r}).then(u).then((function(e){return e.json()}))};t.PostForm=function(e){var t=o(e.path,e.qs);return fetch(t,{credentials:"same-origin",method:"POST",body:e.body}).then(u).then((function(e){return e.json()}))};t.Put=function(e){var t=o(e.path,e.qs),n={Accept:"application/json","Content-Type":"application/json"},r=e.body?JSON.stringify(e.body):"";return fetch(t,{credentials:"same-origin",headers:n,method:"PUT",body:r}).then(u).then((function(e){return e.json()}))};t.Delete=function(e){var t=o(e.path,e.qs);return fetch(t,{credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},method:"DELETE"}).then(u).then((function(e){return e.json()}))};t.getAbortController=function(e){if(void 0!==e&&e.abort(),"AbortController"in window)return new AbortController};t.getSignal=function(e){if(void 0!==e)return e.signal}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(0));t.default=function(e){return e.visible?l.createElement("div",{className:e.loaderClass||"loading"}):null}},function(e,t){e.exports=require("react-router-dom")},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.daterange=t.vastTag=t.url=t.numberInRange=t.limitBid=t.coordinates=t.native=t.domain=t.matchPassword=t.token=t.length=t.email=t.required=void 0;var a=r(n(61));t.required=function(e){return(e instanceof Array?0===e.length:""===e.trim())?{error:!0,message:"Please fill out this field."}:{error:!1,message:""}};t.email=function(e){return""===e?{error:!0,message:"Please fill out this field."}:a.default.isEmail(e)?{error:!1,message:""}:{error:!0,message:"Incorrect email format."}};t.length=function(e,t,n){var r={error:!0,message:"Minimum of "+t+" characters"};if(n){if(""===e)return{error:!0,message:"Please fill out this field."};if(e.length<t)return r}else if(e.length<t)return r;return{error:!1,message:""}};t.token=function(e,t,n){return 6!=e.length?{error:!0,message:"Please enter the 6 digit number from app."}:n<-2||n>0?{error:!0,message:"The token you entered was invalid."}:{error:!1,message:""}};t.matchPassword=function(e,t){return e!==t?{error:!0,message:"The two passwords should match."}:{error:!1,message:""}};t.domain=function(e,t){var n=0!==(e||"").indexOf("www.")&&/^[a-zA-Z0-9][a-zA-Z0-9-_]{0,61}[a-zA-Z0-9]{0,1}\.([a-zA-Z]{1,15}|[a-zA-Z0-9-]{1,30}\.[a-zA-Z]{2,3})$/.test(e),r=!1,a="";return t&&""===e?(r=!0,a="Please fill out this field."):n||(r=!0,a="Not a valid domain name."),{error:r,message:a}};t.native=function(e){return{error:!e.checkValidity(),message:e.validationMessage}};t.coordinates=function(e){var t=e.split(","),n=2===t.length&&t.every((function(e){return!isNaN(parseFloat(e))}));return{error:!n,message:n?"":"Incorrect format"}};t.limitBid=function(e,t){return e?e>t?{error:!0,message:"Value must be less than or equal to "+t}:{error:!1,message:""}:{error:!0,message:"Please fill out this field."}};t.numberInRange=function(e,t,n){return isNaN(e)||e<t||e>n?{error:!0,message:"Please fill in a number between "+t+" and "+n}:{error:!1,message:""}};t.url=function(e,t){var n={error:!0,message:"http(s):// is missing, or the input is not a valid url."},r={protocols:["http","https"],require_protocol:!0};if(t){if(""===(e||"").trim())return{error:!0,message:"Please fill out this field."};if(!a.default.isURL(e,r))return n}else if(""!==e&&!a.default.isURL(e,r))return n;return{error:!1,message:""}};t.vastTag=function(e){var t=a.default.isURL(e,{protocols:["http","https"],require_protocol:!0}),n=function(e){var t="",n=1;function r(e){t="",n=1,function e(r){var a,i,l;if("h3"==(l=r.nodeName)){if(0==n)return;n=0}"#text"==l&&(t=t+r.nodeValue+"\n");for(a=r.childNodes.length,i=0;i<a;i++)e(r.childNodes[i])}(e)}return function(e){if(window.ActiveXObject)return(n=new ActiveXObject("Microsoft.XMLDOM")).async=!1,n.loadXML(e),0==n.parseError.errorCode;if(document.implementation.createDocument){try{var n=(new DOMParser).parseFromString(e,"application/xml")}catch(e){return!1}return!(n.getElementsByTagName("parsererror").length>0)||(r(n.getElementsByTagName("parsererror")[0]),""==t)}return!0}(e)}(e);return t||n?{error:!1,message:""}:{error:!0,message:"Please fill in valid url or valid xml"}};t.daterange=function(e){return e.startDate&&e.endDate?{error:!1,message:""}:{error:!0,message:"Please fill out this field."}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getMaxLevel=t.getScopeByLevel=t.getEntityOptions=t.getLevelOptionsUptoCampaign=t.getLevelOptions=t.getLabelByScopeType=t.getLabelByScope=t.campaignSettingsLink=t.completionBarColor=t.getPopperConfig=t.isAbovo=t.isSter=t.storeVideoMode=t.getVideoMode=t.getMainRole=t.storeSelectedMetrics=t.getSelectedMetrics=t.getSourceScope=t.scopedParam=t.getDateRangePresets=t.findGroupSelectOption=t.firstGroupSelectOption=t.attributeOptions=t.attributeIdOptions=void 0;var s=i(n(1)),c=u(n(11)),d=i(n(4)),f=u(n(25));t.attributeIdOptions=function(e){var t=[];for(var n in e){var r={label:n,options:e[n].map((function(e){return{value:e.attributeId,label:e.displayName,name:e.name,acceptAnyValue:1===e.acceptAnyValue,attributeFormat:e.attributeDisplayFormat,chartTypes:e.chartTypes}}))};t.push(r)}return t};t.attributeOptions=function(e){var t=[];for(var n in e){var r={label:n,options:e[n].map((function(e){return{value:e.name,label:e.displayName,acceptAnyValue:1===e.acceptAnyValue,isList:1===e.isList,listsAllowed:1===e.listsAllowed}}))};t.push(r)}return t};t.firstGroupSelectOption=function(e){return s.get(e,"[0].options[0]",{value:-1,label:"Select..."})};t.findGroupSelectOption=function(e,t){return s.flatMap(e,(function(e){return e.options})).find((function(e){return e.value===t}))||{value:-1,label:"Select..."}};t.getDateRangePresets=function(){return[{text:"Today",start:c.default(),end:c.default()},{text:"Yesterday",start:c.default().subtract(1,"days"),end:c.default().subtract(1,"days")},{text:"Last 7 days",start:c.default().subtract(1,"week"),end:c.default()},{text:"Last 30 days",start:c.default().subtract(29,"days"),end:c.default()},{text:"This month",start:c.default().startOf("month"),end:c.default()},{text:"Last month",start:c.default().subtract(1,"month").startOf("month"),end:c.default().subtract(1,"month").endOf("month")}]};t.scopedParam=function(e){var t={};if("root"!==e.scope&&void 0!==e.scopeId){t[{organization:"organizationId",agency:"agencyId",advertiser:"advertiserId",publisher:"publisherId",campaigngroup:"campaignGroupId",campaign:"campaignId"}[e.scope]]=e.scopeId}return t};t.getSourceScope=function(e){switch(e){case"root":return"all";case"organization":return"metaAgency";case"campaigngroup":return"cluster";default:return e}};t.getSelectedMetrics=function(e,t,n){var r=e+"-metrics-"+n,a=[];try{a=JSON.parse(localStorage.getItem(r))}catch(e){a=t}return a||t};t.storeSelectedMetrics=function(e,t,n){if(n>-1){var r=e+"-metrics-"+n;localStorage.setItem(r,JSON.stringify(t))}};t.getMainRole=function(e){var t=e.email+"-role",n=JSON.parse(localStorage.getItem(t));return n||e.roles[0]};t.getVideoMode=function(e,t){var n=!1;try{var r=[e.email,t.level,t.entityId,"videomode"].join("-");n=JSON.parse(localStorage.getItem(r))||!1}catch(e){n=!1}return n};t.storeVideoMode=function(e,t,n){var r=[e.email,t.level,t.entityId,"videomode"].join("-");localStorage.setItem(r,n.toString())};t.isSter=function(e){return f.default.STER_AGENCIES.indexOf(e)>-1};t.isAbovo=function(e){return f.default.ABOVO_AGENCIES.indexOf(e)>-1};t.getPopperConfig=function(){return{modifiers:{preventOverflow:{enabled:!1},hide:{enabled:!1}}}};t.completionBarColor=function(e){switch(e){case 0:return"green";case 1:return"blue";case 2:return"orange";case 3:return"red"}};t.campaignSettingsLink=function(e){return{pathname:e,state:{fromDashboard:!0}}};t.getLabelByScope=function(e){switch(e){case"all":return"All";case"metaAgency":return"Organization";case"agency":return"Agency";case"advertiser":return"Advertiser";case"cluster":return"Campaign group";case"campaign":return"Campaign";default:return""}};t.getLabelByScopeType=function(e){switch(e){case"root":return"All";case"organization":return"Organization";case"agency":return"Agency";case"advertiser":return"Advertiser";case"campaigngroup":return"Campaign group";case"campaign":return"Campaign";default:return""}};t.getLevelOptions=function(e){return"root"===e?[{value:"root",label:"all"},{value:"organization",label:"organization"},{value:"agency",label:"agency"},{value:"advertiser",label:"advertiser"}]:"organization"===e?[{value:"organization",label:"organization"},{value:"agency",label:"agency"},{value:"advertiser",label:"advertiser"}]:"agency"===e?[{value:"agency",label:"agency"},{value:"advertiser",label:"advertiser"}]:"advertiser"===e?[{value:"advertiser",label:"advertiser"}]:"publisher"===e?[{value:"publisher",label:"publisher"}]:[]};t.getLevelOptionsUptoCampaign=function(e){return"root"===e?[{value:"root",label:"all"},{value:"organization",label:"organization"},{value:"agency",label:"agency"},{value:"advertiser",label:"advertiser"},{value:"campaigngroup",label:"campaign group"},{value:"campaign",label:"campaign"}]:"organization"===e?[{value:"organization",label:"organization"},{value:"agency",label:"agency"},{value:"advertiser",label:"advertiser"},{value:"campaigngroup",label:"campaign group"},{value:"campaign",label:"campaign"}]:"agency"===e?[{value:"agency",label:"agency"},{value:"advertiser",label:"advertiser"},{value:"campaigngroup",label:"campaign group"},{value:"campaign",label:"campaign"}]:"advertiser"===e?[{value:"advertiser",label:"advertiser"},{value:"campaigngroup",label:"campaign group"},{value:"campaign",label:"campaign"}]:"campaigngroup"===e?[{value:"campaigngroup",label:"campaign group"},{value:"campaign",label:"campaign"}]:"campaign"===e?[{value:"campaign",label:"campaign"}]:"publisher"===e?[{value:"publisher",label:"publisher"}]:[]};t.getEntityOptions=function(e,t,n,r){return l(void 0,void 0,void 0,(function(){return o(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,d.Get({path:"/api/frontend/navigation/"+e+"/"+t+"/"+n+"/level/"+r})];case 1:return[2,a.sent().map((function(e){return{value:e.id,label:e.name}}))];case 2:return a.sent(),[2,[]];case 3:return[2]}}))}))};t.getScopeByLevel=function(e){return"root"===e?"all":"organization"===e?"metaAgency":"campaigngroup"===e?"cluster":e};t.getMaxLevel=function(e,t){return e.isRootAdmin?"root":t.length>0?t[0].level:"advertiser"}},function(e,t){e.exports=require("react-select")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(0));t.default=function(e){return l.createElement("h2",{className:"text-danger pt-4"},e.message)}},function(e,t){e.exports=require("moment")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).createContext({data:{}});t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getChildrenRights=t.getRights=void 0;var a=r(n(25));t.getRights=function(e){return i(a.default.ACTIONS,e)};t.getChildrenRights=function(e){return i(a.default.CHILDREN_ACTIONS,e)};var i=function(e,t){var n={};return e.forEach((function(e){n[e]=t.indexOf(e)>-1})),n}},function(e,t){e.exports=require("react-bootstrap-table-next")},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=(this&&this.__rest,this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}});Object.defineProperty(t,"__esModule",{value:!0}),t.getInitialSizePerPage=t.getSizePerPage=t.storeSizePerPage=t.getPercentageFormatter=t.getFormatter=t.booleanFormatter=t.endDateFormatter=t.startDateFormatter=t.percentageRoundFormatter=t.percentageFormatter=t.currencyFormatter=t.numberFormatter=t.impressionCompletionFormatter=t.budgetCompletionFormatter=t.segmentActiveFormatter=t.adListFormatter=t.campaignListFormatter=t.campaignFormatter=t.campaigngroupFormatter=t.advertiserLinkFormatter=t.advertiserFormatter=t.agencyFormatter=t.publisherFormatter=t.organizationFormatter=t.undefinedFormatter=t.getLastPage=t.columnSort=void 0;var u=l(n(0)),s=n(6),c=l(n(1)),d=o(n(11)),f=n(2),p=l(n(22)),m=l(n(8)),h=o(n(3)),g=o(n(88));t.columnSort=function(e,t){return e?"asc"===e?u.default.createElement(h.default,{name:"angle-up"}):"desc"===e?u.default.createElement(h.default,{name:"angle-down"}):null:null};t.getLastPage=function(e,t){var n=1,r=e.length;return r>0&&(n=r%t==0?r/t:r/t+1),n};t.undefinedFormatter=function(e,t){return c.isNil(e)?"-":e};t.organizationFormatter=function(e,t){return c.isNil(e)?"-":u.default.createElement(s.Link,{to:"/settings/organization/"+t.id},e)};t.publisherFormatter=function(e,t){return c.isNil(e)?"-":u.default.createElement(s.Link,{to:"/analytics/publisher/"+t.id},e)};t.agencyFormatter=function(e,t){return c.isNil(e)?"-":u.default.createElement(s.Link,{to:"/settings/agency/"+t.id},e)};t.advertiserFormatter=function(e,t){return c.isNil(e)?"-":u.default.createElement(s.Link,{to:"/settings/advertiser/"+t.id},e)};t.advertiserLinkFormatter=function(e,t){return c.isNil(e)?"-":u.default.createElement(s.Link,{to:"/settings/advertiser/"+t.advertiserId},e)};t.campaigngroupFormatter=function(e,t){return c.isNil(e)?"-":u.default.createElement(s.Link,{to:"/settings/campaigngroup/"+t.id},e)};t.campaignFormatter=function(e,t){if(!c.isNil(e)){var n=m.campaignSettingsLink("/settings/campaign/"+t.id+"/general");if(t.remarks){var r=u.default.createElement(f.Tooltip,{id:"campaign-tooltip-"+t.id},t.remarks),a=m.getPopperConfig();return u.default.createElement(f.OverlayTrigger,{placement:"top",overlay:r,popperConfig:a},u.default.createElement(s.Link,{to:n},e))}return u.default.createElement(s.Link,{to:n},e)}return"-"};t.campaignListFormatter=function(e,t){var n="/settings/campaigngroup/"+t.id;if(e&&e.length>0){var r=c.groupBy(e,"status"),a=[];c.forEach(r,(function(e,t){a.push({group:e,key:t})}));var i=u.default.createElement(f.Popover,{id:"campaign-list-"+t.id},u.default.createElement(v,{groups:a,type:"campaigns"}));return u.default.createElement(f.OverlayTrigger,{trigger:["hover","focus"],placement:"right",overlay:i},u.default.createElement(s.Link,{to:n},e.length.toString()))}i=u.default.createElement(f.Popover,{id:"campaign-list-"+t.id},u.default.createElement(f.Popover.Content,null,"No campaigns in group"));return u.default.createElement(f.OverlayTrigger,{trigger:["hover","focus"],placement:"right",overlay:i},u.default.createElement(s.Link,{to:n},"0"))};t.adListFormatter=function(e,t){var n=m.campaignSettingsLink("/settings/campaign/"+t.id+"/ads");if(e&&e.length>0){var r=c.groupBy(e,"status"),a=[];c.forEach(r,(function(e,t){a.push({group:e,key:t})}));var i=r.active?r.active.length:0,l=u.default.createElement(f.Popover,{id:"ad-list-"+t.id},u.default.createElement(v,{groups:a,type:"ads"}));return u.default.createElement(f.OverlayTrigger,{trigger:["hover","focus"],placement:"right",overlay:l},u.default.createElement(s.Link,{to:n},i.toString()))}l=u.default.createElement(f.Popover,{id:"campaign-list-"+t.id},u.default.createElement(f.Popover.Content,null,"No ads linked to campaign"));return u.default.createElement(f.OverlayTrigger,{trigger:["hover","focus"],placement:"right",overlay:l},u.default.createElement(s.Link,{to:n},"0"))};t.segmentActiveFormatter=function(e,t,n){var r="Segment has not fired",a="red";e&&(d.default(e).unix()>d.default((new Date).setHours(0,0,0,0)).unix()?(a="green",r="Segment fired today at "+d.default(e).format("HH:mm:ss")):r="Segment last fired on "+d.default(e).format("YYYY/MM/DD HH:mm:ss"));var i=u.default.createElement(f.Tooltip,{id:"segment-tooltip-"+n},r),l=m.getPopperConfig();return u.default.createElement(f.OverlayTrigger,{placement:"top",overlay:i,popperConfig:l},u.default.createElement("span",{id:"segment-active-"+n,className:"segment-active circle "+a}))};t.budgetCompletionFormatter=function(e){return function(t,n){return u.default.createElement(y,{type:"budget_completion",row:n,pacing:t,chartClick:e})}};t.impressionCompletionFormatter=function(e){return function(t,n){return u.default.createElement(y,{type:"impression_completion",row:n,pacing:t,chartClick:e})}};t.numberFormatter=function(e,t){return c.isNil(e)?"-":p.numberWithCommas(e)};t.currencyFormatter=function(e,t){return c.isNil(e)?"-":p.currency(e)};t.percentageFormatter=function(e,t){return c.isNil(e)?"-":p.percentage(e)};t.percentageRoundFormatter=function(e,t){return c.isNil(e)?"-":e+"%"};t.startDateFormatter=function(e,t){if(!c.isNil(e)){var n=d.default.unix(e);return p.getStartDate(n)}return"-"};t.endDateFormatter=function(e,t){if(!c.isNil(e)){var n=d.default.unix(e);return p.getEndDate(n)}return"-"};t.booleanFormatter=function(e,t){return e?u.default.createElement("span",{className:"text-success"},u.default.createElement(h.default,{names:["check","lg"]})):u.default.createElement("span",{className:"text-danger"},u.default.createElement(h.default,{names:["remove","lg"]}))};t.getFormatter=function(e,n){switch(e){case"organization":return t.organizationFormatter;case"publisher":return t.publisherFormatter;case"agency":return t.agencyFormatter;case"advertiser":return t.advertiserFormatter;case"advertiser_link":return t.advertiserLinkFormatter;case"campaigngroup":return t.campaigngroupFormatter;case"campaign":return t.campaignFormatter;case"campaign_list":return t.campaignListFormatter;case"ad_list":return t.adListFormatter;case"budget_completion":return t.budgetCompletionFormatter(n);case"impression_completion":return t.impressionCompletionFormatter(n);case"number":return t.numberFormatter;case"money":return t.currencyFormatter;case"perc":return t.percentageFormatter;case"start":return t.startDateFormatter;case"end":return t.endDateFormatter;default:return t.undefinedFormatter}};t.getPercentageFormatter=function(e){switch(e){case"number":case"money":case"perc":return t.percentageRoundFormatter;default:return t.undefinedFormatter}};t.storeSizePerPage=function(e,t,n){var r=n.email+"-"+t+"-pageLength";[30,50,100].indexOf(e)<0?localStorage[r]="all":localStorage[r]=e};t.getSizePerPage=function(e,t){return"all"===e&&0!==t?t:e};t.getInitialSizePerPage=function(e,t){var n=localStorage[t.email+"-"+e+"-pageLength"];return"all"===n||parseInt(n)>0?n:30};var v=function(e){return u.default.createElement(f.Popover.Content,null,u.default.createElement("table",null,u.default.createElement("tbody",null,e.groups.map((function(t,n){return u.default.createElement("tr",{key:"tooltip-row-"+e.type+"-"+n},u.default.createElement("td",{className:"popover-status"},u.default.createElement("strong",null,t.group.length," ",t.key.toLowerCase())),u.default.createElement("td",{className:"popover-list"},u.default.createElement(b,{records:t.group,type:e.type})))})))))},b=function(e){return u.default.createElement("ul",null,e.records.map((function(t,n){return u.default.createElement("li",{key:"tooltip-"+e.type+"-"+n},t.name)})))},y=function(e){if(e.pacing){var t=e.pacing.action||"",n=e.pacing.percentage?100*e.pacing.percentage:0,a=100*e.pacing.percentageDone,i="budget_completion"===e.type?p.currency(e.pacing.actual||0):p.numberWithCommas(e.pacing.actual),l="completion-tooltip-"+e.type+"-"+e.row.id,o=u.default.createElement(f.Tooltip,{id:l},t),s="completion-chart-tooltip-"+e.type+"-"+e.row.id,c=u.default.createElement(f.Tooltip,{id:s},"view chart"),d=m.getPopperConfig(),v=void 0;if(null===e.pacing.actionType||-1===e.pacing.actionType)v=u.default.createElement("span",null,i);else{var b={color:m.completionBarColor(e.pacing.actionType),percentage:n,percentageDone:a,actual:i};v=u.default.createElement(g.default,r({},b))}return""===t?v:u.default.createElement(u.Fragment,null,u.default.createElement("div",{style:{width:"80%",display:"inline-block"}},u.default.createElement(f.OverlayTrigger,{placement:"top",overlay:o,popperConfig:d},v)),u.default.createElement("div",{style:{width:"20%",display:"inline-block",verticalAlign:"top",marginLeft:"5px"}},u.default.createElement(f.OverlayTrigger,{placement:"top",overlay:c,popperConfig:d},u.default.createElement("a",{style:{color:"#333"},onClick:function(t){t.preventDefault(),e.chartClick(e.row.id,e.type)},href:""},u.default.createElement(h.default,{name:"line-chart"})))))}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).createContext({username:"Guest",authenticated:!0,isRootAdmin:!1});t.default=r},function(e,t){e.exports=require("react-bootstrap-table2-paginator")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Api=void 0;var l=n(58),o=n(407),u=i(n(60)),s=i(n(1)),c=i(n(59)),d=function(){function e(e){this.getIdFromHeader=function(e){return e?e.headers.get("Object-ID"):(console.log("Undefined response in function getIdFromHeader"),null)},this.config=e}return e.prototype.handleErrors=function(e){if(!e.ok)throw Error(e.statusText);return e},e.prototype.handleResponseType=function(e){var t=e.headers.get("content-type");return t&&-1!==t.indexOf("application/json")?e.json():e.text()},e.prototype.handlePostResponseType=function(e){return e.headers.get("object-id")},e.prototype.Get=function(t){var n=e.buildUrl(this.config.host,t.path,t.qs);console.log("GET: ",n);var r=this.getHeaders(t);return l(n,{method:"GET",timeout:this.config.timeout,headers:r})},e.prototype.GetFile=function(t){var n=e.buildUrl(this.config.host,t.path,t.qs);console.log("GET: ",n);var r=this.getHeaders(t);return o({url:n,headers:r})},e.prototype.Post=function(t){var n=e.buildUrl(this.config.host,t.path,t.qs);console.log("POST: ",n);var r=this.getHeaders(t),a=t.body?JSON.stringify(t.body):"";return l(n,{method:"POST",timeout:this.config.timeout,headers:r,body:a})},e.prototype.PostForm=function(t){var n=e.buildUrl(this.config.host,t.path,t.qs);console.log("POST: ",n);var r=s.assign({},t,{contentType:"application/x-www-form-urlencoded"}),a=this.getHeaders(r),i=t.body?u.stringify(t.body):"";return l(n,{method:"POST",timeout:this.config.timeout,headers:a,body:i})},e.prototype.PostMultipartForm=function(t){var n=e.buildUrl(this.config.host,t.path,t.qs);console.log("POST: ",n);var r={Authorization:"Basic "+Buffer.from(t.credentials.username+":"+t.credentials.password).toString("base64"),"Proxy-Authorization":Buffer.from(c.dashboarduser+":"+c.dashboardpass).toString("base64")},a=t.body;return l(n,{method:"POST",timeout:this.config.timeout,headers:r,body:a})},e.prototype.Put=function(t){var n=e.buildUrl(this.config.host,t.path,t.qs);console.log("PUT: ",n);var r=this.getHeaders(t),a=t.body?JSON.stringify(t.body):"";return l(n,{method:"PUT",timeout:this.config.timeout,headers:r,body:a})},e.prototype.Delete=function(t){var n=e.buildUrl(this.config.host,t.path,t.qs);console.log("DELETE: ",n);var r=this.getHeaders(t);return l(n,{method:"DELETE",headers:r})},e.ScopedParam=function(e){var t={};if(e.scope&&void 0!==e.scopeId){t[{metaAgency:"organizationId",agency:"agencyId",advertiser:"advertiserId",cluster:"campaignGroupId",publisher:"publisherId"}[e.scope]]=e.scopeId}return t},e.prototype.getHeaders=function(e){return e.credentials?{"Content-Type":e.contentType||"application/json",Authorization:"Basic "+Buffer.from(e.credentials.username+":"+e.credentials.password).toString("base64"),"Proxy-Authorization":Buffer.from(c.dashboarduser+":"+c.dashboardpass).toString("base64")}:{"Content-Type":e.contentType||"application/json"}},e.buildUrl=function(e,t,n){return n?e+t+"?"+u.stringify(n,{arrayFormat:"repeat"}):e+t},e}();t.Api=d},function(e,t){e.exports=require("react-notification-system")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.info=t.warning=t.error=t.success=void 0;var o=i(n(0)),u=l(n(3));t.success=function(e,t,n){return void 0===t&&(t=!1),t?{title:e,level:"success",autoDismiss:0,children:o.createElement(u.default,{name:"check-circle"}),onRemove:function(){n&&n()}}:{title:e,level:"success",autoDismiss:3,dismissible:!1,children:o.createElement(u.default,{name:"check-circle"}),onRemove:function(){n&&n()}}};t.error=function(e){return{title:e,level:"error",autoDismiss:0,children:o.createElement(u.default,{name:"times-circle"})}};t.warning=function(e){return{title:e,level:"warning",autoDismiss:0,children:o.createElement(u.default,{name:"exclamation-circle"})}};t.info=function(e){return{title:e,level:"info",autoDismiss:3,dismissible:!1}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.exportTags=t.getStatus=t.getEntityAttributes=t.getImpressionsFields=t.getBudgetFields=t.getExistingCampaignData=t.getNewCampaignData=t.isAdserving=t.isRetail=t.getListModalMaxLevel=t.campaigngroupOptions=t.gpsLocationsSelectOptions=t.attributeIdValuesSelectOptions=t.attributeValueNameSelectOptions=t.suggestionSelectOptions=t.getRuleConsequence=t.timeUnitOptions=t.ruleBidOptions=t.frequencyCapsPeriodOptions=t.commercialTypeOptions=t.deliveryTypeOptions=t.revenueTypeOptions=t.campaignTypeOptions=t.biddingTypeOptions=t.adTypeOptions=t.impressionsPeriodOptions=t.budgetPeriodOptions=void 0;var s=i(n(1)),c=u(n(11)),d=i(n(4)),f=i(n(8)),p=i(n(36));t.budgetPeriodOptions=function(){return[{value:"day",label:"Per day"},{value:"week",label:"Per week"},{value:"month",label:"Per month"},{value:"campaign",label:"Entire campaign"}]};t.impressionsPeriodOptions=function(){return[{value:"day",label:"Per day"},{value:"campaign",label:"Entire campaign"}]};t.adTypeOptions=function(){return[{value:"display",label:"Banners"},{value:"video",label:"Video"}]};t.biddingTypeOptions=function(){return[{value:"RTB",label:"Standard"},{value:"Adserving",label:"Fixed tags, externally managed"}]};t.campaignTypeOptions=function(e){return"RTB"===e?[{value:"prospecting",label:"Prospecting"},{value:"retargeting",label:"Retargeting"},{value:"RETAIL_GPS",label:"Retail - GPS based"},{value:"RETAIL_ZIP",label:"Retail - postal code based"}]:[{value:"prospecting",label:"Prospecting"},{value:"RETAIL_GPS",label:"Retail - GPS based"},{value:"RETAIL_ZIP",label:"Retail - postal code based"}]};t.revenueTypeOptions=function(e){return e?[{value:"1",label:"Impressions"},{value:"2",label:"Clicks"},{value:"3",label:"Conversions"},{value:"4",label:"Completion cost"}]:[{value:"1",label:"Impressions"},{value:"2",label:"Clicks"},{value:"3",label:"Conversions"},{value:"5",label:"Viewable impressions"}]};t.deliveryTypeOptions=function(){return[{value:"evenly",label:"Evenly"},{value:"frontloaded",label:"Frontloaded"},{value:"fast",label:"As fast as possible"}]};t.commercialTypeOptions=function(){return[{value:"2",label:"CPC"},{value:"3",label:"CPA"},{value:"1",label:"CPM"},{value:"5",label:"% spent"},{value:"4",label:"None"}]};t.frequencyCapsPeriodOptions=function(){return[{value:"DAY",label:"Per day"},{value:"WEEK",label:"Per week"},{value:"MONTH",label:"Per month"},{value:"ALL",label:"Entire campaign"}]};t.ruleBidOptions=function(){return[{value:"REQUIRED",label:"Bid"},{value:"LIMIT_BID",label:"Bid no more than"},{value:"NO_BID",label:"No bid"}]};t.timeUnitOptions=function(){return[{value:"MINUTE",label:"minutes"},{value:"HOUR",label:"hours"},{value:"DAY",label:"days"}]};t.getRuleConsequence=function(e,t){return"LIMIT_BID"===e?{action:e,limitBid:t}:{action:e}};t.suggestionSelectOptions=function(e,t){var n=e.map((function(e){return{value:e.value,label:e.name}}));return t&&n.unshift({value:"-1",label:"Select all"}),n};t.attributeValueNameSelectOptions=function(e){var t=s.get(e,"values",[]),n=s.get(e,"displayNames",[]);return t.map((function(e,t){return{value:e,label:n[t]||""}}))};t.attributeIdValuesSelectOptions=function(e){var t=s.get(e,"ids",[]),n=s.get(e,"displayNames",[]);return t.map((function(e,t){return{value:e,label:n[t]||""}}))};t.gpsLocationsSelectOptions=function(e){return e.map((function(e){var t=[e.latitude,e.longitude].join(",");return{value:t,label:t}}))};t.campaigngroupOptions=function(e){return l(void 0,void 0,void 0,(function(){var t,n,r,a;return o(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),e>0?(t=f.scopedParam({scope:"advertiser",scopeId:e}),[4,d.Get({path:"/api/campaigngroups",qs:t})]):[3,2];case 1:return n=i.sent(),r=(n||[]).map((function(e){return{value:e.campaignGroup.id,label:e.campaignGroup.name}})),[2,[{value:-1,label:"Choose group"}].concat(r)];case 2:return[2,[]];case 3:return[3,5];case 4:return a=i.sent(),console.log(a),[2,[]];case 5:return[2]}}))}))};t.getListModalMaxLevel=function(e,t){return l(void 0,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return e.isRootAdmin?[2,"root"]:[3,1];case 1:return r.trys.push([1,3,,4]),[4,d.Get({path:"/api/frontend/navigation/lists/advertiser/"+t})];case 2:return(n=r.sent()).length>0?[2,n[0].level]:[2,"advertiser"];case 3:return r.sent(),[3,4];case 4:return[2]}}))}))};t.isRetail=function(e){return"RETAIL_GPS"===e||"RETAIL_ZIP"===e};t.isAdserving=function(e){return"Adserving"===e};t.getNewCampaignData=function(e){var t,n,r=m(e.budget,e.budgetPeriod),a={name:e.name,advertiserId:e.advertiserId,startTime:e.startTime,endTime:e.endTime,videoCampaign:(n=e.adType,"video"===n),biddingType:e.biddingType,revenueType:e.revenueType,isRetargeting:(t=e.campaignType,"retargeting"===t),structure:h(e.campaignType),constraints:r};return e.clusterId>0&&(a.clusterId=e.clusterId),e.retailBranches.length>0&&(a.retailBranches=e.retailBranches),a};t.getExistingCampaignData=function(e){var t=m(e.budget,e.budgetPeriod),n={name:e.name,startTime:e.startTime,endTime:e.endTime,constraints:t};return e.clusterId>0&&(n.clusterId=e.clusterId),{id:e.campaignId,campaign:n}};t.getBudgetFields=function(e){if(e){if(e.maxBudgetPerCampaign)return{budget:e.maxBudgetPerCampaign,budgetPeriod:"campaign"};if(e.maxBudgetPerMonth)return{budget:e.maxBudgetPerMonth,budgetPeriod:"month"};if(e.maxBudgetPerWeek)return{budget:e.maxBudgetPerWeek,budgetPeriod:"week"};if(e.maxBudgetPerDay)return{budget:e.maxBudgetPerDay,budgetPeriod:"day"}}return null};t.getImpressionsFields=function(e){if(e){if(e.impressionsPerDayAllUsers)return{impressions:e.impressionsPerDayAllUsers,impressionsPeriod:"day"};if(e.impressionsPerCampaignAllUsers)return{impressions:e.impressionsPerCampaignAllUsers,impressionsPeriod:"campaign"}}return null};t.getEntityAttributes=function(){return["adSelection","deal","domain(Lists)","application(Lists)"]};t.getStatus=function(e,t,n,r){return"archived"===r?"archived":n<c.default().unix()?"1970-01-01"===c.default.unix(n).format("YYYY-MM-DD")?"not scheduled":"ended":t>c.default().unix()?e?"scheduled":"not scheduled":e?"active":"paused"};function m(e,t){switch(t){case"day":return{maxBudgetPerDay:e};case"week":return{maxBudgetPerWeek:e};case"month":return{maxBudgetPerMonth:e};case"campaign":return{maxBudgetPerCampaign:e}}}function h(e){return"prospecting"===e||"retargeting"===e?"DEFAULT":e}t.exportTags=function(e,t){var n=["id","name","supported sizes","click tag","impression tag","javascript tag","iframe tag"].map((function(e){return p.getBoldCell(e)})),r=[[p.getBoldCell("Campaign"),p.getCell(e.name)],[p.getBoldCell("Start date"),p.getCell(e.startDate)],[p.getBoldCell("End date"),p.getCell(e.endDate)],[""],n],a=t.map((function(e){return[e.id.toString(),e.name,e.supportedSizes.join(","),e.clickTag||"",e.impressionTag||"",e.javascriptTag||"",e.iframeTag||""].map((function(e){return p.getCell(e)}))})),i=r.concat(a);p.save(i,"Campaign tags","Tags_"+e.name)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.addOrRemoveItemFromArray=t.isValidIp=t.isNumeric=t.isValidUrl=t.addQueryParam=t.getExtension=t.fixExcelData=t.getValueInMinutes=t.getValuePeriod=t.getFormat=t.percentage=t.currency=t.numberWithCommas=t.removeLineBreaks=t.countries=t.getEndDate=t.getStartDate=void 0;var o=i(n(60)),u=l(n(61)),s=n(143).countries;t.getStartDate=function(e){return 0===e.hours()&&0===e.minutes()?e.format("YYYY-MM-DD"):e.format("YYYY-MM-DD HH:mm")};t.getEndDate=function(e){return 23===e.hours()&&59===e.minutes()?e.format("YYYY-MM-DD"):e.format("YYYY-MM-DD HH:mm")};t.countries=function(){return s.all.map((function(e){return{value:e.alpha2,label:e.name}}))};t.removeLineBreaks=function(e){return e.replace(/(\r\n\t|\n|\r\t)/gm,"")};t.numberWithCommas=function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.length>1&&(t[1]=t[1].substring(0,2)),t.join(".")};t.currency=function(e){var n=parseFloat(e);return isNaN(n)?"-":"â‚¬ "+t.numberWithCommas(parseFloat(e).toFixed(2))};t.percentage=function(e){var t=Math.round(100*e)/100;return isNaN(t)?"-":t.toFixed(2)+"%"};t.getFormat=function(e,n){if(void 0!==e)switch(n){case"number":return t.numberWithCommas(e);case"money":return t.currency(e);case"perc":return t.percentage(e);default:return e}return"-"};t.getValuePeriod=function(e){return e>=1440&&e%1440==0?{value:(e/1440).toString(),period:"2"}:e>=60&&e%60==0?{value:(e/60).toString(),period:"1"}:e>=0?{value:e.toString(),period:"0"}:-1==e?{value:"",period:"3"}:{value:"30",period:"2"}};t.getValueInMinutes=function(e){if(""===e.value&&"3"!==e.period)return 43200;switch(e.period){case"0":return parseInt(e.value);case"1":return 60*parseInt(e.value);case"2":return 60*parseInt(e.value)*24;case"3":return-1;default:return 43200}};t.fixExcelData=function(e){for(var t="",n=0,r=10240;n<e.byteLength/r;++n)t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(n*r,n*r+r)));return t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(n*r)))};t.getExtension=function(e){var t=e.lastIndexOf(".");return t<0?"":e.substr(t)};t.addQueryParam=function(e,t){var n=e.split("?"),r=o.stringify(t);return n.length>1?""===n[1]?""+e+r:e+"&"+r:e+"?"+r};t.isValidUrl=function(e){return u.default.isURL(e,{protocols:["http","https"],require_protocol:!0})};t.isNumeric=function(e){return/^(0|[1-9][0-9]*)$/.test(e)};t.isValidIp=function(e){return/([0-9]{1,3}|\*)\.([0-9]{1,3}|\*)\.([0-9]{1,3}|\*)\.([0-9]{1,3}|\*)/.test(e)};t.addOrRemoveItemFromArray=function(e,t){var n=e.concat(),r=n.findIndex((function(e){return e===t}));return r>-1?n.splice(r,1):n.push(t),n}},function(e,t){e.exports=require("react-bootstrap-table2-toolkit")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var l=n(76),o=i(n(77)),u=function(){function e(e){this.API=e,this.router=l.Router(),this.router.use(o.json())}return e.prototype.getCredentials=function(e){return{username:e.user.username,password:e.user.password}},e}();t.default=u},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(81)),o=function(){function e(){}return e.ACTIONS=["VIEW_PUBLISHER","MANAGE_PUBLISHER","VIEW_ORGANIZATION","MANAGE_ORGANIZATION","VIEW_AGENCY","MANAGE_AGENCY","CREATE_ADVERTISER","VIEW_ADVERTISER","MANAGE_ADVERTISER","VIEW_CAMPAIGNGROUP","MANAGE_CAMPAIGNGROUP","VIEW_CAMPAIGN","MANAGE_CAMPAIGN","VIEW_FINANCIALS","VIEW_STATISTICS","VIEW_USERS","MANAGE_USERS","VIEW_LISTS","MANAGE_LISTS","VIEW_DEALS","MANAGE_DEALS","VIEW_ADS","MANAGE_ADS","VIEW_SEGMENTS","MANAGE_SEGMENTS","SEARCH_NAMES","MANAGE_PRESETS","VIEW_PRESETS","MANAGE_PUBLISHER_DEALS","VIEW_PUBLISHER_DEALS","VIEW_REPORTS","MANAGE_REPORTS","VIEW_REPORT_TEMPLATES","MANAGE_REPORT_TEMPLATES","VIEW_FEEDS","MANAGE_FEEDS","VIEW_PUBLISHER_AD_SLOTS","MANAGE_PUBLISHER_AD_SLOTS"],e.CHILDREN_ACTIONS=["VIEW_ORGANIZATION","MANAGE_ORGANIZATION","VIEW_AGENCY","MANAGE_AGENCY","VIEW_ADVERTISER","MANAGE_ADVERTISER","VIEW_CAMPAIGNGROUP","MANAGE_CAMPAIGNGROUP","VIEW_CAMPAIGN","MANAGE_CAMPAIGN","VIEW_PUBLISHER","MANAGE_PUBLISHER"],e.MAX_API_LIMIT=2147483647,e.LOCAL_BANNERS_DIR=l.join(__dirname,"../tmp/banners/"),e.LOCAL_VIDEOS_DIR=l.join(__dirname,"../tmp/videos/"),e.LOCAL_ADS_PREVIEW="/banners/preview/",e.ZIP_LEVEL=3,e.STER_AGENCIES=[70,89],e.ABOVO_AGENCIES=[90],e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){return r.useEffect((function(){document.title="Opt Out Advertising | "+e.title}),[]),null}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),i=n(2);t.default=function(e){return a.default.createElement(i.Modal,{dialogClassName:"confirm-alert-modal",show:e.show,onHide:e.onClose,backdrop:"static"},a.default.createElement(i.Modal.Header,{closeButton:!0},a.default.createElement(i.Modal.Title,null,e.message)),e.children&&a.default.createElement(i.Modal.Body,null,e.children),a.default.createElement(i.Modal.Footer,null,a.default.createElement(i.Button,{size:"sm",variant:"danger",onClick:e.onClose},"No"),a.default.createElement(i.Button,{size:"sm",variant:"success",onClick:e.onConfirm},"Yes")))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=r(n(11)),l=a.createContext({daterange:{startDate:i.default().startOf("month"),endDate:i.default()},attributeId:0,attributeId2:-1,filters:[],opfilters:[],opgranularity:"P1D",tgranularity:"PT10M",opmetric:"impressions",tperiod:"24h",listattribute:""});t.default=l},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0));t.default=function(e){return a.default.createElement("div",{className:"row page-header"},e.children)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(6),s=l(n(148)),c=l(n(149)),d=l(n(150)),f=l(n(151)),p=l(n(152)),m=l(n(153)),h=l(n(155));t.default=function(){switch(u.useParams().scope){case"root":return o.createElement(s.default,null);case"organization":return o.createElement(c.default,null);case"publisher":return o.createElement(h.default,null);case"agency":return o.createElement(d.default,null);case"advertiser":return o.createElement(f.default,null);case"campaigngroup":return o.createElement(p.default,null);case"campaign":return o.createElement(m.default,null)}return null}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=i(n(4)),f=i(n(156)),p=u(n(157)),m=u(n(16)),h=u(n(39));t.default=function(e){var t=s.useContext(m.default),n=s.useContext(h.default).items,r=c.useParams(),a=r.page,i=r.scope,u=r.scopeId,g=c.useHistory(),v=f.getItems(t,{page:a,scope:i,scopeId:parseInt(u,10),minScope:e.minScope},n),b=s.useState(-1),y=b[0],E=b[1],_=s.useState(-1),w=_[0],S=_[1],P=s.useState([]),C=P[0],O=P[1],x=function(e){E(-1),g.push(e)};function I(e){return l(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,d.Get({path:"/api/frontend/navigation/"+a+"/"+i+"/"+u+"/dropdown/"+e.type})];case 1:return[2,t.sent().map((function(t){return{id:t.id,label:t.name,type:e.type}}))];case 2:return t.sent(),[2,[]];case 3:return[2]}}))}))}return s.default.createElement("ol",{className:"breadcrumb",id:e.id},v.map((function(e,n){return s.default.createElement(p.default,{key:n,user:t,page:a,scope:i,item:e,open:y===n,loading:w===n,onClick:function(){!function(e){l(void 0,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return y!==e?[3,1]:(E(-1),[3,3]);case 1:return t=v[e],E(e),S(e),[4,I(t)];case 2:n=r.sent(),S(-1),O(n),r.label=3;case 3:return[2]}}))}))}(n)},itemClick:x,outsideClick:function(){return E(-1)},dropdownItems:C})})))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0));t.default=function(e){var t=e.classes?e.classes+" checkbox":"checkbox";return a.default.createElement("div",{className:t},a.default.createElement("label",null,a.default.createElement("input",{type:"checkbox",id:e.id,checked:e.checked,disabled:!!e.disabled,onChange:function(t){e.onChange(t.target.checked)}}),a.default.createElement("span",null)," ",e.children))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.previewStyle=t.previewScale=t.getThirdPartyTracking=t.getThirdPartyClicks=t.getThirdPartyImpressions=t.getThirdPartyTrackingEvents=t.isThirdPartyBanner=t.isVideoAd=t.statusSort=t.idFormatter=t.statusFormatter=t.statusColumn=t.dimensionDurationColumn=void 0;var o=l(n(0)),u=n(2),s=i(n(1)),c=i(n(8));t.dimensionDurationColumn=function(e){return 5==e.type||6==e.type||7==e.type?s.isUndefined(e.durationMS)||s.isNull(e.durationMS)||-1==e.durationMS?"-":Math.round(e.durationMS/1e3*10)/10+"s":e.width+" x "+e.height};t.statusColumn=function(e){var t="",n="";return e.adWorking?1===e.active&&1===e.approved?(t="green",n="ad is okay"):(t="orange",0===e.active&&1===e.approved?n="ad is inactive":0===e.active&&0===e.approved&&(n="ad is inactive, "),0===e.approved?n+="ad is awaiting approval":-1===e.approved?(t="red",n+="ad has been disapproved"):-2===e.approved&&(n+="ad requires approval, request approval")):null!==e.hostAt3rdParty?(t="orange",n="ad is pending publisher processing"):(t="red",n="ad does not work!"),{color:t,title:n}};t.statusFormatter=function(e,t,n){var r=e.color,a=e.title,i=o.default.createElement(u.Tooltip,{id:"ad-status-tooltip-"+n},a),l=c.getPopperConfig();return o.default.createElement(u.OverlayTrigger,{placement:"top",overlay:i,popperConfig:l},o.default.createElement("span",{className:"pointer circle "+r}))};t.idFormatter=function(e,t,n){return e>0?e:""};t.statusSort=function(e,t,n,r){var a="green"===e.color?1:"orange"===e.color?2:3,i="green"===t.color?1:"orange"===t.color?2:3;return"asc"===n?a-i:i-a};t.isVideoAd=function(e){return[5,6,7].indexOf(e)>=0};t.isThirdPartyBanner=function(e){return 4===e.type&&!e.local};t.getThirdPartyTrackingEvents=function(e){var t=e.thirdPartyImpressions||[],n=e.thirdPartyClicks||[],r=e.thirdPartyTracking||[],a=[];return t.forEach((function(e){a.push({type:"impression",url:e})})),n.forEach((function(e){a.push({type:"click",url:e})})),r.forEach((function(e){var t=e.split("__");2===t.length&&a.push({type:t[0],url:t[1]})})),a};t.getThirdPartyImpressions=function(e){return e.filter((function(e){return"impression"===e.type})).map((function(e){return e.url}))};t.getThirdPartyClicks=function(e){return e.filter((function(e){return"click"===e.type})).map((function(e){return e.url}))};t.getThirdPartyTracking=function(e){return e.filter((function(e){return-1===["impression","click"].indexOf(e.type)})).map((function(e){return e.type+"__"+e.url}))};t.previewScale=function(e,t){var n=1;return e>t&&(n=t/e),n};t.previewStyle=function(e,t,n){return"width: "+e+"px; height: "+t+"px; -webkit-transform: scale("+n+"); -moz-transform: scale("+n+"); -o-transform: scale("+n+"); -ms-transform: scale("+n+"); transform: scale("+n+"); transform-origin: top left;"}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0));t.default=function(e){return a.default.createElement("div",{className:"card mb-2"},e.title&&a.default.createElement("h5",{className:"px-1"},e.title),e.children)}},function(e,t){e.exports=require("react-datetime")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.save=t.getBoldItalicCell=t.getBoldCell=t.getCell=t.cellFormatter=t.percentageFormat=t.currencyFormat=t.format=void 0;var o=i(n(154)),u=i(n(1)),s=i(n(22)),c=l(n(11));t.format=function(e){var n;return"perc"===e.type&&(n=t.percentageFormat()),"money"===e.type&&(n=t.currencyFormat()),n};t.currencyFormat=function(){return"â‚¬#,##0.00"};t.percentageFormat=function(){return"0.00%"};t.cellFormatter=function(e,t){var n=e[t.col],r=t.type;return null==n?"":"money"===r?d(parseFloat(n)):"perc"===r?function(e){if(void 0!==e)return e/100;return 0}(parseFloat(n)):"budget_completion"===r?d(parseFloat(n.actual||0)):"impression_completion"===r?parseFloat(n.actual||0):"campaign_list"===r?n.length:"ad_list"===r?n.filter((function(e){return"active"===e.status})).length:"date"===r?c.default(n).format("YYYY-MM-DD HH:mm"):"start"===r?s.getStartDate(c.default.unix(n)):"end"===r?s.getEndDate(c.default.unix(n)):n};t.getCell=function(e,t,n){var r={v:e};return t&&(r.s=t),n&&(r.z=n),r};t.getBoldCell=function(e,n){return t.getCell(e,{font:{bold:!0}},n)};t.getBoldItalicCell=function(e,n){return t.getCell(e,{font:{bold:!0,italic:!0}},n)};function d(e){if(void 0!==e){var t=Math.round(100*e)/100;return parseFloat(t.toFixed(2))}return 0}function f(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!=e.length;++r)n[r]=255&e.charCodeAt(r);return t}function p(e,t){var n=new Date(1899,11,30,0,0,0),r=n.getTime()+6e4*((new Date).getTimezoneOffset()-n.getTimezoneOffset()),a=e.getTime();return t&&(a-=1263168e5),(a-r)/864e5}t.save=function(e,t,n){var r=function(e){for(var t={},n={s:{c:1e7,r:1e7},e:{c:0,r:0}},r=0;r!=e.length;++r)for(var a=0;a!=e[r].length;++a){n.s.r>r&&(n.s.r=r),n.s.c>a&&(n.s.c=a),n.e.r<r&&(n.e.r=r),n.e.c<a&&(n.e.c=a);var i=e[r][a];if(null!=i.v){var l=XLSX.utils.encode_cell({c:a,r:r});"number"==typeof i.v?i.t="n":"boolean"==typeof i.v?i.t="b":i.v instanceof Date?(i.t="n",i.z=XLSX.SSF._table[14],i.v=p(i.v)):i.t="s",t[l]=i}}n.s.c<1e7&&(t["!ref"]=XLSX.utils.encode_range(n));var o=function(e){for(var t=e.map((function(e){return e.map((function(e){return e.v?e.v.toString().length:0}))})),n={},r=0;r<t.length;r++)for(var a=0;a<t[r].length;a++)n[a]||(n[a]={}),n[a][r]=t[r][a];var i=[];for(var l in n)i.push({wch:u.max(u.values(n[l]))+5});return i}(e);return t["!cols"]=o,t}(e),a={};a[t]=r;var i={Sheets:a,SheetNames:[t]},l=XLSX.write(i,{bookType:"xlsx",bookSST:!1,type:"binary",cellHTML:!0,cellStyles:!0,cellDates:!0});o.saveAs(new Blob([f(l)],{type:"application/octet-stream"}),n+".xlsx")}},function(e,t){e.exports=require("react-number-format")},function(e,t){e.exports=require("react-select/creatable")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).createContext({items:[]});t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Attributes=void 0,function(e){e[e.PER_DAY=0]="PER_DAY",e[e.ORGANIZATION=100]="ORGANIZATION",e[e.PUBLISHER=112]="PUBLISHER",e[e.AGENCY=101]="AGENCY",e[e.ADVERTISER=102]="ADVERTISER",e[e.CAMPAIGN=103]="CAMPAIGN",e[e.BANNER_SIZE=104]="BANNER_SIZE",e[e.BANNER=105]="BANNER",e[e.CLUSTER=110]="CLUSTER",e[e.BROWSERS=600]="BROWSERS",e[e.DOMAIN=618]="DOMAIN",e[e.DOMAIN_LIST=1618]="DOMAIN_LIST",e[e.HOUR_OF_DAY=624]="HOUR_OF_DAY",e[e.OPERATING_SYSTEM=602]="OPERATING_SYSTEM",e[e.DOMAIN_CATEGORY=808]="DOMAIN_CATEGORY",e[e.TOP_LEVEL_DOMAIN=804]="TOP_LEVEL_DOMAIN",e[e.DOMAIN_RANK=809]="DOMAIN_RANK",e[e.DAY_OF_WEEK=622]="DAY_OF_WEEK",e[e.POSITION_ON_PAGE=616]="POSITION_ON_PAGE",e[e.DOMAIN_SSP=657]="DOMAIN_SSP",e[e.SSP=655]="SSP",e[e.CHANNEL=658]="CHANNEL",e[e.GROUPED_SSP=660]="GROUPED_SSP",e[e.CITIES=758]="CITIES",e[e.CITIES_RADIUS=317]="CITIES_RADIUS",e[e.REGIONS=759]="REGIONS",e[e.COUNTRIES=676]="COUNTRIES",e[e.LANGUAGES=626]="LANGUAGES",e[e.VISITED_THE_HOMEPAGE=685]="VISITED_THE_HOMEPAGE",e[e.VISITED_THE_ORDERBASKET=686]="VISITED_THE_ORDERBASKET",e[e.INVENTORY_TYPE=849]="INVENTORY_TYPE",e[e.HOURS_DAYS=726]="HOURS_DAYS",e[e.DEVICE_TYPE=864]="DEVICE_TYPE",e[e.DEVICE_MAKE=300]="DEVICE_MAKE",e[e.DEVICE_MODEL=301]="DEVICE_MODEL",e[e.APPLICATION_NAME=302]="APPLICATION_NAME",e[e.APPLICATION_NAME_LIST=1302]="APPLICATION_NAME_LIST",e[e.APPLICATION_GENRE=308]="APPLICATION_GENRE",e[e.CARRIER_NAME=305]="CARRIER_NAME",e[e.WIFI=310]="WIFI",e[e.APPLICATION_PAID=303]="APPLICATION_PAID",e[e.CITIES_STATS=755]="CITIES_STATS",e[e.REGIONS_STATS=757]="REGIONS_STATS",e[e.SEGMENT=500]="SEGMENT",e[e.AUDIENCE_SEGMENT=3004]="AUDIENCE_SEGMENT",e[e.DMAI_PANEL=1e3]="DMAI_PANEL",e[e.DMAI_REPORT=1001]="DMAI_REPORT",e[e.PLAYER_SIZE=400]="PLAYER_SIZE",e[e.INITIATION_TYPE=401]="INITIATION_TYPE",e[e.STER_PROGRAM_NAME=3e3]="STER_PROGRAM_NAME",e[e.STER_PROGRAM_GENRE=3001]="STER_PROGRAM_GENRE",e[e.STER_PROGRAM_NAME_LIST=4e3]="STER_PROGRAM_NAME_LIST",e[e.STER_PROGRAM_GENRE_LIST=4001]="STER_PROGRAM_GENRE_LIST"}(t.Attributes||(t.Attributes={}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(6),s=i(n(1)),c=l(n(11)),d=l(n(90)),f=i(n(8)),p=l(n(28)),m=l(n(12));t.default=function(){var e=u.useParams().scope,t=u.useLocation(),n=new URLSearchParams(t.search),r=u.useHistory(),a=o.useContext(p.default),i=a.daterange,l=a.updateDaterange,h=o.useContext(m.default).data,g=o.useState(null),v=g[0],b=g[1],y=function(){var t=f.getDateRangePresets();if("campaign"===e){var n=s.get(h,"campaign.startTime"),r=s.get(h,"campaign.endTime");t.push({text:"Campaign",start:c.default.unix(n),end:c.default.unix(r).add(1,"days")})}return t}();return o.default.createElement(d.default,{daterange:i,presets:y,onDatesChange:function(e){var a=e.startDate,o=e.endDate;if(a&&o){var u=a;v&&(u=c.default(v),b(null));var s=u.format("YYYY-MM-DD"),d=o.format("YYYY-MM-DD");n.set("sd",s),n.set("ed",d),l({startDate:u,endDate:o}),r.push(t.pathname+"?"+n.toString())}else if(a&&i.endDate&&a>i.endDate){b(c.default(a));s=i.endDate.format("YYYY-MM-DD"),d=a.format("YYYY-MM-DD");n.set("sd",s),n.set("ed",d),l({startDate:c.default(i.endDate),endDate:a}),r.push(t.pathname+"?"+n.toString())}},small:!0,daySize:30,hideKeyboardShortcutsPanel:!0,anchorDirection:"right",calendarInfoPosition:"after",noBorder:!0,showDefaultInputIcon:!0,isOutsideRange:function(){return!1},displayFormat:"YYYY-MM-DD",inputIconPosition:"before",startDateId:"statistics-start-date",endDateId:"statistics-end-date"})}},function(e,t){e.exports=require("uuid")},function(e,t){e.exports=require("react-dom")},function(e,t){e.exports=require("react-copy-to-clipboard/lib")},function(e,t){e.exports=require("react-bootstrap-table2-filter")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(11)),s=i(n(1)),c=i(n(22));t.default=function(e){function t(){var t=document.getElementById(e.id);t&&videojs(t).dispose()}return o.useEffect((function(){return function(){var t=e.id,n=s.get(e,"ad.vastURL","");if(n)n=n.replace(new RegExp("{CACHEBUSTER}","g"),u.default().unix()),n=c.removeLineBreaks(n),videojs(t,{fluid:!0,plugins:{vastClient:{adTagUrl:n,adCancelTimeout:5e3,adsEnabled:!0,vpaidFlashLoaderPath:"/components/videojs-vast-vpaid/bin/VPAIDFlash.swf"}}});else{var r=e.ad.vastXML||e.ad.previewTag||e.ad.tag;videojs(t,{fluid:!0,plugins:{vastClient:{adTagXML:function(e){setTimeout((function(){e(null,r)}),0)},adCancelTimeout:5e3,adsEnabled:!0,vpaidFlashLoaderPath:"/components/videojs-vast-vpaid/bin/VPAIDFlash.swf"}}})}}(),t}),[]),o.default.createElement("div",null,o.default.createElement("video",{id:e.id,className:"video-js vjs-default-skin",controls:!0,preload:"auto",poster:"/images/empty.png"},o.default.createElement("source",{src:"/videos/sample.mp4",type:"video/mp4"})))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=u(n(11)),f=i(n(33)),p=u(n(3)),m=i(n(4)),h=u(n(95));t.default=function(e){s.useContext(h.default);var t=s.useState(""),n=t[0],r=t[1],a=s.useState(!1),i=a[0],u=a[1],g=s.useState(""),v=g[0],b=g[1];function y(){return window.removeEventListener("resize",E)}function E(){var t=e.ad.width,n=e.ad.height;P($("#"+e.id),t,n)}function _(){return l(this,void 0,void 0,(function(){var t,n,a;return o(this,(function(i){switch(i.label){case 0:return e.ad?(t=e.ad.previewTag||e.ad.tag||"")?e.ad.local?[4,w(t)]:[3,2]:[3,5]:[3,7];case 1:return i.sent(),[3,4];case 2:return[4,S(t)];case 3:i.sent(),i.label=4;case 4:return[3,6];case 5:e.ad.preview&&(r(e.ad.preview),u(!1)),i.label=6;case 6:n=e.ad.width,a=e.ad.height,P($("#"+e.id),n,a),i.label=7;case 7:return[2]}}))}))}function w(t){return l(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:e.ad.bannerId||e.ad.id,n=$(t).attr("src"),r.label=1;case 1:return r.trys.push([1,6,,8]),[4,m.Post({path:"/api/ads/file-exists",body:{url:n}})];case 2:return r.sent().fileExists?[4,S(t)]:[3,4];case 3:return r.sent(),[3,5];case 4:"File not found. If you uploaded the ad in the past 10 seconds, then the file is likely still being distributed through our ad serving network. Click reload in a few seconds.",u(!0),b("File not found. If you uploaded the ad in the past 10 seconds, then the file is likely still being distributed through our ad serving network. Click reload in a few seconds."),r.label=5;case 5:return[3,8];case 6:return r.sent(),[4,S(t)];case 7:return r.sent(),[3,8];case 8:return[2]}}))}))}function S(e){return l(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,m.Post({path:"/api/ads/banner-session",body:{tag:e}})];case 1:return t.sent(),r(location.origin+"/api/ads/banner-preview?cachebuster="+d.default().unix()),u(!1),[2]}}))}))}function P(e,t,n){var r=e.parent().width(),a=f.previewScale(t,r),i=f.previewStyle(t,n,a);e.attr("style",i),e.parent().height(n*a)}s.useEffect((function(){return function(){l(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,_()];case 1:return e.sent(),window.addEventListener("resize",E),[2]}}))}))}(),y}),[e.ad]);return i?s.default.createElement("div",{className:"col-lg-12"},s.default.createElement("span",null,v),s.default.createElement(c.Button,{variant:"light",size:"sm",onClick:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,_()];case 1:return e.sent(),[2]}}))}))}},s.default.createElement("span",{className:"text-success"},s.default.createElement(p.default,{name:"repeat"})))):s.default.createElement("div",{className:"col-lg-12"},s.default.createElement("div",{className:"banner-container"},s.default.createElement("iframe",{id:e.id,src:n,frameBorder:"0",scrolling:"no",width:e.ad.width,height:e.ad.height})))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=u(n(70)),d=u(n(214)),f=i(n(1)),p=i(n(4));t.default=function(e){var t=s.useState(""),n=t[0],r=t[1],a=s.useState([]),i=a[0],u=a[1],m=s.useState(!1),h=m[0],g=m[1];var v=function(e,t){switch(t.action){case"input-change":return void r(e);default:return}},b=function(t){try{return p.Get({path:e.url,qs:{search:n}})}catch(e){return console.log("err",e),new Promise((function(e){e([])}))}},y=function(t,a){var i=a.action;return l(void 0,void 0,void 0,(function(){var a,l;return o(this,(function(o){switch(o.label){case 0:return"select-option"===i&&t.length>0?-1!==t[t.length-1].value?[3,2]:[4,b(n)]:[3,4];case 1:return(a=o.sent()||[]).length>0&&a.shift(),(l=t.concat()).pop(),e.onChange(f.unionBy(l,a,"value")),[3,3];case 2:e.onChange(t||[]),o.label=3;case 3:return[3,5];case 4:e.onChange(t||[]),o.label=5;case 5:return r(""),[2]}}))}))},E=function(){g(!0),function(){l(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return[4,b(n)];case 1:return e=t.sent(),u(e),g(!1),[2]}}))}))}()};return e.creatable?s.default.createElement(d.default,{inputId:e.id,isMulti:!0,isDisabled:!e.writeAccess,className:e.classNames||"react-select-container multiple",classNamePrefix:"react-select",placeholder:e.placeholder||"Type to search or create values",noOptionsMessage:function(e){e.inputValue;return""},value:e.values,inputValue:n,onInputChange:v,closeMenuOnSelect:!1,onMenuClose:function(){return r("")},onMenuOpen:E,createOptionPosition:"first",defaultOptions:i,loadOptions:b,isLoading:h,onChange:y}):s.default.createElement(c.default,{inputId:e.id,isMulti:!0,isDisabled:!e.writeAccess,className:e.classNames||"react-select-container multiple",classNamePrefix:"react-select",placeholder:e.placeholder||"Search...",noOptionsMessage:function(e){e.inputValue;return""},value:e.values,inputValue:n,onInputChange:v,closeMenuOnSelect:!1,onMenuClose:function(){return r("")},onMenuOpen:E,defaultOptions:i,loadOptions:b,isLoading:h,onChange:y})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getStatisticFilters=t.getFilters=t.getFilterAttributes=void 0;var u=i(n(1)),s=i(n(4));t.getFilterAttributes=function(e){return l(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.Get({path:"/api/attributes/filters",qs:e})];case 1:return[2,n.sent()];case 2:return t=n.sent(),console.log(t),[2,{}];case 3:return[2]}}))}))};t.getFilters=function(e){return u.flatMap(e,(function(e){var t="in"===e.condition?"==":"!=";return e.values.map((function(n){return e.attributeId+t+n}))}))};t.getStatisticFilters=function(e){var t=function(e){var t=e.map((function(e){var t=e.split("==");return 2===t.length?{attributeId:t[0],value:t[1],condition:"in",group:t[0]+"-in"}:2===(t=e.split("!=")).length?{attributeId:t[0],value:t[1],condition:"notin",group:t[0]+"-notin"}:null}));return t=t.filter((function(e){return null!==e})),u.groupBy(t,"group")}(e),n=[];return u.forEach(t,(function(e,t){var r=t.split("-"),a=r[0],i=r[1],l=e.map((function(e){return e.value}));n.push({attributeId:parseInt(a,10),condition:i,values:l})})),n}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=u(n(9)),d=u(n(70)),f=u(n(38)),p=i(n(1)),m=i(n(4)),h=u(n(3));t.default=function(e){var t=s.useState(e.filter.attributeId),n=t[0],r=t[1],a=s.useState(e.filter.condition),i=a[0],u=a[1],g=s.useState(e.filter.values),v=g[0],b=g[1],y=s.useState([]),E=y[0],_=y[1],w=s.useState(""),S=w[0],P=w[1];s.useEffect((function(){r(e.filter.attributeId),u(e.filter.condition),b(e.filter.values)}),[e.filter.attributeId,e.filter.condition,e.filter.values]),s.useEffect((function(){e.onChange(e.index,{attributeId:n,condition:i,values:v})}),[n,i,v]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return[4,C(S)];case 1:return e=t.sent(),_(e),[2]}}))}))}()}),[n,S]);var C=function(e){if(-1===n)return new Promise((function(e){e([])}));try{return m.Get({path:"/api/attributes/"+n+"/values/filter",qs:{substrings:S}})}catch(e){return console.log("err",e),new Promise((function(e){e([])}))}},O=function(){if(-1===n)return{value:-1,label:"Select dimension"};var t=e.attributes.concat();return t.shift(),p.flatMap(t,(function(e){return e.options})).find((function(e){return e.value===n}))}(),x=p.get(O,"acceptAnyValue",!1),I=[{value:"in",label:"in"},{value:"notin",label:"not in"}],N=v.map((function(e){return{value:e,label:e}}));return s.default.createElement("div",{style:{width:"100%"}},s.default.createElement("div",{className:"array-row"},s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-4 px-1"},s.default.createElement(c.default,{inputId:"react-select-filter-attribute-"+e.index,className:"react-select-container",classNamePrefix:"react-select",name:"attribute-select",isDisabled:!e.writeAccess,value:O,clearable:!1,onChange:function(e){r(e.value),b([])},options:e.attributes})),s.default.createElement("div",{className:"col-lg-2 px-1"},s.default.createElement(c.default,{inputId:"react-select-filter-condition-"+e.index,className:"react-select-container",classNamePrefix:"react-select",name:"condition-select",isDisabled:!e.writeAccess,value:I.find((function(e){return e.value===i})),clearable:!1,onChange:function(e){u(e.value)},options:I})),s.default.createElement("div",{className:"col-lg-6 px-1"},!x&&s.default.createElement(d.default,{inputId:"react-select-filter-values-"+e.index,isMulti:!0,isDisabled:!e.writeAccess,className:"react-select-container",classNamePrefix:"react-select",placeholder:"Search...",noOptionsMessage:function(e){e.inputValue;return""},value:N,inputValue:S,onInputChange:function(e,t){switch(t.action){case"input-change":return void P(e);default:return}},closeMenuOnSelect:!1,onMenuClose:function(){return P("")},cacheOptions:!0,defaultOptions:E,loadOptions:C,onChange:function(e,t){var n=t.action;return l(void 0,void 0,void 0,(function(){var t,r,a,i;return o(this,(function(l){switch(l.label){case 0:return"select-option"===n&&e.length>0?-1!==e[e.length-1].value?[3,2]:[4,C(S)]:[3,4];case 1:return t=l.sent(),(r=(t||[]).map((function(e){return e.value}))).length>0&&r.shift(),b(r),[3,3];case 2:a=(e||[]).map((function(e){return e.value})),b(a),l.label=3;case 3:return[3,5];case 4:i=(e||[]).map((function(e){return e.value})),b(i),l.label=5;case 5:return[2]}}))}))}}),x&&s.default.createElement(f.default,{className:"react-select-container",inputId:"react-select-filter-tag-values-"+e.index,classNamePrefix:"react-select",isClearable:!0,isMulti:!0,isDisabled:!e.writeAccess,value:N,onChange:function(e){var t=(e||[]).map((function(e){return e.value}));b(t)}})))),e.writeAccess&&s.default.createElement("div",{className:"array-row-remove-btn"},s.default.createElement("a",{href:"",className:"table-btn",onClick:function(t){t.preventDefault(),e.onDelete(e.index)}},s.default.createElement(h.default,{name:"remove"}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.overwritablePropertiesToMap=t.flattenAdslotCustoms=t.flattenAdslotCategories=t.flattenAdslotSites=t.flattenAdslotPublisher=void 0;var l=i(n(1));t.flattenAdslotPublisher=function(e,t,n){if(!n||0==n.length)return[];var r=new Map((n||[]).map((function(e){return[e.propertyName,e.current?[e.current]:[]]}))),a=t.customProperties;a=a?new Map(Object.entries(a)):new Map;var i=l.assign({},Object.fromEntries(r),Object.fromEntries(a));return(Object.entries(i)?Object.entries(i):[]).map((function(t){var n="",r="",i="";return"publisher"==e&&a&&a.has(t[0])&&(r=a.get(t[0]).reduce((function(e,t){return(e?e+", ":"")+t}),"")),"publisher"!=e&&a&&a.has(t[0])&&(n="publisher",i=a.get(t[0]).reduce((function(e,t){return(e?e+", ":"")+t}),"")),{propertyName:t[0],current:r,level:n,overwritten:""!=r?i:"",original:""==r?i:""}}))};t.flattenAdslotSites=function(e,t,n){if(!n||0==n.length)return[];var r=new Map((n||[]).map((function(e){return[e.propertyName,e.current?[e.current]:[]]}))),a=t.customProperties,i=t.publisherSettings.customProperties;a=a?new Map(Object.entries(a)):new Map,i=i?new Map(Object.entries(i)):new Map;var o=l.assign({},Object.fromEntries(r),Object.fromEntries(i),Object.fromEntries(a));return(Object.entries(o)?Object.entries(o):[]).map((function(t){var n="",r="",l="";return"site"==e&&a&&a.has(t[0])&&(r=a.get(t[0]).reduce((function(e,t){return(e?e+", ":"")+t}),"")),"site"!=e&&a&&a.has(t[0])?(n="site",l=a.get(t[0]).reduce((function(e,t){return(e?e+", ":"")+t}),"")):i&&i.has(t[0])&&(n="publisher",l=i.get(t[0]).reduce((function(e,t){return(e?e+", ":"")+t}),"")),{propertyName:t[0],current:r,level:n,overwritten:""!=r?l:"",original:""==r?l:""}}))};t.flattenAdslotCategories=function(e,t,n){if(!n||0==n.length)return[];var r=new Map((n||[]).map((function(e){return[e.propertyName,e.current?[e.current]:[]]}))),a=t.customProperties,i=t.siteSettings.customProperties,o=t.siteSettings.publisherSettings.customProperties;a=a?new Map(Object.entries(a)):new Map,i=i?new Map(Object.entries(i)):new Map,o=o?new Map(Object.entries(o)):new Map;var u=l.assign({},Object.fromEntries(r),Object.fromEntries(o),Object.fromEntries(i),Object.fromEntries(a));return(Object.entries(u)?Object.entries(u):[]).map((function(t){var n="",r="",l="";return"category"==e&&a&&a.has(t[0])&&(r=a.get(t[0]).reduce((function(e,t){return(e?e+", ":"")+t}),"")),"category"!=e&&a&&a.has(t[0])?(n="group",l=a.get(t[0]).reduce((function(e,t){return(e?e+", ":"")+t}),"")):i&&i.has(t[0])?(n="site",l=i.get(t[0]).reduce((function(e,t){return(e?e+", ":"")+t}),"")):o&&o.has(t[0])&&(n="publisher",l=o.get(t[0]).reduce((function(e,t){return(e?e+", ":"")+t}),"")),{propertyName:t[0],current:r,level:n,overwritten:""!=r?l:"",original:""==r?l:""}}))};t.flattenAdslotCustoms=function(e,t){if(!t||0==t.length)return[];var n=new Map((t||[]).map((function(e){return[e.propertyName,e.current?[e.current]:[]]}))),r=e.customProperties,a=e.categorySettings.customProperties,i=e.categorySettings.siteSettings.customProperties,o=e.categorySettings.siteSettings.publisherSettings.customProperties;r=r?new Map(Object.entries(r)):new Map,a=a?new Map(Object.entries(a)):new Map,i=i?new Map(Object.entries(i)):new Map,o=o?new Map(Object.entries(o)):new Map;var u=l.assign({},Object.fromEntries(n),Object.fromEntries(o),Object.fromEntries(i),Object.fromEntries(a),Object.fromEntries(r));return(Object.entries(u)?Object.entries(u):[]).map((function(e){var t="",n="",l="";return r&&r.has(e[0])&&(n=r.get(e[0]).reduce((function(e,t){return(e?e+", ":"")+t}),"")),a&&a.has(e[0])?(t="group",l=a.get(e[0]).reduce((function(e,t){return(e?e+", ":"")+t}),"")):i&&i.has(e[0])?(t="site",l=i.get(e[0]).reduce((function(e,t){return(e?e+", ":"")+t}),"")):o&&o.has(e[0])&&(t="publisher",l=o.get(e[0]).reduce((function(e,t){return(e?e+", ":"")+t}),"")),{propertyName:e[0],current:n,level:t,overwritten:""!=n?l:"",original:""==n?l:""}}))};t.overwritablePropertiesToMap=function(e){return new Map(e.filter((function(e){return""!=e.current})).map((function(e){return[e.propertyName,e.current.split(",").map((function(e){return e.trim()}))]})))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(3)),c=i(n(7)),d=l(n(89)),f=l(n(53)),p=l(n(28));t.default=function(e){var t=e.metrics.map((function(e){return{value:e.col,label:e.label||e.col}})),n=o.useContext(p.default).daterange,r=e.selectedMetrics?e.selectedMetrics:e.metrics.map((function(e){return e.col})),a=o.useState(n),i=a[0],l=a[1],m=o.useState(r),h=m[0],g=m[1],v=o.useState(!1),b=v[0],y=v[1],E=o.useState({error:!1,message:""}),_=E[0],w=E[1];o.useEffect((function(){y(e.downloading)}),[e.downloading]);return o.default.createElement(u.Modal,{show:e.show,onHide:e.onClose,backdrop:"static",onEntering:function(){l(n),w({error:!1,message:""}),g(r)}},o.default.createElement(u.Modal.Header,{closeButton:!0},o.default.createElement(u.Modal.Title,null,"Customize report")),o.default.createElement(u.Modal.Body,null,o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Period"),o.default.createElement("div",null,o.default.createElement(d.default,{id:e.id,daterange:i,onChange:function(e){var t=c.daterange(e);l(e),w(t)}}),_.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid",style:{display:"block"}},_.message))),o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Metrics"),o.default.createElement(f.default,{id:e.id+"-cb-list",listClassNames:"metrics-list",options:t,selectAll:!0,checked:h,onChange:function(e){g(e)}}))),o.default.createElement(u.Modal.Footer,null,o.default.createElement(u.Button,{variant:"light",size:"sm",onClick:e.onClose},"CANCEL"),o.default.createElement(u.Button,{variant:"primary",size:"sm",onClick:function(){var t=e.metrics.filter((function(e){return h.indexOf(e.col)>-1})),n=c.daterange(i);w(n),n.error||e.onSubmit({daterange:i,selectedMetrics:t})},disabled:b},!b&&o.default.createElement(o.Fragment,null,o.default.createElement(s.default,{name:"download"})," DOWNLOAD"),b&&o.default.createElement(o.Fragment,null,o.default.createElement(s.default,{names:["refresh","spin"]})," DOWNLOADING"))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(32)),s=i(n(1));t.default=function(e){var t=o.useState(a()),n=t[0],r=t[1];function a(){var t={};return e.options.forEach((function(n){t[n.value]=e.checked.indexOf(n.value)>-1})),t}function i(e){var t=[];return s.forEach(e,(function(e,n){e&&t.push(n)})),t}o.useEffect((function(){var e=a();r(e)}),[e.checked]);return o.default.createElement("div",{className:e.listClassNames},e.selectAll&&o.default.createElement(u.default,{id:e.id+"-all",disabled:!!e.disabled,checked:i(n).length===Object.keys(n).length,onChange:function(t){var n={};e.options.forEach((function(e){n[e.value]=t}));var r=i(n);e.onChange(r)}},"Select all"),e.options.map((function(t,r){return o.default.createElement(u.default,{key:r,id:e.id+"-"+r,checked:n[t.value],disabled:!!e.disabled,onChange:function(r){!function(t,r){var a=s.assign({},n);a[t]=r;var l=i(a);e.onChange(l)}(t.value,r)}},t.label)})))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=i(n(4)),d=u(n(10)),f=u(n(279)),p=u(n(281));t.default=function(e){var t=s.useState(!0),n=t[0],r=t[1],a=s.useState({}),i=a[0],u=a[1],m=s.useState(!1),h=m[0],g=m[1],v=s.useState(""),b=v[0],y=v[1],E=s.useRef(null);function _(){E.current&&E.current.abort()}return s.useEffect((function(){return _}),[]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n;return o(this,(function(a){switch(a.label){case 0:r(!0),a.label=1;case 1:return a.trys.push([1,3,,4]),_(),E.current=new AbortController,[4,c.Get({path:"/api/statistics/summary",qs:e.options,signal:E.current.signal})];case 2:return t=a.sent(),u(t),r(!1),[3,4];case 3:return n=a.sent(),console.log(n),"AbortError"===n.name?(g(!1),y("")):(g(!0),y("Error loading data."),r(!1)),[3,4];case 4:return[2]}}))}))}()}),[JSON.stringify(e.options)]),h?s.default.createElement("div",{className:"col-sm-12 pt-3 mb-2"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(d.default,{message:b})))):"all"===e.options.scope?s.default.createElement(f.default,{showLoader:n,data:i,tabProps:e}):s.default.createElement(p.default,{showLoader:n,data:i,tabProps:e})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=i(n(1)),f=u(n(19)),p=i(n(20)),m=i(n(4)),h=i(n(36)),g=i(n(8)),v=i(n(21)),b=u(n(10)),y=u(n(3)),E=u(n(5)),_=u(n(159)),w=u(n(62)),S=u(n(160)),P=u(n(27)),C=u(n(52)),O=u(n(53)),x=u(n(162)),I=u(n(165));t.default=function(e){var t,n=s.useContext(w.default),r=(t=e.videoMode?"VideoCampaign":"DisplayCampaign",n.find((function(e){return"Default"===e.presetName&&e.groupName===t}))),a=d.get(r,"id",-1),i=Nt(),u=i.map((function(e){return e.col})),N=g.getSelectedMetrics(e.user.email,u,a),A=s.useState([]),j=A[0],M=A[1],k=s.useState(null),F=k[0],D=k[1],T=s.useState(null),R=T[0],B=T[1],G=s.useState(!0),L=G[0],V=G[1],z=s.useState(!0),q=z[0],Y=z[1],U=s.useState(!0),H=U[0],W=U[1],J=s.useState(!1),X=J[0],K=J[1],Z=s.useState(!1),$=Z[0],Q=Z[1],ee=s.useState(!1),te=ee[0],ne=ee[1],re=s.useState(!1),ae=re[0],ie=re[1],le=s.useState(!1),oe=le[0],ue=le[1],se=s.useState(!1),ce=se[0],de=se[1],fe=s.useState(!1),pe=fe[0],me=fe[1],he=s.useState(!1),ge=he[0],ve=he[1],be=s.useState(!1),ye=be[0],Ee=be[1],_e=s.useState(-1),we=_e[0],Se=_e[1],Pe=s.useState(""),Ce=Pe[0],Oe=Pe[1],xe=s.useState(!1),Ie=xe[0],Ne=xe[1],Ae=s.useState(""),je=Ae[0],Me=Ae[1],ke=s.useState(-1),Fe=ke[0],De=ke[1],Te=s.useState(i),Re=Te[0],Be=Te[1],Ge=s.useState(N),Le=Ge[0],Ve=Ge[1],ze=s.useState(!1),qe=ze[0],Ye=ze[1],Ue=s.useState(-1),He=Ue[0],We=Ue[1],Je=s.useState("budget_completion"),Xe=Je[0],Ke=Je[1],Ze=s.useState(!1),$e=Ze[0],Qe=Ze[1],et=s.useState(!1),tt=et[0],nt=et[1],rt=s.useState(!1),at=rt[0],it=rt[1],lt=s.useState(!1),ot=lt[0],ut=lt[1],st=s.useState(""),ct=st[0],dt=st[1],ft=s.useState(""),pt=ft[0],mt=ft[1],ht=s.useState(""),gt=ht[0],vt=ht[1],bt=s.useRef(null),yt=s.useRef(null),Et=s.useRef(null),_t=s.useRef(null);function wt(){!function(){l(this,void 0,void 0,(function(){var t,n,r,a;return o(this,(function(i){switch(i.label){case 0:V(!0),Qe(!1),i.label=1;case 1:return i.trys.push([1,3,,4]),yt.current=new AbortController,t=d.assign({},e.options,{type:"recent"}),[4,m.Get({path:"/api/campaigns/statistics",qs:t,signal:yt.current.signal})];case 2:return(n=i.sent()).warning&&Qe(!0),r=Ot(n.statistics),M(r),V(!1),nt(!1),dt(""),[3,4];case 3:return a=i.sent(),console.log(a),"AbortError"===a.name?(nt(!1),dt("")):(nt(!0),dt("Error loading recent campaigns."),V(!1)),[3,4];case 4:return[2]}}))}))}(),ye&&St(),ge&&Pt()}function St(){return l(this,void 0,void 0,(function(){var t,n,r,a;return o(this,(function(i){switch(i.label){case 0:Y(!0),i.label=1;case 1:return i.trys.push([1,3,,4]),Et.current=new AbortController,t=d.assign({},e.options,{type:"older"}),[4,m.Get({path:"/api/campaigns/statistics",qs:t,signal:Et.current.signal})];case 2:return(n=i.sent()).warning&&Qe(!0),r=Ot(n.statistics),D(r),Y(!1),it(!1),mt(""),[3,4];case 3:return a=i.sent(),console.log(a),"AbortError"===a.name?(it(!1),mt("")):(it(!0),mt("Error loading older campaigns."),Y(!1)),[3,4];case 4:return[2]}}))}))}function Pt(){return l(this,void 0,void 0,(function(){var t,n,r,a;return o(this,(function(i){switch(i.label){case 0:W(!0),i.label=1;case 1:return i.trys.push([1,3,,4]),_t.current=new AbortController,t=d.assign({},e.options,{type:"archived"}),[4,m.Get({path:"/api/campaigns/statistics",qs:t,signal:_t.current.signal})];case 2:return(n=i.sent()).warning&&Qe(!0),r=Ot(n.statistics),B(r),W(!1),ut(!1),vt(""),[3,4];case 3:return a=i.sent(),console.log(a),"AbortError"===a.name?(ut(!1),vt("")):(ut(!0),vt("Error loading archived campaigns."),W(!1)),[3,4];case 4:return[2]}}))}))}function Ct(e){e&&e.abort()}function Ot(e){return e.map((function(e,t){var n={};return e.campaign.constraints&&(delete e.campaign.constraints.name,n=e.campaign.constraints),d.assign({},e,n,{id:e.campaign.id,status:e.campaign.status.toLowerCase(),adType:It(e.campaign),advertiser:e.campaign.advertiser,advertiserId:e.campaign.advertiserId,isRecent:e.campaign.isRecent,budgetPacing:e.campaign.budgetPacing?d.assign({},e.campaign.budgetPacing,{percentageDone:e.campaign.percentageDone}):e.campaign.budgetPacing,impressionPacing:e.campaign.impressionPacing?d.assign({},e.campaign.impressionPacing,{percentageDone:e.campaign.percentageDone}):e.campaign.impressionPacing,ads:e.campaign.ads||[],remarks:e.campaign.remarks,startDate:e.campaign.startTime,endDate:e.campaign.endTime})}))}function xt(e,t){var n=t.find((function(t){return t.id===e}));return d.get(n,"campaign")}function It(e){var t=e.videoCampaign?"video":"banners";return"Adserving"===e.biddingType&&(t+=" - ad serving"),v.isRetail(e.structure)&&(t+=" - retail"),t}function Nt(){return d.get(r,"metrics",[]).map(At)}function At(e){var t=e.fieldName,n=e.displayName,r=["number","euro"].indexOf(e.format)>-1?"right":"left",a=e.format;if("euro"===a&&(a="money"),"percentage"===a&&(a="perc"),"custom"===a)switch(e.fieldName){case"displayName":a="campaign";break;case"advertiser":a="advertiser_link";break;case"ads":a="ad_list";break;case"budgetPacing":a="budget_completion",r="right";break;case"impressionPacing":a="impression_completion",r="right";break;case"startDate":a="start";break;case"endDate":a="end"}return{col:t,label:n,align:r,type:a}}s.useEffect((function(){return function(){Ct(yt.current),Ct(Et.current),Ct(_t.current)}}),[]),s.useEffect((function(){wt()}),[JSON.stringify(e.options)]),s.useEffect((function(){var t=Nt();Be(t);var n=t.map((function(e){return e.col})),r=g.getSelectedMetrics(e.user.email,n,a);Ve(r)}),[e.videoMode,n]);var jt=function(e,t){Ye(!0),We(e),Ke(t)};function Mt(t,n){return l(this,void 0,void 0,(function(){var r,a,i,l,u,s,c;return o(this,(function(o){switch(o.label){case 0:return r=t.daterange.startDate.format("YYYY-MM-DD"),a=t.daterange.endDate.format("YYYY-MM-DD"),i=d.assign({},e.options,{startDate:r,endDate:a}),[4,m.Get({path:"/api/campaigns/statistics",qs:i})];case 1:return l=o.sent(),u=Ot(l),s=t.selectedMetrics.map((function(e){return h.getBoldCell(e.label||e.col)})),c=[s],u[n].forEach((function(e){var n=[];t.selectedMetrics.forEach((function(t){var r=h.format(t),a=h.cellFormatter(e,t),i=h.getCell(a,null,r);n.push(i)})),c.push(n)})),h.save(c,n+"Campaigns",n+"Campaigns_"+r+"_"+a),[2]}}))}))}var kt=Re.map((function(e){return{value:e.col,label:e.label||e.col}})),Ft=Re.filter((function(e){return Le.indexOf(e.col)>-1}));return s.default.createElement(s.Fragment,null,s.default.createElement("div",{className:"col-sm-12 pt-3"},$e&&s.default.createElement(c.Alert,{variant:"warning"},s.default.createElement(y.default,{name:"warning"})," Retrieving campaign statistics unsuccessful, please try again later."),!tt&&s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",{className:"pull-left"},"Recent campaigns"),s.default.createElement("div",{className:"table-btn-container"},e.rights.MANAGE_ADVERTISER&&s.default.createElement(c.Button,{size:"sm",variant:"primary",className:"mr-2",onClick:function(){me(!0)}},s.default.createElement(y.default,{name:"plus"})," ADD"),!L&&s.default.createElement(c.DropdownButton,{alignRight:!0,size:"sm",className:"mr-2",title:s.default.createElement(s.Fragment,null,s.default.createElement(y.default,{name:"filter"})," METRICS (",Le.length,"/",Re.length,")"),id:"campaign-metrics-dropdown-menu"},s.default.createElement(O.default,{id:"campaign-metrics-cb-list",listClassNames:"metrics-list",options:kt,selectAll:!0,checked:Le,onChange:function(t){g.storeSelectedMetrics(e.user.email,t,r.id),Ve(t)}})),e.rights.VIEW_STATISTICS&&s.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:function(){K(!0)}},s.default.createElement(y.default,{name:"download"})," REPORT")),s.default.createElement(E.default,{visible:L}),!L&&s.default.createElement(_.default,{type:"recent",user:e.user,rights:e.rights,metrics:Ft,records:j,archiveClick:function(e){var t=xt(e,j),n=d.get(t,"name","");de(!0),Se(e),Oe(n)},chartClick:jt})),tt&&s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(b.default,{message:ct})))),s.default.createElement("div",{className:"col-sm-12 pt-3"},!at&&s.default.createElement("div",{className:"card h-100 mb-2"},s.default.createElement("div",null,s.default.createElement("a",{className:"table-collapse-header",href:"",onClick:function(e){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return e.preventDefault(),Ee(!ye),F?[3,2]:[4,St()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}},s.default.createElement(y.default,{name:ye?"chevron-up":"chevron-down"}),s.default.createElement("h3",null,"Older campaigns")),s.default.createElement(c.Collapse,{in:ye},s.default.createElement("div",null,s.default.createElement(E.default,{visible:q}),!q&&s.default.createElement(s.Fragment,null,s.default.createElement("div",{className:"table-btn-container"},e.rights.MANAGE_ADVERTISER&&s.default.createElement(c.Button,{size:"sm",variant:"danger",className:"mr-2",onClick:function(){ue(!0)}},s.default.createElement(y.default,{name:"archive"})," ARCHIVE CAMPAIGNS"),e.rights.VIEW_STATISTICS&&s.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:function(){Q(!0)}},s.default.createElement(y.default,{name:"download"})," REPORT")),s.default.createElement(_.default,{type:"older",user:e.user,rights:e.rights,metrics:Ft,records:F,archiveClick:function(e){var t=xt(e,F),n=d.get(t,"name","");de(!0),Se(e),Oe(n)},chartClick:jt})))))),at&&s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(b.default,{message:pt})))),s.default.createElement("div",{className:"col-sm-12 pt-3"},!ot&&s.default.createElement("div",{className:"card h-100 mb-2"},s.default.createElement("div",null,s.default.createElement("a",{className:"table-collapse-header",href:"",onClick:function(e){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return e.preventDefault(),ve(!ge),R?[3,2]:[4,Pt()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}},s.default.createElement(y.default,{name:ge?"chevron-up":"chevron-down"})," ",s.default.createElement("h3",null,"Archived campaigns")),s.default.createElement(c.Collapse,{in:ge},s.default.createElement("div",null,s.default.createElement(E.default,{visible:H}),!H&&s.default.createElement(_.default,{type:"archived",user:e.user,records:R,metrics:Ft,rights:e.rights,restoreClick:function(e){var t=xt(e,R),n=d.get(t,"name","");Ne(!0),De(e),Me(n)},chartClick:jt}))))),ot&&s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(b.default,{message:gt})))),s.default.createElement(S.default,{show:oe,onClose:function(){ue(!1)},onSubmit:function(t){return l(void 0,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n={scope:e.options.scope,scopeId:e.options.scopeId,endDate:t},[4,m.Delete({path:"/api/campaigns",qs:n})];case 1:return r.sent(),wt(),ue(!1),bt.current.addNotification(p.success("Campaigns archived.",!1)),[3,3];case 2:return r.sent(),V(!1),ue(!1),bt.current.addNotification(p.error("There was an error archiving the campaigns. Try again!")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(I.default,{scope:e.scope,scopeId:e.scopeId,videoMode:e.videoMode,show:pe,onClose:function(){me(!1)},onNewSubmit:function(e){return l(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=v.getNewCampaignData(e),[4,m.Post({path:"/api/campaigns",body:t})];case 1:return n.sent(),bt.current.addNotification(p.success(s.default.createElement("span",null,"Campaign ",s.default.createElement("strong",null,t.name)," created."),!1)),[3,3];case 2:return n.sent(),bt.current.addNotification(p.error("Error creating campaign.")),[3,3];case 3:return me(!1),wt(),[2]}}))}))},onExistingSubmit:function(e){return l(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=v.getExistingCampaignData(e),[4,m.Post({path:"/api/campaigns/"+t.id+"/clone",body:t.campaign})];case 1:return n.sent(),bt.current.addNotification(p.success(s.default.createElement("span",null,"Campaign ",s.default.createElement("strong",null,t.campaign.name)," created."),!1)),[3,3];case 2:return n.sent(),bt.current.addNotification(p.error("Error creating campaign.")),[3,3];case 3:return me(!1),wt(),[2]}}))}))}}),s.default.createElement(C.default,{id:"campaigns-recent-report",show:X,downloading:te,metrics:Re,selectedMetrics:Le,onClose:function(){K(!1),ne(!1)},onSubmit:function(e){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return ne(!0),[4,Mt(e,"recent")];case 1:return t.sent(),ne(!1),K(!1),[2]}}))}))}}),s.default.createElement(C.default,{id:"campaigns-older-report",show:$,downloading:ae,metrics:Re,selectedMetrics:Le,onClose:function(){Q(!1),ie(!1)},onSubmit:function(e){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return ie(!0),[4,Mt(e,"older")];case 1:return t.sent(),ie(!1),Q(!1),[2]}}))}))}}),s.default.createElement(x.default,{id:He,type:Xe,show:qe,onClose:function(){Ye(!1)}}),s.default.createElement(P.default,{message:"Archive campaign "+Ce+"?",show:ce,onClose:function(){return de(!1)},onConfirm:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,m.Delete({path:"/api/campaigns/"+we})];case 1:return e.sent(),de(!1),wt(),bt.current.addNotification(p.success(s.default.createElement("span",null,"Campaign ",s.default.createElement("strong",null,Ce)," archived."),!1)),[3,3];case 2:return e.sent(),de(!1),V(!1),bt.current.addNotification(p.error("Error archiving campaign.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(P.default,{message:"Restore campaign "+je+"?",show:Ie,onClose:function(){return Ne(!1)},onConfirm:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,m.Put({path:"/api/campaigns/"+Fe+"/restore"})];case 1:return e.sent(),Ne(!1),wt(),bt.current.addNotification(p.success(s.default.createElement("span",null,"Campaign ",s.default.createElement("strong",null,je)," restored."),!1)),[3,3];case 2:return e.sent(),Ne(!1),V(!1),bt.current.addNotification(p.error("Error restoring campaign.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(f.default,{ref:bt}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(0)),o=i(n(1));t.default=function(e){return l.useEffect((function(){var t=o.assign({bindto:"#"+e.id},e.options);c3.generate(t)}),[JSON.stringify(e.options)]),l.default.createElement("div",{id:e.id,style:{height:e.height}})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.setNullIds=t.getRuleConsequence=t.getTargetingAttributes=t.getSubstrategiesBoxProps=t.getAdvancedRulesBoxProps=void 0;var u=i(n(1)),s=i(n(4));t.getAdvancedRulesBoxProps=function(e,t,n,r,a){return{id:u.get(e,"campaign.id"),advertiserId:u.get(e,"campaign.advertiserId"),videoCampaign:u.get(e,"campaign.videoCampaign"),advancedRules:u.get(e,"settings.targeting.advancedRules.rules",[]),maxBidPrice:t,rights:n,user:r,onChange:a}};t.getSubstrategiesBoxProps=function(e,t,n,r,a){return{id:u.get(e,"campaign.id"),advertiserId:u.get(e,"campaign.advertiserId"),videoCampaign:u.get(e,"campaign.videoCampaign"),distributeUsers:u.get(e,"campaign.distributeUsers",!1),redistributeBudget:u.get(e,"campaign.redistributeBudget",!1),useDataFeed:u.get(e,"campaign.useDataFeed",!1),dataFeeds:u.get(e,"settings.dataFeeds",[]),strategies:u.get(e,"settings.targeting.strategies",[]),maxBidPrice:t,rights:n,user:r,onChange:a}};t.getTargetingAttributes=function(e){return l(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.Get({path:"/api/attributes/targeting",qs:e})];case 1:return[2,n.sent()];case 2:return t=n.sent(),console.log(t),[2,{}];case 3:return[2]}}))}))};t.getRuleConsequence=function(e,t){return"LIMIT_BID"===e?{action:e,limitBid:t}:"INCREASE_BID_PERCENTAGE"===e?{action:e,increaseBidPercentage:t}:"DECREASE_BID_PERCENTAGE"===e?{action:e,decreaseBidPercentage:t}:{action:e}};t.setNullIds=function(e){return e.map((function(e){return e.ruleId<0?u.assign({},e,{ruleId:null}):e}))}},function(e,t){e.exports=require("node-fetch")},function(e,t){e.exports=require("../config")},function(e,t){e.exports=require("qs")},function(e,t){e.exports=require("validator")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).createContext([]);t.default=r},function(e,t){e.exports=require("react-dates/initialize")},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(0)),f=n(2),p=c(n(19)),m=o(n(20)),h=o(n(1)),g=o(n(4)),v=o(n(36)),b=c(n(5)),y=c(n(10)),E=c(n(27)),_=c(n(3)),w=c(n(168)),S=c(n(86)),P=c(n(169)),C=c(n(52)),O=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.controller=new AbortController,r.handleArchivedHeaderClick=function(e){e.preventDefault(),r.setState({archivedOpen:!r.state.archivedOpen})},r.handleSubmit=function(e,t){return u(r,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return e>0?[4,this.updateCampaignGroup(e,t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,this.addCampaignGroup(t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},r.recentEditClick=function(e){var t=r.getCampaignGroup(e,r.state.campaignGroups.recent);r.setState({showEditModal:!0,editCampaignGroup:t})},r.olderEditClick=function(e){var t=r.getCampaignGroup(e,r.state.campaignGroups.older);r.setState({showEditModal:!0,editCampaignGroup:t})},r.recentArchiveClick=function(e){var t=r.getCampaignGroup(e,r.state.campaignGroups.recent);r.setState({showArchiveConfirm:!0,archiveId:e,archiveCampaignGroup:t})},r.olderArchiveClick=function(e){var t=r.getCampaignGroup(e,r.state.campaignGroups.older);r.setState({showArchiveConfirm:!0,archiveId:e,archiveCampaignGroup:t})},r.restoreClick=function(e){var t=r.getCampaignGroup(e,r.state.campaignGroups.archived);r.setState({showRestoreConfirm:!0,restoreId:e,restoreCampaignGroup:t})},r.archiveCampaignGroups=function(e){return u(r,void 0,void 0,(function(){var t,n=this;return s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t={scope:this.props.options.scope,scopeId:this.props.options.scopeId,endDate:e},[4,g.Delete({path:"/api/campaigngroups",qs:t})];case 1:return r.sent(),this.setState({showArchiveModal:!1,showLoader:!0},(function(){return u(n,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return[4,g.Get({path:"/api/campaigngroups/statistics",qs:this.props.options})];case 1:return e=n.sent(),t=this.getCampaignGroups(e),this.setState({campaignGroups:t,showLoader:!1}),this._notificationSystem.addNotification(m.success("Campaign groups archived.",!1)),[2]}}))}))})),[3,3];case 2:return r.sent(),this.setState({showArchiveConfirm:!1,showLoader:!1}),this._notificationSystem.addNotification(m.error("There was an error archiving the campaign groups. Try again!")),[3,3];case 3:return[2]}}))}))},r.archiveCampaignGroup=function(){return u(r,void 0,void 0,(function(){var e=this;return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,g.Delete({path:"/api/campaigngroups/"+this.state.archiveId})];case 1:return t.sent(),this.setState({showArchiveConfirm:!1,showLoader:!0},(function(){return u(e,void 0,void 0,(function(){var e,t,n;return s(this,(function(r){switch(r.label){case 0:return[4,g.Get({path:"/api/campaigngroups/statistics",qs:this.props.options})];case 1:return e=r.sent(),t=this.getCampaignGroups(e),this.setState({campaignGroups:t,showLoader:!1}),n=h.get(this.state.archiveCampaignGroup,"name",""),this._notificationSystem.addNotification(m.success(d.default.createElement("span",null,"Campaign group ",d.default.createElement("strong",null,n)," archived."),!1)),[2]}}))}))})),[3,3];case 2:return t.sent(),this.setState({showArchiveConfirm:!1,showLoader:!1}),this._notificationSystem.addNotification(m.error("Error archiving campaign group.")),[3,3];case 3:return[2]}}))}))},r.restoreCampaignGroup=function(){return u(r,void 0,void 0,(function(){var e=this;return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,g.Put({path:"/api/campaigngroups/"+this.state.restoreId+"/restore"})];case 1:return t.sent(),this.setState({showRestoreConfirm:!1,showLoader:!0},(function(){return u(e,void 0,void 0,(function(){var e,t,n;return s(this,(function(r){switch(r.label){case 0:return[4,g.Get({path:"/api/campaigngroups/statistics",qs:this.props.options})];case 1:return e=r.sent(),t=this.getCampaignGroups(e),this.setState({campaignGroups:t,showLoader:!1}),n=h.get(this.state.restoreCampaignGroup,"name",""),this._notificationSystem.addNotification(m.success(d.default.createElement("span",null,"Campaign group ",d.default.createElement("strong",null,n)," restored."),!1)),[2]}}))}))})),[3,3];case 2:return t.sent(),this.setState({showArchiveConfirm:!1,showLoader:!1}),this._notificationSystem.addNotification(m.error("Error restoring campaign group.")),[3,3];case 3:return[2]}}))}))},r.handleReportRecentSubmit=function(e){r.setState({downloadingRecent:!0},(function(){return u(r,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.downloadReport(e,"recent")];case 1:return t.sent(),this.setState({downloadingRecent:!1,showRecentReportModal:!1}),[2]}}))}))}))},r.handleReportOlderSubmit=function(e){r.setState({downloadingOlder:!0},(function(){return u(r,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.downloadReport(e,"older")];case 1:return t.sent(),this.setState({downloadingOlder:!1,showOlderReportModal:!1}),[2]}}))}))}))},r._notificationSystem=null,r.setNotificationSystemRef=function(e){r._notificationSystem=e},r.state={campaignGroups:{recent:[],older:[],archived:[]},showLoader:!0,showEditModal:!1,showArchiveModal:!1,archivedOpen:!1,showArchiveConfirm:!1,showRecentReportModal:!1,showOlderReportModal:!1,downloadingRecent:!1,downloadingOlder:!1,showRestoreConfirm:!1,editCampaignGroup:null,archiveId:-1,archiveCampaignGroup:null,restoreId:-1,restoreCampaignGroup:null,error:!1,errorMessage:""},r}return a(t,e),t.prototype.componentDidMount=function(){return u(this,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,g.Get({path:"/api/campaigngroups/statistics",qs:this.props.options,signal:this.controller.signal})];case 1:return e=n.sent(),t=this.getCampaignGroups(e),this.setState({campaignGroups:t,showLoader:!1}),[3,3];case 2:return"AbortError"===n.sent().name?this.setState({showLoader:!0,error:!1,errorMessage:""}):this.setState({error:!0,errorMessage:"Error loading campaign groups.",showLoader:!1}),[3,3];case 3:return[2]}}))}))},t.prototype.componentWillReceiveProps=function(e){var t=this;h.isEqual(e.options,this.props.options)||this.setState({showLoader:!0,error:!1,errorMessage:""},(function(){return u(t,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.controller.abort(),this.controller=new AbortController,[4,g.Get({path:"/api/campaigngroups/statistics",qs:e.options,signal:this.controller.signal})];case 1:return t=r.sent(),n=this.getCampaignGroups(t),this.setState({campaignGroups:n,showLoader:!1}),[3,3];case 2:return"AbortError"===r.sent().name?this.setState({showLoader:!0,error:!1,errorMessage:""}):this.setState({error:!0,errorMessage:"Error loading campaign groups.",showLoader:!1}),[3,3];case 3:return[2]}}))}))}))},t.prototype.componentWillUnmount=function(){this.controller.abort()},t.prototype.getCampaignGroups=function(e){var t=e.map((function(e,t){return h.assign({},e,{id:e.campaignGroup.id,status:e.campaignGroup.status.toLowerCase(),isRecent:e.campaignGroup.isRecent,budgetPacing:e.campaignGroup.budgetPacing?h.assign({},e.campaignGroup.budgetPacing,{percentageDone:e.campaignGroup.percentageDone}):e.campaignGroup.budgetPacing,impressionPacing:e.campaignGroup.impressionPacing?h.assign({},e.campaignGroup.impressionPacing,{percentageDone:e.campaignGroup.percentageDone}):e.campaignGroup.impressionPacing,campaigns:e.campaignGroup.campaigns,startDate:e.campaignGroup.startDate,endDate:e.campaignGroup.endDate})})),n=h.partition(t,(function(e){return"archived"===e.status})),r=h.partition(n[1],(function(e){return e.isRecent}));return{recent:r[0],older:r[1],archived:n[0]}},t.prototype.addCampaignGroup=function(e){return u(this,void 0,void 0,(function(){var t=this;return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,g.Post({path:"/api/campaigngroups",body:e})];case 1:return n.sent(),this.setState({showEditModal:!1,showLoader:!0},(function(){return u(t,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return[4,g.Get({path:"/api/campaigngroups/statistics",qs:this.props.options})];case 1:return t=r.sent(),n=this.getCampaignGroups(t),this.setState({campaignGroups:n,showLoader:!1,editCampaignGroup:null}),this._notificationSystem.addNotification(m.success(d.default.createElement("span",null,"Campaign group ",d.default.createElement("strong",null,e.name)," created."),!1)),[2]}}))}))})),[3,3];case 2:return n.sent(),this.setState({showEditModal:!1,editCampaignGroup:null}),this._notificationSystem.addNotification(m.error("Error creating campaign group.")),[3,3];case 3:return[2]}}))}))},t.prototype.updateCampaignGroup=function(e,t){return u(this,void 0,void 0,(function(){var n=this;return s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,g.Put({path:"/api/campaigngroups/"+e,body:t})];case 1:return r.sent(),this.setState({showEditModal:!1,editCampaignGroup:null,showLoader:!0},(function(){return u(n,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return[4,g.Get({path:"/api/campaigngroups/statistics",qs:this.props.options})];case 1:return e=r.sent(),n=this.getCampaignGroups(e),this.setState({campaignGroups:n,showLoader:!1}),this._notificationSystem.addNotification(m.success(d.default.createElement("span",null,"Campaign group ",d.default.createElement("strong",null,t.name)," saved."),!1)),[2]}}))}))})),[3,3];case 2:return r.sent(),this.setState({showEditModal:!1,editCampaignGroup:null}),this._notificationSystem.addNotification(m.error("Error updating campaign group.")),[3,3];case 3:return[2]}}))}))},t.prototype.getMetrics=function(){return this.props.rights.VIEW_STATISTICS?this.props.videoMode?this.props.rights.VIEW_FINANCIALS?[{col:"id",label:"#"},{col:"displayName",label:"name",type:"campaigngroup",align:"left"},{col:"status",label:"status",align:"left"},{col:"campaigns",label:"campaigns",type:"campaign_list",align:"center"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"completions",label:"completions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"cvr",label:"cvr",align:"right",type:"perc"},{col:"budgetPacing",label:"budget",type:"budget_completion",align:"right"},{col:"impressionPacing",label:"pacing",type:"impression_completion",align:"right"},{col:"costs",label:"cost",type:"money",align:"right"},{col:"profit",label:"profit",type:"money",align:"right"},{col:"startDate",label:"start",align:"left"},{col:"endDate",label:"end",align:"left"}]:[{col:"id",label:"#"},{col:"displayName",label:"name",type:"campaigngroup",align:"left"},{col:"status",label:"status",align:"left"},{col:"campaigns",label:"campaigns",type:"campaign_list",align:"center"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"completions",label:"completions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"cvr",label:"cvr",align:"right",type:"perc"},{col:"budgetPacing",label:"budget",type:"budget_completion",align:"right"},{col:"impressionPacing",label:"pacing",type:"impression_completion",align:"right"},{col:"costs",label:"cost",type:"money",align:"right"},{col:"startDate",label:"start",align:"left"},{col:"endDate",label:"end",align:"left"}]:this.props.rights.VIEW_FINANCIALS?[{col:"id",label:"#"},{col:"displayName",label:"name",type:"campaigngroup",align:"left"},{col:"status",label:"status",align:"left"},{col:"campaigns",label:"campaigns",type:"campaign_list",align:"center"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"budgetPacing",label:"budget",type:"budget_completion",align:"right"},{col:"impressionPacing",label:"pacing",type:"impression_completion",align:"right"},{col:"costs",label:"cost",type:"money",align:"right"},{col:"profit",label:"profit",type:"money",align:"right"},{col:"startDate",label:"start",align:"right"},{col:"endDate",label:"end",align:"right"}]:[{col:"id",label:"#"},{col:"displayName",label:"name",type:"campaigngroup",align:"left"},{col:"status",label:"status",align:"left"},{col:"campaigns",label:"campaigns",type:"campaign_list",align:"center"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"budgetPacing",label:"budget",type:"budget_completion",align:"right"},{col:"impressionPacing",label:"pacing",type:"impression_completion",align:"right"},{col:"costs",label:"cost",type:"money",align:"right"},{col:"startDate",label:"start",align:"right"},{col:"endDate",label:"end",align:"right"}]:[{col:"id",label:"#"},{col:"displayName",label:"name",type:"campaigngroup",align:"left"},{col:"startDate",label:"start",align:"left"},{col:"endDate",label:"end",align:"left"}]},t.prototype.getCampaignGroup=function(e,t){var n=t.find((function(t){return t.id===e}));return h.get(n,"campaignGroup")},t.prototype.downloadReport=function(e,t){return u(this,void 0,void 0,(function(){var n,r,a,i,l,o,u;return s(this,(function(s){switch(s.label){case 0:return n=e.daterange.startDate.format("YYYY-MM-DD"),r=e.daterange.endDate.format("YYYY-MM-DD"),a=h.assign(this.props.options,{startDate:n,endDate:r}),[4,g.Get({path:"/api/campaigngroups/statistics",qs:a})];case 1:return i=s.sent(),l=this.getCampaignGroups(i),o=e.selectedMetrics.map((function(e){return v.getBoldCell(e.label||e.col)})),u=[o],l[t].forEach((function(t){var n=[];e.selectedMetrics.forEach((function(e){var r=v.format(e),a=v.cellFormatter(t,e),i=v.getCell(a,null,r);n.push(i)})),u.push(n)})),v.save(u,t+"CampaignGroups",t+"CampaignGroups_"+n+"_"+r),[2]}}))}))},t.prototype.render=function(){var e=this,t=this.getMetrics();if(this.state.error)return d.default.createElement("div",{className:"col-sm-12 pt-3"},d.default.createElement("div",{className:"card"},d.default.createElement("h3",null,d.default.createElement(y.default,{message:this.state.errorMessage}))));var n=h.get(this.state.archiveCampaignGroup,"name",""),r=h.get(this.state.restoreCampaignGroup,"name","");return d.default.createElement(d.Fragment,null,d.default.createElement("div",{className:"col-sm-12 pt-3"},d.default.createElement("div",{className:"card mb-2"},d.default.createElement("h3",{className:"pull-left"},"Recent campaign groups"),d.default.createElement("div",{className:"table-btn-container"},this.props.rights.MANAGE_ADVERTISER&&d.default.createElement(f.Button,{size:"sm",variant:"primary",className:"mr-2",onClick:function(){e.setState({showEditModal:!0})}},d.default.createElement(_.default,{name:"plus"})," ADD"),this.props.rights.VIEW_STATISTICS&&d.default.createElement(f.Button,{size:"sm",variant:"primary",onClick:function(){e.setState({showRecentReportModal:!0})}},d.default.createElement(_.default,{name:"download"})," REPORT")),d.default.createElement(b.default,{visible:this.state.showLoader}),!this.state.showLoader&&d.default.createElement(w.default,{type:"recent",user:this.props.user,rights:this.props.rights,metrics:t,records:this.state.campaignGroups.recent,editClick:this.recentEditClick,archiveClick:this.recentArchiveClick}))),d.default.createElement("div",{className:"col-sm-12 pt-3"},d.default.createElement("div",{className:"card mb-2"},d.default.createElement("h3",{className:"pull-left"},"Older campaign groups"),d.default.createElement("div",{className:"table-btn-container"},this.props.rights.MANAGE_ADVERTISER&&d.default.createElement(f.Button,{size:"sm",variant:"danger",className:"mr-2",onClick:function(){e.setState({showArchiveModal:!0})}},d.default.createElement(_.default,{name:"archive"})," ARCHIVE CAMPAIGN GROUPS"),this.props.rights.VIEW_STATISTICS&&d.default.createElement(f.Button,{size:"sm",variant:"primary",onClick:function(){e.setState({showOlderReportModal:!0})}},d.default.createElement(_.default,{name:"download"})," REPORT")),d.default.createElement(b.default,{visible:this.state.showLoader}),!this.state.showLoader&&d.default.createElement(w.default,{type:"older",user:this.props.user,rights:this.props.rights,metrics:t,records:this.state.campaignGroups.older,editClick:this.olderEditClick,archiveClick:this.olderArchiveClick}))),d.default.createElement("div",{className:"col-sm-12 pt-3"},d.default.createElement("div",{className:"card h-100 mb-2"},d.default.createElement("div",null,d.default.createElement("a",{className:"table-collapse-header",href:"",onClick:this.handleArchivedHeaderClick},d.default.createElement(_.default,{name:this.state.archivedOpen?"chevron-up":"chevron-down"})," ",d.default.createElement("h3",null,"Archived campaign groups")),d.default.createElement(f.Collapse,{in:this.state.archivedOpen},d.default.createElement("div",null,d.default.createElement(b.default,{visible:this.state.showLoader}),!this.state.showLoader&&d.default.createElement(w.default,{type:"archived",user:this.props.user,records:this.state.campaignGroups.archived,metrics:t,rights:this.props.rights,restoreClick:this.restoreClick})))))),d.default.createElement(S.default,{show:this.state.showEditModal,campaignGroup:this.state.editCampaignGroup,scope:this.props.options.scope,scopeId:this.props.options.scopeId,onClose:function(){e.setState({showEditModal:!1,editCampaignGroup:null})},onSubmit:this.handleSubmit}),d.default.createElement(P.default,{show:this.state.showArchiveModal,handleClose:function(){e.setState({showArchiveModal:!1})},handleSubmit:this.archiveCampaignGroups}),d.default.createElement(C.default,{id:"campaigngroups-recent-report",show:this.state.showRecentReportModal,downloading:this.state.downloadingRecent,metrics:t,onClose:function(){e.setState({showRecentReportModal:!1,downloadingRecent:!1})},onSubmit:this.handleReportRecentSubmit}),d.default.createElement(C.default,{id:"campaigngroups-older-report",show:this.state.showOlderReportModal,downloading:this.state.downloadingOlder,metrics:t,onClose:function(){e.setState({showOlderReportModal:!1,downloadingOlder:!1})},onSubmit:this.handleReportOlderSubmit}),d.default.createElement(E.default,{message:"Archive campaign group "+n+"?",show:this.state.showArchiveConfirm,onClose:function(){return e.setState({showArchiveConfirm:!1})},onConfirm:this.archiveCampaignGroup}),d.default.createElement(E.default,{message:"Restore campaign group "+r+"?",show:this.state.showRestoreConfirm,onClose:function(){return e.setState({showRestoreConfirm:!1})},onConfirm:this.restoreCampaignGroup}),d.default.createElement(p.default,{ref:this.setNotificationSystemRef}))},t}(d.Component);t.default=O},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(0)),f=o(n(1)),p=c(n(3)),m=o(n(22)),h=c(n(5)),g=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleDragEnter=function(e){e.stopPropagation(),e.preventDefault(),r.setState({isDragover:!0})},r.handleDragLeave=function(e){e.stopPropagation(),e.preventDefault(),r.setState({isDragover:!1})},r.handleDrop=function(e){return u(r,void 0,void 0,(function(){var t,n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return e.stopPropagation(),e.preventDefault(),t=e.dataTransfer.items,[4,this.getEntries(t)];case 1:return n=l.sent(),[4,this.getFiles(n)];case 2:return(r=l.sent()).length>1&&this.props.singleUpload?this.props.onError("Multiple file upload is not allowed."):this.props.singleUpload&&this.props.exts?(a=r[0].file,i=m.getExtension(a.name),this.props.exts.indexOf(i)<0?this.props.onError("Allowed extensions "+this.props.exts.join(", ")):this.props.onUpload(r)):this.props.onUpload(r),this.setState({isDragover:!1}),[2]}}))}))},r.state={isDragover:!1},r}return a(t,e),t.prototype.getClassName=function(){return this.state.isDragover?"drop-area is-dragover":"drop-area"},t.prototype.getFile=function(e,t){return new Promise((function(n){e.file((function(r){var a={file:r,path:e.fullPath,key:t};n(a)}))}))},t.prototype.getFiles=function(e){var t=this;return new Promise((function(n){var r=[];e.forEach((function(e,n){e.forEach((function(e){r.push(t.getFile(e,n))}))})),Promise.all(r).then((function(e){n(e)}))}))},t.prototype.getEntries=function(e){var t=this;return new Promise((function(n){for(var r=[],a=0;a<e.length;a++){var i=e[a].webkitGetAsEntry();r.push(t.getItemEntries(i,a))}Promise.all(r).then((function(e){n(e)}))}))},t.prototype.getItemEntries=function(e,t){var n=this;return new Promise((function(t){e.isFile?t([e]):n.traverseDirectory(e).then((function(e){t(f.flattenDeep(e))}))}))},t.prototype.traverseDirectory=function(e){var t=e.createReader(),n=this;return new Promise((function(e){var r=[];!function a(){t.readEntries((function(t){t.length?(r.push(Promise.all(t.map((function(e){return e.isFile?e:n.traverseDirectory(e)})))),a()):e(Promise.all(r))}))}()}))},t.prototype.render=function(){return d.default.createElement("div",{className:this.getClassName(),onDragOver:this.handleDragEnter,onDragEnter:this.handleDragEnter,onDrop:this.handleDrop},d.default.createElement(h.default,{visible:this.props.loading}),!this.props.loading&&d.default.createElement(d.Fragment,null,d.default.createElement(p.default,{name:"download"}),d.default.createElement("div",null,this.props.text)))},t}(d.default.Component);t.default=g},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),s=o(n(350)),c=i(n(0)),d=o(n(3)),f=i(n(1)),p=o(n(9));t.default=function(e){var t=c.useState(e.options.filter((function(e){return m(e)}))),n=t[0],r=t[1],a=c.useState(),i=a[0],o=a[1];function m(e){return""!=e.current||""!=e.original}c.useEffect((function(){r(e.options.filter((function(e){return m(e)})))}),[JSON.stringify(e.options)]),c.useEffect((function(){e.handleCustomAttributeUpdate(n)}),[n]),c.useEffect((function(){var e;o((e=E()).length>0?e[0]:null)}),[n.length]);var h=function(t){r((function(n){var r=n.filter((function(e){return e.propertyName!=t})),a=b(r);return r.map((function(t){var n=new Set(a.map((function(e){return e.propertyName})));return n.add(t.propertyName),f.assign({},t,{options:e.options.filter((function(e){return n.has(e.propertyName)}))})}))}))},g=function(e,t,n){r((function(n){return n.map((function(n){return n.propertyName==e?y(t):n}))}))},v=function(e,t){r((function(n){return n.map((function(n){return n.propertyName==e?f.assign({},n,{current:t}):n}))}))},b=function(t){var n=new Set(t.map((function(e){return e.propertyName})));return e.options.filter((function(e){return!n.has(e.propertyName)}))},y=function(t){return e.options.find((function(e){return e.propertyName==t}))};function E(){return l([],b(n)).map((function(e){return{label:e.propertyName,value:e.propertyName}}))}return c.createElement(u.FormGroup,{className:"row"},c.createElement(u.FormLabel,{className:"col-sm-12"},e.name),c.createElement("div",{className:"col-sm-12"},n.map((function(t){return c.createElement(s.default,{property:t,writeAccess:e.writeAccess,getOptions:function(){return l([t],b(n)).map((function(e){return{label:e.propertyName,value:e.propertyName}}))},value:t.current,handleTextChange:v,handleDelete:h,handleOptionChange:g})}))),E().length>0?c.createElement("div",{className:"col-sm-12"},c.createElement("div",{className:"row"},c.createElement("div",{className:"col-sm-5"},c.createElement("div",{className:"form group"},c.createElement(p.default,{isDisabled:!e.writeAccess,inputId:"selector-custom-prop",className:"react-select-container",classNamePrefix:"react-select",onChange:function(e){o(e)},value:i,options:E()}))),c.createElement("div",{className:"col-sm-3 align-self-end"},c.createElement(u.Button,{size:"sm",variant:"primary",onClick:function(){var e=b(n);if(e&&i){var t=e.find((function(e){return e.propertyName==i.label}));r(l(l([],n),[t]))}},disabled:!e.writeAccess},c.createElement(d.default,{name:"plus"})," ADD")))):null)}},function(e,t){e.exports=require("react-tabtab")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(79));t.default=function(e){return o.default.createElement(o.Fragment,null,o.default.createElement("div",{className:"login-form-container"},o.default.createElement("div",{className:"login-form"},o.default.createElement("div",{className:"ortec-logo"}),e.children),o.default.createElement("div",null,o.default.createElement("div",{className:"ortec-adscience-logo"}))),o.default.createElement(u.default,null))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).createContext({adqueueCount:0});t.default=r},function(e,t){e.exports=require("react-select/async")},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(0)),f=n(2),p=c(n(19)),m=o(n(20)),h=o(n(1)),g=o(n(4)),v=o(n(36)),b=c(n(5)),y=c(n(10)),E=c(n(27)),_=c(n(3)),w=c(n(170)),S=c(n(171)),P=c(n(85)),C=c(n(52)),O=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.controller=new AbortController,r.editClick=function(e,t){var n=r.state.advertisers.find((function(t){return t.advertiser.id===e})),a=h.get(n,"advertiser");r.setState({editAdvertiser:a,showEditModal:!0,writeAccess:t})},r.deleteClick=function(e){var t=r.state.advertisers.find((function(t){return t.advertiser.id===e})),n=h.get(t,"advertiser");r.setState({showDeleteConfirm:!0,deleteId:e,deleteAdvertiser:n})},r.deleteAdvertiser=function(){return u(r,void 0,void 0,(function(){var e=this;return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,g.Delete({path:"/api/advertisers/"+this.state.deleteId})];case 1:return t.sent(),this.setState({showDeleteConfirm:!1,showLoader:!0},(function(){return u(e,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return[4,g.Get({path:"/api/advertisers/statistics",qs:this.props.options,signal:this.controller.signal})];case 1:return e=n.sent(),this.setState({advertisers:e,showLoader:!1}),t=h.get(this.state.deleteAdvertiser,"name",""),this._notificationSystem.addNotification(m.success(d.default.createElement("span",null,"Advertiser ",d.default.createElement("strong",null,t)," deleted."),!1)),[2]}}))}))})),[3,3];case 2:return t.sent(),this.setState({showDeleteConfirm:!1,showLoader:!1}),this._notificationSystem.addNotification(m.error("Error deleting advertiser.")),[3,3];case 3:return[2]}}))}))},r.handleSubmit=function(e,t){return u(r,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return e>0?[4,this.updateAdvertiser(e,t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,this.addAdvertiser(t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},r.handleReportSubmit=function(e){r.setState({downloading:!0},(function(){return u(r,void 0,void 0,(function(){var t,n,r,a,i,l;return s(this,(function(o){switch(o.label){case 0:return t=e.daterange.startDate.format("YYYY-MM-DD"),n=e.daterange.endDate.format("YYYY-MM-DD"),r=h.assign({},this.props.options,{startDate:t,endDate:n}),[4,g.Get({path:"/api/advertisers/statistics",qs:r})];case 1:return a=o.sent(),i=e.selectedMetrics.map((function(e){return v.getBoldCell(e.label||e.col)})),l=[i],a.forEach((function(t){var n=[];e.selectedMetrics.forEach((function(e){var r=v.format(e),a=v.cellFormatter(t,e),i=v.getCell(a,null,r);n.push(i)})),l.push(n)})),v.save(l,"Advertisers","Advertisers_"+r.startDate+"_"+r.endDate),this.setState({downloading:!1,showReportModal:!1}),[2]}}))}))}))},r._notificationSystem=null,r.setNotificationSystemRef=function(e){r._notificationSystem=e},r.state={advertisers:[],showLoader:!0,showAddModal:!1,showEditModal:!1,showReportModal:!1,showDeleteConfirm:!1,downloading:!1,editAdvertiser:null,writeAccess:!1,deleteId:-1,deleteAdvertiser:null,error:!1,errorMessage:""},r}return a(t,e),t.prototype.componentDidMount=function(){return u(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,g.Get({path:"/api/advertisers/statistics",qs:this.props.options,signal:this.controller.signal})];case 1:return e=t.sent(),this.setState({advertisers:e,showLoader:!1}),[3,3];case 2:return"AbortError"===t.sent().name?this.setState({showLoader:!0,error:!1,errorMessage:""}):this.setState({error:!0,errorMessage:"Error loading advertisers.",showLoader:!1}),[3,3];case 3:return[2]}}))}))},t.prototype.componentWillReceiveProps=function(e){var t=this;h.isEqual(e.options,this.props.options)||this.setState({showLoader:!0,error:!1,errorMessage:""},(function(){return u(t,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.controller.abort(),this.controller=new AbortController,[4,g.Get({path:"/api/advertisers/statistics",qs:e.options,signal:this.controller.signal})];case 1:return t=n.sent(),this.setState({advertisers:t,showLoader:!1}),[3,3];case 2:return"AbortError"===n.sent().name?this.setState({showLoader:!0,error:!1,errorMessage:""}):this.setState({error:!0,errorMessage:"Error loading advertisers.",showLoader:!1}),[3,3];case 3:return[2]}}))}))}))},t.prototype.componentWillUnmount=function(){this.controller.abort()},t.prototype.getMetrics=function(){return this.props.rights.VIEW_STATISTICS?this.props.videoMode?this.props.rights.VIEW_FINANCIALS?[{col:"displayName",label:"name",type:"advertiser",align:"left"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"completions",label:"completions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"revenue",label:"revenue",type:"money",align:"right"},{col:"costs",label:"costs",type:"money",align:"right"},{col:"profit",label:"profit",type:"money",align:"right"}]:[{col:"displayName",label:"name",type:"advertiser",align:"left"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"completions",label:"completions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"costs",label:"costs",type:"money",align:"right"}]:this.props.rights.VIEW_FINANCIALS?[{col:"displayName",label:"name",type:"advertiser",align:"left"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"revenue",label:"revenue",type:"money",align:"right"},{col:"costs",label:"costs",type:"money",align:"right"},{col:"profit",label:"profit",type:"money",align:"right"}]:[{col:"displayName",label:"name",type:"advertiser",align:"left"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"costs",label:"costs",type:"money",align:"right"}]:[{col:"displayName",label:"name",type:"advertiser",align:"left"}]},t.prototype.addAdvertiser=function(e){return u(this,void 0,void 0,(function(){var t=this;return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,g.Post({path:"/api/advertisers",body:e})];case 1:return n.sent(),this.setState({showAddModal:!1,showLoader:!0},(function(){return u(t,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return[4,g.Get({path:"/api/advertisers/statistics",qs:this.props.options,signal:this.controller.signal})];case 1:return t=n.sent(),this.setState({advertisers:t,showLoader:!1,editAdvertiser:null}),this._notificationSystem.addNotification(m.success(d.default.createElement("span",null,"Advertiser ",d.default.createElement("strong",null,e.name)," created."),!1)),[2]}}))}))})),[3,3];case 2:return n.sent(),this.setState({showAddModal:!1,editAdvertiser:null}),this._notificationSystem.addNotification(m.error("Error creating advertiser.")),[3,3];case 3:return[2]}}))}))},t.prototype.updateAdvertiser=function(e,t){return u(this,void 0,void 0,(function(){var n=this;return s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,g.Put({path:"/api/advertisers/"+e,body:t})];case 1:return r.sent(),this.setState({showEditModal:!1,editAdvertiser:null,showLoader:!0},(function(){return u(n,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return[4,g.Get({path:"/api/advertisers/statistics",qs:this.props.options,signal:this.controller.signal})];case 1:return e=n.sent(),this.setState({advertisers:e,showLoader:!1}),this._notificationSystem.addNotification(m.success(d.default.createElement("span",null,"Advertiser ",d.default.createElement("strong",null,t.name)," saved."),!1)),[2]}}))}))})),[3,3];case 2:return r.sent(),this.setState({showEditModal:!1,editAdvertiser:null}),this._notificationSystem.addNotification(m.error("Error updating advertiser.")),[3,3];case 3:return[2]}}))}))},t.prototype.render=function(){var e=this,t=this.getMetrics();if(this.state.error)return d.default.createElement("div",{className:"col-sm-12 pt-3"},d.default.createElement("div",{className:"card"},d.default.createElement("h3",null,d.default.createElement(y.default,{message:this.state.errorMessage}))));var n=h.get(this.state.deleteAdvertiser,"name","");return d.default.createElement("div",{className:"col-sm-12 pt-3"},d.default.createElement("div",{className:"card mb-2"},d.default.createElement("h3",{className:"pull-left"},"Advertisers"),d.default.createElement("div",{className:"table-btn-container"},this.props.rights.CREATE_ADVERTISER&&d.default.createElement(f.Button,{size:"sm",variant:"primary",className:"mr-2",onClick:function(){e.setState({showAddModal:!0})}},d.default.createElement(_.default,{name:"plus"})," ADD"),this.props.rights.VIEW_STATISTICS&&d.default.createElement(f.Button,{size:"sm",variant:"primary",onClick:function(){e.setState({showReportModal:!0})}},d.default.createElement(_.default,{name:"download"})," REPORT")),d.default.createElement(b.default,{visible:this.state.showLoader}),!this.state.showLoader&&d.default.createElement(w.default,{advertisers:this.state.advertisers,user:this.props.user,rights:this.props.rights,metrics:t,editClick:this.editClick,deleteClick:this.deleteClick})),d.default.createElement(S.default,{show:this.state.showAddModal,scope:this.props.options.scope,scopeId:this.props.options.scopeId,rights:this.props.rights,agencyFee:this.props.agencyFee,onClose:function(){e.setState({showAddModal:!1})},onSubmit:this.handleSubmit}),d.default.createElement(P.default,{show:this.state.showEditModal,writeAccess:this.state.writeAccess,advertiser:this.state.editAdvertiser,onClose:function(){e.setState({showEditModal:!1,editAdvertiser:null})},onSubmit:this.handleSubmit}),d.default.createElement(C.default,{id:"advertisers-report",show:this.state.showReportModal,downloading:this.state.downloading,metrics:t,onClose:function(){e.setState({showReportModal:!1,downloading:!1})},onSubmit:this.handleReportSubmit}),d.default.createElement(E.default,{message:"Delete advertiser "+n+"?",show:this.state.showDeleteConfirm,onClose:function(){return e.setState({showDeleteConfirm:!1})},onConfirm:this.deleteAdvertiser}),d.default.createElement(p.default,{ref:this.setNotificationSystemRef}))},t}(d.Component);t.default=O},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(t,"__esModule",{value:!0});var c=o(n(0)),d=n(2),f=o(n(7)),p=o(n(1)),m=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleClose=function(){r.setState({},(function(){r.props.onClose()}))},r.handleSubmit=function(){return u(r,void 0,void 0,(function(){var e,t,n=this;return s(this,(function(r){return e=this.state.values,(t=f.required(e)).error?this.setState({valuesValidation:t}):this.setState({saving:!0},(function(){n.props.onSubmit(n.state.values)})),[2]}))}))},r.onEntering=function(){var e=r.getText(r.props.values);r.setState({values:r.props.values,valuesText:e,saving:!1})},r.handleChange=function(e){var t=e.target.value,n=t.trim().split("\n");n=p.uniq(n).filter((function(e){return""!==e.trim()}));var a=f.required(n);r.setState({values:n,valuesText:t,valuesValidation:a,valuesSubmitError:""})},r.getText=function(e){return e.join("\n").trim()},r.state={values:[],valuesText:"",saving:!1,valuesSubmitError:"",valuesValidation:{error:!1,message:""}},r}return a(t,e),t.prototype.render=function(){return c.default.createElement(d.Modal,{show:this.props.show,onHide:this.handleClose,onEntering:this.onEntering,backdrop:"static"},c.default.createElement(d.Modal.Header,{closeButton:!0},c.default.createElement(d.Modal.Title,null,"Edit ",this.props.attributeDisplayName," values")),c.default.createElement(d.Modal.Body,null,c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-sm-12"},c.default.createElement(d.Form.Group,{controlId:"list-name"},c.default.createElement(d.Form.Label,null,"Name *"),c.default.createElement(d.Form.Control,{as:"textarea",autoFocus:!0,disabled:!this.props.writeAccess,isInvalid:this.state.valuesValidation.error,type:"text",rows:20,value:this.state.valuesText,onChange:this.handleChange}),this.state.valuesValidation.error&&c.default.createElement(d.Form.Control.Feedback,{type:"invalid"},this.state.valuesValidation.message),c.default.createElement("div",{className:"text-danger"},this.state.valuesSubmitError))))),c.default.createElement(d.Modal.Footer,null,c.default.createElement(d.Button,{size:"sm",variant:"light",onClick:this.handleClose},"CANCEL"),c.default.createElement(d.Button,{size:"sm",variant:"primary",onClick:this.handleSubmit,disabled:!this.props.writeAccess||this.state.saving},"SAVE")))},t}(c.Component);t.default=m},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(0)),f=n(2),p=c(n(9)),m=o(n(7)),h=o(n(1)),g=o(n(8)),v=c(n(72)),b=c(n(5)),y=c(n(48)),E=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleClose=function(){var e=r.initialState();r.setState(e,(function(){r.props.onClose()}))},r.handleNameChange=function(e){var t=e.target.value,n=m.required(t);r.setState({name:t,nameValidation:n})},r.handleLevelChange=function(e){return u(r,void 0,void 0,(function(){var t,n=this;return s(this,(function(r){return t=e.value,"root"===e.value?this.setState({level:t}):this.setState({showLoader:!0},(function(){return u(n,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return[4,g.getEntityOptions("lists",this.props.scope,this.props.scopeId,t)];case 1:return e=r.sent(),n=e.length>0?parseInt(e[0].value,10):-1,this.setState({level:t,entityOptions:e,entityId:n,showLoader:!1}),[2]}}))}))})),[2]}))}))},r.handleEntityChange=function(e){r.setState({entityId:parseInt(e.value,10)})},r.handleSubmit=function(){var e=r.state.name,t=r.state.attributeValues,n=m.required(e),a=r.props.attribute,i=m.required(t);n.error||i.error?r.setState({nameValidation:n,attributeValuesValidation:i}):r.setState({saving:!0,showValuesSelect:!1},(function(){if(r.state.id>0){var n={name:e,description:r.state.description,attributeValues:t,attribute:a};r.props.onSubmit(r.state.id,n)}else{var i=g.getScopeByLevel(r.state.level);n={name:e,description:r.state.description,scope:{scope:i,scopeId:null},attributeValues:t,attribute:a};"root"!==r.state.level&&(n.scope.scopeId=r.state.entityId),r.props.onSubmit(r.state.id,n)}}))},r.attributeValuesChange=function(e){var t=e.map((function(e){return e.value})),n=m.required(t);r.setState({attributeValues:t,attributeValuesValidation:n})},r.handleEntering=function(){return u(r,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.loadData(this.props)];case 1:return e.sent(),[2]}}))}))},r.handleListValuesSubmit=function(e){r.setState({showValuesSelect:!1,showValuesModal:!1,attributeValues:e},(function(){r.setState({showValuesSelect:!0})}))},r.handleCopy=function(){return u(r,void 0,void 0,(function(){var e,t,n,r,a=this;return s(this,(function(i){switch(i.label){case 0:return e=g.getLevelOptions(this.props.scope),t=e[0].value,n=[],"root"===t?[3,2]:[4,g.getEntityOptions("lists",this.props.scope,this.props.scopeId,t)];case 1:n=i.sent(),i.label=2;case 2:return r=n.length>0?n[0].value:-1,this.setState({showValuesSelect:!1},(function(){a.setState({id:-1,name:"",description:"",level:t,entityId:r,entityOptions:n,writeAccess:!0,showValuesSelect:!0})})),[2]}}))}))},r.state=r.initialState(),r}return a(t,e),t.prototype.loadData=function(e){return u(this,void 0,void 0,(function(){var t,n,r,a=this;return s(this,(function(i){switch(i.label){case 0:return e.list?(this.setState({id:e.list.id,name:e.list.name,description:e.list.description,attributeValues:e.list.attributeValues,writeAccess:e.list.writeAccess,saving:!1},(function(){a.setState({showValuesSelect:!0})})),[3,4]):[3,1];case 1:return t=this.props.scope,n=[],"root"===t?[3,3]:[4,g.getEntityOptions("lists",e.scope,e.scopeId,t)];case 2:n=i.sent(),i.label=3;case 3:r=n.length>0?n[0].value:-1,this.setState({id:-1,name:"",description:"",attributeValues:e.attributeValues||[],level:t,entityId:r,writeAccess:!0,entityOptions:n,saving:!1},(function(){a.setState({showValuesSelect:!0})})),i.label=4;case 4:return[2]}}))}))},t.prototype.initialState=function(){return{id:-1,name:"",description:"",attributeValues:[],entityOptions:[{value:-1,label:""}],entityId:-1,level:this.props.scope,writeAccess:!1,saving:!1,showValuesSelect:!1,showValuesModal:!1,showLoader:!1,nameValidation:{error:!1,message:""},attributeValuesValidation:{error:!1,message:""}}},t.prototype.render=function(){var e=this,t=g.getLevelOptions(this.props.maxLevel),n=h.get(this.props,"list.scope.owner"),r=h.get(this.props,"list.scope.scope")||"";return d.default.createElement(f.Modal,{size:"lg",show:this.props.show,onHide:this.handleClose,onEntering:this.handleEntering,backdrop:"static"},d.default.createElement(f.Modal.Header,{closeButton:!0},d.default.createElement(f.Modal.Title,null,this.state.id>0?"Edit "+this.props.attributeDisplayName+" list":"Add "+this.props.attributeDisplayName+" list")),d.default.createElement(f.Modal.Body,null,d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-sm-12"},d.default.createElement(f.Form.Group,{controlId:"list-name"},d.default.createElement(f.Form.Label,null,"Name *"),d.default.createElement(f.Form.Control,{autoFocus:!0,disabled:!this.state.writeAccess,isInvalid:this.state.nameValidation.error,type:"text",value:this.state.name,onChange:this.handleNameChange}),this.state.nameValidation.error&&d.default.createElement(f.Form.Control.Feedback,{type:"invalid"},this.state.nameValidation.message)),d.default.createElement(f.Form.Group,{controlId:"list-description"},d.default.createElement(f.Form.Label,null,"Description"),d.default.createElement(f.Form.Control,{as:"textarea",autoFocus:!0,disabled:!this.state.writeAccess,type:"text",rows:3,value:this.state.description,onChange:function(t){e.setState({description:t.target.value})}})))),d.default.createElement("div",{className:"row"},-1===this.state.id&&d.default.createElement("div",{className:"col-sm-6"},d.default.createElement(f.Form.Group,{controlId:"list-scope"},d.default.createElement(f.Form.Label,null,"Level:"),d.default.createElement(p.default,{inputId:"react-select-list-scope",className:"react-select-container",classNamePrefix:"react-select",isDisabled:-1!==this.state.id,clearable:!1,value:t.find((function(t){return t.value===e.state.level})),onChange:this.handleLevelChange,options:t}))),"root"!==this.state.level&&-1===this.state.id&&d.default.createElement("div",{className:"col-sm-6"},d.default.createElement(b.default,{visible:this.state.showLoader,loaderClass:"loading-input"}),!this.state.showLoader&&d.default.createElement(f.Form.Group,{controlId:"list-entity"},d.default.createElement(f.Form.Label,null,g.getLabelByScopeType(this.state.level)),d.default.createElement(p.default,{inputId:"react-select-list-entity",className:"react-select-container",classNamePrefix:"react-select",value:this.state.entityOptions.find((function(t){return t.value===e.state.entityId})),clearable:!1,onChange:this.handleEntityChange,options:this.state.entityOptions}))),this.state.id>0&&d.default.createElement(d.Fragment,null,d.default.createElement("div",{className:"col-sm-6"},d.default.createElement(f.Form.Group,{controlId:"list-level"},d.default.createElement(f.Form.Label,null,"Level:"),d.default.createElement(f.Form.Control,{disabled:!0,type:"text",value:g.getLabelByScope(r)}))),d.default.createElement("div",{className:"col-sm-6"},d.default.createElement(f.Form.Group,{controlId:"list-owner"},d.default.createElement(f.Form.Label,null,"Owner:"),d.default.createElement(f.Form.Control,{disabled:!0,type:"text",value:n}))))),d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-sm-12"},d.default.createElement(f.Form.Group,{controlId:"list-attributevalues"},d.default.createElement(f.Form.Label,null,this.props.attributeDisplayName,":"),this.state.showValuesSelect&&d.default.createElement(y.default,{id:"list-values",writeAccess:this.state.writeAccess,creatable:this.props.acceptAnyValue,values:this.state.attributeValues.map((function(e){return{value:e,label:e}})),url:"/api/targeting/suggestion/advanced/attribute/"+this.props.attribute,onChange:this.attributeValuesChange}),this.state.attributeValuesValidation.error&&d.default.createElement(f.Form.Control.Feedback,{type:"invalid"},this.state.attributeValuesValidation.message),d.default.createElement("a",{href:"",onClick:function(t){t.preventDefault(),e.setState({showValuesModal:!0})}},"Edit as text")))),d.default.createElement(v.default,{show:this.state.showValuesModal,attribute:this.props.attribute,attributeDisplayName:this.props.attributeDisplayName,writeAccess:this.state.writeAccess,values:this.state.attributeValues,onClose:function(){e.setState({showValuesModal:!1})},onSubmit:this.handleListValuesSubmit})),d.default.createElement(f.Modal.Footer,null,d.default.createElement(f.Button,{variant:"light",size:"sm",onClick:this.handleClose},"CANCEL"),this.state.id>0&&this.props.rights.MANAGE_LISTS&&d.default.createElement(f.Button,{variant:"primary",size:"sm",onClick:this.handleCopy},"COPY TO NEW LIST"),d.default.createElement(f.Button,{variant:"primary",size:"sm",onClick:this.handleSubmit,disabled:!this.state.writeAccess||this.state.saving},"SAVE")))},t}(d.Component);t.default=E},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0));t.default=function(e){return a.default.createElement("div",{className:"switch-input-group"},a.default.createElement("input",{type:"checkbox",className:"switch-input",id:e.id,name:e.id,checked:e.checked,onChange:function(t){e.onChange(t.target.checked)}}),a.default.createElement("label",{htmlFor:e.id,className:"switch-label"},e.label," ",a.default.createElement("span",{className:"toggle--on"},"on"),a.default.createElement("span",{className:"toggle--off"},"off")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(0)),u=n(6),s=n(2),c=i(n(8));t.default=function(e){return o.default.createElement(s.Modal,{size:"lg",show:e.show,onHide:e.onClose,backdrop:"static"},o.default.createElement(s.Modal.Header,{closeButton:!0},o.default.createElement(s.Modal.Title,null,e.title)),o.default.createElement(s.Modal.Body,null,o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-sm-12"},o.default.createElement("div",{className:"overflow-auto"},o.default.createElement("table",{className:"table table-striped table-borderless"},o.default.createElement("tbody",null,e.campaigns.map((function(t,n){return o.default.createElement("tr",{key:"item-"+n},o.default.createElement("td",null,o.default.createElement(u.Link,{to:c.campaignSettingsLink("/settings/campaign/"+t.id+"/"+e.tab)},t.name)))})))))))),o.default.createElement(s.Modal.Footer,null,o.default.createElement(s.Button,{onClick:e.onClose},"CANCEL")))}},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("react-dom/server")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(125)),s=n(2),c=l(n(3));t.default=function(){var e=o.useState(!1),t=e[0],n=e[1];return o.useEffect((function(){u.default.isDetected()&&n(!0)}),[]),t&&o.default.createElement(s.Alert,{variant:"danger",className:"alert-position",onClose:function(){return n(!1)},dismissible:!0},o.default.createElement("div",{style:{fontSize:"1.1em"}},o.default.createElement("strong",null,o.default.createElement(c.default,{name:"warning"})," Warning! Ad blocking software detected. ")),o.default.createElement("div",null,"Please disable it,to properly use the Opt Out Advertising dashboard."))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(1)),s=function(){function e(e){this.API=e,this.isRootAdmin=function(e){return(e.roles||[]).findIndex((function(e){return"admin"===e.role&&"root"===e.level}))>-1},this.getPages=function(e){var t=[];return e.forEach((function(e){var n=t.find((function(t){return e.level===t.level&&e.entityId===t.entityId}));n?n.roleName+=", "+e.roleName:t.push(e)})),t}}return e.prototype.authorize=function(e){return l(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return[4,this.authenticate(e)];case 1:if((t=n.sent()).suspended)throw Error("User is suspended.");return t.roles&&t.roles.length>0?[4,this.createApplicationUser(t,e)]:[3,3];case 2:return[2,n.sent()];case 3:return[2]}}))}))},e.prototype.getRolesInfo=function(e,t){return l(this,void 0,void 0,(function(){var n=this;return o(this,(function(r){return[2,Promise.all(t.map((function(t){return l(n,void 0,void 0,(function(){var n,r,a,i;return o(this,(function(l){switch(l.label){case 0:return n={id:t.entityId},r=this.getRoleName(t.role),a={entityName:"",roleName:r},"root"!==t.level?[3,1]:(a={entityName:"Overview",roleName:r},[3,7]);case 1:return"organization"!==t.level?[3,3]:[4,this.API.getOrganization(e,n)];case 2:return i=l.sent(),a={entityName:i.organization.name,roleName:r},[3,7];case 3:return"agency"!==t.level?[3,5]:[4,this.API.getAgency(e,n)];case 4:return i=l.sent(),a={entityName:i.agency.name,roleName:r},[3,7];case 5:return"advertiser"!==t.level?[3,7]:[4,this.API.getAdvertiser(e,n)];case 6:i=l.sent(),a={entityName:i.advertiser.name,roleName:r},l.label=7;case 7:return[2,u.assign({},t,a)]}}))}))})))]}))}))},e.findRole=function(e,t,n){var r=e.roles;return"root"===t?r.find((function(e){return"root"===e.level})):r.find((function(e){return e.level===t&&e.entityId===n}))},e.prototype.authenticate=function(e){return l(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return[4,this.API.getUser(e)];case 1:if((t=n.sent()).ok)return[2,t.json()];if(401===t.status)throw Error("Incorrect email or password.");throw Error("An error occured while login. Try again.")}}))}))},e.prototype.createApplicationUser=function(e,t){return l(this,void 0,void 0,(function(){var n,r;return o(this,(function(a){switch(a.label){case 0:return[4,this.getRolesInfo(t,e.roles)];case 1:return n=a.sent(),r=this.getPages(n),[2,u.assign({},e,{username:t.username,password:t.password,authenticated:!0,isRootAdmin:this.isRootAdmin(e),rolesInfo:n,pages:r})]}}))}))},e.prototype.getRoleName=function(e){switch(e){case"campaignmanager":return"campaign manager";case"campaignoptimizer":return"campaign optimizer";case"aduploader":return"ad uploader";case"tagmanager":return"tag manager";default:return e}},e}();t.default=s},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AlertsPopover=t.AlertsList=void 0;var o=i(n(0)),u=n(6),s=n(2),c=i(n(1)),d=l(n(11)),f=i(n(22)),p=i(n(8)),m=l(n(3)),h=function(){var e=o.createElement(s.Popover,{id:"alerts-popover",className:"alerts-list-popover"},o.createElement(s.Popover.Content,null,o.createElement("div",{className:"alerts-list-noresults"},"No alerts found.")));return o.createElement(s.OverlayTrigger,{trigger:"click",placement:"bottom",overlay:e,rootClose:!0},o.createElement("div",{className:"alerts-list-toggle"},o.createElement(m.default,{name:"bell-o"})))},g=function(e){if("NO_AD_LINK"===e.alert.alertType){var t=f.getStartDate(d.default.unix(e.alert.startTime)),n=f.getEndDate(d.default.unix(e.alert.endTime)),r=p.campaignSettingsLink("/settings/campaign/"+e.alert.campaignId+"/ads");return 3===e.alert.warningLevel?o.createElement("li",{className:"alert-list-row-danger"},o.createElement(u.Link,{to:r},o.createElement("span",{className:"alert-list-name"},e.alert.campaignName)," that started on ",t," and ends on ",n," has no active ads.")):o.createElement("li",{className:"alert-list-row-warning"},o.createElement(u.Link,{to:r},o.createElement("span",{className:"alert-list-name"},e.alert.campaignName)," that starts on ",t," and ends on ",n," has no active ads."))}return null};t.AlertsList=function(e){return o.createElement("ul",{className:"alerts-list"},e.alerts.map((function(e,t){return o.createElement(g,{key:"alert-list-row"+t,alert:e})})))};t.AlertsPopover=function(e){var n=e.alerts.length;if(n>0){var r=u.useParams(),a=r.scope,i=r.scopeId,l=3===c.maxBy(e.alerts,"warningLevel").warningLevel?"red":"#ee7d0c",d=c.take(e.alerts,10),f=o.createElement(s.Popover,{id:"alerts-popover",className:"alerts-list-popover"},o.createElement(s.Popover.Content,null,o.createElement("div",{className:"alerts-list-header"},o.createElement("h4",null,"Alerts"),o.createElement(u.Link,{to:"/alerts/"+a+"/"+i},function(e){return 11===e?"1 more message not shown. See all":e>11?e-10+" more message not shown. See all":"See all"}(n))),o.createElement(t.AlertsList,{alerts:d})));return o.createElement(s.OverlayTrigger,{trigger:"click",placement:"bottom",overlay:f,rootClose:!0},o.createElement("div",{className:"alerts-list-toggle"},o.createElement(m.default,{name:"bell-o"}),o.createElement("span",{className:"alerts-list-badge",style:{backgroundColor:l}},n)))}return o.createElement(h,null)}},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(0)),s=o(n(1)),c=n(2),d=o(n(7)),f=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleEntering=function(){r.loadData(r.props)},r.handleClose=function(){var e=r.initialState();r.setState(e,(function(){r.props.onClose()}))},r.handleNameChange=function(e){var t=e.target.value,n=d.required(t);r.setState({name:t,nameValidation:n})},r.handleSubmit=function(){var e=r.state.name,t=d.required(e);t.error?r.setState({nameValidation:t}):r.setState({saving:!0},(function(){var e={name:r.state.name};r.props.onSubmit(r.state.id,e)}))},r.state=r.initialState(),r}return a(t,e),t.prototype.loadData=function(e){if(e.organization){var t=s.get(e,"organization.id",-1),n=s.get(e,"organization.name","");this.setState({id:t,name:n,saving:!1})}else this.setState({id:-1,name:"",saving:!1})},t.prototype.initialState=function(){return{id:-1,name:"",nameValidation:{error:!1,message:""},saving:!1}},t.prototype.render=function(){return u.default.createElement(c.Modal,{className:"organization-modal",show:this.props.show,onHide:this.handleClose,onEntering:this.handleEntering,backdrop:"static"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,null,"Organization setup")),u.default.createElement(c.Modal.Body,null,u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-12"},u.default.createElement(c.Form.Group,{controlId:"organization-name"},u.default.createElement(c.Form.Label,null,"Name *"),u.default.createElement(c.Form.Control,{autoFocus:!0,type:"text",value:this.state.name,isInvalid:this.state.nameValidation.error,onChange:this.handleNameChange}),this.state.nameValidation.error&&u.default.createElement(c.Form.Control.Feedback,{type:"invalid"},this.state.nameValidation.message))))),u.default.createElement(c.Modal.Footer,null,u.default.createElement(c.Button,{size:"sm",variant:"light",onClick:this.handleClose},"CANCEL"),u.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:this.handleSubmit,disabled:this.state.saving},"SAVE")))},t}(u.Component);t.default=f},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(0)),c=o(n(1)),d=n(2),f=u(n(9)),p=o(n(7)),m=o(n(22)),h=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.countries=m.countries(),r.handleEntering=function(){r.loadData(r.props)},r.handleClose=function(){var e=r.initialState();r.setState(e,(function(){r.props.onClose()}))},r.handleAdvertiserFeeChange=function(e){var t=e.target.value,n=p.native(e.target);r.setState({defaultAdvertiserFee:t,advertiserFeeValidation:n})},r.handleEmailChange=function(e){var t=e.target.value,n=p.native(e.target);r.setState({email:t,emailValidation:n})},r.handleCountryChange=function(e){e?r.setState({country:e.value.toString()}):r.setState({country:null})},r.handleSubmit=function(){var e=document.getElementById("agency-edit-defaultadvertiserfee");e.value=r.state.defaultAdvertiserFee;var t=p.native(e),n=document.getElementById("agency-edit-email");n.value=r.state.email;var a=p.native(n);t.error||a.error?r.setState({advertiserFeeValidation:t,emailValidation:a}):r.setState({saving:!0},(function(){var e=c.pick(r.state,["name","contactPerson","email","street","number","zipcode","city","country"]);e.defaultAdvertiserFee=parseInt(r.state.defaultAdvertiserFee),r.props.onSubmit(r.state.id,e)}))},r.state=r.initialState(),r}return a(t,e),t.prototype.loadData=function(e){if(e.agency){var t=c.get(e,"agency.id",-1),n=c.get(e,"agency.name",""),r=c.get(e,"agency.defaultAdvertiserFee","").toString(),a=c.get(e,"agency.contactPerson",""),i=c.get(e,"agency.email",""),l=c.get(e,"agency.street",""),o=c.get(e,"agency.number",""),u=c.get(e,"agency.zipcode",""),s=c.get(e,"agency.city",""),d=c.get(e,"agency.country","");this.setState({id:t,name:n,defaultAdvertiserFee:r,contactPerson:a,email:i,street:l,number:o,zipcode:u,city:s,country:d,saving:!1})}else this.setState({id:-1,name:"",saving:!1})},t.prototype.initialState=function(){return{id:-1,name:"",defaultAdvertiserFee:"",contactPerson:"",email:"",street:"",number:"",zipcode:"",city:"",country:"",advertiserFeeValidation:{error:!1,message:""},emailValidation:{error:!1,message:""},saving:!1}},t.prototype.render=function(){var e=this;return s.default.createElement(d.Modal,{size:"lg",show:this.props.show,onHide:this.handleClose,onEntering:this.handleEntering,backdrop:"static"},s.default.createElement(d.Modal.Header,{closeButton:!0},s.default.createElement(d.Modal.Title,null,"Agency details")),s.default.createElement(d.Modal.Body,null,s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"agency-edit-name"},s.default.createElement(d.Form.Label,null,"Name *"),s.default.createElement(d.Form.Control,{readOnly:!0,type:"text",value:this.state.name}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"agency-edit-defaultadvertiserfee"},s.default.createElement(d.Form.Label,null,"Default advertiser fee *"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,required:!0,type:"number",step:"0.01",min:"0",value:this.state.defaultAdvertiserFee,isInvalid:this.state.advertiserFeeValidation.error,onChange:this.handleAdvertiserFeeChange}),this.state.advertiserFeeValidation.error&&s.default.createElement(d.Form.Control.Feedback,{type:"invalid"},this.state.advertiserFeeValidation.message)))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"agency-edit-contact-person"},s.default.createElement(d.Form.Label,null,"Contact person"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.contactPerson,onChange:function(t){e.setState({contactPerson:t.target.value})}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"agency-edit-email"},s.default.createElement(d.Form.Label,null,"Email"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"email",value:this.state.email,isInvalid:this.state.emailValidation.error,onChange:this.handleEmailChange}),this.state.emailValidation.error&&s.default.createElement(d.Form.Control.Feedback,{type:"invalid"},this.state.emailValidation.message)))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"agency-edit-street"},s.default.createElement(d.Form.Label,null,"Street"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.street,onChange:function(t){e.setState({street:t.target.value})}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"agency-edit-number"},s.default.createElement(d.Form.Label,null,"Number"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.number,onChange:function(t){e.setState({number:t.target.value})}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"agency-edit-zipcode"},s.default.createElement(d.Form.Label,null,"Zip code"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.zipcode,onChange:function(t){e.setState({zipcode:t.target.value})}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"agency-edit-city"},s.default.createElement(d.Form.Label,null,"City"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.city,onChange:function(t){e.setState({city:t.target.value})}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"agency-edit-country"},s.default.createElement(d.Form.Label,null,"Country"),s.default.createElement(f.default,{inputId:"react-select-agency-edit-country",isDisabled:!this.props.writeAccess,isClearable:!0,className:"react-select-container",classNamePrefix:"react-select",onChange:this.handleCountryChange,value:this.countries.find((function(t){return t.value===e.state.country})),options:this.countries}))))),s.default.createElement(d.Modal.Footer,null,s.default.createElement(d.Button,{size:"sm",variant:"light",onClick:this.handleClose},"CANCEL"),s.default.createElement(d.Button,{size:"sm",variant:"primary",onClick:this.handleSubmit,disabled:this.state.saving||!this.props.writeAccess},"SAVE")))},t}(s.Component);t.default=h},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(0)),c=o(n(1)),d=n(2),f=u(n(9)),p=o(n(7)),m=o(n(22)),h=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.countries=m.countries(),r.handleEntering=function(){r.loadData(r.props)},r.handleClose=function(){var e=r.initialState();r.setState(e,(function(){r.props.onClose()}))},r.handleNameChange=function(e){var t=e.target.value,n=p.required(e.target.value);r.setState({name:t,nameValidation:n})},r.handleDomainChange=function(e){var t=e.target.value,n=p.domain(e.target.value,!0);r.setState({advertiserDomain:t,domainValidation:n})},r.handleAdvertiserFeeChange=function(e){var t=e.target.value,n=p.native(e.target);r.setState({advertiserFee:t,advertiserFeeValidation:n})},r.handleEmailChange=function(e){var t=e.target.value,n=p.native(e.target);r.setState({email:t,emailValidation:n})},r.handleCountryChange=function(e){e?r.setState({country:e.value.toString()}):r.setState({country:null})},r.handleSubmit=function(){var e=document.getElementById("advertiser-edit-fee");e.value=r.state.advertiserFee;var t=p.native(e),n=document.getElementById("advertiser-edit-email");n.value=r.state.email;var a=p.native(n),i=r.state.advertiserDomain,l=p.domain(i,!0);t.error||a.error||l.error?r.setState({advertiserFeeValidation:t,emailValidation:a,domainValidation:l}):r.setState({saving:!0},(function(){var e=c.pick(r.state,["name","advertiserDomain","productCategory","advertiserFee","contactPerson","email","street","number","zipcode","city","country"]);r.props.onSubmit(r.state.id,e)}))},r.state=r.initialState(),r}return a(t,e),t.prototype.loadData=function(e){if(e.advertiser){var t=c.get(e,"advertiser.id",-1),n=c.get(e,"advertiser.name",""),r=c.get(e,"advertiser.advertiserDomain",""),a=c.get(e,"advertiser.productCategory",""),i=c.get(e,"advertiser.advertiserFee","").toString(),l=c.get(e,"advertiser.contactPerson",""),o=c.get(e,"advertiser.email",""),u=c.get(e,"advertiser.street",""),s=c.get(e,"advertiser.number",""),d=c.get(e,"advertiser.zipcode",""),f=c.get(e,"advertiser.city",""),p=c.get(e,"advertiser.country","");this.setState({id:t,name:n,advertiserDomain:r,productCategory:a,advertiserFee:i,contactPerson:l,email:o,street:u,number:s,zipcode:d,city:f,country:p,saving:!1})}else this.setState({id:-1,name:"",saving:!1})},t.prototype.initialState=function(){return{id:-1,name:"",advertiserFee:"",advertiserDomain:"",productCategory:"",contactPerson:"",email:"",street:"",number:"",zipcode:"",city:"",country:"",nameValidation:{error:!1,message:""},advertiserFeeValidation:{error:!1,message:""},emailValidation:{error:!1,message:""},domainValidation:{error:!1,message:""},saving:!1}},t.prototype.render=function(){var e=this;return s.default.createElement(d.Modal,{size:"lg",show:this.props.show,onHide:this.handleClose,onEntering:this.handleEntering,backdrop:"static"},s.default.createElement(d.Modal.Header,{closeButton:!0},s.default.createElement(d.Modal.Title,null,"Advertiser details")),s.default.createElement(d.Modal.Body,null,s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"advertiser-edit-name"},s.default.createElement(d.Form.Label,null,"Name *"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.name,isInvalid:this.state.nameValidation.error,onChange:this.handleNameChange}),this.state.nameValidation.error&&s.default.createElement(d.Form.Control.Feedback,{type:"invalid"},this.state.nameValidation.message))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"advertiser-edit-domain"},s.default.createElement(d.Form.Label,null,"Advertiser domain *"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,placeholder:"e.g. domain.nl (without http://, https://, www.)",value:this.state.advertiserDomain,isInvalid:this.state.domainValidation.error,onChange:this.handleDomainChange}),this.state.domainValidation.error&&s.default.createElement(d.Form.Control.Feedback,{type:"invalid"},this.state.domainValidation.message)))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"advertiser-edit-fee"},s.default.createElement(d.Form.Label,null,"Agency fee *"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,required:!0,type:"number",step:"0.01",min:"0",value:this.state.advertiserFee,isInvalid:this.state.advertiserFeeValidation.error,onChange:this.handleAdvertiserFeeChange}),this.state.advertiserFeeValidation.error&&s.default.createElement(d.Form.Control.Feedback,{type:"invalid"},this.state.advertiserFeeValidation.message))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"advertiser-edit-product-category"},s.default.createElement(d.Form.Label,null,"Product category"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.productCategory,onChange:function(t){e.setState({productCategory:t.target.value})}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"advertiser-edit-contact-person"},s.default.createElement(d.Form.Label,null,"Contact person"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.contactPerson,onChange:function(t){e.setState({contactPerson:t.target.value})}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"advertiser-edit-email"},s.default.createElement(d.Form.Label,null,"Email"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"email",value:this.state.email,isInvalid:this.state.emailValidation.error,onChange:this.handleEmailChange}),this.state.emailValidation.error&&s.default.createElement(d.Form.Control.Feedback,{type:"invalid"},this.state.emailValidation.message)))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"advertiser-edit-street"},s.default.createElement(d.Form.Label,null,"Street"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.street,onChange:function(t){e.setState({street:t.target.value})}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"advertiser-edit-number"},s.default.createElement(d.Form.Label,null,"Number"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.number,onChange:function(t){e.setState({number:t.target.value})}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"advertiser-edit-zipcode"},s.default.createElement(d.Form.Label,null,"Zip code"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.zipcode,onChange:function(t){e.setState({zipcode:t.target.value})}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"advertiser-edit-city"},s.default.createElement(d.Form.Label,null,"City"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.city,onChange:function(t){e.setState({city:t.target.value})}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"advertiser-edit-country"},s.default.createElement(d.Form.Label,null,"Country"),s.default.createElement(f.default,{inputId:"react-select-advertiser-edit-country",isDisabled:!this.props.writeAccess,isClearable:!0,className:"react-select-container",classNamePrefix:"react-select",onChange:this.handleCountryChange,value:this.countries.find((function(t){return t.value===e.state.country})),options:this.countries}))))),s.default.createElement(d.Modal.Footer,null,s.default.createElement(d.Button,{size:"sm",variant:"light",onClick:this.handleClose},"CANCEL"),s.default.createElement(d.Button,{size:"sm",variant:"primary",onClick:this.handleSubmit,disabled:this.state.saving||!this.props.writeAccess},"SAVE")))},t}(s.Component);t.default=h},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(0)),f=n(2),p=c(n(9)),m=o(n(1)),h=o(n(4)),g=o(n(7)),v=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleEntering=function(){return u(r,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.loadData(this.props)];case 1:return e.sent(),[2]}}))}))},r.handleClose=function(){var e=r.initialState();r.setState(e,(function(){r.props.onClose()}))},r.handleNameChange=function(e){var t=e.target.value,n=g.required(t);r.setState({name:t,nameValidation:n})},r.handleAdvertiserChange=function(e){r.setState({advertiserId:e.value})},r.handleSubmit=function(){var e=r.state.name,t=g.required(e),n=r.state.advertiserId;t.error?r.setState({nameValidation:t}):r.setState({saving:!0},(function(){if(r.state.id>0){var t={name:e};r.props.onSubmit(r.state.id,t)}else{t={advertiserId:n,name:e};r.props.onSubmit(r.state.id,t)}}))},r.state=r.initialState(),r}return a(t,e),t.prototype.loadData=function(e){return u(this,void 0,void 0,(function(){var t,n,r,a,i,l;return s(this,(function(o){switch(o.label){case 0:return e.campaignGroup?(t=m.get(e,"campaignGroup.id",-1),n=m.get(e,"campaignGroup.name",""),this.setState({id:t,name:n,saving:!1}),[3,4]):[3,1];case 1:return"advertiser"!==e.scope?[3,2]:(l=e.scopeId,this.setState({id:-1,name:"",advertiserId:l,saving:!1}),[3,4]);case 2:return r=this.getAdvertisersOptions(e),[4,h.Get({path:"/api/advertisers",qs:r})];case 3:a=o.sent(),i=m.get(a,"advertisers",[]).map((function(e){return{value:e.advertiser.id,label:e.advertiser.name}})),l=i.length>0?i[0].value:-1,this.setState({id:-1,name:"",advertisers:i,advertiserId:l,saving:!1}),o.label=4;case 4:return[2]}}))}))},t.prototype.getAdvertisersOptions=function(e){return"metaAgency"===e.scope?{organizationId:e.scopeId}:"agency"===e.scope?{agencyId:e.scopeId}:{}},t.prototype.initialState=function(){return{id:-1,name:"",advertisers:[],advertiserId:-1,nameValidation:{error:!1,message:""},saving:!1}},t.prototype.render=function(){var e=this,t=["all","metaAgency","agency"].indexOf(this.props.scope)>-1&&-1===this.state.id;return d.default.createElement(f.Modal,{show:this.props.show,onHide:this.handleClose,onEntering:this.handleEntering,backdrop:"static"},d.default.createElement(f.Modal.Header,{closeButton:!0},d.default.createElement(f.Modal.Title,null,"Campaign group setup")),d.default.createElement(f.Modal.Body,null,d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-sm-12"},t&&d.default.createElement(f.Form.Group,{controlId:"campaigngroup-advertiser"},d.default.createElement(f.Form.Label,null,"Advertiser * "),d.default.createElement(p.default,{inputId:"react-select-campaigngroup-advertiser",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:this.state.advertisers.find((function(t){return t.value===e.state.advertiserId})),onChange:this.handleAdvertiserChange,options:this.state.advertisers})),d.default.createElement(f.Form.Group,{controlId:"campaigngroup-name"},d.default.createElement(f.Form.Label,null,"Name *"),d.default.createElement(f.Form.Control,{autoFocus:!0,type:"text",value:this.state.name,isInvalid:this.state.nameValidation.error,onChange:this.handleNameChange}),this.state.nameValidation.error&&d.default.createElement(f.Form.Control.Feedback,{type:"invalid"},this.state.nameValidation.message))))),d.default.createElement(f.Modal.Footer,null,d.default.createElement(f.Button,{size:"sm",variant:"light",onClick:this.handleClose},"CANCEL"),d.default.createElement(f.Button,{size:"sm",variant:"primary",onClick:this.handleSubmit,disabled:this.state.saving},"SAVE")))},t}(d.Component);t.default=v},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(0)),o=n(2),u=i(n(1)),s=i(n(7));t.default=function(e){var t=l.useState(!1),n=t[0],r=t[1],a=l.useState(u.get(e,"publisher.settings.name","")),i=a[0],c=a[1],d=l.useState({error:!1,message:""}),f=d[0],p=d[1],m=l.useState(u.get(e,"publisher.settings.defaultDealFloorPrice","").toString()),h=m[0],g=m[1],v=function(){r(!1),c(""),p({error:!1,message:""}),e.onClose()};return l.default.createElement(o.Modal,{className:"publisher-modal",show:e.show,onHide:v,onEntering:function(){var t=u.get(e,"publisher.settings.name",""),n=u.get(e,"publisher.settings.defaultDealFloorPrice","").toString();c(t),g(n),r(!1)},backdrop:"static"},l.default.createElement(o.Modal.Header,{closeButton:!0},l.default.createElement(o.Modal.Title,null,"Publisher settings")),l.default.createElement(o.Modal.Body,null,l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm-12"},l.default.createElement(o.Form.Group,{controlId:"publisher-name"},l.default.createElement(o.Form.Label,null,"Name *"),l.default.createElement(o.Form.Control,{autoFocus:!0,readOnly:!e.writeAccess,isInvalid:f.error,type:"text",value:i,onChange:function(e){var t=e.target.value,n=s.required(t);c(t),p(n)}}),f.error&&l.default.createElement(o.Form.Control.Feedback,{type:"invalid"},f.message)),l.default.createElement(o.Form.Group,{controlId:"publisher-defaultfloorprice"},l.default.createElement(o.Form.Label,null,"Default deal floor price *"),l.default.createElement(o.Form.Control,{readOnly:!e.writeAccess,required:!0,type:"number",step:"0.01",min:"0",value:h,onChange:function(e){return g(e.target.value)}}))))),l.default.createElement(o.Modal.Footer,null,l.default.createElement(o.Button,{variant:"light",size:"sm",onClick:v},"CANCEL"),l.default.createElement(o.Button,{variant:"primary",size:"sm",onClick:function(){var t=s.required(i);t.error?p(t):(r(!0),e.onSubmit(e.publisher.id,{name:i,defaultDealFloorPrice:parseFloat(h)}))},disabled:n||!e.writeAccess},"SAVE")))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(0)),o=i(n(3));t.default=function(e){var t=e.color,n=e.percentage,i=e.percentageDone,u=e.actual,s=a(e,["color","percentage","percentageDone","actual"]);return l.default.createElement("div",r({},s,{className:"completion-bar-container"}),l.default.createElement("div",{className:"completion-bar "+t},l.default.createElement("span",{className:"completion-progress "+t,style:{width:n+"%"}}),l.default.createElement("span",{className:"completion-line",style:{width:i+"%"}}),l.default.createElement("span",{className:"completion-value"},u)),l.default.createElement("div",{className:"completion-arrow",style:{left:i+"%"}},l.default.createElement(o.default,{name:"caret-up"})))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(0)),u=l(n(90)),s=i(n(8));t.default=function(e){var t=s.getDateRangePresets();return o.default.createElement(u.default,{daterange:e.daterange,presets:t,onDatesChange:e.onChange,small:!0,daySize:30,hideKeyboardShortcutsPanel:!0,anchorDirection:"right",calendarInfoPosition:"after",noBorder:!0,showDefaultInputIcon:!0,isOutsideRange:function(){return!1},displayFormat:"YYYY-MM-DD",inputIconPosition:"before",startDateId:e.id+"-start-date",endDateId:e.id+"-end-date"})}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=n(2),c=o(n(11));n(63);var d=n(161);t.default=function(e){var t=u.useState(null),n=t[0],a=t[1],i=function(t){var n=t.startDate,r=t.endDate;a(!1),e.onDatesChange({startDate:n,endDate:r})};return u.default.createElement(d.DateRangePicker,r({},e,{startDateId:e.startDateId,endDateId:e.endDateId,renderCalendarInfo:function(){var t=e.daterange,n=t.startDate,r=t.endDate;return u.default.createElement("div",null,e.presets.map((function(e){var t=e.text,a=e.start,l=e.end,o=c.default(n).isSame(a,"day")&&c.default(r).isSame(l,"day")?"primary":"light";return u.default.createElement(s.Button,{key:t,variant:o,size:"sm",onClick:function(){return i({startDate:a,endDate:l})}},t)})))},minimumNights:0,startDate:e.daterange.startDate,endDate:e.daterange.endDate,onDatesChange:i,focusedInput:n,onFocusChange:function(e){return a(e)}}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(0)),l=a(n(163)),o=a(n(164));t.default=function(e){return i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-lg-8"},i.default.createElement(o.default,r({},e))),i.default.createElement("div",{className:"col-lg-4"},i.default.createElement(i.default.Fragment,null,i.default.createElement(l.default,r({},e)),i.default.createElement("div",{id:e.id+"-changes"}))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getJudgementClass=t.getJudgementColor=void 0;t.getJudgementColor=function(e){switch(e){case"GOOD":return"green";case"OKAY":return"#ffc300";case"NOT_OKAY":return"#ff8333";case"BAD":return"red"}};t.getJudgementClass=function(e){switch(e){case"GOOD":return"green";case"OKAY":return"yellow";case"NOT_OKAY":return"orange";case"BAD":return"red";case"UNKNOWN":return"unknown"}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(0)),c=u(n(14)),d=l(n(23)),f=u(n(17)),p=l(n(1)),m=l(n(15)),h=u(n(3));t.default=function(e){var t="retailbranches-select-table",n=s.useState(1),a=n[0],i=n[1],l=s.useState(10),u=l[0],g=l[1],v=s.useState({dataField:"id",order:"desc"}),b=v[0],y=v[1],E=s.useState([]),_=E[0],w=E[1],S=d.Search.SearchBar,P=[{dataField:"id",hidden:!0},{dataField:"branchId",text:"Id",sort:!0,onSort:O,sortCaret:m.columnSort},{dataField:"name",text:"name",sort:!0,onSort:O,sortCaret:m.columnSort},{dataField:"country",text:"country",sort:!0,onSort:O,sortCaret:m.columnSort},{dataField:"region",text:"region",sort:!0,onSort:O,sortCaret:m.columnSort},{dataField:"city",text:"city",sort:!0,onSort:O,sortCaret:m.columnSort}],C=e.records.map((function(e){return p.pick(e,["id","branchId","name","country","region","city"])}));s.useEffect((function(){e.onChange(_)}),[JSON.stringify(_)]);var O=function(e,t){y({dataField:e,order:t})},x=function(e,t){i(e)},I=function(e,t){g(e)},N=function(e,t){w(t?o(o([],_),[e.id]):_.filter((function(t){return t!==e.id})))},A=function(e){var t=C.map((function(e){return e.id}));w(e?t:[])};function j(){var t=m.getLastPage(e.records,u);return a>t?t:a}return s.default.createElement(d.default,{keyField:"id",data:C,columns:P,search:!0},(function(e){return s.default.createElement("div",null,s.default.createElement("div",{className:"search-label-container"},s.default.createElement(h.default,{name:"search"}),s.default.createElement(S,r({},e.searchProps,{placeholder:"Filter records",tableId:t}))),s.default.createElement(c.default,r({},e.baseProps,{id:t,bordered:!1,hover:!0,classes:"table-borderless",striped:!0,keyField:"id",data:C,columns:P,selectRow:{mode:"checkbox",clickToSelect:!0,classes:"selected",selected:_,onSelect:N,onSelectAll:A},defaultSorted:[b],pagination:f.default({page:j(),sizePerPage:u,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"10",value:10},{text:"30",value:30},{text:"50",value:50},{text:"100",value:100}],onPageChange:x,onSizePerPageChange:I})})))}))}},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(0)),f=n(2),p=o(n(1)),m=c(n(19)),h=o(n(20)),g=o(n(4)),v=c(n(3)),b=c(n(5)),y=c(n(10)),E=c(n(27)),_=c(n(172)),w=c(n(173)),S=c(n(84)),P=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.controller=new AbortController,r.editClick=function(e,t){var n=r.state.agencies.find((function(t){return t.agency.id===e})),a=p.get(n,"agency");r.setState({editAgency:a,showEditModal:!0,writeAccess:t})},r.deleteClick=function(e){var t=r.state.agencies.find((function(t){return t.agency.id===e})),n=p.get(t,"agency");r.setState({showDeleteConfirm:!0,deleteId:e,deleteAgency:n})},r.deleteAgency=function(){return u(r,void 0,void 0,(function(){var e=this;return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,g.Delete({path:"/api/agencies/"+this.state.deleteId})];case 1:return t.sent(),this.setState({showDeleteConfirm:!1,showLoader:!0},(function(){return u(e,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return[4,g.Get({path:"/api/agencies/statistics",qs:this.props.options})];case 1:return e=n.sent(),this.setState({agencies:e,showLoader:!1}),t=p.get(this.state.deleteAgency,"name",""),this._notificationSystem.addNotification(h.success(d.default.createElement("span",null,"Agency ",d.default.createElement("strong",null,t)," deleted."),!1)),[2]}}))}))})),[3,3];case 2:return t.sent(),this.setState({showDeleteConfirm:!1,showLoader:!1}),this._notificationSystem.addNotification(h.error("Error deleting agency.")),[3,3];case 3:return[2]}}))}))},r.handleSubmit=function(e,t){return u(r,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return e>0?[4,this.updateAgency(e,t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,this.addAgency(t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},r._notificationSystem=null,r.setNotificationSystemRef=function(e){r._notificationSystem=e},r.state={agencies:[],showLoader:!0,showAddModal:!1,showEditModal:!1,writeAccess:!1,showDeleteConfirm:!1,editAgency:null,deleteId:-1,deleteAgency:null,error:!1,errorMessage:""},r}return a(t,e),t.prototype.componentDidMount=function(){return u(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,g.Get({path:"/api/agencies/statistics",qs:this.props.options,signal:this.controller.signal})];case 1:return e=t.sent(),this.setState({agencies:e,showLoader:!1}),[3,3];case 2:return"AbortError"===t.sent().name?this.setState({showLoader:!0,error:!1,errorMessage:""}):this.setState({error:!0,errorMessage:"Error loading agencies.",showLoader:!1}),[3,3];case 3:return[2]}}))}))},t.prototype.componentWillReceiveProps=function(e){var t=this;p.isEqual(e.options,this.props.options)||this.setState({showLoader:!0,error:!1,errorMessage:""},(function(){return u(t,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.controller.abort(),this.controller=new AbortController,[4,g.Get({path:"/api/agencies/statistics",qs:e.options,signal:this.controller.signal})];case 1:return t=n.sent(),this.setState({agencies:t,showLoader:!1}),[3,3];case 2:return"AbortError"===n.sent().name?this.setState({showLoader:!0,error:!1,errorMessage:""}):this.setState({error:!0,errorMessage:"Error loading agencies.",showLoader:!1}),[3,3];case 3:return[2]}}))}))}))},t.prototype.componentWillUnmount=function(){this.controller.abort()},t.prototype.addAgency=function(e){return u(this,void 0,void 0,(function(){var t=this;return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,g.Post({path:"/api/agencies",body:e})];case 1:return n.sent(),this.setState({showAddModal:!1,showLoader:!0},(function(){return u(t,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return[4,g.Get({path:"/api/agencies/statistics",qs:this.props.options})];case 1:return t=n.sent(),this.setState({agencies:t,showLoader:!1,editAgency:null}),this._notificationSystem.addNotification(h.success(d.default.createElement("span",null,"Agency ",d.default.createElement("strong",null,e.name)," created."),!1)),[2]}}))}))})),[3,3];case 2:return n.sent(),this.setState({showAddModal:!1,editAgency:null}),this._notificationSystem.addNotification(h.error("Error creating agency.")),[3,3];case 3:return[2]}}))}))},t.prototype.updateAgency=function(e,t){return u(this,void 0,void 0,(function(){var n=this;return s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,g.Put({path:"/api/agencies/"+e,body:t})];case 1:return r.sent(),this.setState({showEditModal:!1,editAgency:null,showLoader:!0},(function(){return u(n,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return[4,g.Get({path:"/api/agencies/statistics",qs:this.props.options})];case 1:return e=n.sent(),this.setState({agencies:e,showLoader:!1}),this._notificationSystem.addNotification(h.success(d.default.createElement("span",null,"Agency ",d.default.createElement("strong",null,t.name)," saved."),!1)),[2]}}))}))})),[3,3];case 2:return r.sent(),this.setState({showEditModal:!1,editAgency:null}),this._notificationSystem.addNotification(h.error("Error updating agency.")),[3,3];case 3:return[2]}}))}))},t.prototype.render=function(){var e=this;if(this.state.error)return d.default.createElement("div",{className:"col-sm-12 pt-3"},d.default.createElement("div",{className:"card"},d.default.createElement("h3",null,d.default.createElement(y.default,{message:this.state.errorMessage}))));var t=p.get(this.state.deleteAgency,"name","");return d.default.createElement("div",{className:"col-sm-12 pt-3"},d.default.createElement("div",{className:"card mb-2"},d.default.createElement("h3",{className:"pull-left"},"Agencies"),d.default.createElement("div",{className:"table-btn-container"},this.props.rights.MANAGE_ORGANIZATION&&d.default.createElement(f.Button,{size:"sm",variant:"primary",onClick:function(){e.setState({showAddModal:!0})}},d.default.createElement(v.default,{name:"plus"})," ADD")),d.default.createElement(b.default,{visible:this.state.showLoader}),!this.state.showLoader&&d.default.createElement(_.default,{agencies:this.state.agencies,user:this.props.user,rights:this.props.rights,videoMode:this.props.videoMode,editClick:this.editClick,deleteClick:this.deleteClick})),d.default.createElement(w.default,{show:this.state.showAddModal,scope:this.props.options.scope,scopeId:this.props.options.scopeId,onClose:function(){e.setState({showAddModal:!1})},onSubmit:this.handleSubmit}),d.default.createElement(S.default,{show:this.state.showEditModal,agency:this.state.editAgency,writeAccess:this.state.writeAccess,onClose:function(){e.setState({showEditModal:!1,editAgency:null})},onSubmit:this.handleSubmit}),d.default.createElement(E.default,{message:"Delete agency "+t+"?",show:this.state.showDeleteConfirm,onClose:function(){return e.setState({showDeleteConfirm:!1})},onConfirm:this.deleteAgency}),d.default.createElement(m.default,{ref:this.setNotificationSystemRef}))},t}(d.Component);t.default=P},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).createContext({adServerUrl:""});t.default=r},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(43),s=n(2),c=n(44),d=i(n(22)),f=l(n(3)),p=i(n(7));t.default=function(e){var t="https://www.npostart.nl/matthijs-gaat-door/02-10-2021/BV_101406586",n=o.useState(t),r=n[0],a=n[1],i=o.useState(!1),l=i[0],m=i[1],h=o.useState({error:!1,message:""}),g=h[0],v=h[1],b=o.useRef(null),y=function(){e.onClose()};var E=d.addQueryParam(r,{ster_preview_id:e.id.toString()});return o.default.createElement(s.Modal,{size:"lg",show:e.show,onEntering:function(){a(t),v({error:!1,message:""})},onHide:y,backdrop:"static"},o.default.createElement(s.Modal.Header,{closeButton:!0},o.default.createElement(s.Modal.Title,null,"Ad share - id: ",e.id)),o.default.createElement(s.Modal.Body,null,e.id>0&&o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-lg-12"},o.default.createElement(s.Form.Group,{controlId:"ad-type"},o.default.createElement(s.Form.Label,null,"Preview url"),o.default.createElement(s.Form.Control,{autoFocus:!0,type:"text",value:r,isInvalid:g.error,onChange:function(e){var t=e.target.value,n=p.url(t,!0);a(t),v(n)}}),g.error&&o.default.createElement(s.Form.Control.Feedback,{type:"invalid"},g.message)),o.default.createElement(s.Form.Group,{controlId:"ad-type"},o.default.createElement(s.Form.Label,null,"Share link"),o.default.createElement("div",{className:l?"gray-box mb-2 highlight-box":"gray-box mb-2"},E))))),o.default.createElement(s.Modal.Footer,null,o.default.createElement(s.Button,{variant:"light",size:"sm",onClick:y},"CANCEL"),o.default.createElement(c.CopyToClipboard,{text:E,onCopy:function(){m(!0),setTimeout((function(){m(!1)}),2e3)}},o.default.createElement("button",{ref:b,className:"btn btn-primary btn-sm"},o.default.createElement(f.default,{name:"files-o"})," GET LINK")),o.default.createElement(s.Overlay,{target:u.findDOMNode(b.current),show:l,placement:"bottom"},o.default.createElement(s.Tooltip,{id:"copy-share-tag-tooltip"},"Copied!"))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(9)),c=i(n(1)),d=i(n(8)),f=l(n(3)),p=l(n(249)),m=l(n(250));t.default=function(e){var t=o.useState(!0),n=t[0],r=t[1],a=o.useState(!0),i=a[0],l=a[1];var h=c.get(e,"rule.attribute",""),g=d.findGroupSelectOption(e.attributes,h),v=c.get(g,"isList",!1),b=c.get(g,"acceptAnyValue",!1),y=c.get(g,"listsAllowed",!1),E=c.get(g,"label",""),_=[{value:"REQUIRED",label:"Required for bid"},{value:"LIMIT_BID",label:"Bid no more than"},{value:"INCREASE_BID_PERCENTAGE",label:"Increase bid"},{value:"DECREASE_BID_PERCENTAGE",label:"Decrease bid"},{value:"NO_BID",label:"No bid"}],w=c.get(e,"rule.consequence"),S=c.get(e,"rule.condition"),P=o.default.createElement(u.Tooltip,{id:"strategy-rule-delete-tooltip-"+e.strategyId+"-"+e.index},"delete rule"),C=d.getPopperConfig();return o.default.createElement("div",{className:"strategy-rule"},o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-12 px-2"},o.default.createElement(u.OverlayTrigger,{placement:"top",overlay:P,popperConfig:C},o.default.createElement("a",{href:"",className:"table-btn-lg pull-right",onClick:function(t){t.preventDefault(),e.writeAccess&&e.onDelete(e.index)}},o.default.createElement(f.default,{name:"remove"}))))),o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-3 px-2"},o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,v&&o.default.createElement(f.default,{name:"list"})," Condition"),o.default.createElement(s.default,{isDisabled:!e.writeAccess,inputId:"react-select-strategy-rule-attribute-"+e.strategyId+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",name:"attribute-select",value:g,clearable:!1,onChange:function(t){var r=c.assign({},e.rule,{attribute:t.value,condition:{values:[],displayNames:[]}});e.onChange(e.index,r,n&&i)},options:e.attributes}))),o.default.createElement("div",{className:"col-lg-3 px-2"},o.default.createElement(p.default,{index:e.index,writeAccess:e.writeAccess,strategyId:e.strategyId,options:_,consequence:w,maxBidPrice:e.maxBidPrice,onChange:function(t,n){var a=c.assign({},e.rule,{consequence:t});r(n),e.onChange(e.index,a,n&&i)}})),o.default.createElement("div",{className:"col-lg-6 px-2"},o.default.createElement(m.default,{index:e.index,writeAccess:e.writeAccess,strategyId:e.strategyId,campaignId:e.campaignId,condition:S,attribute:h,attributeName:E,acceptAnyValue:b,listsAllowed:y,isList:v,createLists:e.createLists,listModalScope:e.listModalScope,listModalScopeId:e.listModalScopeId,listModalMaxLevel:e.listModalMaxLevel,onChange:function(t,r){var a=c.assign({},e.rule,{condition:t});l(r),e.onChange(e.index,a,r&&n)}}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(0)),u=l(n(11)),s=n(2),c=i(n(21)),d=l(n(3));t.default=function(e){var t=c.getStatus(e.isActive,e.startTime,e.endTime,e.status),n=e.endTime<u.default().unix()||"archived"===e.status||!e.rights.MANAGE_CAMPAIGN;return"ended"===t?o.default.createElement("button",{disabled:n,className:"btn btn-linkbutton btn-sm",onClick:e.onClick},o.default.createElement(d.default,{name:"stop"})," ENDED"):"scheduled"===t?o.default.createElement(s.Button,{variant:"warning",size:"sm",disabled:n,onClick:e.onClick},o.default.createElement(d.default,{name:"pause"})," UNSCHEDULE"):"not scheduled"===t?o.default.createElement(s.Button,{variant:"success",size:"sm",disabled:n,onClick:e.onClick},o.default.createElement(d.default,{name:"play"})," SCHEDULE"):"active"===t?o.default.createElement(s.Button,{variant:"warning",size:"sm",disabled:n,onClick:e.onClick},o.default.createElement(d.default,{name:"pause"})," PAUSE"):"paused"===t?o.default.createElement(s.Button,{variant:"success",size:"sm",disabled:n,onClick:e.onClick},o.default.createElement(d.default,{name:"play"})," ACTIVATE"):"archived"===t?o.default.createElement("button",{disabled:n,className:"btn btn-linkbutton btn-sm",onClick:e.onClick},o.default.createElement(d.default,{name:"archive"})," ARCHIVED"):null}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(0)),d=n(6),f=n(2),p=s(n(9)),m=i(n(1)),h=s(n(25)),g=s(n(5)),v=s(n(265)),b=s(n(19)),y=i(n(20)),E=i(n(4)),_=i(n(8)),w=i(n(36)),S=i(n(100)),P=i(n(49)),C=s(n(10)),O=s(n(62)),x=s(n(3)),I=s(n(53)),N=s(n(50)),A=s(n(266)),j=s(n(28));t.default=function(e){var t,n=d.useHistory(),r=c.useContext(O.default),a=new URLSearchParams(location.search),i=c.useContext(j.default),s=i.attributeId,M=i.updateAttributeId,k=i.attributeId2,F=i.updateAttributeId2,D=i.filters,T=i.updateFilters,R=(t=e.videoMode?"VideoStatistics":"DisplayStatistics",r.find((function(e){return"Default"===e.presetName&&e.groupName===t}))),B=m.get(R,"id",-1),G=Ne(),L=G.map((function(e){return e.col})),V=_.getSelectedMetrics(e.user.email,L,B),z=P.getStatisticFilters(D),q=function(){var t={scope:e.options.scope,attributeId:s,startDate:e.options.startDate,endDate:e.options.endDate,limit:h.default.MAX_API_LIMIT,filter:D,videoMetrics:(e.videoMode||!1).toString(),simple:"false",aggregator:"name"};void 0!==e.options.scopeId&&(t.scopeId=e.options.scopeId);return t}(),Y=c.useState(!1),U=Y[0],H=Y[1],W=c.useState({}),J=W[0],X=W[1],K=c.useState({}),Z=K[0],$=K[1],Q=c.useState(void 0),ee=Q[0],te=Q[1],ne=c.useState(G),re=ne[0],ae=ne[1],ie=c.useState(V),le=ie[0],oe=ie[1],ue=c.useState(z),se=ue[0],ce=ue[1],de=c.useState(""),fe=de[0],pe=de[1],me=c.useState(!1),he=me[0],ge=me[1],ve=c.useState(!1),be=ve[0],ye=ve[1],Ee=c.useState(!1),_e=Ee[0],we=Ee[1],Se=c.useState(""),Pe=Se[0],Ce=Se[1],Oe=c.useRef(null),xe=c.useRef(null);function Ie(){Oe.current&&Oe.current.abort()}function Ne(){return m.get(R,"metrics",[]).map(Ae)}function Ae(e){var t=e.fieldName,n=e.displayName,r=["number","euro"].indexOf(e.format)>-1?"right":"left",a=e.format;return"euro"===a&&(a="money"),"percentage"===a&&(a="perc"),{col:t,label:n,align:r,type:a}}c.useEffect((function(){return Ie}),[]),c.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var e,t;return o(this,(function(n){switch(n.label){case 0:H(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),Ie(),Oe.current=new AbortController,[4,E.Get({path:"/api/statistics",qs:q,signal:Oe.current.signal})];case 2:return e=n.sent(),te(e),H(!1),[3,4];case 3:return t=n.sent(),console.log(t),"AbortError"===t.name?(we(!1),Ce("")):(we(!0),Ce("Error loading statistics."),H(!1)),[3,4];case 4:return[2]}}))}))}()}),[JSON.stringify(q),k]),c.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,E.Get({path:"/api/attributes/statistics",qs:{scope:e.options.scope,scopeId:e.options.scopeId,video:e.videoMode.toString()}})];case 1:return t=r.sent(),X(t),[3,3];case 2:return n=r.sent(),console.log(n),[3,3];case 3:return[2]}}))}))}(),function(){l(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,P.getFilterAttributes({scope:e.options.scope,scopeId:e.options.scopeId,video:e.videoMode.toString()})];case 1:return t=r.sent(),$(t),[3,3];case 2:return n=r.sent(),console.log(n),[3,3];case 3:return[2]}}))}))}()}),[e.videoMode]),c.useEffect((function(){var t=Ne();ae(t);var n=t.map((function(e){return e.col})),r=_.getSelectedMetrics(e.user.email,n,B);oe(r)}),[e.videoMode,r]);var je=function(e){var t=se.concat();t.length>0&&(t.splice(e,1),ce(t)),0===t.length&&(a.delete("filters[]"),T([]),n.push(location.pathname+"?"+a.toString()))},Me=function(e,t){var n=se.concat();n[e]=t,ce(n)};function ke(e,t,n){var r=Fe(t,n)?"perc":n.type,a=m.assign({},n,{type:r}),i=w.format(a),l=w.cellFormatter(e,a);return w.getCell(l,null,i)}function Fe(e,t){return 1===e&&["number","money","perc"].indexOf(t.type)>-1}function De(e,t){return 0===e?{col:"displayName",label:"date",align:"left"}:{col:"displayName",label:m.get(t,"label",""),align:"left"}}if(_e)return c.default.createElement("div",{className:"col-sm-12 pt-3"},c.default.createElement("div",{className:"card mb-2"},c.default.createElement("h3",null,c.default.createElement(C.default,{message:Pe}))));var Te=_.attributeIdOptions(J),Re=[{value:0,label:"Per day"}].concat(Te),Be=[{value:-1,label:"Secondary dimension"},{value:0,label:"Per day"}].concat(Te),Ge=[{value:-1,label:"Select dimension"}].concat(_.attributeIdOptions(Z)),Le=S.getAttributeValue(s,Re),Ve=S.getAttribute2Value(k,Be),ze=re.map((function(e){return{value:e.col,label:e.label||e.col}})),qe=function(e,t){var n=function(e,t,n){var r;return 0===e?(r={col:"displayName",label:"date",align:"left",sort:0},-1!==t&&(r.sort=1)):(r={col:"displayName",label:m.get(n,"label",""),align:"left",sort:1},-1!==t&&(r.sort=2)),r}(s,k,t),r=e.concat();return r.unshift(n),r}(re,Le);return c.default.createElement("div",{className:"col-sm-12 pt-3"},c.default.createElement("div",{className:"card mb-2"},c.default.createElement("div",null,c.default.createElement("h3",{className:"pull-left"},"Statistics"),c.default.createElement("div",{className:"pull-left ml-2 mt-1"},c.default.createElement(f.Button,{size:"sm",variant:"primary",onClick:function(){ce(u(u([],se),[{attributeId:-1,condition:"in",values:[]}]))}},c.default.createElement(x.default,{name:"plus"})," ADD FILTER")),!U&&c.default.createElement("div",{className:"table-btn-container statistics"},c.default.createElement("div",{className:"width-200 d-inline-block mr-2"},c.default.createElement(p.default,{inputId:"react-select-statistics-attribute",className:"react-select-container",classNamePrefix:"react-select",name:"attribute-select",value:Le,clearable:!1,onChange:function(e){var t=e.value;a.set("attributeId",t.toString()),M(t),n.push(location.pathname+"?"+a.toString())},options:Re})),c.default.createElement("div",{className:"width-200 d-inline-block mr-2"},c.default.createElement(p.default,{inputId:"react-select-statistics-attribute2",className:"react-select-container",classNamePrefix:"react-select",name:"attribute-select",value:Ve,clearable:!1,onChange:function(e){var t=e.value;a.set("attributeId2",t.toString()),F(t),n.push(location.pathname+"?"+a.toString())},options:Be})),c.default.createElement(f.DropdownButton,{alignRight:!0,size:"sm",className:"mr-2",title:c.default.createElement(c.Fragment,null,c.default.createElement(x.default,{name:"filter"})," METRICS (",le.length,"/",re.length,")"),id:"statistics-metrics-dropdown-menu"},c.default.createElement(I.default,{id:"statistics-metrics-cb-list",listClassNames:"metrics-list",options:ze,selectAll:!0,checked:le,onChange:function(t){_.storeSelectedMetrics(e.user.email,t,R.id),oe(t)}})),c.default.createElement(f.Button,{variant:"primary",size:"sm",className:"mr-2",onClick:function(){ge(!0)}},c.default.createElement(x.default,{name:"download"})," REPORT"),c.default.createElement("div",{className:"d-inline-block mr-2"},c.default.createElement("div",{className:"search-label-container"},c.default.createElement(x.default,{name:"search"}),c.default.createElement("label",{className:"search-label"},c.default.createElement(f.Form.Control,{type:"text",placeholder:"Filter records",value:fe,onChange:function(e){pe(e.target.value)}})))))),c.default.createElement("div",{style:{maxWidth:"800px"}},se.map((function(e,t){return c.default.createElement(N.default,{index:t,filter:e,writeAccess:!0,attributes:Ge,onChange:Me,onDelete:je})}))),c.default.createElement("div",null,se.length>0&&c.default.createElement("button",{className:"mr-2 btn btn-primary btn-xs",onClick:function(){var e=P.getFilters(se);T(e),a.delete("filters[]"),e.forEach((function(e){a.append("filters[]",e)})),n.push(location.pathname+"?"+a.toString())}},c.default.createElement(x.default,{name:"search"})," APPLY FILTERS"),se.length>0&&c.default.createElement("button",{className:"mr-2 btn btn-primary btn-xs",onClick:function(){T([]),a.delete("filters[]"),ce([]),n.push(location.pathname+"?"+a.toString())}},c.default.createElement(x.default,{name:"remove"})," CLEAR FILTERS")),c.default.createElement(g.default,{visible:U}),!U&&c.default.createElement(v.default,{id:"statistics-table",options:e.options,data:ee,attributeId:s,attributeId2:k,attributeFormat:m.get(Le,"attributeFormat")||0,attributeFormat2:m.get(Ve,"attributeFormat")||0,metrics:qe,checked:le,search:fe,filter:D}),c.default.createElement(A.default,{id:"statistics-report",show:he,downloading:be,metrics:re,selectedMetrics:le,attributeId:s,attributeId2:k,attributeOptions:Re,attribute2Options:Be,filterOptions:Ge,filters:P.getFilters(se),onClose:function(){ge(!1),ye(!1)},onSubmit:function(t){return l(void 0,void 0,void 0,(function(){var n,r,a;return o(this,(function(i){switch(i.label){case 0:ye(!0),n=function(t){var n=t.daterange.startDate.format("YYYY-MM-DD"),r=t.daterange.endDate.format("YYYY-MM-DD"),a={scope:e.options.scope,attributeId:t.attributeId,startDate:n,endDate:r,limit:h.default.MAX_API_LIMIT,filter:t.filters,videoMetrics:e.videoMode.toString(),simple:"false",aggregator:"name"};return void 0!==e.options.scopeId&&(a.scopeId=e.options.scopeId),-1!==t.attributeId2&&(a.attributeId2=t.attributeId2,a.limit2=100),a}(t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,E.Get({path:"/api/statistics",qs:n})];case 2:return r=i.sent(),a=function(e,t){var n=t.selectedMetrics.map((function(e){return w.getBoldCell(e.label||e.col)})),r=_.attributeIdOptions(J),a=[{value:0,label:"Per day"}].concat(r),i=S.getAttributeValue(t.attributeId,a),l=De(t.attributeId,i),o=m.get(i,"attributeFormat")||0,u=[];if(t.attributeId2<0){var s=[l].concat(t.selectedMetrics);n.unshift(w.getBoldCell(l.label)),u=[n],e.statisticList.forEach((function(e){var t=[];s.forEach((function(n){var r=ke(e,o,n);t.push(r)})),u.push(t)}))}else{var c=S.getAttributeValue(t.attributeId2,a),d=De(t.attributeId2,c),f=m.get(c,"attributeFormat")||0;n.unshift(w.getBoldCell(d.label)),n.unshift(w.getBoldCell(l.label)),u=[n],e.statisticList.forEach((function(e){var n=w.cellFormatter(e,l);if(t.includeTotal){var r=function(e,t,n,r){var a=[w.getBoldItalicCell(t),w.getCell("")];return n.forEach((function(t){var n=Fe(r,t)?"perc":t.type,i=m.assign({},t,{type:n}),l=w.format(i),o=w.cellFormatter(e,i),u=w.getBoldItalicCell(o,l);a.push(u)})),a}(e,n,t.selectedMetrics,o);u.push(r)}e.statisticList&&e.statisticList.length>0&&e.statisticList.forEach((function(e){var r=w.cellFormatter(e,d),a=[w.getCell(n),w.getCell(r)];t.selectedMetrics.forEach((function(t){var n=ke(e,f,t);a.push(n)})),u.push(a)}))}))}var p=function(e,t,n){var r=[w.getBoldCell("Total")];n>0&&r.push(w.getCell(""));return t.forEach((function(t){var n=w.format(t),a=w.cellFormatter(e,t);r.push(w.getBoldCell(a,n))})),r}(e.summary,t.selectedMetrics,t.attributeId2);return u.push(p),u}(r,t),w.save(a,"Statistics","Statistics_"+n.startDate+"_"+n.endDate),[3,4];case 3:return i.sent(),xe.current.addNotification(y.error("Error loading statistics report data.")),[3,4];case 4:return ye(!1),[2]}}))}))}}),c.default.createElement(b.default,{ref:xe})))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getAttribute2Value=t.getAttributeValue=void 0;var l=i(n(1));t.getAttributeValue=function(e,t){if(0===e)return{value:0,label:"Per day"};var n=t.concat();return n.shift(),l.flatMap(n,(function(e){return e.options})).find((function(t){return t.value===e}))};t.getAttribute2Value=function(e,t){if(0===e)return{value:0,label:"Per day"};if(-1===e)return{value:-1,label:"Secondary dimension"};var n=t.concat().slice(2);return l.flatMap(n,(function(e){return e.options})).find((function(t){return t.value===e}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=i(n(1)),s=l(n(62)),c=l(n(280));t.default=function(e){var t,n=o.useContext(s.default),r=(t=e.videoMode?"VideoKPIs":"DisplayKPIs",n.find((function(e){return"Default"===e.presetName&&e.groupName===t})));function a(e){var t=e.fieldName,n=e.displayName,r=["number","euro"].indexOf(e.format)>-1?"right":"left",a=e.format;return"euro"===a&&(a="money"),"percentage"===a&&(a="perc"),{col:t,label:n,align:r,type:a}}var i=u.get(r,"metrics",[]).map(a);return o.default.createElement(c.default,{data:e.data,metrics:i})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.mosaicGraph=t.choroplethMap=t.createAttributeGraph=t.chartColumns=void 0;var l=i(n(1)),o=n(296);t.chartColumns=function(e,t){var n=l.orderBy(e.data,"id","asc");if("donut"===e.type)return n.map((function(e){return[e.name,e[t.value]]}));if("bar"===e.type){var r=[["x"],[t.label]],a=l.sumBy(n,t.value);return r[0]=r[0].concat(n.map((function(e){return e.name}))),r[1]=r[1].concat(n.map((function(e){return c(e,a,t)}))),r}};t.createAttributeGraph=function(e,t,n){return"donut"==n.type?function(e,t,n){var r={data:{type:"donut"},donut:{title:t.property},axis:{x:{show:!1}}};return $.extend(!0,d(e),r,n)}(e,t,n):"bar"==n.type?function(e,t){return $.extend(!0,d(e),{padding:{top:0,right:20,bottom:0,left:60},legend:{show:!1},data:{type:"bar",x:"x"},axis:{x:{type:"category",tick:{rotate:60,multiline:!1}}}},t)}(e,n):void 0};t.choroplethMap=function(e,t,n,r){$(e).html(""),$(e).addClass("choropleth-map");var a=function(e,t){var n=l.sumBy(e.data,t.value),r=l.keyBy(e.data,"id");return l.assign({},o.regionsJson).features.map((function(e){var a=l.assign({},e);return r[a.properties.id]?(a.properties.value=r[a.properties.id][t.value],a.properties.percentage=c(r[a.properties.id],n,t),a.properties.displayName=r[a.properties.id].name):(a.properties.value=0,a.properties.percentage=0,a.properties.displayName=a.properties.name),a}))}(t,n),i=d3.geoCentroid(o.regionsJson),d=[r.width/2,r.height/2],f=d3.geoMercator().scale(r.scale).center(i).translate(d),p=s(t,n),m=d3.scaleLinear().domain(p).range(["#e8f7fc","#15779e"]),h=d3.geoPath().projection(f),g=d3.select(e).append("svg").attr("width",r.width).attr("height",r.height),v=d3.select("body").append("div").attr("class","map-tooltip").style("opacity",0);g.selectAll("path").data(a).enter().append("path").attr("d",h).style("stroke","#fff").style("stroke-width","1").style("fill",(function(e){return 0===e.properties.value?"#ddd":m(e.properties.value)})).on("mouseover",(function(e){v.transition().duration(500).style("opacity",1),v.html(u(e.properties.displayName,e.properties.percentage,n)).style("left",d3.event.pageX+15+"px").style("top",d3.event.pageY-30+"px")})).on("mouseout",(function(e){v.transition().duration(500).style("opacity",0)})),g.append("g").attr("class","labels").selectAll(".map-label").data(a).enter().append("text").attr("class","map-label").attr("transform",(function(e){return"translate("+h.centroid(e)+")"})).style("text-anchor","middle").text((function(e){return e.properties.percentage+"%"}))};function u(e,t,n){return"<div><strong>"+e+"</strong></div><div>"+n.label+" "+t+"%</div>"}function s(e,t){return void 0===l.minBy(e.data,t.value)?[0,0]:[l.minBy(e.data,t.value)[t.value],l.maxBy(e.data,t.value)[t.value]]}function c(e,t,n){return 0===t?0:l.round(100*e[n.value]/t,2)}function d(e){return{size:{height:275},padding:{top:0,right:20,bottom:0,left:40},color:{pattern:["#089bc2","#96c03d","#f58129","#a62174","#1f3364","#ccc"]},bindto:e,legend:{show:!0},point:{show:!1}}}t.mosaicGraph=function(e,t,n){var r=l.sumBy(t.data,n.value),a=l.keyBy(t.data,"id"),i=s(t,n),o=d3.scaleLinear().domain(i).range([50,150]),d='<div class="mosaic-groups">',f={AO1:{id:946,top:1292,left:972},AO2:{id:947,top:1292,left:1168},AO3:{id:948,top:1292,left:1448},AO4:{id:949,top:1292,left:1802},BO5:{id:950,top:1210,left:708},BO6:{id:951,top:1126,left:708},BO7:{id:952,top:1082,left:870},BO8:{id:953,top:1020,left:780},CO9:{id:954,top:1166,left:972},C10:{id:955,top:1116,left:1088},C11:{id:956,top:1090,left:1218},C12:{id:957,top:1090,left:1346},C13:{id:958,top:1090,left:1476},C14:{id:959,top:1142,left:1596},C15:{id:960,top:1020,left:1554},D16:{id:961,top:1036,left:1720},D17:{id:962,top:1036,left:1930},D18:{id:963,top:1102,left:2010},D19:{id:964,top:1168,left:1930},E20:{id:965,top:912,left:922},E21:{id:966,top:820,left:884},E22:{id:967,top:820,left:948},E23:{id:968,top:702,left:980},E24:{id:969,top:702,left:1100},F25:{id:970,top:820,left:1040},F26:{id:971,top:844,left:1116},F27:{id:972,top:862,left:1246},F28:{id:973,top:862,left:1358},F29:{id:974,top:862,left:1472},F30:{id:975,top:804,left:1510},G31:{id:976,top:724,left:1684},G32:{id:977,top:724,left:1752},G33:{id:978,top:864,left:1770},G34:{id:979,top:864,left:1860},G35:{id:980,top:802,left:2002},H36:{id:981,top:594,left:1128},H37:{id:982,top:612,left:1272},H38:{id:983,top:680,left:1568},H39:{id:984,top:602,left:1470},H40:{id:985,top:602,left:1670},H41:{id:986,top:540,left:1740},H42:{id:987,top:602,left:1838},I43:{id:988,top:490,left:1038},I44:{id:989,top:490,left:1182},I45:{id:990,top:432,left:1104},I46:{id:991,top:370,left:1182},I47:{id:992,top:464,left:1306},I48:{id:993,top:464,left:1440},I49:{id:994,top:370,left:1398},J50:{id:995,top:428,left:1544},J51:{id:996,top:480,left:1626},J52:{id:997,top:480,left:1866},J53:{id:998,top:428,left:1934},J54:{id:999,top:378,left:1802},K55:{id:1e3,top:280,left:1278},K56:{id:1001,top:228,left:1396},K57:{id:1002,top:280,left:1490},K58:{id:1003,top:178,left:1540},K59:{id:1004,top:280,left:1756}};l.forEach(f,(function(e,t){if(a[e.id]&&a[e.id][n.value]){var i=a[e.id][n.value],l=c(a[e.id],r,n),s=a[e.id].name,f=Math.round(o(i));d+='<div data-toggle="popover" data-placement="top" data-content="'+u(s,l,n)+'" class="mosaic-bubble" style="'+function(e,t){return"border-radius: "+e/2+"px;width:"+e+"px;height:"+e+"px;line-height:"+e+"px;top:"+(t.top-e/2)+"px;left: "+(t.left-e/2)+"px"}(f,e)+'"><strong>'+l+"%</strong></div>"}})),d+="</div>",$(e).html(d)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(0)),l=a(n(310)),o=a(n(311)),u=a(n(312)),s=a(n(313));t.default=function(e){return e.ad?5==e.ad.type&&1==e.ad.local?i.default.createElement(u.default,r({},e)):0!=e.ad.local||6!=e.ad.type&&7!=e.ad.type?0==e.ad.local?i.default.createElement(o.default,r({},e)):i.default.createElement(l.default,r({},e)):i.default.createElement(s.default,r({},e)):"video"===e.adType?i.default.createElement(u.default,r({},e)):"vast"===e.adType?i.default.createElement(s.default,r({},e)):"thirdparty"===e.adType?i.default.createElement(o.default,r({},e)):"banner"===e.adType?i.default.createElement(l.default,r({},e)):null}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(9)),c=l(n(3)),d=i(n(7));t.default=function(e){var t=o.useState("impression"),n=t[0],r=t[1],a=o.useState(""),i=a[0],l=a[1],f=o.useState({error:!1,message:""}),p=f[0],m=f[1];o.useEffect((function(){if(e.item){var t=e.item.type,n=e.item.url;r(t),l(n)}}),[e.item]);var h=[{value:"impression",label:"Impression"},{value:"click",label:"Click"},{value:"start",label:"Start"},{value:"firstQuartile",label:"25% video complete"},{value:"midpoint",label:"50% video complete"},{value:"thirdQuartile",label:"75% video complete"},{value:"complete",label:"Video complete"}];return o.default.createElement("div",null,o.default.createElement("div",{className:"array-row"},o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-4 px-1"},o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Event type"),o.default.createElement(s.default,{inputId:"react-select-tracking-type-"+e.index,className:"react-select-container",classNamePrefix:"react-select",onChange:function(t){var n=t.value;r(n),e.onChange(e.index,{type:n,url:i,key:e.item.key},!p.error)},value:h.find((function(e){return e.value===n})),options:h}))),o.default.createElement("div",{className:"col-lg-8 px-1"},o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Tracking url"),o.default.createElement(u.Form.Control,{id:"react-select-tracking-url-"+e.index,type:"text",isInvalid:p.error,value:i,onChange:function(t){var r=t.target.value,a=d.url(r,!0);l(r),m(a),e.onChange(e.index,{type:n,url:r,key:e.item.key},!a.error)}}),p.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},p.message))))),o.default.createElement("div",{className:"array-row-remove-btn",style:{marginTop:"28px"}},o.default.createElement("a",{href:"",className:"table-btn",onClick:function(t){t.preventDefault(),e.onDelete(e.index)}},o.default.createElement(c.default,{name:"remove"}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(3));t.default=function(e){var t=o.useState(a),n=t[0],r=t[1];function a(){return o.createElement("span",null," ",e.numberItems+" "+e.labelName," ",o.createElement(s.default,{name:e.collapseState?"angle-up":"angle-down"}))}return o.useEffect((function(){return r(a)}),[e.numberItems,e.collapseState]),o.createElement(u.Button,{id:e.id,variant:e.buttonStyle,onClick:function(){return function(){var t,n="true"===(null===(t=document.getElementById(e.id))||void 0===t?void 0:t.getAttribute("aria-expanded"));e.setCollapseState(n)}()},"data-toggle":"collapse","data-target":"#"+e.divId,"aria-expanded":"false"},n)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=i(n(1)),c=i(n(7)),d=n(51),f=l(n(66)),p=l(n(107));t.default=function(e){var t,n,r,a,i=o.useState(!1),l=i[0],m=i[1],h=o.useState(""),g=h[0],v=h[1],b=o.useState(""),y=b[0],E=b[1],_=o.useState(""),w=(_[0],_[1]),S=o.useState({error:!1,message:""}),P=S[0],C=S[1],O=o.useState(D()),x=O[0],I=O[1],N=o.useState(x),A=N[0],j=N[1],M=o.useState(null===(n=null===(t=null==e?void 0:e.site)||void 0===t?void 0:t.consentSettings)||void 0===n?void 0:n.geoFromIpAllowed),k=M[0],F=M[1];function D(){return e.site?d.flattenAdslotSites("site",e.site,e.allowedCustoms):e.publisherSettings?d.flattenAdslotPublisher("site",e.publisherSettings,e.allowedCustoms):[]}function T(){v(""),E(""),w(""),I([]),C({error:!1,message:""}),m(!1),I([])}return o.createElement(u.Modal,{show:e.show,onHide:function(){e.handleClose(),T()},onEntering:function(){var t,n,r=(null===(n=null===(t=null==e?void 0:e.site)||void 0===t?void 0:t.siteProperties)||void 0===n?void 0:n.domain)||"",a=s.get(e,"site.exampleUrl")||"",i=s.get(e,"site.comments")||"";v(r),I(D()),E(a),w(i),m(!1)},backdrop:"static"},o.createElement(u.Modal.Header,{closeButton:!0},o.createElement(u.Modal.Title,null,"Site settings")),o.createElement(u.Modal.Body,null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-12"},o.createElement(u.FormGroup,{controlId:"adslot-name",className:P.error?"has-error":""},o.createElement(u.FormLabel,null,"Domain"),o.createElement(u.FormControl,{autoFocus:!0,readOnly:!e.writeAccess,type:"text",value:g,onChange:function(e){var t=e.target.value,n=c.required(t);v(t),C(n)}}),P.error&&o.createElement(u.Alert,null,P.message)),o.createElement(u.FormGroup,{controlId:"exampleUrl"},o.createElement(u.FormLabel,null,"example url"),o.createElement(u.FormControl,{readOnly:!e.writeAccess,type:"text",value:y,onChange:function(e){return E(e.target.value)}})),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-12"},o.createElement(p.default,{publisherSettings:null===(r=null==e?void 0:e.publisherSettings)||void 0===r?void 0:r.consentSettings,siteSettings:null===(a=null==e?void 0:e.site)||void 0===a?void 0:a.consentSettings,handleConsentChange:F,level:"site"}))),e.allowedCustoms&&e.allowedCustoms.length>0?o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-12"},o.createElement(f.default,{name:"Customs",options:D(),writeAccess:!0,handleCustomAttributeUpdate:function(e){j(e)}}))):null))),o.createElement(u.Modal.Footer,null,o.createElement(u.Button,{onClick:e.handleClose},"CANCEL"),o.createElement(u.Button,{variant:"primary",onClick:function(){var t,n,r=c.required(g);if(r.error)C(r);else{m(!0);var a=d.overwritablePropertiesToMap(A),i=null===(n=null===(t=null==e?void 0:e.publisherSettings)||void 0===t?void 0:t.consentSettings)||void 0===n?void 0:n.geoFromIpAllowed,l=s.assign({},i,k),o=s.assign({},k,i),u=JSON.stringify(l)==JSON.stringify(o)?{}:k,f=s.get(e,"site.id"),p={siteProperties:{domain:g},exampleUrl:y,customProperties:Object.fromEntries(a),consentSettings:{geoFromIpAllowed:u}};e.handleSubmit(f,p),T(),e.handleClose()}},disabled:l||!e.writeAccess},"SAVE")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),u=i(n(0)),s=l(n(9));t.default=function(e){var t,n,r,a=(null===(t=null==e?void 0:e.siteSettings)||void 0===t?void 0:t.geoFromIpAllowed)&&Object.values(null===(n=null==e?void 0:e.siteSettings)||void 0===n?void 0:n.geoFromIpAllowed).filter((function(e){return null!=e})).length>0?null===(r=null==e?void 0:e.siteSettings)||void 0===r?void 0:r.geoFromIpAllowed:e.publisherSettings.geoFromIpAllowed,i=u.useState(void 0!==a.truncateIpTo?a.truncateIpTo:32),l=i[0],c=i[1],d=u.useState(void 0!==a.fixedCountry?a.fixedCountry:"None"),f=d[0],p=d[1],m=[{label:"Allow",value:32},{label:"Truncate last octet",value:24},{label:"Do not allow",value:0}],h=[{label:"Netherlands",value:"Netherlands"},{label:"None",value:"None"}];return u.createElement(o.FormGroup,{className:"row"},u.createElement("div",{className:"col-sm-11 col-sm-mr-auto"},u.createElement(o.FormGroup,{className:"row"},u.createElement("div",{className:"col-sm-12 "},u.createElement(o.FormLabel,null," Ip to geo"),u.createElement(s.default,{options:m,isClearable:!0,isMulti:!1,defaultValue:m.find((function(e){return e.value==l})),onChange:function(t){c(t.value),e.handleConsentChange({truncateIpTo:t.value,fixedCountry:0==t.value?f:null})},value:m.find((function(e){return e.value==l}))})),0==l?u.createElement("div",{className:"col-sm-12 "},u.createElement(o.FormLabel,null," Set fixed country:"),u.createElement(s.default,{show:!1,options:h,isClearable:!0,isMulti:!1,defaultValue:h.find((function(e){return e.value==f})),onChange:function(t){p(t.value),e.handleConsentChange({truncateIpTo:l,fixedCountry:t.value})},value:h.find((function(e){return e.value==f}))})):null)))}},function(e,t){e.exports=require("react-tabtab/lib/helpers/move")},function(e,t){e.exports=require("styled-components")},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),i=r(n(374)),l=r(n(375));t.default=function(e){return"table"===e.type?a.default.createElement(i.default,{index:e.index,tabIndex:e.tabIndex,figure:e.figure,metricOptions:e.metricOptions,dimensionOptions:e.dimensionOptions,writeAccess:e.writeAccess,onChange:e.onChange,onDelete:e.onDelete}):a.default.createElement(l.default,{index:e.index,tabIndex:e.tabIndex,figure:e.figure,metricOptions:e.metricOptions,dimensionOptions:e.dimensionOptions,writeAccess:e.writeAccess,onChange:e.onChange,onDelete:e.onDelete})}},function(e,t){e.exports=require("image-size")},function(e,t){e.exports=require("multer")},function(e,t,n){e.exports=n(114)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(76)),u=l(n(115)),s=n(116)(u.default),c=n(117),d=l(n(118)),f=l(n(119)),p=l(n(77)),m=l(n(120)),h=l(n(121)),g=i(n(59)),v=i(n(122)),b=n(406),y=l(n(25)),E=l(n(80)),_=l(n(432)),w=l(n(433)),S=l(n(434)),P=l(n(435)),C=l(n(436)),O=l(n(437)),x=l(n(438)),I=l(n(444)),N=l(n(445)),A=l(n(446)),j=l(n(447)),M=l(n(448)),k=l(n(449)),F=l(n(450)),D=l(n(451)),T=l(n(452)),R=l(n(453)),B=l(n(454)),G=l(n(455)),L=l(n(456)),V=l(n(457)),z=l(n(458)),q=l(n(459)),Y=l(n(460)),U=l(n(461)),H=l(n(462)),W=l(n(463)),J=o.default(),X=new c.Server(J),K=f.default.Strategy,Z=new b.NOAX({host:g.backend,timeout:g.timeout}),$=new E.default(Z);J.use(o.default.static("public")),J.use(y.default.LOCAL_ADS_PREVIEW,o.default.static(y.default.LOCAL_BANNERS_DIR)),J.use(p.default.json({limit:1e7})),J.use(p.default.urlencoded({extended:!0,limit:1e7,parameterLimit:1e6})),J.use(h.default()),J.use(m.default());var Q={secret:"noclue",resave:!1,saveUninitialized:!1};g.useMemcached&&(Q.store=new s({hosts:g.memcachedHosts})),J.use(u.default(Q)),J.use(d.default.initialize()),J.use(d.default.session()),d.default.use("local",new K(v.localStrategyHandler($))),d.default.serializeUser((function(e,t){t(null,JSON.stringify(e))})),d.default.deserializeUser((function(e,t){t(null,JSON.parse(e))})),J.get("/logout",v.logoutHandler),J.route("/login").get(v.publicGetHandler).post(v.loginPostHandler(d.default)),J.get("/forgotPassword",v.publicGetHandler),J.get("/newPassword",v.newPasswordHandler),J.use("/api/login",new _.default(Z).router),J.use(v.ensureAuthenticated),J.use("/kb",o.default.static("manual/site")),J.use("/api/users",new w.default(Z).router),J.use("/api/organizations",new S.default(Z).router),J.use("/api/publishers",new P.default(Z).router),J.use("/api/agencies",new C.default(Z).router),J.use("/api/advertisers",new O.default(Z).router),J.use("/api/campaigngroups",new A.default(Z).router),J.use("/api/campaigns",new j.default(Z).router),J.use("/api/lists",new M.default(Z).router),J.use("/api/deals",new k.default(Z).router),J.use("/api/segments",new F.default(Z).router),J.use("/api/ads",new x.default(Z).router),J.use("/api/names",new I.default(Z).router),J.use("/api/frontend",new N.default(Z).router),J.use("/api/alerts",new D.default(Z).router),J.use("/api/presets",new T.default(Z).router),J.use("/api/attributes",new R.default(Z).router),J.use("/api/statistics",new B.default(Z).router),J.use("/api/reporting",new G.default(Z).router),J.use("/api/reports",new L.default(Z).router),J.use("/api/publisherreports",new V.default(Z).router),J.use("/api/reportTemplates",new z.default(Z).router),J.use("/api/publisherReportTemplates",new q.default(Z).router),J.use("/api/targeting/suggestion",new Y.default(Z).router),J.use("/api/creativefeed",new U.default(Z).router),J.use("/api/adslots",new H.default(Z).router),J.use("/xml",new W.default(Z).router),J.post("/session",v.sessionPostHandler),J.get("/",v.rootGetHandler),J.get("*",v.universalGetHandler);var ee=g.port;X.listen(ee,(function(){console.info("Server running on http://localhost:"+ee)}))},function(e,t){e.exports=require("express-session")},function(e,t){e.exports=require("connect-memcached")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("passport")},function(e,t){e.exports=require("passport-local")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("connect-busboy")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.universalGetHandler=t.rootGetHandler=t.sessionPostHandler=t.ensureAuthenticated=t.localStrategyHandler=t.logoutHandler=t.loginPostHandler=t.newPasswordHandler=t.publicGetHandler=void 0;var s=i(n(0)),c=n(78),d=n(6),f=i(n(60)),p=i(n(59)),m=u(n(123)),h=u(n(128)),g=u(n(129)),v=u(n(80)),b=u(n(130)),y=n(58);t.publicGetHandler=function(e,t){if(!e.user){var n={};if(n.url)return t.redirect(302,n.url);var r=c.renderToString(s.createElement(d.StaticRouter,{location:e.url,context:n},s.createElement(m.default,null)));return t.status(200).send(h.default(r))}t.redirect("/")};t.newPasswordHandler=function(e,t){e.user&&e.logout();var n=c.renderToString(s.createElement(d.StaticRouter,{location:e.url},s.createElement(m.default,null)));return t.status(200).send(h.default(n))};function E(e,t){return l(this,void 0,void 0,(function(){var n,r;return o(this,(function(a){switch(a.label){case 0:return n=p.backend+"/users/me/verifyCode",console.log("POST: ",n),r={"Content-Type":"application/json",Authorization:"Basic "+Buffer.from(t.username+":"+t.password).toString("base64"),"Proxy-Authorization":Buffer.from(p.dashboarduser+":"+p.dashboardpass).toString("base64")},[4,y(n,{method:"POST",timeout:p.timeout,headers:r,body:e})];case 1:return[4,a.sent().json()];case 2:return[2,a.sent()]}}))}))}t.loginPostHandler=function(e){return function(t,n,r){var a=t.body.verificationCode;e.authenticate("local",(function(e,r,i){return l(void 0,void 0,void 0,(function(){return o(this,(function(i){switch(i.label){case 0:return e?[2,n.status(500).send(e.message)]:[4,E(a,{username:t.body.username,password:t.body.password})];case 1:return i.sent()?(t.logIn(r,(function(e){if(e)return n.status(500).send("An error occured while login. Try again.");var a=t.body.role,i=void 0;if(""!==a)try{i=JSON.parse(a)}catch(e){}return i&&(t.session[r.email+"-role"]=i),n.json({msg:"OK"})})),[2]):[2,n.status(500).send("Wrong 2fa token")]}}))}))}))(t,n,r)}};t.logoutHandler=function(e,t){e.logout(),t.redirect("/")};t.localStrategyHandler=function(e){return function(t,n,r){return l(void 0,void 0,void 0,(function(){var a,i;return o(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,e.authorize({username:t,password:n})];case 1:return a=l.sent(),r(null,a),[3,3];case 2:return i=l.sent(),r(i),[3,3];case 3:return[2]}}))}))}};t.ensureAuthenticated=function(e,t,n){if(e.isAuthenticated())if(e.session.redirectUrl){var r=e.session.redirectUrl;delete e.session.redirectUrl,t.redirect(r)}else n();else e.session.redirectUrl=e.url,t.redirect("/login")};t.sessionPostHandler=function(e,t){var n=e.body,r=n.key,a=n.value;e.session[r]=a,t.json({msg:"OK"})};t.rootGetHandler=function(e,t){var n=_(e),r=w(e,n);t.redirect(r)};t.universalGetHandler=function(e,t){var n={},r=200;if(n.url)return t.redirect(302,n.url);n.is404&&(r=404);var a=e.user;delete a.password;var i={adServerUrl:p.adServerUrl},l=c.renderToString(s.createElement(d.StaticRouter,{location:e.url,context:n},s.createElement(b.default,{user:a,variables:i})));return t.status(r).send(g.default(l,a,i))};var _=function(e){var t=e.user,n=e.session[t.email+"-role"];return n&&(n=v.default.findRole(t,n.level,n.entityId)),n||(n=t.roles[0],e.session[t.email+"-role"]=n),n},w=function(e,t){var n="";return 0!==Object.keys(e.query).length&&(n="?"+f.stringify(e.query)),"publisher"===t.level?"/analytics/"+t.level+"/"+t.entityId+n:"tagmanager"===t.role?"/segments/"+t.level+"/"+t.entityId+n:"/settings/"+t.level+"/"+t.entityId+n}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(6),s=l(n(124)),c=l(n(126)),d=l(n(127));t.default=function(){return o.createElement(u.Switch,null,o.createElement(u.Route,{path:"/login"},o.createElement(s.default,null)),o.createElement(u.Route,{path:"/forgotPassword"},o.createElement(c.default,null)),o.createElement(u.Route,{path:"/newPassword"},o.createElement(d.default,null)))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=n(2),f=i(n(4)),p=u(n(68)),m=u(n(26));t.default=function(){var e=s.useState(""),t=e[0],n=e[1],r=s.useState(""),a=r[0],i=r[1],u=s.useState(""),h=u[0],g=u[1],v=s.useState(!1),b=v[0],y=v[1],E=function(){return l(void 0,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=localStorage.getItem(t+"-role"),[4,f.Post({path:"/login",body:{username:t,password:a,verificationCode:h,role:e}})];case 1:return r.sent(),window.location.href=window.location.origin+"/",[3,3];case 2:return n=r.sent(),console.error(n),y(!0),[3,3];case 3:return[2]}}))}))},_=function(e){"Enter"===e.key&&E()};return s.default.createElement(s.Fragment,null,s.default.createElement(p.default,null,s.default.createElement(d.FormControl,{type:"text",name:"username",placeholder:"Email",onChange:function(e){n(e.target.value)}}),s.default.createElement(d.FormControl,{type:"password",name:"password",placeholder:"Password",onChange:function(e){i(e.target.value)},onKeyDown:_}),s.default.createElement("i",null,"Enter verification code if two factor authentication has been enabled."),s.default.createElement(d.FormControl,{autoFocus:!0,type:"text",name:"verificationCode",placeholder:"Verification Code",onChange:function(e){g(e.target.value)},onKeyDown:_}),s.default.createElement(d.Button,{type:"submit",variant:"primary",block:!0,onClick:E},"LOGIN"),s.default.createElement(c.Link,{to:"/forgotPassword"},"Forgot password ?")),b&&s.default.createElement(d.Alert,{variant:"danger",className:"alert-position",onClose:function(){y(!1)},dismissible:!0},s.default.createElement("div",null,"Incorrect username, password or verification code.")),s.default.createElement(m.default,{title:"Login"}))}},function(e,t){e.exports=require("just-detect-adblock")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=n(2),f=i(n(4)),p=u(n(68)),m=u(n(26));t.default=function(){var e="true"===new URLSearchParams(c.useLocation().search).get("warning"),t=s.useState(""),n=t[0],r=t[1],a=s.useState(e?"warning":"primary"),i=a[0],u=a[1],h=s.useState(e),g=h[0],v=h[1],b=s.useState(e?"The previous email link has expired. Fill in the form below to receive a new email.":""),y=b[0],E=b[1];return s.default.createElement(s.Fragment,null,s.default.createElement(p.default,null,s.default.createElement(d.FormControl,{type:"email",name:"email",placeholder:"Email",onChange:function(e){r(e.target.value)}}),s.default.createElement(d.Button,{type:"submit",variant:"primary",block:!0,onClick:function(){return l(void 0,void 0,void 0,(function(){var e,t;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,f.Post({path:"/api/login/resetpassword",body:{email:n}})];case 1:return e=r.sent(),u("success"),v(!0),E(e.msg),[3,3];case 2:return t=r.sent(),console.log(t),u("danger"),v(!0),E("Make sure the email is valid."),[3,3];case 3:return[2]}}))}))}},"SUBMIT"),s.default.createElement(c.Link,{to:"/login"},"Login")),g&&s.default.createElement(d.Alert,{variant:i,className:"alert-position",onClose:function(){v(!1)},dismissible:!0},s.default.createElement("div",null,y)),s.default.createElement(m.default,{title:"Forgot password"}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=n(2),f=i(n(4)),p=i(n(7)),m=u(n(68)),h=u(n(26));t.default=function(){var e=new URLSearchParams(c.useLocation().search),t=c.useHistory(),n=e.get("email"),r=e.get("hash"),a=s.useState(""),i=a[0],u=a[1],g=s.useState(""),v=g[0],b=g[1],y=s.useState({error:!1,message:""}),E=y[0],_=y[1],w=s.useState({error:!1,message:""}),S=w[0],P=w[1];return s.default.createElement(s.Fragment,null,s.default.createElement(m.default,null,s.default.createElement("p",null,"Welcome ",s.default.createElement("strong",null,n),","),s.default.createElement("p",null,"To start using our system please enter a password:"),s.default.createElement(d.FormGroup,null,s.default.createElement(d.FormControl,{type:"password",name:"password",placeholder:"New Password",onChange:function(e){u(e.target.value),_(p.length(e.target.value,8,!0))},isInvalid:E.error}),E.error&&s.default.createElement(d.FormControl.Feedback,{type:"invalid"},E.message)),s.default.createElement(d.FormGroup,null,s.default.createElement(d.FormControl,{type:"password",name:"confirmPassword",placeholder:"Confirm Password",onChange:function(e){b(e.target.value),P(p.matchPassword(i,e.target.value))},isInvalid:S.error}),S.error&&s.default.createElement(d.FormControl.Feedback,{type:"invalid"},S.message)),s.default.createElement(d.Button,{type:"submit",variant:"primary",block:!0,onClick:function(){return l(void 0,void 0,void 0,(function(){var e,a,l,u;return o(this,(function(o){switch(o.label){case 0:return e=p.length(i,8,!0),a=p.matchPassword(i,v),e.error||a.error?(_(e),P(a),[3,4]):[3,1];case 1:return o.trys.push([1,3,,4]),l={email:n,hash:r,password:i},[4,f.Post({path:"/api/login/setpassword",body:l})];case 2:return o.sent(),t.push("/login"),[3,4];case 3:return u=o.sent(),console.log(u),t.push("/forgotPassword?warning=true"),[3,4];case 4:return[2]}}))}))}},"SUBMIT"),s.default.createElement(c.Link,{to:"/login"},"Login")),s.default.createElement(h.default,{title:"Reset password"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1"/>\n    <title>Opt Out Advertising | Login</title>\n    <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">\n    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;subset=latin-ext" rel="stylesheet">\n    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">\n    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">\n    <link rel="stylesheet" href="/css/main-optout.css">\n  </head>\n  <body class="login-page">\n    <div class="container-fluid">\n      <div id="root">'+e+'</div>\n    </div>\n    <script src="/build/rtb-public.bundle.js"><\/script>\n  </body>\n</html>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1"/>\n    <title>Opt Out Advertising | Campaigns</title>\n    <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">\n    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;subset=latin-ext" rel="stylesheet">\n    <link href="https://fonts.googleapis.com/css?family=Hind+Vadodara:300,400,500,700&amp;subset=latin-ext" rel="stylesheet">\n    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap&subset=latin-ext" rel="stylesheet">\n    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,700&subset=latin-ext" rel="stylesheet">\n    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">\n    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">\n    <link href="https://cdn.jsdelivr.net/npm/select2@4.0.12/dist/css/select2.min.css" rel="stylesheet" />\n    <link href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap4.min.css" rel="stylesheet" />\n    <link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.18/c3.min.css" rel="stylesheet" />\n    <link href="//vjs.zencdn.net/5.4.6/video-js.min.css" rel="stylesheet">\n    <link rel="stylesheet" type="text/css" href="/js/videojs-vast-vpaid/videojs.vast.vpaid.css"/>\n    <link id="theme-css" rel="stylesheet" href="/css/main-optout.css">\n\n    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"><\/script>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"><\/script>\n    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"><\/script>\n    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.12/dist/js/select2.min.js"><\/script>\n    <script src="https://vjs.zencdn.net/5.4.6/video.min.js"><\/script>\n    <script type="text/javascript" src="/js/videojs-vast-vpaid/videojs_5.vast.vpaid.js"><\/script>\n    <script type="text/javascript" src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"><\/script>\n    <script type="text/javascript" src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"><\/script>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.16.0/d3.min.js" integrity="sha512-FHsFVKQ/T1KWJDGSbrUhTJyS1ph3eRrxI228ND0EGaEp6v4a/vGwPWd3Dtd/+9cI7ccofZvl/wulICEurHN1pg==" crossorigin="anonymous"><\/script>\n    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.18/c3.min.js"><\/script>\n    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/d3-funnel@1.2.0/dist/d3-funnel.min.js"><\/script>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js" integrity="sha512-s/XK4vYVXTGeUSv4bRPOuxSDmDlTedEpMEcAQk0t/FMd9V6ft8iXdwSBxV0eD60c6w/tjotSlKu9J2AAW1ckTA==" crossorigin="anonymous"><\/script>\n    <script type="text/javascript" src="/js/xlsx.core.min.js"><\/script>\n    <script type="text/javascript" src="/js/canvg/rgbcolor.js"><\/script> \n\t\t<script type="text/javascript" src="/js/canvg/StackBlur.js"><\/script>\n\t\t<script type="text/javascript" src="/js/canvg/canvg.js"><\/script> \n\t\t<script type="text/javascript" src="/js/download.js"><\/script>\n    <script>\n      window.__APP_USER__ = '+JSON.stringify(t)+";\n      window.__APP_VARS__ = "+JSON.stringify(n)+';\n    <\/script>\n  </head>\n  <body>\n    <div id="root">'+e+'</div>\n    <script src="/build/rtb-app.bundle.js"><\/script>\n  </body>\n</html>\n'}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(6),s=l(n(16)),c=l(n(131)),d=l(n(132)),f=l(n(133)),p=l(n(134)),m=l(n(95)),h=l(n(404)),g=l(n(405));t.default=function(e){return o.createElement(u.Switch,null,o.createElement(u.Route,{path:"/:page/:scope/:scopeId/:tab?"},o.createElement(s.default.Provider,{value:e.user},o.createElement(m.default.Provider,{value:e.variables},o.createElement(c.default,null,o.createElement(h.default,null,o.createElement(d.default,null,o.createElement(f.default,null,o.createElement(g.default,null,o.createElement(p.default,null))))))))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=i(n(4)),f=u(n(12)),p=u(n(16));t.default=function(e){var t=c.useParams(),n=t.page,r=t.scope,a=t.scopeId,i=s.useContext(p.default),u=s.useState({rights:[]}),m=u[0],h=u[1],g=s.useState(!0),v=g[0],b=g[1],y=s.useState(!1),E=y[0],_=y[1],w=s.useState({error:!0,message:""}),S=w[0],P=w[1],C=s.useRef(null);function O(){return l(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:b(!0),t.label=1;case 1:if(t.trys.push([1,17,,18]),x(),C.current=new AbortController,e={rights:[]},"root"!==r)return[3,2];if(!i.isRootAdmin)throw new Error("Error loading data.");return e={rights:["VIEW_PUBLISHER","MANAGE_PUBLISHER","VIEW_ORGANIZATION","MANAGE_ORGANIZATION","VIEW_AGENCY","MANAGE_AGENCY","CREATE_ADVERTISER","VIEW_ADVERTISER","MANAGE_ADVERTISER","VIEW_CAMPAIGNGROUP","MANAGE_CAMPAIGNGROUP","VIEW_CAMPAIGN","MANAGE_CAMPAIGN","VIEW_FINANCIALS","VIEW_STATISTICS","VIEW_USERS","MANAGE_USERS","VIEW_LISTS","MANAGE_LISTS","VIEW_DEALS","MANAGE_DEALS","VIEW_ADS","MANAGE_ADS","VIEW_SEGMENTS","MANAGE_SEGMENTS","SEARCH_NAMES","MANAGE_PRESETS","VIEW_PRESETS","VIEW_REPORTS","MANAGE_REPORTS","VIEW_REPORT_TEMPLATES","MANAGE_REPORT_TEMPLATES","VIEW_FEEDS","MANAGE_FEEDS"]},[3,16];case 2:return"organization"!==r?[3,4]:[4,d.Get({path:"/api/organizations/"+a,signal:C.current.signal})];case 3:return e=t.sent(),[3,16];case 4:return"publisher"!==r?[3,6]:[4,d.Get({path:"/api/publishers/"+a,signal:C.current.signal})];case 5:return e=t.sent(),[3,16];case 6:return"agency"!==r?[3,8]:[4,d.Get({path:"/api/agencies/"+a,signal:C.current.signal})];case 7:return e=t.sent(),[3,16];case 8:return"advertiser"!==r?[3,10]:[4,d.Get({path:"/api/advertisers/"+a,signal:C.current.signal})];case 9:return e=t.sent(),[3,16];case 10:return"campaigngroup"!==r?[3,12]:[4,d.Get({path:"/api/campaigngroups/"+a,signal:C.current.signal})];case 11:return e=t.sent(),[3,16];case 12:return"campaign"!==r||"settings"===n?[3,14]:[4,d.Get({path:"/api/campaigns/"+a,signal:C.current.signal})];case 13:return e=t.sent(),[3,16];case 14:return"campaign"!==r||"settings"!==n?[3,16]:[4,d.Get({path:"/api/campaigns/"+a+"/settings",signal:C.current.signal})];case 15:e=t.sent(),t.label=16;case 16:return h(e),P({error:!1,message:""}),[3,18];case 17:return"AbortError"===t.sent().name?P({error:!1,message:""}):(h({rights:[]}),P({error:!0,message:"Error loading data."})),[3,18];case 18:return b(!1),_(!1),[2]}}))}))}function x(){C.current&&C.current.abort()}return s.useEffect((function(){return x}),[]),s.useEffect((function(){O()}),[n,r,a]),s.useEffect((function(){E&&O()}),[E]),s.default.createElement(f.default.Provider,{value:{data:m,loadError:S,loading:v,updateLoading:function(e){b(e)},updateReload:function(e){_(e)}}},e.children)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=i(n(4)),f=i(n(8)),p=u(n(62));t.default=function(e){var t=c.useParams(),n=t.page,r=t.scope,a=t.scopeId,i=s.useState([]),u=i[0],m=i[1];return s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var e,t,i;return o(this,(function(l){switch(l.label){case 0:if("settings"!==n&&"analytics"!==n)return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),e={scope:f.getSourceScope(r)},"root"!==r&&(e.scopeId=parseInt(a,10)),[4,d.Get({path:"/api/presets",qs:e})];case 2:return t=l.sent(),m(t),[3,4];case 3:return i=l.sent(),console.log(i),m([]),[3,4];case 4:return[2]}}))}))}()}),[n,r,a]),s.default.createElement(p.default.Provider,{value:u},e.children)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=i(n(4)),f=u(n(16)),p=u(n(69));t.default=function(e){var t=c.useParams(),n=t.page,r=t.scope,a=t.scopeId,i=s.useContext(f.default),u=s.useState(0),m=u[0],h=u[1];return s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var e,t;return o(this,(function(n){switch(n.label){case 0:if(!i.isRootAdmin)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,d.Get({path:"/api/ads/adqueue-count"})];case 2:return e=n.sent(),h(e.count),[3,4];case 3:return t=n.sent(),console.log(t),h(0),[3,4];case 4:return[2]}}))}))}()}),[n,r,a]),s.default.createElement(p.default.Provider,{value:{adqueueCount:m,updateAdqueueCount:function(e){h(e)}}},e.children)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(6),s=i(n(1)),c=i(n(13)),d=l(n(135)),f=l(n(145)),p=l(n(146)),m=l(n(12)),h=l(n(69)),g=l(n(16)),v=l(n(402)),b=l(n(5)),y=l(n(79));t.default=function(){var e=u.useParams(),t=e.scope,n=e.scopeId,r=o.useContext(m.default),a=r.data,i=r.loadError,l=o.useContext(h.default).adqueueCount,E=function(){var e;"root"===t?e="optout":"organization"===t?e=s.get(a,"organization.theme"):"publisher"===t?e=s.get(a,"publisher.theme"):"agency"===t?e=s.get(a,"agency.theme"):"advertiser"===t?e=s.get(a,"advertiser.theme"):"campaigngroup"===t?e=s.get(a,"campaignGroup.theme"):"campaign"===t&&(e=s.get(a,"campaign.theme"));return e}(),_=o.useContext(g.default),w=c.getRights(a.rights),S=_.email+"-sidebaropen",P=o.useState(!0),C=P[0],O=P[1],x=o.useState(!0),I=x[0],N=x[1];o.useEffect((function(){E?(document.getElementById("theme-css").setAttribute("href","/css/main-"+E+".css"),N(!1)):N(!0)}),[E]),o.useEffect((function(){var e=!0;try{e=JSON.parse(localStorage.getItem(S))}catch(t){e=!0}O(e)}),[]),o.useEffect((function(){N(!1)}),[i.error]);return o.default.createElement(o.Fragment,null,o.default.createElement(b.default,{visible:I,loaderClass:"page-loading"}),!I&&o.default.createElement(o.Fragment,null,o.default.createElement(d.default,null),o.default.createElement(v.default,{open:C,onClick:function(){var e=!C;O(e),localStorage.setItem(S,e.toString()),setTimeout((function(){var e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)}),200)},items:function(){var e=!C,r="root"===t?w.VIEW_CAMPAIGN||w.VIEW_CAMPAIGNGROUP||w.VIEW_ADVERTISER||w.VIEW_AGENCY||w.VIEW_PUBLISHER:"organization"===t?w.VIEW_CAMPAIGN||w.VIEW_CAMPAIGNGROUP||w.VIEW_ADVERTISER||w.VIEW_AGENCY:"agency"===t?w.VIEW_CAMPAIGN||w.VIEW_CAMPAIGNGROUP||w.VIEW_ADVERTISER:"advertiser"===t?w.VIEW_CAMPAIGN||w.VIEW_CAMPAIGNGROUP:w.VIEW_CAMPAIGN,i=t,u=n;["campaigngroup","campaign"].indexOf(t)>-1&&(i="advertiser",u=s.get(a,"parents.advertiser.parentId"));var c=[];return r&&c.push({id:"campaigns",name:"Campaigns",href:"/settings/"+t+"/"+n,icon:"fa fa-bullhorn",showtooltip:e}),w.VIEW_STATISTICS&&c.push({id:"analytics",name:"Analytics",href:"/analytics/"+t+"/"+n,icon:"fa fa-line-chart",showtooltip:e}),w.VIEW_ADS&&c.push({id:"advault",name:"Ad vault",href:"/advault/"+i+"/"+u,icon:"fa fa-picture-o",showtooltip:e}),w.VIEW_SEGMENTS&&c.push({id:"segments",name:"Segments",href:"/segments/"+i+"/"+u,icon:"fa fa-group",showtooltip:e}),w.VIEW_LISTS&&c.push({id:"lists",name:"Lists",href:"/lists/"+i+"/"+u,icon:"fa fa-list",showtooltip:e}),w.VIEW_DEALS&&c.push({id:"deals",name:"Deals",href:"/deals/"+i+"/"+u,icon:"fa fa-handshake-o",showtooltip:e}),w.VIEW_FEEDS&&c.push({id:"data-feeds",name:"Data Feeds",href:"/data-feeds/"+i+"/"+u,icon:"fa fa-newspaper-o",showtooltip:e}),w.VIEW_PUBLISHER_AD_SLOTS&&c.push({id:"publisheradtags",name:"Ad slots",href:"/adslottags/"+i+"/"+u,icon:"fa fa-outdent",showtooltip:e}),w.VIEW_PUBLISHER_DEALS&&c.push({id:"publisherdeals",name:"Publisher deals",href:"/publisherdeals/"+i+"/"+u,icon:"fa fa-handshake-o",showtooltip:e}),w.VIEW_REPORTS&&"publisher"!==t&&c.push({id:"reports",name:"Reports",href:"/reports/"+t+"/"+n,icon:"fa fa-file-text-o",showtooltip:e}),w.VIEW_REPORTS&&"publisher"===t&&c.push({id:"publisher-reports",name:"Reports",href:"/publisherreports/"+i+"/"+u,icon:"fa fa-file-text-o",showtooltip:e}),w.VIEW_REPORT_TEMPLATES&&"publisher"!==t&&c.push({id:"report-templates",name:"Report templates",href:"/report-templates/"+i+"/"+u,icon:"fa fa-file-o",child:o.default.createElement("span",{className:"menu-item-report-templates"},"T"),showtooltip:e}),w.VIEW_REPORT_TEMPLATES&&"publisher"===t&&c.push({id:"publisher-reportTemplates",name:"Report templates",href:"/publisherreporttemplates/"+i+"/"+u,icon:"fa fa-file-o",showtooltip:e}),w.VIEW_USERS&&c.push({id:"users",name:"Users",href:"/users/"+i+"/"+u,icon:"fa fa-user",showtooltip:e}),"publisher"!==t&&c.push({id:"changelog",name:"Change log",href:"/changelog/"+t+"/"+n,icon:"fa fa-history",showtooltip:e}),_.isRootAdmin&&c.push({id:"adqueue",name:"Ad queue",href:"/adqueue/"+i+"/"+u,icon:"fa fa-sort-amount-asc",child:o.default.createElement("span",{className:"menu-item-badge"},l.toString()),showtooltip:e}),c}()}),o.default.createElement(f.default,{open:C},o.default.createElement(p.default,null))),o.default.createElement(y.default,null))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(136)),s=l(n(141)),c=l(n(142)),d=l(n(144));t.default=function(){return o.createElement("header",{className:"header"},o.createElement("div",null,o.createElement("a",{className:"theme-logo-container",href:"/"},o.createElement("div",{className:"theme-logo"})),o.createElement("a",{className:"adscience-logo-container",href:"/"},o.createElement("div",{className:"ortec-logo"}),o.createElement("div",{className:"adscience-logo"}))),o.createElement("div",{className:"flex"},o.createElement("div",{className:"header-search-container"},o.createElement(s.default,null)),o.createElement(d.default,null),o.createElement(c.default,null),o.createElement(u.default,null)))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=i(n(4)),f=u(n(137)),p=u(n(138)),m=u(n(139)),h=u(n(16)),g=u(n(19)),v=i(n(20));t.default=function(){var e=s.useContext(h.default),t=e.email+"-role",n=e.pages||[],r=c.useHistory(),a=s.useState(!1),i=a[0],u=a[1],b=s.useState(!1),y=b[0],E=b[1],_=s.useRef(null),w=function(e){return"publisher"===e.level?"/analytics/"+e.level+"/"+e.entityId:"/settings/"+e.level+"/"+e.entityId};return s.default.createElement(s.Fragment,null,s.default.createElement(f.default,{email:e.email,pages:n,onSelect:function(a,i){return l(void 0,void 0,void 0,(function(){var i,l,s,c;return o(this,(function(o){switch(o.label){case 0:return console.log(e),"change-password"!==a?[3,1]:(u(!0),[3,5]);case 1:return"add-2fa"!==a?[3,2]:(E(!0),[3,5]);case 2:return i=parseInt(a,10),l=n[i],(s=e.roles.find((function(e){return e.level===l.level&&e.entityId===l.entityId})))?(localStorage.setItem(t,JSON.stringify(s)),c={key:t,value:s},[4,d.Post({path:"/session",body:c})]):[3,4];case 3:o.sent(),o.label=4;case 4:r.push(w(l)),o.label=5;case 5:return[2]}}))}))}}),s.default.createElement(p.default,{show:i,onClose:function(){u(!1)},onSubmit:function(e){return l(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,d.Post({path:"/api/users/password",body:e})];case 1:return n.sent(),u(!1),_.current.addNotification(v.success("User's password changed.",!1)),[3,3];case 2:return t=n.sent(),console.log(t),_.current.addNotification(v.error("Error updating user's password.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(m.default,{email:e.email,show:y,twoFactorEnabled:e.twoFactorEnabled,onClose:function(){E(!1)},onSubmit:function(e){return l(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,d.Post({path:"/api/users/twofactor",body:e})];case 1:return n.sent(),E(!1),_.current.addNotification(v.success("Two factor authentication added to your account",!1)),[3,3];case 2:return t=n.sent(),console.log(t),_.current.addNotification(v.error("Error setting two factor authentication for user")),[3,3];case 3:return console.log(e),[2]}}))}))}}),s.default.createElement(g.default,{ref:_}))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),i=n(2),l=r(n(3)),o=function(e){return a.default.createElement("a",{className:"dropdown-toggle",href:"",onClick:function(t){t.preventDefault(),e.onClick(t)}},e.children)};t.default=function(e){return a.default.createElement(i.Dropdown,{alignRight:!0,className:"user-menu",onSelect:e.onSelect},a.default.createElement(i.Dropdown.Toggle,{as:o,variant:"success",id:"dropdown-basic"},a.default.createElement("img",{className:"user-image",src:"/images/profile.jpg",alt:"profile image"})," ",e.email),a.default.createElement(i.Dropdown.Menu,null,e.pages.map((function(e,t){return a.default.createElement(i.Dropdown.Item,{key:"dropdown-item-"+t,eventKey:t.toString()},function(e){return"root"===e.level?"Overview":e.level+" : "+e.entityName+" ( "+e.roleName+" )"}(e))})),a.default.createElement(i.Dropdown.Divider,null),a.default.createElement(i.Dropdown.Item,{eventKey:"change-password"},a.default.createElement(l.default,{name:"lock"})," Change password"),a.default.createElement(i.Dropdown.Item,{eventKey:"add-2fa"},a.default.createElement(l.default,{name:"mobile"})," Two Factor Authentication"),a.default.createElement("a",{className:"dropdown-item",href:"/logout"},a.default.createElement(l.default,{name:"sign-out"})," Logout")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(3)),c=i(n(7));t.default=function(e){var t=o.useState(""),n=t[0],r=t[1],a=o.useState(""),i=a[0],l=a[1],d=o.useState(""),f=d[0],p=d[1],m=o.useState({error:!1,message:""}),h=m[0],g=m[1],v=o.useState({error:!1,message:""}),b=v[0],y=v[1],E=o.useState({error:!1,message:""}),_=E[0],w=E[1];return o.default.createElement(u.Modal,{show:e.show,onHide:e.onClose,backdrop:"static"},o.default.createElement(u.Modal.Header,{closeButton:!0},o.default.createElement(u.Modal.Title,{as:"h4"},"Change password")),o.default.createElement(u.Modal.Body,null,o.default.createElement(u.Form.Group,{controlId:"current-password"},o.default.createElement(u.Form.Label,null,"Current password"),o.default.createElement(u.Form.Control,{type:"password",value:n,onChange:function(e){r(e.target.value),g(c.length(e.target.value,8,!0))},isInvalid:h.error}),h.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},h.message)),o.default.createElement(u.Form.Group,{controlId:"new-password"},o.default.createElement(u.Form.Label,null,"New password"),o.default.createElement(u.Form.Control,{type:"password",value:i,onChange:function(e){l(e.target.value),y(c.length(e.target.value,8,!0))},isInvalid:b.error}),b.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},b.message)),o.default.createElement(u.Form.Group,{controlId:"confirm-password"},o.default.createElement(u.Form.Label,null,"Confirm password"),o.default.createElement(u.Form.Control,{type:"password",value:f,onChange:function(e){p(e.target.value),w(c.matchPassword(i,e.target.value))},isInvalid:_.error}),_.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},_.message))),o.default.createElement(u.Modal.Footer,null,o.default.createElement(u.Button,{size:"sm",variant:"light",onClick:e.onClose},"CANCEL"),o.default.createElement(u.Button,{size:"sm",variant:"primary",onClick:function(){var t=c.length(n,8,!0),r=c.length(i,8,!0),a=c.matchPassword(i,f);[t.error,r.error,a.error].indexOf(!0)>-1?(g(t),y(r),w(a)):e.onSubmit({oldpass:n,newpass:i})}},o.default.createElement(s.default,{name:"lock"})," CHANGE PASSWORD")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(0)),o=n(2),u=i(n(7)),s=i(n(140));t.default=function(e){var t=s.generateSecret({name:"Opt Out Advertising Dashboard",account:e.email}),n=l.useState(t.qr)[0],r=l.useState(t.secret)[0],a=l.useState(""),i=a[0],c=a[1],d=l.useState({error:!0,message:""}),f=d[0],p=d[1];return e.twoFactorEnabled?l.default.createElement(o.Modal,{show:e.show,onHide:e.onClose,backdrop:"static"},l.default.createElement(o.Modal.Header,{closeButton:!0},l.default.createElement(o.Modal.Title,{as:"h4"},"Add Two Factor Authentication")),l.default.createElement(o.Modal.Body,null,"You have already enabled Two Factor Authentication for this account. If you're experiencing any problems please contact ",l.default.createElement("a",{href:"mailto:support@optoutadvertising.com"},"support@optoutadvertising.com")),l.default.createElement(o.Modal.Footer,null,l.default.createElement(o.Button,{size:"sm",variant:"light",onClick:e.onClose},"OK"))):l.default.createElement(o.Modal,{show:e.show,onHide:e.onClose,backdrop:"static"},l.default.createElement(o.Modal.Header,{closeButton:!0},l.default.createElement(o.Modal.Title,{as:"h4"},"Add Two Factor Authentication")),l.default.createElement(o.Modal.Body,null,l.default.createElement(o.Form.Group,{controlId:"request-2fa"},l.default.createElement("b",null,"Two Factor Authentication"),l.default.createElement("p",null,"Two Factor Authentication is an enhanced security measure. Once enabled, you'll be required to use an authenticator app when you login in addition to your regular username and password"),l.default.createElement("b",null,"Don't have the app?"),l.default.createElement("p",null,"You can download Authy here for ",l.default.createElement("a",{href:"https://play.google.com/store/apps/details?id=com.authy.authy"},"Android")," or ",l.default.createElement("a",{href:"https://apps.apple.com/nl/app/twilio-authy/id494168017"},"iOS"),". Or google authenticator here for ",l.default.createElement("a",{href:"https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2"},"Android")," or ",l.default.createElement("a",{href:"https://apps.apple.com/nl/app/google-authenticator/id388497605"},"iOS"),"."),l.default.createElement(o.Form.Label,null,"Scan code with app"),l.default.createElement("div",null,l.default.createElement("img",{src:n})),l.default.createElement(o.Form.Label,null,"Or paste this code directly in app"),l.default.createElement("div",null,l.default.createElement("code",null,r)),l.default.createElement(o.Form.Label,null,"Type code from authenticator app"),l.default.createElement(o.Form.Control,{type:"text",value:i,onChange:function(e){c(e.target.value);var t=-100;if(6==e.target.value.length){var n=s.verifyToken(r,e.target.value);try{t=n.delta}catch(e){}}p(u.token(e.target.value,6,t))},isInvalid:f.error}),f.error&&l.default.createElement(o.Form.Control.Feedback,{type:"invalid"},f.message))),l.default.createElement(o.Modal.Footer,null,l.default.createElement(o.Button,{size:"sm",variant:"light",onClick:e.onClose},"CANCEL"),l.default.createElement(o.Button,{type:"submit",size:"sm",variant:"primary",onClick:function(t){var n=s.verifyToken(r,i);null!=n&&n.delta<=0&&n.delta>-2&&e.onSubmit({email:e.email,secret:r})},disabled:f.error},"ENABLE TWO FACTOR AUTHENTICATION")))}},function(e,t){e.exports=require("node-2fa")},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=l(n(0)),d=n(6),f=l(n(4)),p=s(n(70)),m=n(9),h=s(n(3)),g=function(e){var t=e.filter((function(e){return e.entries.length>0})),n=v(),r=b();return t.map((function(e){var t=e.entries.map((function(t){return{value:t.id,label:t.name,type:n[e.level]}}));return{label:r[e.level],options:t}}))},v=function(){return{Organization:"organization",Agency:"agency",Advertiser:"advertiser",CampaignGroup:"campaigngroup",Campaign:"campaign"}},b=function(){return{Organization:"Organizations",Agency:"Agencies",Advertiser:"Advertisers",CampaignGroup:"Campaign groups",Campaign:"Campaigns"}},y=function(e){return m.components.DropdownIndicator&&c.createElement(m.components.DropdownIndicator,r({},e),c.createElement(h.default,{name:"search"}))};t.default=function(){var e=d.useHistory();return c.createElement(p.default,{inputId:"react-select-search-entities",className:"react-search-select-container",classNamePrefix:"react-search-select",components:{DropdownIndicator:y},placeholder:"Search...",noOptionsMessage:function(e){e.inputValue;return"No results found"},controlShouldRenderValue:!1,cacheOptions:!0,loadOptions:function(e){return o(void 0,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,f.Get({path:"/api/names/search",qs:{search:e}})];case 1:return t=n.sent(),[2,g(t)];case 2:return n.sent(),[2,[]];case 3:return[2]}}))}))},onChange:function(t){e.push("/settings/"+t.type+"/"+t.value)}})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(0)),s=n(6),c=n(82),d=i(n(4));t.default=function(){var e=s.useParams(),t=e.page,n=e.scope,r=e.scopeId,a=u.useState([]),i=a[0],f=a[1];return u.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var e,t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,d.Get({path:"/api/alerts/campaigns"})];case 1:return e=n.sent(),f(e),[3,3];case 2:return t=n.sent(),console.log(t),[3,3];case 3:return[2]}}))}))}()}),[t,n,r]),u.default.createElement(c.AlertsPopover,{alerts:i})}},function(e,t){e.exports=require("country-data")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(3));t.default=function(){return o.createElement(u.OverlayTrigger,{placement:"bottom",overlay:o.createElement(u.Tooltip,{id:"tooltip-kb"},"Knowledge base")},o.createElement("a",{className:"kb-link",href:"/kb",target:"_blank"},o.createElement(s.default,{name:"book"})))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0));t.default=function(e){var t=e.open?"":" mini";return a.default.createElement("div",{className:"content"+t},a.default.createElement("div",{className:"container-fluid"},e.children))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(6),s=l(n(147)),c=l(n(262)),d=l(n(305)),f=l(n(317)),p=l(n(325)),m=l(n(332)),h=l(n(336)),g=l(n(341)),v=l(n(345)),b=l(n(354)),y=l(n(12)),E=l(n(10)),_=l(n(358)),w=l(n(360)),S=l(n(366)),P=l(n(376)),C=l(n(382)),O=l(n(388)),x=l(n(396));t.default=function(){var e=u.useParams().page,t=o.useContext(y.default).loadError;if(t.error)return o.default.createElement(E.default,{message:t.message});switch(e){case"settings":return o.default.createElement(s.default,null);case"analytics":return o.default.createElement(c.default,null);case"advault":return o.default.createElement(d.default,null);case"segments":return o.default.createElement(p.default,null);case"lists":return o.default.createElement(m.default,null);case"deals":return o.default.createElement(h.default,null);case"publisherdeals":return o.default.createElement(P.default,null);case"adslottags":return o.default.createElement(v.default,null);case"reports":return o.default.createElement(w.default,null);case"publisherreports":return o.default.createElement(C.default,null);case"report-templates":return o.default.createElement(S.default,null);case"publisherreporttemplates":return o.default.createElement(O.default,null);case"data-feeds":return o.default.createElement(f.default,null);case"users":return o.default.createElement(g.default,null);case"adqueue":return o.default.createElement(b.default,null);case"alerts":return o.default.createElement(_.default,null);case"changelog":return o.default.createElement(x.default,null);default:return o.default.createElement(E.default,{message:"Page not found"})}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=n(6),c=o(n(29)),d=o(n(30)),f=o(n(31)),p=o(n(158)),m=o(n(178)),h=o(n(179)),g=o(n(180)),v=o(n(186)),b=o(n(187)),y=o(n(26)),E=o(n(74)),_=o(n(16)),w=l(n(8)),S=function(e){switch(s.useParams().scope){case"root":return u.default.createElement(p.default,r({},e));case"organization":return u.default.createElement(m.default,r({},e));case"agency":return u.default.createElement(h.default,r({},e));case"advertiser":return u.default.createElement(g.default,r({},e));case"campaigngroup":return u.default.createElement(v.default,r({},e))}return null};t.default=function(){if("campaign"===s.useParams().scope)return u.default.createElement(u.Fragment,null,u.default.createElement(c.default,null,u.default.createElement("div",{className:"col-sm-12"},u.default.createElement(d.default,null),u.default.createElement(f.default,{id:"breadcrumb",minScope:"campaign"}))),u.default.createElement(y.default,{title:"Campaign settings"}),u.default.createElement(b.default,null));var e=u.useContext(_.default),t=w.getMainRole(e),n=w.getVideoMode(e,t),r=u.useState(n),a=r[0],i=r[1];return u.default.createElement(u.Fragment,null,u.default.createElement(c.default,null,u.default.createElement("div",{className:"col-sm-9"},u.default.createElement(d.default,null),u.default.createElement(f.default,{id:"breadcrumb",minScope:"campaign"})),u.default.createElement("div",{className:"col-sm-3"},u.default.createElement("div",{className:"pull-right"},u.default.createElement(E.default,{id:"video-mode",label:"Video mode",checked:a,onChange:function(n){i(n),w.storeVideoMode(e,t,n)}})))),u.default.createElement(y.default,{title:"Campaigns"}),u.default.createElement(S,{videoMode:a}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(0));t.default=function(){return l.createElement("h2",null,"Overview")}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=i(n(1)),d=i(n(13)),f=i(n(4)),p=u(n(12)),m=u(n(3)),h=u(n(83)),g=u(n(19)),v=i(n(20));t.default=function(){var e=s.useContext(p.default),t=e.data,n=e.updateReload,r=c.get(t,"organization"),a=c.get(t,"organization.name"),i=d.getRights(t.rights),u=s.useState(!1),b=u[0],y=u[1],E=s.useRef(null);return i.MANAGE_ORGANIZATION?s.default.createElement(s.Fragment,null,s.default.createElement("h2",null,"Organization: ",a," ",s.default.createElement("span",{className:"pointer d-inline-block ml-2",onClick:function(e){e.preventDefault(),y(!0)}},s.default.createElement(m.default,{name:"pencil"}))," "),s.default.createElement(h.default,{show:b,organization:r,onClose:function(){y(!1)},onSubmit:function(e,t){return l(void 0,void 0,void 0,(function(){var r;return o(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,f.Put({path:"/api/organizations/"+e,body:t})];case 1:return a.sent(),n(!0),y(!1),E.current.addNotification(v.success(s.default.createElement("span",null,"Organization ",s.default.createElement("strong",null,t.name)," saved."),!1)),[3,3];case 2:return r=a.sent(),console.log(r),y(!1),E.current.addNotification(v.error("Error updating organization.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(g.default,{ref:E})):s.default.createElement("h2",null,"Organization: ",a)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=i(n(1)),d=i(n(13)),f=i(n(4)),p=u(n(12)),m=u(n(3)),h=u(n(19)),g=i(n(20)),v=u(n(84));t.default=function(){var e=s.useContext(p.default),t=e.data,n=e.updateReload,r=c.get(t,"agency"),a=c.get(t,"agency.name"),i=d.getRights(t.rights),u=s.useState(!1),b=u[0],y=u[1],E=s.useRef(null),_=function(e){e.preventDefault(),y(!0)},w=function(){y(!1)},S=function(e,t){return l(void 0,void 0,void 0,(function(){var r;return o(this,(function(a){switch(a.label){case 0:if(!i.MANAGE_AGENCY)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,f.Put({path:"/api/agencies/"+e,body:t})];case 2:return a.sent(),n(!0),y(!1),E.current.addNotification(g.success(s.default.createElement("span",null,"Agency ",s.default.createElement("strong",null,t.name)," saved."),!1)),[3,4];case 3:return r=a.sent(),console.log(r),y(!1),E.current.addNotification(g.error("Error updating agency.")),[3,4];case 4:return[2]}}))}))};return i.MANAGE_AGENCY?s.default.createElement(s.Fragment,null,s.default.createElement("h2",null,"Agency: ",a," ",s.default.createElement("span",{className:"pointer d-inline-block ml-2",onClick:_},s.default.createElement(m.default,{name:"pencil"}))," "),s.default.createElement(v.default,{show:b,agency:r,writeAccess:!0,onClose:w,onSubmit:S}),s.default.createElement(h.default,{ref:E})):i.VIEW_AGENCY?s.default.createElement(s.Fragment,null,s.default.createElement("h2",null,"Agency: ",a," ",s.default.createElement("span",{className:"pointer d-inline-block ml-2",onClick:_},s.default.createElement(m.default,{name:"search-plus"}))," "),s.default.createElement(v.default,{show:b,agency:r,writeAccess:!1,onClose:w,onSubmit:S}),s.default.createElement(h.default,{ref:E})):null}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=i(n(1)),d=i(n(13)),f=i(n(4)),p=u(n(12)),m=u(n(3)),h=u(n(19)),g=i(n(20)),v=u(n(85));t.default=function(){var e=s.useContext(p.default),t=e.data,n=e.updateReload,r=c.get(t,"advertiser"),a=c.get(t,"advertiser.name"),i=d.getRights(t.rights),u=s.useState(!1),b=u[0],y=u[1],E=s.useRef(null),_=function(e){e.preventDefault(),y(!0)},w=function(){y(!1)},S=function(e,t){return l(void 0,void 0,void 0,(function(){var r;return o(this,(function(a){switch(a.label){case 0:if(!i.MANAGE_ADVERTISER)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,f.Put({path:"/api/advertisers/"+e,body:t})];case 2:return a.sent(),n(!0),y(!1),E.current.addNotification(g.success(s.default.createElement("span",null,"Advertiser ",s.default.createElement("strong",null,t.name)," saved."),!1)),[3,4];case 3:return r=a.sent(),console.log(r),y(!1),E.current.addNotification(g.error("Error updating advertiser.")),[3,4];case 4:return[2]}}))}))};return i.MANAGE_ADVERTISER?s.default.createElement(s.Fragment,null,s.default.createElement("h2",null,"Advertiser: ",a," ",s.default.createElement("span",{className:"pointer d-inline-block ml-2",onClick:_},s.default.createElement(m.default,{name:"pencil"}))," "),s.default.createElement(v.default,{show:b,advertiser:r,writeAccess:!0,onClose:w,onSubmit:S}),s.default.createElement(h.default,{ref:E})):i.VIEW_ADVERTISER?s.default.createElement(s.Fragment,null,s.default.createElement("h2",null,"Advertiser: ",a," ",s.default.createElement("span",{className:"pointer d-inline-block ml-2",onClick:_},s.default.createElement(m.default,{name:"search-plus"}))," "),s.default.createElement(v.default,{show:b,advertiser:r,writeAccess:!1,onClose:w,onSubmit:S}),s.default.createElement(h.default,{ref:E})):null}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=i(n(1)),f=i(n(13)),p=i(n(4)),m=u(n(12)),h=u(n(3)),g=u(n(19)),v=i(n(20)),b=u(n(86));t.default=function(){var e=s.useContext(m.default),t=e.data,n=e.updateReload,r=c.useParams(),a=(r.scope,r.scopeId,d.get(t,"campaignGroup")),i=d.get(t,"campaignGroup.name"),u=f.getRights(t.rights),y=s.useState(!1),E=y[0],_=y[1],w=s.useRef(null);return u.MANAGE_CAMPAIGNGROUP?s.default.createElement(s.Fragment,null,s.default.createElement("h2",null,"Campaign group: ",i," ",s.default.createElement("span",{className:"pointer d-inline-block ml-2",onClick:function(e){e.preventDefault(),_(!0)}},s.default.createElement(h.default,{name:"pencil"}))," "),s.default.createElement(b.default,{show:E,campaignGroup:a,onClose:function(){_(!1)},onSubmit:function(e,t){return l(void 0,void 0,void 0,(function(){var r;return o(this,(function(a){switch(a.label){case 0:if(!u.MANAGE_CAMPAIGNGROUP)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,p.Put({path:"/api/campaigngroups/"+e,body:t})];case 2:return a.sent(),n(!0),_(!1),w.current.addNotification(v.success(s.default.createElement("span",null,"Campaign group ",s.default.createElement("strong",null,t.name)," saved."),!1)),[3,4];case 3:return r=a.sent(),console.log(r),_(!1),w.current.addNotification(v.error("Error updating campaign group.")),[3,4];case 4:return[2]}}))}))}}),s.default.createElement(g.default,{ref:w})):u.VIEW_CAMPAIGNGROUP?s.default.createElement(s.Fragment,null,s.default.createElement("h2",null,"Campaign group: ",i)):null}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=i(n(1)),c=l(n(12)),d=i(n(21)),f=function(e){var t=o.default.createElement(u.Tooltip,{id:e.id},e.title);return o.default.createElement(u.OverlayTrigger,{placement:"top",overlay:t},o.default.createElement("i",{className:e.iconClasses}))};t.default=function(){var e=o.useContext(c.default).data,t=s.get(e,"campaign");if(t){var n=d.isRetail(t.structure);return o.default.createElement("h2",null,t.videoCampaign&&o.default.createElement(f,{id:"video-campaign-tooltip",title:"Video",iconClasses:"fa fa-video-camera"}),!t.videoCampaign&&o.default.createElement(f,{id:"display-campaign-tooltip",title:"Display",iconClasses:"fa fa-image"}),"Adserving"===t.biddingType&&o.default.createElement(f,{id:"adserving-campaign-tooltip",title:"Ad serving only",iconClasses:"adserving-campaign"}),"RTB"===t.biddingType&&o.default.createElement(f,{id:"rtb-campaign-tooltip",title:"RTB",iconClasses:"fa fa-gavel"}),"RETAIL_GPS"===t.structure&&o.default.createElement(f,{id:"gps-campaign-tooltip",title:"Retail - GPS based",iconClasses:"fa fa-globe"}),"RETAIL_ZIP"===t.structure&&o.default.createElement(f,{id:"zip-campaign-tooltip",title:"Retail - Postal code based",iconClasses:"fa fa-globe"}),!n&&t.isRetargeting&&o.default.createElement(f,{id:"retargeting-campaign-tooltip",title:"Retargeting",iconClasses:"fa fa-refresh"}),!n&&!t.isRetargeting&&o.default.createElement(f,{id:"prospecting-campaign-tooltip",title:"Prospecting",iconClasses:"fa fa-search"}),"Campaign: ",t.name)}return null}},function(e,t){e.exports=require("file-saver")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=i(n(1)),d=i(n(13)),f=i(n(4)),p=u(n(12)),m=u(n(3)),h=u(n(19)),g=i(n(20)),v=u(n(87));t.default=function(){var e=s.useContext(p.default),t=e.data,n=e.updateReload,r=c.get(t,"publisher"),a=c.get(t,"publisher.settings.name"),i=d.getRights(t.rights),u=s.useState(!1),b=u[0],y=u[1],E=s.useRef(null),_=function(e){e.preventDefault(),y(!0)},w=function(){y(!1)},S=function(e,t){return l(void 0,void 0,void 0,(function(){var r;return o(this,(function(a){switch(a.label){case 0:if(!i.MANAGE_PUBLISHER)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,f.Put({path:"/api/publishers/"+e,body:t})];case 2:return a.sent(),n(!0),y(!1),E.current.addNotification(g.success(s.default.createElement("span",null,"Publisher ",s.default.createElement("strong",null,c.get(t,"name"))," saved."),!1)),[3,4];case 3:return r=a.sent(),console.log(r),y(!1),E.current.addNotification(g.error("Error updating publisher.")),[3,4];case 4:return[2]}}))}))};return i.MANAGE_PUBLISHER?s.default.createElement(s.Fragment,null,s.default.createElement("h2",null,"Publisher: ",a," ",s.default.createElement("span",{className:"pointer d-inline-block ml-2",onClick:_},s.default.createElement(m.default,{name:"pencil"}))," "),s.default.createElement(v.default,{show:b,publisher:r,writeAccess:!0,onClose:w,onSubmit:S}),s.default.createElement(h.default,{ref:E})):i.VIEW_PUBLISHER?s.default.createElement(s.Fragment,null,s.default.createElement("h2",null,"Publisher: ",a," ",s.default.createElement("span",{className:"pointer d-inline-block ml-2",onClick:_},s.default.createElement(m.default,{name:"search-plus"}))," "),s.default.createElement(v.default,{show:b,publisher:r,writeAccess:!1,onClose:w,onSubmit:S}),s.default.createElement(h.default,{ref:E})):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getItems=void 0;t.getItems=function(e,t,n){switch(t.scope){case"root":return r();case"organization":return a(e,t,n);case"publisher":return i(e,t,n);case"agency":return l(e,t,n);case"advertiser":return o(e,t,n);case"campaigngroup":return u(e,t,n);case"campaign":return s(e,t,n);default:return[]}};var r=function(){return[{label:"Overview",active:!0,current:!0,parent:-1},{label:"Select organization",active:!0,current:!1,parent:-1,type:"organization"}]},a=function(e,t,n){var r=[];e.isRootAdmin&&r.push({href:"/"+t.page+"/root/0",label:"Overview",active:!1,current:!1});var a=n.find((function(e){return"organization"===e.level&&!0===e.navigable}));return void 0!==a&&(r=r.concat([{label:a.name,active:!0,current:!0,parent:-1,type:"organization"},{label:"Select agency",active:!0,current:!1,parent:a.id,type:"agency"}])),r},i=function(e,t,n){var r=[];e.isRootAdmin&&r.push({href:"/"+t.page+"/root/0",label:"Overview",active:!1,current:!1});var a=n.find((function(e){return"publisher"===e.level&&!0===e.navigable}));return void 0!==a&&r.push({label:a.name,active:!0,current:!0,parent:-1,type:"publisher"}),r},l=function(e,t,n){var r=[];e.isRootAdmin&&r.push({href:"/"+t.page+"/root/0",label:"Overview",active:!1,current:!1});var a=n.find((function(e){return"organization"===e.level&&!0===e.navigable})),i=n.find((function(e){return"agency"===e.level&&!0===e.navigable}));return void 0!==i&&(r=void 0!==a?r.concat([{label:a.name,active:!1,current:!1,href:"/"+t.page+"/organization/"+a.id,parent:-1,type:"organization"},{label:i.name,active:!0,current:!0,parent:a.id,type:"agency"},{label:"Select advertiser",active:!0,current:!1,parent:i.id,type:"advertiser"}]):r.concat([{label:i.name,active:!0,current:!0,parent:-1,type:"agency"},{label:"Select advertiser",active:!0,current:!1,parent:i.id,type:"advertiser"}])),r},o=function(e,t,n){var r=[];e.isRootAdmin&&r.push({href:"/"+t.page+"/root/0",label:"Overview",active:!1,current:!1});var a=n.find((function(e){return"organization"===e.level&&!0===e.navigable})),i=n.find((function(e){return"agency"===e.level&&!0===e.navigable})),l=n.find((function(e){return"advertiser"===e.level&&!0===e.navigable}));return void 0!==l&&(void 0!==a&&void 0!==i?r=r.concat([{label:a.name,active:!1,current:!1,href:"/"+t.page+"/organization/"+a.id,parent:-1,type:"organization"},{label:i.name,active:!1,current:!1,href:"/"+t.page+"/agency/"+i.id,parent:a.id,type:"agency"},{label:l.name,active:!0,current:!0,parent:i.id,type:"advertiser"}]):void 0!==i?r=r.concat([{label:i.name,active:!1,current:!1,href:"/"+t.page+"/agency/"+i.id,parent:-1,type:"agency"},{label:l.name,active:!0,current:!0,parent:i.id,type:"advertiser"}]):void 0!==l&&(r=r.concat([{label:l.name,active:!0,current:!0,parent:-1,type:"advertiser"}])),"campaign"===t.minScope&&(r=r.concat([{label:"Select campaign group",active:!0,current:!1,parent:l.id,type:"campaigngroup"},{label:"Select campaign",active:!0,current:!1,parent:l.id,type:"campaign"}]))),r},u=function(e,t,n){var r=[];e.isRootAdmin&&r.push({href:"/"+t.page+"/root/0",label:"Overview",active:!1,current:!1});var a=n.find((function(e){return"organization"===e.level&&!0===e.navigable})),i=n.find((function(e){return"agency"===e.level&&!0===e.navigable})),l=n.find((function(e){return"advertiser"===e.level&&!0===e.navigable})),o=n.find((function(e){return"campaigngroup"===e.level&&!0===e.navigable}));return void 0!==o&&(void 0!==a&&void 0!==i&&void 0!==l?r=r.concat([{label:a.name,active:!1,current:!1,href:"/"+t.page+"/organization/"+a.id,parent:-1,type:"organization"},{label:i.name,active:!1,current:!1,href:"/"+t.page+"/agency/"+i.id,parent:a.id,type:"agency"},{label:l.name,active:!1,current:!1,href:"/"+t.page+"/advertiser/"+l.id,parent:i.id,type:"advertiser"},{label:o.name,active:!0,current:!0,parent:l.id,type:"campaigngroup"},{label:"Select campaign",active:!0,current:!1,parent:o.id,type:"campaign"}]):void 0!==i&&void 0!==l?r=r.concat([{label:i.name,active:!1,current:!1,href:"/"+t.page+"/agency/"+i.id,parent:-1,type:"agency"},{label:l.name,active:!1,current:!1,href:"/"+t.page+"/advertiser/"+l.id,parent:i.id,type:"advertiser"},{label:o.name,active:!0,current:!0,parent:l.id,type:"campaigngroup"},{label:"Select campaign",active:!0,current:!1,parent:o.id,type:"campaign"}]):void 0!==l&&(r=r.concat([{label:l.name,active:!1,current:!1,href:"/"+t.page+"/advertiser/"+l.id,parent:-1,type:"advertiser"},{label:o.name,active:!0,current:!0,parent:l.id,type:"campaigngroup"},{label:"Select campaign",active:!0,current:!1,parent:o.id,type:"campaign"}]))),r},s=function(e,t,n){var r=[];e.isRootAdmin&&r.push({href:"/"+t.page+"/root/0",label:"Overview",active:!1,current:!1});var a=n.find((function(e){return"organization"===e.level&&!0===e.navigable})),i=n.find((function(e){return"agency"===e.level&&!0===e.navigable})),l=n.find((function(e){return"advertiser"===e.level&&!0===e.navigable})),o=n.find((function(e){return"campaigngroup"===e.level&&!0===e.navigable})),u=n.find((function(e){return"campaign"===e.level&&!0===e.navigable}));return void 0!==u&&(void 0!==a&&void 0!==i&&void 0!==l?r=r.concat([{label:a.name,active:!1,current:!1,href:"/"+t.page+"/organization/"+a.id,parent:-1,type:"organization"},{label:i.name,active:!1,current:!1,href:"/"+t.page+"/agency/"+i.id,parent:a.id,type:"agency"},{label:l.name,active:!1,current:!1,href:"/"+t.page+"/advertiser/"+l.id,parent:i.id,type:"advertiser"}]):void 0!==i&&void 0!==l?r=r.concat([{label:i.name,active:!1,current:!1,href:"/"+t.page+"/agency/"+i.id,parent:-1,type:"agency"},{label:l.name,active:!1,current:!1,href:"/"+t.page+"/advertiser/"+l.id,parent:i.id,type:"advertiser"}]):void 0!==l&&(r=r.concat([{label:l.name,active:!1,current:!1,href:"/"+t.page+"/advertiser/"+l.id,parent:-1,type:"advertiser"}])),void 0!==l&&void 0!==o?r=r.concat([{label:o.name,active:!1,current:!1,href:"/"+t.page+"/campaigngroup/"+o.id,parent:l.id,type:"campaigngroup"},{label:u.name,active:!0,current:!0,parent:o.id,type:"campaign",parentType:"campaigngroup"}]):void 0!==l&&r.push({label:u.name,active:!0,current:!0,parent:l.id,type:"campaign",parentType:"advertiser"})),r}},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(0)),c=n(6),d=u(n(5)),f=function(e){if(e.user.isRootAdmin?-1===e.item.parent&&e.item.current&&!e.item.type:-1===e.item.parent&&e.item.current)return s.default.createElement("span",{className:"current"},e.item.label.toString());if(e.item.active){var t=e.item.current?"current":null;return s.default.createElement("a",{className:t,href:"",onClick:e.onClick},e.item.label)}return s.default.createElement(c.Link,{to:e.item.href},e.item.label)},p=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.setNodeRef=function(e){r.node=e},r.setDropdownRefs=function(e,t){r.dropdownRefs[t]=e},r.setDropdownContainerRef=function(e){r.dropdownContainerRef=e},r.arrowClick=function(e){e.preventDefault(),r.props.onClick()},r.searchChange=function(e){var t=e.target.value;if(""===t.trim())r.setState({searchValue:t,searchResults:r.props.dropdownItems,cursor:0});else{var n=r.props.dropdownItems.filter((function(e){return e.label.toLowerCase().indexOf(t.trim().toLowerCase())>-1}));r.setState({searchValue:t,searchResults:n,cursor:0})}},r.outsideClick=function(e){!r.props.open||r.node&&r.node.contains(e.target)||r.props.outsideClick()},r.keyDown=function(e){if(38===e.keyCode&&r.state.cursor>0)r.setState((function(e){return{cursor:e.cursor-1}}),r.arrowUpPress);else if(40===e.keyCode&&r.state.cursor<r.state.searchResults.length-1)r.setState((function(e){return{cursor:e.cursor+1}}),r.arrowDownPress);else if(13==e.keyCode&&r.state.cursor>-1){var t=r.state.searchResults[r.state.cursor],n=r.getDropdownItemHref(t);window.location.href=n}},r.node=null,r.dropdownRefs=[],r.dropdownContainerRef=null,r.state={searchValue:"",searchResults:[],cursor:0},r}return a(t,e),t.prototype.componentDidMount=function(){this.setState({searchResults:this.props.dropdownItems}),document.addEventListener("mousedown",this.outsideClick)},t.prototype.componentWillReceiveProps=function(e){this.setState({searchResults:e.dropdownItems})},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.outsideClick)},t.prototype.arrowUpPress=function(){var e=this.dropdownContainerRef,t=this.dropdownRefs[this.state.cursor];if(t){var n=e.scrollTop||0;t.offsetTop-n<0&&(e.scrollTop-=30),n<270&&(e.scrollTop=0)}},t.prototype.arrowDownPress=function(){var e=this.dropdownContainerRef,t=this.dropdownRefs[this.state.cursor];if(t){var n=e.scrollTop||0;t.offsetTop-n>270&&(e.scrollTop+=30)}},t.prototype.getDropdownItemHref=function(e){return"/"+this.props.page+"/"+e.type+"/"+e.id},t.prototype.getTypeLabel=function(e){switch(e){case"organization":return"Organizations";case"agency":return"Agencies";case"advertiser":return"Advertisers";case"campaigngroup":return"Campaign groups";case"campaign":return"Campaigns";default:return""}},t.prototype.render=function(){var e=this,t=this.props.open?"fa fa-caret-square-o-up":"fa fa-caret-square-o-down",n=-1!==this.props.item.parent||this.props.user.isRootAdmin&&void 0!==this.props.item.type;return s.default.createElement("li",{className:"breadcrumb-item",ref:this.setNodeRef},s.default.createElement(f,{item:this.props.item,user:this.props.user,onClick:this.arrowClick}),void 0!==this.props.item.parent&&s.default.createElement(s.Fragment,null,n&&s.default.createElement("a",{className:"ml-1",href:"",onClick:this.arrowClick},s.default.createElement("i",{className:t})),this.props.open&&s.default.createElement("div",{className:"breadcrumb-dropdown card",ref:this.setDropdownContainerRef},s.default.createElement(d.default,{visible:this.props.loading}),!this.props.loading&&s.default.createElement(s.Fragment,null,s.default.createElement("div",{className:"breadcrumb-search-container"},s.default.createElement("input",{autoFocus:!0,type:"text",placeholder:"Search...",value:this.state.searchValue,onChange:this.searchChange,onKeyDown:this.keyDown})),s.default.createElement("div",{className:"breadcrumb-type"},this.getTypeLabel(this.props.item.type)),this.state.searchResults.length>0&&this.state.searchResults.map((function(t,n){return s.default.createElement("a",{key:n,ref:function(t){e.setDropdownRefs(t,n)},className:e.state.cursor===n?"active":null,href:"",onClick:function(n){n.preventDefault(),e.props.itemClick(e.getDropdownItemHref(t))},onMouseEnter:function(){return e.setState({cursor:n})}},t.label)})),0===this.state.searchResults.length&&s.default.createElement("div",{className:"ml-1"},"No results found")))))},t}(s.Component);t.default=p},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=n(6),c=n(2);n(63);var d=o(n(55)),f=o(n(64)),p=o(n(71)),m=o(n(94)),h=o(n(174)),g=o(n(176)),v=l(n(13)),b=o(n(12)),y=o(n(16)),E=o(n(41)),_=o(n(28));t.default=function(e){var t=s.useParams(),n=t.page,a=t.scope,i=t.scopeId,l=u.useContext(b.default).data,o="/"+n+"/"+a+"/"+i,w="/:page/:scope/:scopeId",S=v.getRights(l.rights),P=u.useContext(y.default),C=u.useContext(_.default).daterange,O=C.startDate.format("YYYY-MM-DD"),x=C.endDate.format("YYYY-MM-DD"),I="?sd="+O+"&ed="+x,N={rights:S,user:P,scope:a,scopeId:i,options:{startDate:O,endDate:x,scope:"all",statistics:S.VIEW_STATISTICS,videoMetrics:e.videoMode},videoMode:e.videoMode};return u.default.createElement(u.Fragment,null,u.default.createElement("div",{className:"row page-tabs"},u.default.createElement(c.Nav,{as:"ul",variant:"tabs",defaultActiveKey:"/campaigns"},u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:o+"/campaigns"+I},"Campaigns")),u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:o+"/campaigngroups"+I},"Campaign groups")),u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:o+"/advertisers"+I},"Advertisers")),u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:o+"/agencies"+I},"Agencies")),u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:o+"/organizations"+I},"Organizations")),u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:o+"/publishers"+I},"Publishers"))),u.default.createElement("div",{style:{marginRight:"25px"}},u.default.createElement(E.default,null))),u.default.createElement("div",{className:"row"},u.default.createElement(s.Switch,null,u.default.createElement(s.Redirect,{exact:!0,from:""+w,to:w+"/campaigns?sd="+O+"&ed="+x}),u.default.createElement(s.Route,{path:w+"/campaigns"},u.default.createElement(d.default,r({},N))),u.default.createElement(s.Route,{path:w+"/campaigngroups"},u.default.createElement(f.default,r({},N))),u.default.createElement(s.Route,{path:w+"/advertisers"},u.default.createElement(p.default,r({},N))),u.default.createElement(s.Route,{path:w+"/agencies"},u.default.createElement(m.default,r({},N))),u.default.createElement(s.Route,{path:w+"/organizations"},u.default.createElement(h.default,r({},N))),u.default.createElement(s.Route,{path:w+"/publishers"},u.default.createElement(g.default,r({},N))))))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=n(6),c=o(n(14)),d=l(n(23)),f=o(n(17)),p=n(2),m=o(n(3)),h=l(n(1)),g=l(n(8)),v=l(n(15));t.default=function(e){var t="campaigns-table-"+e.type,n=u.useState(1),a=n[0],i=n[1],l=u.useState(v.getInitialSizePerPage(t,e.user)),o=l[0],b=l[1],y=u.useState("recent"===e.type?{dataField:"endDate",order:"asc"}:{dataField:"endDate",order:"desc"}),E=y[0],_=y[1];var w,S,P,C,O=function(e,t){_({dataField:e,order:t})},x=function(e,t){i(e)},I=function(n,r){v.storeSizePerPage(n,t,e.user),b(n)},N=function(e,t){var n=g.campaignSettingsLink("/settings/campaign/"+t.id+"/general");return t.writeAccess?u.default.createElement(s.Link,{to:n},u.default.createElement(m.default,{name:"pencil"})):u.default.createElement(s.Link,{to:n},u.default.createElement(m.default,{name:"search-plus"}))},A=function(t,n){if(n.writeAccess){var r=u.default.createElement(p.Tooltip,{id:"archive-tooltip-"+n.id},"archive");return u.default.createElement(p.OverlayTrigger,{placement:"top",overlay:r},u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.archiveClick(n.id)},href:"",className:"table-btn"},u.default.createElement(m.default,{name:"archive"})))}return null},j=function(t,n){if(n.writeAccess){var r=u.default.createElement(p.Tooltip,{id:"restore-tooltip-"+n.id},"restore");return u.default.createElement(p.OverlayTrigger,{placement:"top",overlay:r},u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.restoreClick(n.id)},href:"",className:"table-btn"},u.default.createElement(m.default,{name:"repeat"})))}return null},M=function(){var t=v.getLastPage(e.records,o);return a>t?t:a},k=d.Search.SearchBar,F=(w=[{dataField:"writeAccess",text:"",hidden:!0},{dataField:"remarks",text:"",hidden:!0}],S="archived"===e.type?[{dataField:"df3",isDummyField:!0,text:"",formatter:j,headerStyle:{width:"30px"}}]:[{dataField:"df1",isDummyField:!0,text:"",formatter:N,headerStyle:{width:"30px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:A,headerStyle:{width:"30px"}}],P=e.metrics.map((function(t){return{dataField:t.col,text:t.label||t.col,align:t.align||"left",headerAlign:t.align||"left",sort:!0,onSort:O,sortCaret:v.columnSort,formatter:v.getFormatter(t.type,e.chartClick)}})),w.concat(S,P)),D=(C=e.metrics.map((function(e){return e.col})),e.records.map((function(e){var t=h.pick(e,C),n=h.get(e,"id",-1),r=e.rights.MANAGE_CAMPAIGN,a=(e.remarks||"").trim();return h.assign({id:n,writeAccess:r,advertiserId:e.advertiserId,remarks:a},t)}))),T=v.getSizePerPage(o,D.length),R=D.length||30;return u.default.createElement(d.default,{keyField:"id",data:D,columns:F,search:!0},(function(e){return u.default.createElement("div",null,u.default.createElement("div",{className:"search-label-container"},u.default.createElement(m.default,{name:"search"}),u.default.createElement(k,r({},e.searchProps,{placeholder:"Filter records",tableId:t}))),u.default.createElement(c.default,r({},e.baseProps,{id:t,bordered:!1,hover:!0,classes:"table-borderless",striped:!0,keyField:"id",data:D,columns:F,defaultSorted:[E],pagination:f.default({page:M(),sizePerPage:T,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:R}],onPageChange:x,onSizePerPageChange:I})})))}))}},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(0)),c=n(2),d=u(n(35)),f=u(n(11)),p=u(n(3)),m=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleEntering=function(){r.setState({date:f.default()})},r.handleDateChange=function(e){r.setState({date:e})},r.handleSubmit=function(){r.props.onSubmit(r.state.date.format("YYYY-MM-DD"))},r.isValidDate=function(e){return f.default(e).isSameOrBefore()},r.state={date:f.default()},r}return a(t,e),t.prototype.render=function(){return s.default.createElement(c.Modal,{show:this.props.show,onHide:this.props.onClose,onEntering:this.handleEntering,backdrop:"static"},s.default.createElement(c.Modal.Header,{closeButton:!0},s.default.createElement(c.Modal.Title,null,"Archive campaigns")),s.default.createElement(c.Modal.Body,null,s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12"},s.default.createElement(c.Form.Label,null,"Archive campaigns that ended before"),s.default.createElement(c.InputGroup,null,s.default.createElement(c.InputGroup.Prepend,null,s.default.createElement(c.InputGroup.Text,null,s.default.createElement(p.default,{name:"calendar"}))),s.default.createElement(d.default,{dateFormat:"YYYY-MM-DD",timeFormat:!1,onChange:this.handleDateChange,value:this.state.date,isValidDate:this.isValidDate}))))),s.default.createElement(c.Modal.Footer,null,s.default.createElement(c.Button,{size:"sm",variant:"light",onClick:this.props.onClose},"CANCEL"),s.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:this.handleSubmit},"ARCHIVE")))},t}(s.Component);t.default=m},function(e,t){e.exports=require("react-dates")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=i(n(4)),f=u(n(5)),p=u(n(91));t.default=function(e){var t=s.useState({}),n=t[0],r=t[1],a=s.useState(1),i=a[0],u=a[1],m=s.useState(!0),h=m[0],g=m[1];var v="budget_completion"===e.type?"Budget pacing - id: "+e.id:"Impressions pacing - id: "+e.id,b="budget_completion"===e.type?"budget":"impressions",y="budget_completion"===e.type?"budget-pacing":"impressions-pacing";return s.default.createElement(c.Modal,{dialogClassName:"modal-xxl",show:e.show,onHide:e.onClose,onEntering:function(){return l(void 0,void 0,void 0,(function(){var t,n,a;return o(this,(function(i){switch(i.label){case 0:g(!0),i.label=1;case 1:return i.trys.push([1,3,,4]),t="budget_completion"===e.type?"budget":"impressions",[4,d.Get({path:"/api/campaigns/"+e.id+"/pacing/"+t})];case 2:return n=i.sent(),r(n),[3,4];case 3:return a=i.sent(),console.log(a),[3,4];case 4:return g(!1),[2]}}))}))},backdrop:"static"},s.default.createElement(c.Modal.Header,{closeButton:!0},s.default.createElement(c.Modal.Title,null,v)),s.default.createElement(c.Modal.Body,null,s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12"},s.default.createElement(f.default,{visible:h}),!h&&s.default.createElement(p.default,{id:y,type:b,data:n,predictionDays:i,onPredictionChange:function(e){u(e)}})))),s.default.createElement(c.Modal.Footer,null,s.default.createElement(c.Button,{size:"sm",variant:"light",onClick:e.onClose},"CLOSE")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(11)),c=i(n(22)),d=i(n(92));t.default=function(e){var t=function(t){if(t.target.checked){var n=parseInt(t.target.value,10);e.onPredictionChange(n)}};function n(t){var n=s.default().format("YYYY-MM-DD");if(s.default(e.data.endDate)>=s.default(n)){var r=e.data["expectationToPredicted"+t+"DayTotal"];if(r.length>0){var a=r[r.length-1].value,i=c.numberWithCommas(a.actual),l=c.percentage(a.percentage),u=a.judgement;if("UNKNOWN"===u)return"0"===i?"Not enough data":"0.00%"!==l?o.default.createElement(o.Fragment,null,i," (",o.default.createElement("span",null,l),")"):i;var f=d.getJudgementColor(u);return o.default.createElement(o.Fragment,null,i," (",o.default.createElement("span",{style:{color:f}},l),")")}}return null}return o.default.createElement("div",{className:"pacing-predictions card mb-2"},o.default.createElement("table",null,o.default.createElement("thead",null,o.default.createElement("tr",null,o.default.createElement("th",{className:"pr-3 font-weight-bold"},"Prediction using data of"),o.default.createElement("th",{className:"font-weight-bold"},"at the end of the campaign"))),o.default.createElement("tbody",null,o.default.createElement("tr",null,o.default.createElement("td",{className:"pt-2 pb-2"},o.default.createElement(u.Form.Check,{id:e.type+"-pacing-prediction-1",type:"radio",name:e.type+"-pacing-prediction",value:"1",checked:1===e.predictionDays,onChange:t,label:"1 day"})),o.default.createElement("td",{className:"pt-2 pb-2"},o.default.createElement("div",null,n(1)))),o.default.createElement("tr",null,o.default.createElement("td",{className:"pt-2 pb-2"},o.default.createElement(u.Form.Check,{id:e.type+"-pacing-prediction-3",type:"radio",name:e.type+"-pacing-prediction",value:"3",checked:3===e.predictionDays,onChange:t,label:"3 days"})),o.default.createElement("td",{className:"pt-2 pb-2"},o.default.createElement("div",null,n(3)))),o.default.createElement("tr",null,o.default.createElement("td",{className:"pt-2 pb-2"},o.default.createElement(u.Form.Check,{id:e.type+"-pacing-prediction-7",type:"radio",name:e.type+"-pacing-prediction",value:"7",checked:7===e.predictionDays,onChange:t,label:"7 days"})),o.default.createElement("td",{className:"pt-2 pb-2"},o.default.createElement("div",null,n(7)))))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(11)),s=i(n(1)),c=i(n(22)),d=i(n(92)),f=l(n(56));t.default=function(e){function t(t){var r=[];e.data.campaignChanges&&s.forEach(e.data.campaignChanges,(function(e,a){var i=e||[];""!==n(t,i,a)&&r.push(n(t,i,a))}));var a="";r.length>0&&(a='<div class="card"><table class="table border-bottom-0"><thead><tr><th class="font-weight-bold border-top-0" colspan="3">'+t+"</th></tr></thead><tbody>",a+=r.join(""),a+="</tbody></table></div>"),$("#"+e.id+"-changes").html(a)}function n(e,t,n){var i=s.find(t,(function(t){return t.date===e}));if(i){var l=i.value,o=function(e){switch(e){case"budget":return"Budget";case"impressionCap":return"Max impressions";case"maxBid":return"Max bid";case"startTime":return"Start time";case"endTime":return"End time";default:return""}}(n),c=function(e,t,n){switch(e){case"budget":case"impressionCap":return r(t,n);case"maxBid":return function(e,t){return null===e?"was set to <i>"+t+"</i>":null===t?"<i>"+e+"</i> was unset":"was set from <i>"+e+"</i> to <i>"+t+"</i>"}(t,n);case"startTime":case"endTime":return a(t,n);case"active":return function(e){return e?"Campaign was activated":"Campaign was deactivated"}(n);case"targeting":return"Campaign targeting updated";default:return""}}(n,l.oldValue,l.newValue),d=function(e,t){var n="";"budget"===e?n="euro":"impressionCap"===e?n="users":"maxBid"===e?n="gavel":"startTime"===e?n="hourglass-start":"endTime"===e?n="hourglass-end":"active"===e?n=t?"play":"pause":"targeting"===e&&(n="bullseye");if(""!==n)return'<i class="fa fa-'+n+'"></i>';return""}(n,l.newValue);return'<tr>\n                <td style="width:50px;text-align:right;font-weight: 500">'+u.default(l.changeTime).format("HH:mm")+'</td>\n                <td style="width:30px">'+d+"</td><td>"+o+" "+c+"</td>\n              </tr>"}return""}function r(e,t){return null===e?"was set to <i>"+t.value+"</i> per "+t.type.toLowerCase():null===t?"<i>"+e.value+"</i> per "+e.type.toLowerCase()+" was unset":"was set from <i>"+e.value+"</i> per "+e.type.toLowerCase()+" to <i>"+t.value+"</i> per "+t.type.toLowerCase()}function a(e,t){return null===e?"was set to <i>"+u.default(t).format("YYYY-MM-DD HH:mm")+"</i>":null===t?"<i>"+u.default(e).format("YYYY-MM-DD HH:mm")+"</i> was unset":"was set from <i>"+u.default(e).format("YYYY-MM-DD HH:mm")+"</i> to <i>"+u.default(t).format("YYYY-MM-DD HH:mm")+"</i>"}function i(){var t={aim:"#66e0ff",linear:"#0067e6",spent:"#000000",prediction:"#000000"};["aim","linear","spent"].forEach((function(n){$("#"+e.id+"-chart .c3-circles-"+n+" .c3-circle").css({fill:t[n]})}))}function l(t,n){var r=(e.data[t]||[]).find((function(e){return e.date===n}));if("spentTotal"===t||"spentDay"===t)return c.numberWithCommas(s.get(r,"value",""));var a=s.get(r,"value.judgement",""),i=d.getJudgementColor(a),l=c.percentage(s.get(r,"value.percentage",""));return c.numberWithCommas(s.get(r,"value.needed",""))+' (<span style="width: auto; color: '+i+'">'+l+"</span>)"}function p(t,n,r){var a=s.find(e.data[t]||[],(function(e){return e.date===r})),i=s.get(a,"value.judgement",""),l=d.getJudgementColor(i),o=c.percentage(s.get(a,"value.percentage","")),u=c.numberWithCommas(s.get(a,"value.actual","")),f=c.numberWithCommas(s.get(a,"value.needed",""));return"UNKNOWN"===i&&("0"===u&&(u="Not enough data"),"0"===f&&(f="Not enough data")),"predicted"===n?u:"0.00%"===o?f:f+' (<span style="width: auto;color: '+l+'">'+o+"</span>)"}o.useEffect((function(){t(u.default().format("YYYY-MM-DD"))}),[]);var m,h,g,v,b,y,E,_,w,S,P,C,O,x,I,N=(h=function(e,t){var n=u.default(t),r=u.default(e),a=u.default().format("YYYY-MM-DD"),i=u.default(a),l={start:[],past:[],future:[],end:[]};if(i.diff(r,"days")<0)if(n.diff(r,"days")>14){for(var o=0;o<7;o++)l.future.push(u.default(e).add(o,"days").format("YYYY-MM-DD"));for(o=6;o>=0;o--)l.end.push(u.default(t).subtract(o,"days").format("YYYY-MM-DD"))}else for(o=n.diff(r,"days");o>=0;o--)l.end.push(u.default(t).subtract(o,"days").format("YYYY-MM-DD"));else if(n.diff(i,"days")<0)if(n.diff(r,"days")>67){for(o=0;o<7;o++)l.start.push(u.default(e).add(o,"days").format("YYYY-MM-DD"));for(o=59;o>=0;o--)l.past.push(u.default(t).subtract(o,"days").format("YYYY-MM-DD"))}else for(o=n.diff(r,"days");o>=0;o--)l.past.push(u.default(t).subtract(o,"days").format("YYYY-MM-DD"));else{if(i.diff(r,"days")>67){for(o=0;o<7;o++)l.start.push(u.default(e).add(o,"days").format("YYYY-MM-DD"));for(o=60;o>0;o--)l.past.push(u.default(a).subtract(o,"days").format("YYYY-MM-DD"))}else for(o=i.diff(r,"days");o>0;o--)l.past.push(u.default(a).subtract(o,"days").format("YYYY-MM-DD"));if(n.diff(i,"days")>14){for(o=0;o<7;o++)l.future.push(u.default(a).add(o,"days").format("YYYY-MM-DD"));for(o=6;o>=0;o--)l.end.push(u.default(t).subtract(o,"days").format("YYYY-MM-DD"))}else for(o=n.diff(i,"days");o>=0;o--)l.end.push(u.default(t).subtract(o,"days").format("YYYY-MM-DD"))}return l}(e.data.startDate,e.data.endDate),g="expectationToPredicted"+e.predictionDays+"DayTotal",v=function(e){var t=[];return e.start.length>0&&(t=t.concat(e.start)).push(""),e.past.length>0&&(t=t.concat(e.past)),e.future.length>0&&(t=t.concat(e.future)).push(""),e.end.length>0&&(t=t.concat(e.end)),t}(h),b=function(t){var n=["aim"];return t.start.length>0&&(t.start.forEach((function(t){var r=(e.data.aimToSpendTotal||[]).find((function(e){return e.date===t}));n.push(s.get(r,"value.needed",null))})),n.push(null)),t.past.length>0&&t.past.forEach((function(t,r){var a=(e.data.aimToSpendTotal||[]).find((function(e){return e.date===t}));n.push(s.get(a,"value.needed",null))})),t.future.length>0&&(t.future.forEach((function(t){var r=(e.data.aimToSpendTotal||[]).find((function(e){return e.date===t}));n.push(s.get(r,"value.needed",null))})),n.push(null)),t.end.length>0&&t.end.forEach((function(t){var r=(e.data.aimToSpendTotal||[]).find((function(e){return e.date===t}));n.push(s.get(r,"value.needed",null))})),n}(h),y=function(t){var n=["linear"];return t.start.length>0&&(t.start.forEach((function(t){var r=(e.data.expectationToSpendTotal||[]).find((function(e){return e.date===t}));n.push(s.get(r,"value.needed",null))})),n.push(null)),t.past.length>0&&t.past.forEach((function(t,r){var a=(e.data.expectationToSpendTotal||[]).find((function(e){return e.date===t}));n.push(s.get(a,"value.needed",null))})),t.future.length>0&&(t.future.forEach((function(t){var r=(e.data.expectationToSpendTotal||[]).find((function(e){return e.date===t}));n.push(s.get(r,"value.needed",null))})),n.push(null)),t.end.length>0&&t.end.forEach((function(t){var r=(e.data.expectationToSpendTotal||[]).find((function(e){return e.date===t}));n.push(s.get(r,"value.needed",null))})),n}(h),E=function(t){var n=["spent"];return t.start.length>0&&(t.start.forEach((function(t){var r=(e.data.spentTotal||[]).find((function(e){return e.date===t}));n.push(s.get(r,"value",null))})),n.push(null)),t.past.length>0&&t.past.forEach((function(t,r){var a=(e.data.spentTotal||[]).find((function(e){return e.date===t}));n.push(s.get(a,"value",null))})),t.future.length>0&&(t.future.forEach((function(e){n.push(null)})),n.push(null)),t.end.length>0&&t.end.forEach((function(e){n.push(null)})),n}(h),_=function(t,n){var r=["prediction"];return t.start.length>0&&(t.start.forEach((function(e){r.push(null)})),r.push(null)),t.past.length>0&&t.past.forEach((function(n,a){if(a===t.past.length-1){var i=(e.data.spentTotal||[]).find((function(e){return e.date===n}));r.push(s.get(i,"value",null))}else r.push(null)})),t.future.length>0&&(t.future.forEach((function(t){var a=(e.data[n]||[]).find((function(e){return e.date===t}));r.push(s.get(a,"value.actual",null))})),r.push(null)),t.end.length>0&&t.end.forEach((function(t){var a=(e.data[n]||[]).find((function(e){return e.date===t}));r.push(s.get(a,"value.actual",null))})),r}(h,g),w={aim:"#66e0ff",linear:"#0067e6",spent:"#000000",prediction:"#000000"},S={aim:"aim",linear:"goal",spent:"budget"===e.type?"spent":"impressions",prediction:"prediction"},P=function(e){var t=e.map((function(e,t){return""===e?t:-1})).filter((function(e){return-1!==e}));t=(t=[0].concat(t)).concat(e.length-1);for(var n=[],r=0;r<t.length-1;r++){var a=t[r],i=t[r+1]-1;r===t.length-2&&(i=t[r+1]);var l="";0===a&&6===i?l="start":a===e.length-8&&i===e.length-1&&(l="end"),n.push({axis:"x",start:a,end:i,class:"c3-date-region",label:l})}return n}(v),C=function(t,n){for(var r=u.default().format("YYYY-MM-DD"),a=s.findIndex(t,(function(e){return e===r})),i=[],l=function(r){if(r<t.length-1){var a=(e.data[n]||[]).find((function(e){return e.date===t[r+1]}));if(a){var l=s.get(a,"value.judgement",""),o=d.getJudgementClass(l);i.push({start:r,end:r+1,class:"c3-judgement-"+o})}}},o=a;o<t.length;o++)l(o);return i}(v,g),O=P.concat(C),m=y[y.length-1],x={data:{columns:[b,y,_,E],colors:w,names:S,axes:{aim:"y2",linear:"y2",spent:"y2",prediction:"y2"},color:function(t,n){return function(t,n,r,a){if("prediction"===n.id){var i=r[n.index],l=(e.data[a]||[]).find((function(e){return e.date===i}));if(l){var o=s.get(l,"value.judgement",""),u=d.getJudgementColor(o);if(u)return u}}return t}(t,n,v,g)},hide:["aim"]},axis:{x:{type:"category",categories:v,tick:{rotate:40,multiline:!1,culling:{max:15}},height:80},y:{show:!1},y2:"NaN"===m?{show:!0,padding:{top:10,bottom:10}}:{show:!0,min:0,max:1.25*m,tick:{format:function(e){return Math.round(e/m*100)+"%"},values:function(){return[0*m,.25*m,.5*m,.75*m,1*m,1.25*m]}},padding:{top:10,bottom:10}}},regions:O,grid:{x:{lines:[]}},point:{r:2,focus:{expand:{r:6}}},tooltip:{contents:function(n,r,a,i){return function(n,r,a){var i=n[0].index,o=a[i],u=r.start.concat(r.past);return function(t,n,r){if(r.indexOf(n)>=0){var a={aim:"#66e0ff",linear:"#0067e6",spent:"#000000",prediction:"#000000"};["linear","spent"].forEach((function(r){var i="spent"===r?"expectationToSpendTotal":"aimToSpendDay",l=(e.data[i]||[]).find((function(e){return e.date===n}));if(l){var o=s.get(l,"value.judgement",""),u=d.getJudgementColor(o);$("#"+e.id+"-chart .c3-circles-"+r+" .c3-circle").css({fill:a[r]}),$("#"+e.id+"-chart .c3-circles-"+r+" .c3-circle-"+t).css({fill:u})}}))}}(i,o,u),t(o),u.indexOf(o)>=0?function(t){var n={aim:"#66e0ff",linear:"#0067e6",spent:"#000000",prediction:"#000000"},r="budget"===e.type?"spent":"impressions",a=l("spentTotal",t),i=l("spentDay",t),o=l("expectationToSpendTotal",t),u=l("aimToSpendDay",t);return'<table class="c3-tooltip">\n    <tbody>\n      <tr>\n        <th colspan="3">'+t+'</th>\n      </tr>\n      <tr>\n        <td></td>\n        <td><strong>total</strong></td>\n        <td><strong>day</strong></td>\n      </tr>\n      <tr class="c3-tooltip-name--spent">\n        <td class="name"><span style="background-color:'+n.spent+'"></span>'+r+'</td>\n        <td class="value">'+a+'</td>\n        <td class="value">'+i+'</td>\n      </tr>\n      <tr>\n        <td colspan="3">compared to</td>\n      </tr>\n      <tr class="c3-tooltip-name--linear">\n        <td class="name"><span style="background-color:'+n.linear+'"></span>goal</td>\n        <td class="value">'+o+'</td>\n        <td class="value"></td>\n      </tr>\n      <tr class="c3-tooltip-name--aim">\n        <td class="name"><span style="background-color:'+n.aim+'"></span>aim</td>\n        <td class="value"></td>\n        <td class="value">'+u+"</td>\n      </tr>\n    </tbody>\n  </table>"}(o):function(t){var n={aim:"#66e0ff",linear:"#0067e6",spent:"#000000",prediction:"#000000"},r="expectationToPredicted"+e.predictionDays+"DayTotal",a=p(r,"predicted",t),i=p(r,"linear",t);return'<table class="c3-tooltip">\n    <tbody>\n      <tr>\n        <th colspan="2">'+t+'</th>\n      </tr>\n      <tr>\n        <td></td>\n        <td><strong>total</strong></td>\n      </tr>\n      <tr class="c3-tooltip-name--prediction">\n        <td class="name"><span style="background-color:'+n.prediction+'"></span>predicted</td>\n        <td class="value">'+a+'</td>\n      </tr>\n      <tr>\n        <td colspan="2">compared to</td>\n      </tr>\n      <tr class="c3-tooltip-name--linear">\n        <td class="name"><span style="background-color:'+n.linear+'"></span>goal</td>\n        <td class="value">'+i+"</td>\n      </tr>\n    </tbody>\n  </table>"}(o)}(n,h,v)}},onmouseout:i,size:{height:480}},(I=function(t,n){var r=u.default().format("YYYY-MM-DD"),a=[];if(t.indexOf(r)>-1){var i=(e.data[n]||[]).find((function(e){return e.date===r}));if(i){var l=s.get(i,"value.judgement",""),o=d.getJudgementClass(l);a.push({value:r,text:"today",position:"middle",class:"c3-gridline-"+o})}}var c=function(t){var n=[];return e.data.campaignChanges&&s.forEach(e.data.campaignChanges,(function(t,r){n=n.concat(e.data.campaignChanges[r].map((function(e){return e.date})))})),n=n.filter((function(e){return t.indexOf(e)>-1})),s.uniq(n)}(t).map((function(e){return{value:e,class:"c3-gridline-change"}}));return a.concat(c)}(v,g)).length>0&&(x.grid.x.lines=I),x);return o.default.createElement(f.default,{id:e.id+"-chart",height:"500px",options:N})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=i(n(1)),f=i(n(4)),p=i(n(8)),m=u(n(166)),h=u(n(167)),g=u(n(12)),v=u(n(3));t.default=function(e){var t=s.useContext(g.default).data,n=s.useState("new"),r=n[0],a=n[1],i=s.useState([]),u=i[0],b=i[1],y=s.useState(null),E=y[0],_=y[1],w=s.useState(null),S=w[0],P=w[1],C=s.useState(!1),O=C[0],x=C[1],I=s.useState(!1),N=I[0],A=I[1];s.useEffect((function(){!N&&O&&("new"===r?e.onNewSubmit(E):e.onExistingSubmit(S))}),[N,JSON.stringify(E),JSON.stringify(S)]);var j=function(){e.onClose()},M=function(e){e.target.checked&&a(e.target.value)};function k(){return l(this,void 0,void 0,(function(){var n,r,a,i;return o(this,(function(l){switch(l.label){case 0:return l.trys.push([0,5,,6]),"advertiser"!==e.scope?[3,1]:[2,[{value:(n=t.advertiser).id,label:n.name}]];case 1:return"campaigngroup"!==e.scope?[3,2]:[2,[{value:(n=d.get(t,"parents.advertiser")).parentId,label:n.name}]];case 2:return r=p.scopedParam({scope:e.scope,scopeId:e.scopeId}),[4,f.Get({path:"/api/advertisers",qs:r})];case 3:return a=l.sent(),[2,d.get(a,"advertisers",[]).map((function(e){return{value:e.advertiser.id,label:e.advertiser.name}}))];case 4:return[3,6];case 5:return i=l.sent(),console.log(i),[2,[]];case 6:return[2]}}))}))}return s.default.createElement(c.Modal,{size:"lg",show:e.show,onHide:j,onEnter:function(){return l(void 0,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return x(!1),[4,k()];case 1:return e=t.sent(),b(e),[2]}}))}))},onExited:function(){x(!1)},backdrop:"static"},s.default.createElement(c.Modal.Header,{closeButton:!0},s.default.createElement(c.Modal.Title,null,"Quick campaign setup")),s.default.createElement(c.Modal.Body,null,s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12"},s.default.createElement("div",null,s.default.createElement(c.Form.Check,{inline:!0,id:"setup-type-new",type:"radio",name:"setup-type",value:"new",checked:"new"===r,onChange:M,label:"New settings"}),s.default.createElement(c.Form.Check,{inline:!0,id:"setup-type-existing",type:"radio",name:"setup-type",value:"existing",checked:"existing"===r,onChange:M,label:"From existing campaign"})))),"new"===r&&s.default.createElement(h.default,{videoMode:e.videoMode,advertisers:u,scope:e.scope,data:t,submit:O,onCreate:function(e,t){A(e),_(t),e&&x(!1)}}),"existing"===r&&s.default.createElement(m.default,{advertisers:u,scope:e.scope,data:t,submit:O,onClone:function(e,t){A(e),P(t),e&&x(!1)}})),s.default.createElement(c.Modal.Footer,null,s.default.createElement(c.Button,{size:"sm",variant:"light",onClick:j},"CANCEL"),s.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:function(){x(!0)},disabled:O},!O&&s.default.createElement(s.Fragment,null,"SAVE"),O&&s.default.createElement(s.Fragment,null,s.default.createElement(v.default,{names:["refresh","spin"]})," SAVING"))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=u(n(9)),f=u(n(35)),p=u(n(37)),m=i(n(1)),h=u(n(11)),g=i(n(4)),v=i(n(8)),b=i(n(21)),y=i(n(7)),E=u(n(5)),_=u(n(3));t.default=function(e){var t=s.useState(""),n=t[0],r=t[1],a=s.useState(h.default().startOf("day")),i=a[0],u=a[1],w=s.useState(h.default().add(1,"months").endOf("day")),S=w[0],P=w[1],C=s.useState(null),O=C[0],x=C[1],I=s.useState("campaign"),N=I[0],A=I[1],j=s.useState(-1),M=j[0],k=j[1],F=s.useState(-1),D=F[0],T=F[1],R=s.useState([]),B=R[0],G=R[1],L=s.useState(!0),V=L[0],z=L[1],q=s.useState(-1),Y=q[0],U=q[1],H=s.useState([]),W=H[0],J=H[1],X=s.useState(!0),K=X[0],Z=X[1],$=s.useState({error:!1,message:""}),Q=$[0],ee=$[1],te=s.useState({error:!1,message:""}),ne=te[0],re=te[1],ae=s.useState({error:!1,message:""}),ie=ae[0],le=ae[1];function oe(e){return l(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),e>0?(t=v.scopedParam({scope:"advertiser",scopeId:e}),[4,g.Get({path:"/api/campaigns",qs:t})]):[3,2];case 1:return[2,r.sent()];case 2:return[2,[]];case 3:return[3,5];case 4:return n=r.sent(),console.log(n),[2,[]];case 5:return[2]}}))}))}s.useEffect((function(){k(e.advertisers.length>0?e.advertisers[0].value:-1)}),[e.advertisers.length]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return z(!0),[4,oe(M)];case 1:return e=t.sent(),G(e),e.length>0?T(e[0].campaign.id):T(-1),z(!1),[2]}}))}))}(),function(){l(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(a){switch(a.label){case 0:return Z(!0),"campaigngroup"!==e.scope?[3,1]:((t=m.get(e.data,"campaignGroup"))&&(n=[{value:t.id,label:t.name}],J(n),U(t.id)),[3,3]);case 1:return[4,b.campaigngroupOptions(M)];case 2:r=a.sent(),J(r),U(-1),a.label=3;case 3:return Z(!1),[2]}}))}))}()}),[M]),s.useEffect((function(){!function(){var t=B.find((function(e){return e.campaign.id===D}));if(t){var n=t.campaign;if(r("Copy of "+n.name),"campaigngroup"!==e.scope){var a=n.clusterId?n.clusterId:-1;U(a)}n.startTime>h.default().unix()&&(u(h.default.unix(n.startTime)),P(h.default.unix(n.endTime)))}else r(""),U(-1),u(h.default().startOf("day")),P(h.default().add(1,"months").endOf("day")),x(null),A("campaign")}(),function(){l(this,void 0,void 0,(function(){var e,t,n;return o(this,(function(r){switch(r.label){case 0:if(!(D>0))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,g.Get({path:"/api/campaigns/"+D+"/constraint"})];case 2:return e=r.sent(),(t=b.getBudgetFields(e))&&(x(t.budget),A(t.budgetPeriod)),[3,4];case 3:return n=r.sent(),console.log(n),[3,4];case 4:return[2]}}))}))}()}),[D]),s.useEffect((function(){if(e.submit){var t=y.required(n),r=function(){var e={error:!1,message:""};i&&S?i.isAfter(S)&&(e={error:!0,message:"End date should be same or after start date."}):e={error:!0,message:"Please fill out start/end date"};return e}(),a=ue(O);ee(t),re(r),le(a),t.error||r.error||a.error?e.onClone(!0,null):e.onClone(!1,{name:n,campaignId:D,startTime:i.unix(),endTime:S.unix(),budget:O,budgetPeriod:N,clusterId:Y})}}),[e.submit]);function ue(e){return e?{error:!1,message:""}:{error:!0,message:"Please fill out this field."}}var se=B.map((function(e){return{value:e.campaign.id,label:e.campaign.name}})),ce=b.budgetPeriodOptions(),de=ie.error?"form-control is-invalid":"form-control";return s.default.createElement(s.Fragment,null,s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,"Advertiser"),s.default.createElement(d.default,{inputId:"campaign-existing-advertiser",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:e.advertisers.find((function(e){return e.value===M})),onChange:function(e){k(e.value)},options:e.advertisers}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(E.default,{visible:V,loaderClass:"loading-input"}),!V&&s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,"Campaign"),s.default.createElement(d.default,{inputId:"campaign-existing-campaign",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:se.find((function(e){return e.value===D})),onChange:function(e){T(e.value)},options:se})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement("hr",null))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,{controlId:"campaign-existing-name"},s.default.createElement(c.Form.Label,null,"Name *"),s.default.createElement(c.Form.Control,{type:"text",value:n,isInvalid:Q.error,onChange:function(e){var t=e.target.value,n=y.required(t);r(t),ee(n)}}),Q.error&&s.default.createElement(c.Form.Control.Feedback,{type:"invalid"},Q.message)))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1 pb-2"},s.default.createElement(c.Form.Label,null,"Start date *"),s.default.createElement(c.InputGroup,null,s.default.createElement(c.InputGroup.Prepend,null,s.default.createElement(c.InputGroup.Text,null,s.default.createElement(_.default,{name:"calendar"}))),s.default.createElement(f.default,{dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm",onChange:function(e){u(e)},value:i}),ne.error&&s.default.createElement(c.Form.Control.Feedback,{type:"invalid"},ne.message))),s.default.createElement("div",{className:"col-lg-6 px-1 pb-2"},s.default.createElement(c.Form.Label,null,"End date *"),s.default.createElement(c.InputGroup,null,s.default.createElement(c.InputGroup.Prepend,null,s.default.createElement(c.InputGroup.Text,null,s.default.createElement(_.default,{name:"calendar"}))),s.default.createElement(f.default,{dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm",onChange:function(e){P(e)},value:S})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Label,null,"Budget *"),s.default.createElement(c.InputGroup,null,s.default.createElement(c.InputGroup.Prepend,null,s.default.createElement(c.InputGroup.Text,null,"â‚¬")),s.default.createElement(p.default,{id:"campaign-existing-budget",className:de,value:O,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:2,onValueChange:function(e){var t=m.get(e,"floatValue"),n=ue(t);x(t),le(n)}}),ie.error&&s.default.createElement(c.Form.Control.Feedback,{type:"invalid"},ie.message))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Group,{style:{marginTop:"27px"}},s.default.createElement(d.default,{inputId:"campaign-existing-budget-period",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:ce.find((function(e){return e.value===N})),onChange:function(e){var t=e.value;A(t)},options:ce})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(E.default,{visible:K,loaderClass:"loading-input"}),!K&&s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,"Campaign group"),s.default.createElement(d.default,{inputId:"campaign-existing-campaigngroup",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:W.find((function(e){return e.value===Y})),onChange:function(e){U(e.value)},options:W})))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=u(n(9)),f=u(n(35)),p=u(n(37)),m=i(n(1)),h=u(n(11)),g=i(n(4)),v=i(n(21)),b=i(n(7)),y=u(n(5)),E=u(n(93)),_=u(n(3));t.default=function(e){var t=s.useState(""),n=t[0],r=t[1],a=s.useState(h.default().startOf("day")),i=a[0],u=a[1],w=s.useState(h.default().add(1,"months").endOf("day")),S=w[0],P=w[1],C=s.useState(null),O=C[0],x=C[1],I=s.useState("campaign"),N=I[0],A=I[1],j=s.useState(e.videoMode?"video":"display"),M=j[0],k=j[1],F=s.useState("RTB"),D=F[0],T=F[1],R=s.useState("prospecting"),B=R[0],G=R[1],L=s.useState(e.videoMode?1:2),V=L[0],z=L[1],q=s.useState(-1),Y=q[0],U=q[1],H=s.useState([]),W=H[0],J=H[1],X=s.useState([]),K=X[0],Z=X[1],$=s.useState(!0),Q=$[0],ee=$[1],te=s.useState([]),ne=te[0],re=te[1],ae=s.useState(!0),ie=ae[0],le=ae[1],oe=s.useState(-1),ue=oe[0],se=oe[1],ce=s.useState({error:!1,message:""}),de=ce[0],fe=ce[1],pe=s.useState({error:!1,message:""}),me=pe[0],he=pe[1],ge=s.useState({error:!1,message:""}),ve=ge[0],be=ge[1],ye=v.isRetail(B);s.useEffect((function(){U(e.advertisers.length>0?e.advertisers[0].value:-1)}),[e.advertisers.length]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(a){switch(a.label){case 0:return le(!0),"campaigngroup"!==e.scope?[3,1]:((t=m.get(e.data,"campaignGroup"))&&(n=[{value:t.id,label:t.name}],re(n),se(t.id)),[3,3]);case 1:return[4,v.campaigngroupOptions(Y)];case 2:r=a.sent(),re(r),se(-1),a.label=3;case 3:return le(!1),[2]}}))}))}()}),[Y]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return ye&&Y>0?(ee(!0),[4,g.Get({path:"/api/advertisers/"+Y+"/retailbranches"})]):[3,2];case 1:e=t.sent(),Z(e),ee(!1),t.label=2;case 2:return[2]}}))}))}()}),[JSON.stringify({advertiserId:Y,isRetail:ye})]),s.useEffect((function(){if(e.submit){var t=document.getElementById("campaign-new-name"),r=b.native(t),a=function(){var e={error:!1,message:""};i&&S?i.isAfter(S)&&(e={error:!0,message:"End date should be same or after start date."}):e={error:!0,message:"Please fill out start/end date"};return e}(),l=Pe(O);fe(r),he(a),be(l),r.error||a.error||l.error?e.onCreate(!0,null):e.onCreate(!1,{name:n,startTime:i.unix(),endTime:S.unix(),budget:O,budgetPeriod:N,adType:M,biddingType:D,campaignType:B,revenueType:V,advertiserId:Y,clusterId:ue,retailBranches:W})}}),[e.submit]);var Ee=function(e){if(e.target.checked){var t=e.target.value;k(t),"video"===t?(T("RTB"),z(1)):z(2)}},_e=function(e){if(e.target.checked){var t=e.target.value;T(e.target.value),"Adserving"===t&&"retargeting"===B&&G("prospecting")}},we=function(e){e.target.checked&&G(e.target.value)},Se=function(e){if(e.target.checked){var t=parseInt(e.target.value);z(t)}};function Pe(e){return e?{error:!1,message:""}:{error:!0,message:"Please fill out this field."}}var Ce=v.budgetPeriodOptions(),Oe=v.adTypeOptions(),xe=v.biddingTypeOptions(),Ie=v.campaignTypeOptions(D),Ne=v.revenueTypeOptions("video"===M),Ae=ve.error?"form-control is-invalid":"form-control";return s.default.createElement(s.Fragment,null,s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,{controlId:"campaign-new-name"},s.default.createElement(c.Form.Label,null,"Name *"),s.default.createElement(c.Form.Control,{type:"text",value:n,isInvalid:de.error,onChange:function(e){var t=e.target.value,n=b.native(e.target);r(t),fe(n)},required:!0,maxLength:200}),de.error&&s.default.createElement(c.Form.Control.Feedback,{type:"invalid"},de.message)))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1 pb-2"},s.default.createElement(c.Form.Label,null,"Start date *"),s.default.createElement(c.InputGroup,null,s.default.createElement(c.InputGroup.Prepend,null,s.default.createElement(c.InputGroup.Text,null,s.default.createElement(_.default,{name:"calendar"}))),s.default.createElement(f.default,{dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm",onChange:function(e){u(e)},value:i}),me.error&&s.default.createElement(c.Form.Control.Feedback,{type:"invalid"},me.message))),s.default.createElement("div",{className:"col-lg-6 px-1 pb-2"},s.default.createElement(c.Form.Label,null,"End date *"),s.default.createElement(c.InputGroup,null,s.default.createElement(c.InputGroup.Prepend,null,s.default.createElement(c.InputGroup.Text,null,s.default.createElement(_.default,{name:"calendar"}))),s.default.createElement(f.default,{dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm",onChange:function(e){P(e)},value:S})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Label,null,"Budget *"),s.default.createElement(c.InputGroup,null,s.default.createElement(c.InputGroup.Prepend,null,s.default.createElement(c.InputGroup.Text,null,"â‚¬")),s.default.createElement(p.default,{id:"campaign-new-budget",className:Ae,value:O,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:2,onValueChange:function(e){var t=m.get(e,"floatValue"),n=Pe(t);x(t),be(n)}}),ve.error&&s.default.createElement(c.Form.Control.Feedback,{type:"invalid"},ve.message))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Group,{style:{marginTop:"27px"}},s.default.createElement(d.default,{inputId:"campaign-new-budget-period",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:Ce.find((function(e){return e.value===N})),onChange:function(e){var t=e.value;A(t)},options:Ce})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,{className:"width-100"},"Ad type"),Oe.map((function(e,t){return s.default.createElement(c.Form.Check,{inline:!0,id:"campaign-new-adtype-"+e.value,type:"radio",value:e.value,name:"campaign-new-adtype",checked:e.value===M,onChange:Ee,label:e.label})})))),s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,{className:"width-100"},"Delivery type"),xe.map((function(e,t){return s.default.createElement(c.Form.Check,{inline:!0,id:"campaign-new-biddingtype-"+e.value,disabled:"video"===M,type:"radio",value:e.value,name:"campaign-new-biddingtype",checked:e.value===D,onChange:_e,label:e.label})})))),s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,{className:"width-100"},"Campaign type"),Ie.map((function(e,t){return s.default.createElement(c.Form.Check,{inline:!0,id:"campaign-new-campaigntype-"+e.value,type:"radio",value:e.value,name:"campaign-new-campaigntype",checked:e.value===B,onChange:we,label:e.label})})))),s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,{className:"width-100"},"Optimize"),Ne.map((function(e,t){return s.default.createElement(c.Form.Check,{inline:!0,id:"campaign-new-optimizationtype-"+e.value,type:"radio",value:e.value,name:"campaign-new-optimizationtype",checked:e.value===V.toString(),onChange:Se,label:e.label})}))))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,"Advertiser"),s.default.createElement(d.default,{inputId:"campaign-new-advertiser",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:e.advertisers.find((function(e){return e.value===Y})),onChange:function(e){U(e.value)},options:e.advertisers}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(y.default,{visible:ie,loaderClass:"loading-input"}),!ie&&s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,"Campaign group"),s.default.createElement(d.default,{inputId:"campaign-new-campaigngroup",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:ne.find((function(e){return e.value===ue})),onChange:function(e){se(e.value)},options:ne})))),ye&&s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Label,{className:"pull-left"},"Retail branches"),s.default.createElement(y.default,{visible:Q}),!Q&&s.default.createElement(E.default,{records:K,onChange:function(e){J(e)}}))))}},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},l=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&l(t,e,n);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=u(n(0)),d=s(n(14)),f=u(n(23)),p=s(n(17)),m=n(2),h=s(n(3)),g=u(n(1)),v=u(n(15)),b=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.tableIdprefix="campaigngroups-table-",r.onSort=function(e,t){r.setState({defaultSorted:{dataField:e,order:t}})},r.onSizePerPageChange=function(e,t){v.storeSizePerPage(e,r.tableIdprefix+r.props.type,r.props.user),r.setState({sizePerPage:e})},r.editFormatter=function(e,t){return t.writeAccess?c.default.createElement("a",{onClick:function(e){e.preventDefault(),r.props.editClick(t.id,t.writeAccess)},href:"",className:"table-btn"},c.default.createElement(h.default,{name:"pencil"})):null},r.archiveFormatter=function(e,t){if(t.writeAccess){var n=c.default.createElement(m.Tooltip,{id:"archive-tooltip-"+t.id},"archive");return c.default.createElement(m.OverlayTrigger,{placement:"top",overlay:n},c.default.createElement("a",{onClick:function(e){e.preventDefault(),r.props.archiveClick(t.id)},href:"",className:"table-btn"},c.default.createElement(h.default,{name:"archive"})))}return null},r.restoreFormatter=function(e,t){if(t.writeAccess){var n=c.default.createElement(m.Tooltip,{id:"restore-tooltip-"+t.id},"restore");return c.default.createElement(m.OverlayTrigger,{placement:"top",overlay:n},c.default.createElement("a",{onClick:function(e){e.preventDefault(),r.props.restoreClick(t.id)},href:"",className:"table-btn"},c.default.createElement(h.default,{name:"repeat"})))}return null},r.state={page:1,sizePerPage:v.getInitialSizePerPage(r.tableIdprefix+r.props.type,r.props.user),defaultSorted:r.defaultSorted()},r}return a(t,e),t.prototype.defaultSorted=function(){return"recent"===this.props.type?{dataField:"endDate",order:"asc"}:{dataField:"endDate",order:"desc"}},t.prototype.getColumns=function(){var e=this,t=this.props.metrics.map((function(t){return{dataField:t.col,text:t.label||t.col,align:t.align||"left",headerAlign:t.align||"left",sort:!0,onSort:e.onSort,sortCaret:v.columnSort,formatter:v.getFormatter(t.type)}})),n=this.getEditCols();return[{dataField:"writeAccess",text:"#",hidden:!0}].concat(n,t)},t.prototype.getEditCols=function(){return"archived"===this.props.type?[{dataField:"df3",isDummyField:!0,text:"",formatter:this.restoreFormatter,headerStyle:{width:"30px"}}]:[{dataField:"df1",isDummyField:!0,text:"",formatter:this.editFormatter,headerStyle:{width:"30px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:this.archiveFormatter,headerStyle:{width:"30px"}}]},t.prototype.getRows=function(){var e=this.props.metrics.map((function(e){return e.col}));return this.props.records.map((function(t){var n=g.pick(t,e),r=g.get(t,"id",-1),a=t.rights.MANAGE_CAMPAIGNGROUP;return g.assign({id:r,writeAccess:a},n)}))},t.prototype.getCurrentPage=function(){var e=v.getLastPage(this.getRows(),this.state.sizePerPage);return this.state.page>e?e:this.state.page},t.prototype.render=function(){var e=this,t=f.Search.SearchBar,n=this.getRows(),r=this.getColumns(),a=v.getSizePerPage(this.state.sizePerPage,n.length);return c.default.createElement(f.default,{keyField:"id",data:n,columns:r,search:!0},(function(l){return c.default.createElement("div",null,c.default.createElement("div",{className:"search-label-container"},c.default.createElement(h.default,{name:"search"}),c.default.createElement(t,i({},l.searchProps,{placeholder:"Filter records",tableId:e.tableIdprefix+e.props.type}))),c.default.createElement(d.default,i({},l.baseProps,{id:e.tableIdprefix+e.props.type,classes:"campaigngroups-table table-borderless",bordered:!1,hover:!0,striped:!0,keyField:"id",data:n,columns:r,defaultSorted:[e.state.defaultSorted],pagination:p.default({page:e.getCurrentPage(),sizePerPage:a,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:e.props.records.length}],onPageChange:function(t,n){e.setState({page:t})},onSizePerPageChange:e.onSizePerPageChange})})))}))},t}(c.Component);t.default=b},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(0)),c=n(2),d=u(n(35)),f=u(n(11)),p=u(n(3)),m=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleEntering=function(){r.setState({date:f.default()})},r.handleDateChange=function(e){r.setState({date:e})},r.handleSubmit=function(){r.props.handleSubmit(r.state.date.format("YYYY-MM-DD"))},r.isValidDate=function(e){return f.default(e).isSameOrBefore()},r.state={date:f.default()},r}return a(t,e),t.prototype.render=function(){return s.default.createElement(c.Modal,{show:this.props.show,onHide:this.props.handleClose,onEntering:this.handleEntering,backdrop:"static"},s.default.createElement(c.Modal.Header,{closeButton:!0},s.default.createElement(c.Modal.Title,null,"Archive campaign groups")),s.default.createElement(c.Modal.Body,null,s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12"},s.default.createElement(c.Form.Label,null,"Archive campaign groups that ended before"),s.default.createElement(c.InputGroup,null,s.default.createElement(c.InputGroup.Prepend,null,s.default.createElement(c.InputGroup.Text,null,s.default.createElement(p.default,{name:"calendar"}))),s.default.createElement(d.default,{dateFormat:"YYYY-MM-DD",timeFormat:!1,onChange:this.handleDateChange,value:this.state.date,isValidDate:this.isValidDate}))))),s.default.createElement(c.Modal.Footer,null,s.default.createElement(c.Button,{size:"sm",variant:"light",onClick:this.props.handleClose},"CANCEL"),s.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:this.handleSubmit},"ARCHIVE")))},t}(s.Component);t.default=m},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},l=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&l(t,e,n);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=u(n(0)),d=s(n(14)),f=u(n(23)),p=s(n(17)),m=s(n(3)),h=u(n(1)),g=u(n(15)),v=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.tableId="advertisers-table",r.onSort=function(e,t){r.setState({defaultSorted:{dataField:e,order:t}})},r.onSizePerPageChange=function(e,t){g.storeSizePerPage(e,r.tableId,r.props.user),r.setState({sizePerPage:e})},r.editFormatter=function(e,t){return t.writeAccess?c.default.createElement("a",{onClick:function(e){e.preventDefault(),r.props.editClick(t.id,t.writeAccess)},href:"",className:"table-btn"},c.default.createElement(m.default,{name:"pencil"})):c.default.createElement("a",{onClick:function(e){e.preventDefault(),r.props.editClick(t.id,t.writeAccess)},href:"",className:"table-btn"},c.default.createElement(m.default,{name:"search-plus"}))},r.deleteFormatter=function(e,t){return t.writeAccess?c.default.createElement("a",{onClick:function(e){e.preventDefault(),r.props.deleteClick(t.id)},href:"",className:"table-btn"},c.default.createElement(m.default,{name:"remove"})):null},r.state={page:1,sizePerPage:g.getInitialSizePerPage(r.tableId,r.props.user),defaultSorted:r.defaultSorted()},r}return a(t,e),t.prototype.defaultSorted=function(){return this.props.rights.VIEW_STATISTICS?{dataField:"costs",order:"desc"}:{dataField:"displayName",order:"asc"}},t.prototype.getColumns=function(){var e=this,t=this.props.metrics.map((function(t){return{dataField:t.col,text:t.label||t.col,align:t.align||"left",headerAlign:t.align||"left",sort:!0,onSort:e.onSort,sortCaret:g.columnSort,formatter:g.getFormatter(t.type)}})),n=[{dataField:"df1",isDummyField:!0,text:"",formatter:this.editFormatter,headerStyle:{width:"30px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:this.deleteFormatter,headerStyle:{width:"30px"}}];return[{dataField:"id",text:"#",hidden:!0},{dataField:"writeAccess",text:"#",hidden:!0}].concat(n,t)},t.prototype.getRows=function(){var e=this.props.metrics.map((function(e){return e.col}));return this.props.advertisers.map((function(t){var n=h.pick(t,e),r=h.get(t,"advertiser.id",-1),a=t.rights.MANAGE_ADVERTISER;return h.assign({id:r,writeAccess:a},n)}))},t.prototype.getCurrentPage=function(){var e=g.getLastPage(this.getRows(),this.state.sizePerPage);return this.state.page>e?e:this.state.page},t.prototype.render=function(){var e=this,t=f.Search.SearchBar,n=this.getRows(),r=this.getColumns(),a=g.getSizePerPage(this.state.sizePerPage,n.length);return c.default.createElement(f.default,{keyField:"id",data:n,columns:r,search:!0},(function(l){return c.default.createElement("div",null,c.default.createElement("div",{className:"search-label-container"},c.default.createElement(m.default,{name:"search"}),c.default.createElement(t,i({},l.searchProps,{placeholder:"Filter records",tableId:e.tableId}))),c.default.createElement(d.default,i({},l.baseProps,{classes:"table-borderless",id:e.tableId,bordered:!1,hover:!0,striped:!0,keyField:"id",data:n,columns:r,defaultSorted:[e.state.defaultSorted],pagination:p.default({page:e.getCurrentPage(),sizePerPage:a,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:e.props.advertisers.length}],onPageChange:function(t,n){e.setState({page:t})},onSizePerPageChange:e.onSizePerPageChange})})))}))},t}(c.Component);t.default=v},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(0)),f=o(n(1)),p=n(2),m=c(n(9)),h=o(n(4)),g=o(n(7)),v=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleEntering=function(){return u(r,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.loadData(this.props)];case 1:return e.sent(),[2]}}))}))},r.handleClose=function(){var e=r.initialState();r.setState(e,(function(){r.props.onClose()}))},r.handleNameChange=function(e){var t=e.target.value,n=g.required(t);r.setState({name:t,nameValidation:n})},r.handleDomainChange=function(e){var t=e.target.value,n=g.domain(e.target.value,!0);r.setState({advertiserDomain:t,domainValidation:n})},r.handleAgencyChange=function(e){r.setState({agencyId:e.value,advertiserFee:e.fee})},r.handleAdvertiserFeeChange=function(e){var t=parseInt(e.target.value,10),n=g.native(e.target);r.setState({advertiserFee:t,advertiserFeeValidation:n})},r.handleSubmit=function(){var e=r.state.name,t=g.required(e),n=r.state.advertiserDomain,a=g.domain(n,!0),i=document.getElementById("advertiser-fee");i.value=r.state.advertiserFee.toString();var l=g.native(i);t.error||a.error||l.error?r.setState({nameValidation:t,domainValidation:a,advertiserFeeValidation:l}):r.setState({saving:!0},(function(){var t=r.state.advertiserFee,a={name:e,advertiserDomain:n,advertiserFee:t,agencyId:r.state.agencyId};r.props.onSubmit(-1,a)}))},r.state=r.initialState(),r}return a(t,e),t.prototype.loadData=function(e){return u(this,void 0,void 0,(function(){var t,n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return"all"!==e.scope&&"metaAgency"!==e.scope?[3,2]:(t="all"===e.scope?{}:{organizationId:e.scopeId},[4,h.Get({path:"/api/agencies",qs:t})]);case 1:return n=l.sent(),r=(n.agencies||[]).map((function(e){return{value:e.agency.id,label:e.agency.name,fee:f.get(e,"agency.defaultAdvertiserFee",0)}})),a=-1,i=0,r.length>0&&(a=r[0].value,i=r[0].fee),this.setState({agencies:r,name:"",agencyId:a,advertiserFee:i,saving:!1}),[3,3];case 2:"agency"===e.scope&&this.setState({agencies:[],name:"",agencyId:e.scopeId,advertiserFee:e.agencyFee||0,saving:!1}),l.label=3;case 3:return[2]}}))}))},t.prototype.initialState=function(){return{name:"",agencyId:-1,advertiserDomain:"",advertiserFee:0,agencies:[],nameValidation:{error:!1,message:""},domainValidation:{error:!1,message:""},advertiserFeeValidation:{error:!1,message:""},saving:!1}},t.prototype.render=function(){var e=this;return d.default.createElement(p.Modal,{className:"advertiser-add-modal",show:this.props.show,onHide:this.handleClose,onEntering:this.handleEntering,backdrop:"static"},d.default.createElement(p.Modal.Header,{closeButton:!0},d.default.createElement(p.Modal.Title,null,"Quick advertiser setup")),d.default.createElement(p.Modal.Body,null,d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-sm-12"},("all"===this.props.scope||"metaAgency"===this.props.scope)&&d.default.createElement(p.Form.Group,{controlId:"advertiser-agency"},d.default.createElement(p.Form.Label,null,"Agency * "),d.default.createElement(m.default,{inputId:"react-select-advertiser-agency",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:this.state.agencies.find((function(t){return t.value===e.state.agencyId})),onChange:this.handleAgencyChange,options:this.state.agencies})),d.default.createElement(p.Form.Group,{controlId:"advertiser-name"},d.default.createElement(p.Form.Label,null,"Name *"),d.default.createElement(p.Form.Control,{autoFocus:!0,type:"text",value:this.state.name,isInvalid:this.state.nameValidation.error,onChange:this.handleNameChange}),this.state.nameValidation.error&&d.default.createElement(p.Form.Control.Feedback,{type:"invalid"},this.state.nameValidation.message)),d.default.createElement(p.Form.Group,{controlId:"advertiser-domain"},d.default.createElement(p.Form.Label,null,"Advertiser domain *"),d.default.createElement(p.Form.Control,{placeholder:"e.g. domain.nl (without http://, https://, www.)",value:this.state.advertiserDomain,isInvalid:this.state.domainValidation.error,onChange:this.handleDomainChange}),this.state.domainValidation.error&&d.default.createElement(p.Form.Control.Feedback,{type:"invalid"},this.state.domainValidation.message)),d.default.createElement(p.Form.Group,{controlId:"advertiser-fee"},d.default.createElement(p.Form.Label,null,"Agency fee *"),d.default.createElement(p.Form.Control,{disabled:!this.props.rights.MANAGE_AGENCY,required:!0,type:"number",step:"0.01",min:"0",isInvalid:this.state.advertiserFeeValidation.error,value:this.state.advertiserFee.toString(),onChange:this.handleAdvertiserFeeChange}),this.state.advertiserFeeValidation.error&&d.default.createElement(p.Form.Control.Feedback,{type:"invalid"},this.state.advertiserFeeValidation.message))))),d.default.createElement(p.Modal.Footer,null,d.default.createElement(p.Button,{size:"sm",variant:"light",onClick:this.handleClose},"CANCEL"),d.default.createElement(p.Button,{size:"sm",variant:"primary",onClick:this.handleSubmit,disabled:this.state.saving},"SAVE")))},t}(d.Component);t.default=v},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},l=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&l(t,e,n);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=u(n(0)),d=s(n(14)),f=u(n(23)),p=s(n(17)),m=u(n(1)),h=s(n(3)),g=u(n(15)),v=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.tableId="agencies-table",r.onSort=function(e,t){r.setState({defaultSorted:{dataField:e,order:t}})},r.onSizePerPageChange=function(e,t){g.storeSizePerPage(e,r.tableId,r.props.user),r.setState({sizePerPage:e})},r.editFormatter=function(e,t){return t.writeAccess?c.default.createElement("a",{onClick:function(e){e.preventDefault(),r.props.editClick(t.id,t.writeAccess)},href:"",className:"table-btn"},c.default.createElement(h.default,{name:"pencil"})):c.default.createElement("a",{onClick:function(e){e.preventDefault(),r.props.editClick(t.id,t.writeAccess)},href:"",className:"table-btn"},c.default.createElement(h.default,{name:"search-plus"}))},r.deleteFormatter=function(e,t){return t.writeAccess?c.default.createElement("a",{onClick:function(e){e.preventDefault(),r.props.deleteClick(t.id)},href:"",className:"table-btn"},c.default.createElement(h.default,{name:"remove"})):null},r.state={page:1,sizePerPage:g.getInitialSizePerPage(r.tableId,r.props.user),defaultSorted:r.defaultSorted()},r}return a(t,e),t.prototype.defaultSorted=function(){return this.props.rights.VIEW_STATISTICS?{dataField:"costs",order:"desc"}:{dataField:"displayName",order:"asc"}},t.prototype.metrics=function(){return this.props.rights.VIEW_STATISTICS?this.props.videoMode?this.props.rights.VIEW_FINANCIALS?[{col:"displayName",label:"name",type:"agency",align:"left"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"completions",label:"completions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"revenue",label:"revenue",type:"money",align:"right"},{col:"costs",label:"costs",type:"money",align:"right"},{col:"profit",label:"profit",type:"money",align:"right"}]:[{col:"displayName",label:"name",type:"agency",align:"left"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"completions",label:"completions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"costs",label:"costs",type:"money",align:"right"}]:this.props.rights.VIEW_FINANCIALS?[{col:"displayName",label:"name",type:"agency",align:"left"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"revenue",label:"revenue",type:"money",align:"right"},{col:"costs",label:"costs",type:"money",align:"right"},{col:"profit",label:"profit",type:"money",align:"right"}]:[{col:"displayName",label:"name",type:"agency",align:"left"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"costs",label:"costs",type:"money",align:"right"}]:[{col:"displayName",label:"name",type:"agency",align:"left"}]},t.prototype.getColumns=function(){var e=this,t=this.metrics().map((function(t){return{dataField:t.col,text:t.label||t.col,align:t.align||"left",headerAlign:t.align||"left",sort:!0,onSort:e.onSort,sortCaret:g.columnSort,formatter:g.getFormatter(t.type)}})),n=[{dataField:"df1",isDummyField:!0,text:"",formatter:this.editFormatter,headerStyle:{width:"30px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:this.deleteFormatter,headerStyle:{width:"30px"}}];return[{dataField:"id",text:"#",hidden:!0},{dataField:"writeAccess",text:"#",hidden:!0}].concat(n,t)},t.prototype.getRows=function(){var e=this.metrics().map((function(e){return e.col}));return this.props.agencies.map((function(t){var n=m.pick(t,e),r=m.get(t,"agency.id",-1),a=t.rights.MANAGE_AGENCY;return m.assign({id:r,writeAccess:a},n)}))},t.prototype.getCurrentPage=function(){var e=g.getLastPage(this.getRows(),this.state.sizePerPage);return this.state.page>e?e:this.state.page},t.prototype.render=function(){var e=this,t=f.Search.SearchBar,n=this.getRows(),r=this.getColumns(),a=g.getSizePerPage(this.state.sizePerPage,n.length);return c.default.createElement(f.default,{keyField:"id",data:n,columns:r,search:!0},(function(l){return c.default.createElement("div",null,c.default.createElement("div",{className:"search-label-container"},c.default.createElement(h.default,{name:"search"}),c.default.createElement(t,i({},l.searchProps,{placeholder:"Filter records",tableId:e.tableId}))),c.default.createElement(d.default,i({},l.baseProps,{classes:"agencies-table table-borderless",id:e.tableId,bordered:!1,hover:!0,striped:!0,keyField:"id",data:n,columns:r,defaultSorted:[e.state.defaultSorted],pagination:p.default({page:e.getCurrentPage(),sizePerPage:a,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:e.props.agencies.length}],onPageChange:function(t,n){e.setState({page:t})},onSizePerPageChange:e.onSizePerPageChange})})))}))},t}(c.Component);t.default=v},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(0)),f=n(2),p=c(n(9)),m=o(n(4)),h=o(n(7)),g=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleEntering=function(){return u(r,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.loadData(this.props)];case 1:return e.sent(),[2]}}))}))},r.handleClose=function(){var e=r.initialState();r.setState(e,(function(){r.props.onClose()}))},r.handleNameChange=function(e){var t=e.target.value,n=h.required(t);r.setState({name:t,nameValidation:n})},r.handleAdvertiserFeeChange=function(e){var t=e.target.value,n=h.native(e.target);r.setState({defaultAdvertiserFee:t,advertiserFeeValidation:n})},r.handleOrganizationChange=function(e){r.setState({metaAgencyId:e.value})},r.handleSubmit=function(){var e=r.state.name,t=h.required(e),n=r.state.defaultAdvertiserFee,a=document.getElementById("agency-defaultadvertiserfee");a.value=r.state.defaultAdvertiserFee;var i=h.native(a);t.error||i.error?r.setState({nameValidation:t,advertiserFeeValidation:i}):r.setState({saving:!0},(function(){var t={name:e,defaultAdvertiserFee:parseInt(n),metaAgencyId:r.state.metaAgencyId};r.props.onSubmit(-1,t)}))},r.state=r.initialState(),r}return a(t,e),t.prototype.loadData=function(e){return u(this,void 0,void 0,(function(){var t,n,r;return s(this,(function(a){switch(a.label){case 0:return"all"!==e.scope?[3,2]:[4,m.Get({path:"/api/organizations"})];case 1:return t=a.sent(),n=(t.organizations||[]).map((function(e){return{value:e.organization.id,label:e.organization.name}})),r=n.length>0?n[0].value:-1,this.setState({organizations:n,name:"",metaAgencyId:r,saving:!1}),[3,3];case 2:"metaAgency"===e.scope&&this.setState({organizations:[],name:"",metaAgencyId:this.props.scopeId,saving:!1}),a.label=3;case 3:return[2]}}))}))},t.prototype.initialState=function(){return{name:"",metaAgencyId:-1,defaultAdvertiserFee:"",organizations:[],nameValidation:{error:!1,message:""},advertiserFeeValidation:{error:!1,message:""},saving:!1}},t.prototype.render=function(){var e=this;return d.default.createElement(f.Modal,{className:"agency-add-modal",show:this.props.show,onHide:this.handleClose,onEntering:this.handleEntering,backdrop:"static"},d.default.createElement(f.Modal.Header,{closeButton:!0},d.default.createElement(f.Modal.Title,null,"Quick agency setup")),d.default.createElement(f.Modal.Body,null,d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-sm-12"},"all"===this.props.scope&&d.default.createElement(f.Form.Group,{controlId:"agency-organization"},d.default.createElement(f.Form.Label,null,"Organization * "),d.default.createElement(p.default,{inputId:"react-select-agency-organization",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:this.state.organizations.find((function(t){return t.value===e.state.metaAgencyId})),onChange:this.handleOrganizationChange,options:this.state.organizations})),d.default.createElement(f.Form.Group,{controlId:"agency-name"},d.default.createElement(f.Form.Label,null,"Name *"),d.default.createElement(f.Form.Control,{autoFocus:!0,type:"text",value:this.state.name,isInvalid:this.state.nameValidation.error,onChange:this.handleNameChange}),this.state.nameValidation.error&&d.default.createElement(f.Form.Control.Feedback,{type:"invalid"},this.state.nameValidation.message)),d.default.createElement(f.Form.Group,{controlId:"agency-defaultadvertiserfee"},d.default.createElement(f.Form.Label,null,"Default advertiser fee *"),d.default.createElement(f.Form.Control,{required:!0,type:"number",step:"0.01",min:"0",value:this.state.defaultAdvertiserFee,isInvalid:this.state.advertiserFeeValidation.error,onChange:this.handleAdvertiserFeeChange}),this.state.advertiserFeeValidation.error&&d.default.createElement(f.Form.Control.Feedback,{type:"invalid"},this.state.advertiserFeeValidation.message))))),d.default.createElement(f.Modal.Footer,null,d.default.createElement(f.Button,{size:"sm",variant:"light",onClick:this.handleClose},"CANCEL"),d.default.createElement(f.Button,{size:"sm",variant:"primary",onClick:this.handleSubmit,disabled:this.state.saving},"SAVE")))},t}(d.Component);t.default=g},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(0)),f=n(2),p=o(n(1)),m=c(n(19)),h=o(n(20)),g=c(n(3)),v=c(n(5)),b=c(n(10)),y=c(n(175)),E=c(n(27)),_=c(n(83)),w=o(n(4)),S=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.controller=new AbortController,r.editClick=function(e){var t=r.state.organizations.find((function(t){return t.organization.id===e})),n=p.get(t,"organization");r.setState({editOrganization:n,showEditModal:!0})},r.deleteClick=function(e){var t=r.state.organizations.find((function(t){return t.organization.id===e})),n=p.get(t,"organization");r.setState({showDeleteConfirm:!0,deleteId:e,deleteOrganization:n})},r.deleteOrganization=function(){return u(r,void 0,void 0,(function(){var e=this;return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,w.Delete({path:"/api/organizations/"+this.state.deleteId})];case 1:return t.sent(),this.setState({showDeleteConfirm:!1,showLoader:!0},(function(){return u(e,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return[4,w.Get({path:"/api/organizations/statistics",qs:this.props.options})];case 1:return e=n.sent(),this.setState({organizations:e,showLoader:!1}),t=p.get(this.state.deleteOrganization,"name",""),this._notificationSystem.addNotification(h.success(d.default.createElement("span",null,"Organization ",d.default.createElement("strong",null,t)," deleted."),!1)),[2]}}))}))})),[3,3];case 2:return t.sent(),this.setState({showDeleteConfirm:!1,showLoader:!1}),this._notificationSystem.addNotification(h.error("Error deleting organization.")),[3,3];case 3:return[2]}}))}))},r.handleSubmit=function(e,t){return u(r,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return e>0?[4,this.updateOrganization(e,t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,this.addOrganization(t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},r._notificationSystem=null,r.setNotificationSystemRef=function(e){r._notificationSystem=e},r.state={organizations:[],showLoader:!0,showEditModal:!1,showDeleteConfirm:!1,editOrganization:null,deleteId:-1,deleteOrganization:null,error:!1,errorMessage:""},r}return a(t,e),t.prototype.componentDidMount=function(){return u(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,w.Get({path:"/api/organizations/statistics",qs:this.props.options,signal:this.controller.signal})];case 1:return e=t.sent(),this.setState({organizations:e,showLoader:!1}),[3,3];case 2:return"AbortError"===t.sent().name?this.setState({showLoader:!0,error:!1,errorMessage:""}):this.setState({error:!0,errorMessage:"Error loading organizations.",showLoader:!1}),[3,3];case 3:return[2]}}))}))},t.prototype.componentWillReceiveProps=function(e){var t=this;p.isEqual(e.options,this.props.options)||this.setState({showLoader:!0,error:!1,errorMessage:""},(function(){return u(t,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.controller.abort(),this.controller=new AbortController,[4,w.Get({path:"/api/organizations/statistics",qs:e.options})];case 1:return t=n.sent(),this.setState({organizations:t,showLoader:!1}),[3,3];case 2:return"AbortError"===n.sent().name?this.setState({showLoader:!0,error:!1,errorMessage:""}):this.setState({error:!0,errorMessage:"Error loading organizations.",showLoader:!1}),[3,3];case 3:return[2]}}))}))}))},t.prototype.addOrganization=function(e){return u(this,void 0,void 0,(function(){var t=this;return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,w.Post({path:"/api/organizations",body:e})];case 1:return n.sent(),this.setState({showEditModal:!1,showLoader:!0},(function(){return u(t,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return[4,w.Get({path:"/api/organizations/statistics",qs:this.props.options})];case 1:return t=n.sent(),this.setState({organizations:t,showLoader:!1,editOrganization:null}),this._notificationSystem.addNotification(h.success(d.default.createElement("span",null,"Organization ",d.default.createElement("strong",null,e.name)," created."),!1)),[2]}}))}))})),[3,3];case 2:return n.sent(),this.setState({showEditModal:!1,editOrganization:null}),this._notificationSystem.addNotification(h.error("Error creating organization.")),[3,3];case 3:return[2]}}))}))},t.prototype.updateOrganization=function(e,t){return u(this,void 0,void 0,(function(){var n=this;return s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,w.Put({path:"/api/organizations/"+e,body:t})];case 1:return r.sent(),this.setState({showEditModal:!1,editOrganization:null,showLoader:!0},(function(){return u(n,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return[4,w.Get({path:"/api/organizations/statistics",qs:this.props.options})];case 1:return e=n.sent(),this.setState({organizations:e,showLoader:!1}),this._notificationSystem.addNotification(h.success(d.default.createElement("span",null,"Organization ",d.default.createElement("strong",null,t.name)," saved."),!1)),[2]}}))}))})),[3,3];case 2:return r.sent(),this.setState({showEditModal:!1,editOrganization:null}),this._notificationSystem.addNotification(h.error("Error updating organization.")),[3,3];case 3:return[2]}}))}))},t.prototype.render=function(){var e=this;if(this.state.error)return d.default.createElement("div",{className:"col-sm-12 pt-3"},d.default.createElement("div",{className:"card"},d.default.createElement("h3",null,d.default.createElement(b.default,{message:this.state.errorMessage}))));var t=p.get(this.state.deleteOrganization,"name","");return d.default.createElement("div",{className:"col-sm-12 pt-3"},d.default.createElement("div",{className:"card mb-2"},d.default.createElement("h3",{className:"pull-left"},"Organizations"),d.default.createElement("div",{className:"table-btn-container"},d.default.createElement(f.Button,{size:"sm",variant:"primary",onClick:function(){e.setState({showEditModal:!0})}},d.default.createElement(g.default,{name:"plus"})," ADD")),d.default.createElement(v.default,{visible:this.state.showLoader}),!this.state.showLoader&&d.default.createElement(y.default,{rights:this.props.rights,user:this.props.user,videoMode:this.props.videoMode,organizations:this.state.organizations,editClick:this.editClick,deleteClick:this.deleteClick})),d.default.createElement(_.default,{show:this.state.showEditModal,organization:this.state.editOrganization,onClose:function(){e.setState({showEditModal:!1,editOrganization:null})},onSubmit:this.handleSubmit}),d.default.createElement(E.default,{message:"Delete organization "+t+"?",show:this.state.showDeleteConfirm,onClose:function(){return e.setState({showDeleteConfirm:!1})},onConfirm:this.deleteOrganization}),d.default.createElement(m.default,{ref:this.setNotificationSystemRef}))},t}(d.Component);t.default=S},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},l=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&l(t,e,n);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=u(n(0)),d=s(n(14)),f=u(n(23)),p=s(n(17)),m=u(n(1)),h=u(n(15)),g=s(n(3)),v=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.tableId="organizations-table",r.onSort=function(e,t){r.setState({defaultSorted:{dataField:e,order:t}})},r.onSizePerPageChange=function(e,t){h.storeSizePerPage(e,r.tableId,r.props.user),r.setState({sizePerPage:e})},r.editFormatter=function(e,t){return t.writeAccess?c.default.createElement("a",{onClick:function(e){e.preventDefault(),r.props.editClick(t.id)},href:"",className:"table-btn"},c.default.createElement(g.default,{name:"pencil"})):""},r.deleteFormatter=function(e,t){return t.writeAccess?c.default.createElement("a",{onClick:function(e){e.preventDefault(),r.props.deleteClick(t.id)},href:"",className:"table-btn"},c.default.createElement(g.default,{name:"remove"})):null},r.state={page:1,sizePerPage:h.getInitialSizePerPage(r.tableId,r.props.user),defaultSorted:r.defaultSorted()},r}return a(t,e),t.prototype.metrics=function(){return this.props.videoMode?this.props.rights.VIEW_FINANCIALS?[{col:"displayName",label:"name",type:"organization",align:"left"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"completions",label:"completions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"revenue",label:"revenue",type:"money",align:"right"},{col:"costs",label:"costs",type:"money",align:"right"},{col:"profit",label:"profit",type:"money",align:"right"}]:[{col:"displayName",label:"name",type:"organization",align:"left"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"completions",label:"completions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"costs",label:"costs",type:"money",align:"right"}]:this.props.rights.VIEW_FINANCIALS?[{col:"displayName",label:"name",type:"organization",align:"left"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"revenue",label:"revenue",type:"money",align:"right"},{col:"costs",label:"costs",type:"money",align:"right"},{col:"profit",label:"profit",type:"money",align:"right"}]:[{col:"displayName",label:"name",type:"organization",align:"left"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"costs",label:"costs",type:"money",align:"right"}]},t.prototype.defaultSorted=function(){return this.props.rights.VIEW_STATISTICS?{dataField:"costs",order:"desc"}:{dataField:"displayName",order:"asc"}},t.prototype.getColumns=function(){var e=this,t=this.metrics().map((function(t){return{dataField:t.col,text:t.label||t.col,align:t.align||"left",headerAlign:t.align||"left",sort:!0,onSort:e.onSort,sortCaret:h.columnSort,formatter:h.getFormatter(t.type)}})),n=[{dataField:"df1",isDummyField:!0,text:"",formatter:this.editFormatter,headerStyle:{width:"30px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:this.deleteFormatter,headerStyle:{width:"30px"}}];return[{dataField:"id",text:"#",hidden:!0},{dataField:"writeAccess",text:"#",hidden:!0}].concat(n,t)},t.prototype.getRows=function(){var e=this.metrics().map((function(e){return e.col}));return this.props.organizations.map((function(t){var n=m.pick(t,e),r=m.get(t,"organization.id",-1),a=t.rights.MANAGE_ORGANIZATION;return m.assign({id:r,writeAccess:a},n)}))},t.prototype.getCurrentPage=function(){var e=h.getLastPage(this.getRows(),this.state.sizePerPage);return this.state.page>e?e:this.state.page},t.prototype.render=function(){var e=this,t=f.Search.SearchBar,n=this.getRows(),r=this.getColumns(),a=h.getSizePerPage(this.state.sizePerPage,n.length);return c.default.createElement(f.default,{keyField:"id",data:n,columns:r,search:!0},(function(l){return c.default.createElement("div",null,c.default.createElement("div",{className:"search-label-container"},c.default.createElement(g.default,{name:"search"}),c.default.createElement(t,i({},l.searchProps,{placeholder:"Filter records",tableId:e.tableId}))),c.default.createElement(d.default,i({},l.baseProps,{classes:"table-borderless",id:e.tableId,bordered:!1,striped:!0,keyField:"id",data:n,columns:r,defaultSorted:[e.state.defaultSorted],pagination:p.default({page:e.getCurrentPage(),sizePerPage:a,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:e.props.organizations.length}],onPageChange:function(t,n){e.setState({page:t})},onSizePerPageChange:e.onSizePerPageChange})})))}))},t}(c.Component);t.default=v},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=u(n(19)),d=i(n(20)),f=i(n(4)),p=i(n(1)),m=u(n(177)),h=u(n(87)),g=u(n(5)),v=u(n(10));t.default=function(e){var t=s.useState([]),n=t[0],r=t[1],a=s.useState(!0),i=a[0],u=a[1],b=s.useState(!1),y=b[0],E=b[1],_=s.useState(null),w=_[0],S=_[1],P=s.useState(!1),C=P[0],O=P[1],x=s.useState(!1),I=x[0],N=x[1],A=s.useState(""),j=A[0],M=A[1],k=s.useRef(null),F=s.useRef(null);function D(){return l(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:u(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),F.current=new AbortController,[4,f.Get({path:"/api/publishers/statistics",qs:e.options,signal:F.current.signal})];case 2:return t=n.sent(),r(t),u(!1),N(!1),M(""),[3,4];case 3:return"AbortError"===n.sent().name?(N(!1),M("")):(N(!0),M("Error loading publishers"),u(!1)),[3,4];case 4:return[2]}}))}))}function T(){F.current&&F.current.abort()}s.useEffect((function(){return T}),[]),s.useEffect((function(){D()}),[JSON.stringify(e.options)]);return I?s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(v.default,{message:j})))):s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",{className:"pull-left"},"Publishers"),s.default.createElement(g.default,{visible:i}),!i&&s.default.createElement(m.default,{publishers:n,user:e.user,rights:e.rights,videoMode:e.videoMode,editClick:function(e,t){var r=n.find((function(t){return t.publisher.id===e})),a=p.get(r,"publisher");S(a),E(!0),O(t)}})),s.default.createElement(h.default,{publisher:w,show:y,writeAccess:C,onClose:function(){E(!1)},onSubmit:function(e,t){return l(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,f.Put({path:"/api/publishers/"+e,body:t})];case 1:return n.sent(),E(!1),S(null),D(),k.current.addNotification(d.success(s.default.createElement("span",null,"Publisher ",s.default.createElement("strong",null,t.name)," saved."),!1)),[3,3];case 2:return n.sent(),E(!1),S(null),k.current.addNotification(d.error("Error updating publisher.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(c.default,{ref:k}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=o(n(14)),c=l(n(23)),d=o(n(17)),f=l(n(1)),p=l(n(15)),m=o(n(3));t.default=function(e){var t="publishers-table",n=u.useState(1),a=n[0],i=n[1],l=u.useState(p.getInitialSizePerPage(t,e.user)),o=l[0],h=l[1],g=u.useState({dataField:"id",order:"desc"}),v=g[0],b=g[1],y=function(e,t){b({dataField:e,order:t})},E=function(e,t){i(e)},_=function(n,r){p.storeSizePerPage(n,t,e.user),h(n)},w=function(t,n){return n.writeAccess?u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id,n.writeAccess)},href:"",className:"table-btn"},u.default.createElement(m.default,{name:"pencil"})):u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id,n.writeAccess)},href:"",className:"table-btn"},u.default.createElement(m.default,{name:"search-plus"}))},S=function(){var t=P().map((function(e){return e.col}));return e.publishers.map((function(e){var n=f.pick(e,t),r=f.get(e,"publisher.id",-1),a=e.rights.MANAGE_PUBLISHER;return f.assign({id:r,writeAccess:a},n)}))};function P(){return e.rights.VIEW_STATISTICS?e.videoMode?e.rights.VIEW_FINANCIALS?[{col:"displayName",label:"name",type:"publisher",align:"left"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"completions",label:"completions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"revenue",label:"revenue",type:"money",align:"right"},{col:"costs",label:"costs",type:"money",align:"right"},{col:"profit",label:"profit",type:"money",align:"right"}]:[{col:"displayName",label:"name",type:"publisher",align:"left"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"completions",label:"completions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"costs",label:"costs",type:"money",align:"right"}]:e.rights.VIEW_FINANCIALS?[{col:"displayName",label:"name",type:"publisher",align:"left"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"revenue",label:"revenue",type:"money",align:"right"},{col:"costs",label:"costs",type:"money",align:"right"},{col:"profit",label:"profit",type:"money",align:"right"}]:[{col:"displayName",label:"name",type:"publisher",align:"left"},{col:"impressions",label:"impressions",align:"right",type:"number"},{col:"clicks",label:"clicks",align:"right",type:"number"},{col:"conversions",label:"conversions",align:"right",type:"number"},{col:"costs",label:"costs",type:"money",align:"right"}]:[{col:"displayName",label:"name",type:"publisher",align:"left"}]}var C,O=c.Search.SearchBar,x=S(),I=(C=P().map((function(e){return{dataField:e.col,text:e.label||e.col,align:e.align||"left",headerAlign:e.align||"left",sort:!0,onSort:y,sortCaret:p.columnSort,formatter:p.getFormatter(e.type)}})),[{dataField:"id",text:"#",hidden:!0},{dataField:"writeAccess",text:"#",hidden:!0}].concat([{dataField:"df1",isDummyField:!0,text:"",formatter:w,headerStyle:{width:"30px"}}],C)),N=p.getSizePerPage(o,x.length),A=x.length||30;return u.default.createElement(c.default,{keyField:"id",data:x,columns:I,search:!0},(function(e){return u.default.createElement("div",null,u.default.createElement("div",{className:"search-label-container"},u.default.createElement(m.default,{name:"search"}),u.default.createElement(O,r({},e.searchProps,{tableId:t,placeholder:"Filter records"}))),u.default.createElement(s.default,r({},e.baseProps,{id:t,bordered:!1,classes:"table-borderless",striped:!0,keyField:"id",data:x,columns:I,defaultSorted:[v],pagination:d.default({page:(n=p.getLastPage(S(),o),a>n?n:a),sizePerPage:N,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:A}],onPageChange:E,onSizePerPageChange:_})})));var n}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=n(6),c=n(2),d=l(n(13)),f=o(n(12)),p=o(n(55)),m=o(n(64)),h=o(n(71)),g=o(n(94)),v=o(n(41)),b=o(n(16)),y=o(n(28));t.default=function(e){var t=s.useParams(),n=t.page,a=t.scope,i=t.scopeId,l=u.useContext(f.default),o=l.data,E=l.loadError,_="/"+n+"/"+a+"/"+i,w="/:page/:scope/:scopeId",S=d.getRights(o.rights),P=function(e){return e.VIEW_CAMPAIGN?"campaigns":e.VIEW_CAMPAIGNGROUP?"campaigngroups":e.VIEW_ADVERTISER?"advertisers":e.VIEW_AGENCY?"agencies":null}(S),C=u.useContext(b.default),O=u.useContext(y.default).daterange,x=O.startDate.format("YYYY-MM-DD"),I=O.endDate.format("YYYY-MM-DD"),N="?sd="+x+"&ed="+I,A={rights:S,user:C,scope:a,scopeId:i,options:{startDate:x,endDate:I,scope:"metaAgency",scopeId:parseInt(i,10),statistics:S.VIEW_STATISTICS,videoMetrics:e.videoMode},videoMode:e.videoMode};return o.organization||E.error?u.default.createElement(u.Fragment,null,u.default.createElement("div",{className:"row page-tabs"},u.default.createElement(c.Nav,{as:"ul",variant:"tabs",defaultActiveKey:"/campaigns"},S.VIEW_CAMPAIGN&&u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:_+"/campaigns"+N},"Campaigns")),S.VIEW_CAMPAIGNGROUP&&u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:_+"/campaigngroups"+N},"Campaign groups")),S.VIEW_ADVERTISER&&u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:_+"/advertisers"+N},"Advertisers")),S.VIEW_AGENCY&&u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:_+"/agencies"+N},"Agencies"))),u.default.createElement("div",{style:{marginRight:"25px"}},u.default.createElement(v.default,null))),u.default.createElement("div",{className:"row"},u.default.createElement(s.Switch,null,P&&u.default.createElement(s.Redirect,{exact:!0,from:""+w,to:w+"/"+P+N}),S.VIEW_CAMPAIGN&&u.default.createElement(s.Route,{path:w+"/campaigns"},u.default.createElement(p.default,r({},A))),S.VIEW_CAMPAIGNGROUP&&u.default.createElement(s.Route,{path:w+"/campaigngroups"},u.default.createElement(m.default,r({},A))),S.VIEW_ADVERTISER&&u.default.createElement(s.Route,{path:w+"/advertisers"},u.default.createElement(h.default,r({},A))),S.VIEW_AGENCY&&u.default.createElement(s.Route,{path:w+"/agencies"},u.default.createElement(g.default,r({},A)))))):null}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=n(6),c=n(2),d=l(n(13)),f=o(n(12)),p=o(n(55)),m=o(n(64)),h=o(n(71)),g=o(n(41)),v=o(n(16)),b=o(n(28));t.default=function(e){var t=s.useParams(),n=t.page,a=t.scope,i=t.scopeId,l=u.useContext(f.default),o=l.data,y=l.loadError,E="/"+n+"/"+a+"/"+i,_="/:page/:scope/:scopeId",w=d.getRights(o.rights),S=function(e){return e.VIEW_CAMPAIGN?"campaigns":e.VIEW_CAMPAIGNGROUP?"campaigngroups":e.VIEW_ADVERTISER?"advertisers":null}(w),P=u.useContext(v.default),C=u.useContext(b.default).daterange,O=C.startDate.format("YYYY-MM-DD"),x=C.endDate.format("YYYY-MM-DD"),I="?sd="+O+"&ed="+x,N={rights:w,user:P,scope:a,scopeId:i,options:{startDate:O,endDate:x,scope:"agency",scopeId:parseInt(i,10),statistics:w.VIEW_STATISTICS,videoMetrics:e.videoMode},videoMode:e.videoMode};return o.agency||y.error?u.default.createElement(u.Fragment,null,u.default.createElement("div",{className:"row page-tabs"},u.default.createElement(c.Nav,{as:"ul",variant:"tabs",defaultActiveKey:"/campaigns"},w.VIEW_CAMPAIGN&&u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:E+"/campaigns"+I},"Campaigns")),w.VIEW_CAMPAIGNGROUP&&u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:E+"/campaigngroups"+I},"Campaign groups")),w.VIEW_ADVERTISER&&u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:E+"/advertisers"+I},"Advertisers"))),u.default.createElement("div",{style:{marginRight:"25px"}},u.default.createElement(g.default,null))),u.default.createElement("div",{className:"row"},u.default.createElement(s.Switch,null,S&&u.default.createElement(s.Redirect,{exact:!0,from:""+_,to:_+"/"+S+I}),w.VIEW_CAMPAIGN&&u.default.createElement(s.Route,{path:_+"/campaigns"},u.default.createElement(p.default,r({},N))),w.VIEW_CAMPAIGNGROUP&&u.default.createElement(s.Route,{path:_+"/campaigngroups"},u.default.createElement(m.default,r({},N))),w.VIEW_ADVERTISER&&u.default.createElement(s.Route,{path:_+"/advertisers"},u.default.createElement(h.default,r({},N)))))):null}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=n(6),c=n(2),d=l(n(13)),f=o(n(12)),p=o(n(55)),m=o(n(64)),h=o(n(41)),g=o(n(16)),v=o(n(28)),b=o(n(181));t.default=function(e){var t=s.useParams(),n=t.page,a=t.scope,i=t.scopeId,l=u.useContext(f.default),o=l.data,y=l.loadError,E="/"+n+"/"+a+"/"+i,_="/:page/:scope/:scopeId",w=d.getRights(o.rights),S=u.useContext(g.default),P=u.useContext(v.default).daterange,C=P.startDate.format("YYYY-MM-DD"),O=P.endDate.format("YYYY-MM-DD"),x="?sd="+C+"&ed="+O,I=w.VIEW_CAMPAIGN?_+"/campaigns"+x:w.VIEW_CAMPAIGNGROUP?_+"/campaigngroups"+x:w.VIEW_STATISTICS?"/analytics/:scope/:scopeId":w.VIEW_SEGMENTS?"/segments/:scope/:scopeId":w.VIEW_LISTS?"/lists/:scope/:scopeId":w.VIEW_ADS?"/advault/:scope/:scopeId":w.VIEW_REPORTS?"/reports/:scope/:scopeId":w.VIEW_DEALS?"/deals/:scope/:scopeId":w.VIEW_USERS?"/users/:scope/:scopeId":"/changelog/:scope/:scopeId",N={startDate:C,endDate:O,scope:"advertiser",scopeId:parseInt(i,10),statistics:w.VIEW_STATISTICS,videoMetrics:e.videoMode},A={rights:w,user:S,scope:a,scopeId:i,options:N,videoMode:e.videoMode};return o.advertiser||y.error?u.default.createElement(u.Fragment,null,u.default.createElement("div",{className:"row page-tabs"},u.default.createElement(c.Nav,{as:"ul",variant:"tabs",defaultActiveKey:"/campaigns"},w.VIEW_CAMPAIGN&&u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:E+"/campaigns"+x},"Campaigns")),w.VIEW_CAMPAIGNGROUP&&u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:E+"/campaigngroups"+x},"Campaign groups")),u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:E+"/retail"+x},"Retail"))),u.default.createElement("div",{style:{marginRight:"25px"}},u.default.createElement(h.default,null))),u.default.createElement("div",{className:"row"},u.default.createElement(s.Switch,null,u.default.createElement(s.Redirect,{exact:!0,from:_,to:I}),w.VIEW_CAMPAIGN&&u.default.createElement(s.Route,{path:_+"/campaigns"},u.default.createElement(p.default,r({},A))),w.VIEW_CAMPAIGNGROUP&&u.default.createElement(s.Route,{path:_+"/campaigngroups"},u.default.createElement(m.default,r({},A))),u.default.createElement(s.Route,{path:_+"/retail"},u.default.createElement(b.default,r({},A)))))):null}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=i(n(1)),d=u(n(19)),f=i(n(20)),p=i(n(4)),m=i(n(22)),h=i(n(36)),g=u(n(5)),v=u(n(182)),b=u(n(10)),y=u(n(3)),E=u(n(183)),_=u(n(184)),w=u(n(185)),S=u(n(27)),P=n(2);t.default=function(e){var t=s.useState([]),n=t[0],r=t[1],a=s.useState([]),i=a[0],u=a[1],C=s.useState(null),O=C[0],x=C[1],I=s.useState(null),N=I[0],A=I[1],j=s.useState(null),M=j[0],k=j[1],F=s.useState(-1),D=F[0],T=F[1],R=s.useState(!0),B=R[0],G=R[1],L=s.useState(!1),V=L[0],z=L[1],q=s.useState(!1),Y=q[0],U=q[1],H=s.useState(!1),W=H[0],J=H[1],X=s.useState(!1),K=X[0],Z=X[1],$=s.useState(!1),Q=$[0],ee=$[1],te=s.useState(""),ne=te[0],re=te[1],ae=s.useRef(null),ie=s.useRef(null);function le(){return l(this,void 0,void 0,(function(){var t,n,a;return o(this,(function(i){switch(i.label){case 0:G(!0),i.label=1;case 1:return i.trys.push([1,4,,5]),ie.current=new AbortController,[4,p.Get({path:"/api/advertisers/"+e.options.scopeId+"/retailbranches",signal:ie.current.signal})];case 2:return t=i.sent(),[4,p.Get({path:"/api/advertisers/"+e.options.scopeId+"/ads"})];case 3:return n=i.sent(),a=n.map((function(e){return{value:e.id,label:e.name}})),u(a),r(t),G(!1),ee(!1),re(""),[3,5];case 4:return"AbortError"===i.sent().name?(ee(!1),re("")):(ee(!0),re("Error loading retail branches."),G(!1)),[3,5];case 5:return[2]}}))}))}function oe(){ie.current&&ie.current.abort()}function ue(){var e,t;return(e=n.map((function(e){return e.branchId})),t=e.filter((function(e){return m.isNumeric(e)})),e.length===t.length)?n.concat().sort(se):n.concat().sort(ce)}function se(e,t){return parseInt(e.branchId)-parseInt(t.branchId)}function ce(e,t){return e.branchId<t.branchId?-1:e.branchId>t.branchId?1:0}function de(t){return l(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:G(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),n={retailBranches:[t],replaceAll:!1},[4,p.Post({path:"/api/advertisers/"+e.options.scopeId+"/retailbranches",body:n})];case 2:return r.sent(),le(),ae.current.addNotification(f.success(s.default.createElement("span",null,"Retail branch ",s.default.createElement("strong",null,t.name)," created."),!1)),[3,4];case 3:return r.sent(),G(!1),ae.current.addNotification(f.error("Error creating retail branch.")),[3,4];case 4:return U(!1),A(null),[2]}}))}))}function fe(t,n){return l(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:G(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,p.Put({path:"/api/advertisers/"+e.options.scopeId+"/retailbranches/"+t,body:n})];case 2:return r.sent(),le(),ae.current.addNotification(f.success(s.default.createElement("span",null,"Retail branch ",s.default.createElement("strong",null,n.name)," saved."),!1)),[3,4];case 3:return r.sent(),G(!1),ae.current.addNotification(f.error("Error updating retail branch.")),[3,4];case 4:return U(!1),A(null),[2]}}))}))}s.useEffect((function(){return oe}),[]),s.useEffect((function(){le()}),[JSON.stringify(e.options)]);if(Q)return s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(b.default,{message:ne}))));var pe=c.get(M,"name","");return s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",{className:"pull-left"},"Retail"),s.default.createElement("div",{className:"table-btn-container"},e.rights.MANAGE_ADVERTISER&&s.default.createElement(s.Fragment,null,s.default.createElement(P.Button,{size:"sm",variant:"primary",className:"mr-2",onClick:function(){U(!0)}},s.default.createElement(y.default,{name:"plus"})," ADD"),s.default.createElement(P.Button,{size:"sm",variant:"primary",className:"mr-2",onClick:function(){J(!0)}},s.default.createElement(y.default,{name:"upload"})," IMPORT")),s.default.createElement(P.Button,{size:"sm",variant:"primary",onClick:function(){var e={branchId:"id",name:"name",urlTag:"landing page",latitude:"latitude",longitude:"longitude",radius:"radius",targetingZipCodes:"targeting postal codes",country:"country",region:"region",city:"city",postalCode:"postal code",address1:"address line 1",address2:"address line 2",custom1:"custom 1",custom2:"custom 2",custom3:"custom 3",custom4:"custom 4",custom5:"custom 5",custom6:"custom 6",custom7:"custom 7",custom8:"custom 8",custom9:"custom 9"},t=c.values(e).map((function(e){return h.getBoldCell(e)})),n=ue().map((function(t){return c.keys(e).map((function(e){return Array.isArray(t[e])?h.getCell(t[e].join(",")):h.getCell(t[e])}))})),r=[t].concat(n);h.save(r,"Retail branches","RetailBranches")}},s.default.createElement(y.default,{name:"download"})," EXPORT")),s.default.createElement(g.default,{visible:B}),!B&&s.default.createElement(v.default,{retailBranches:n,user:e.user,rights:e.rights,previewClick:function(e){var t=n.find((function(t){return t.id===e}));x(t),z(!0)},editClick:function(e){var t=n.find((function(t){return t.id===e}));A(t),U(!0)},deleteClick:function(e){var t=n.find((function(t){return t.id===e}));Z(!0),T(e),k(t)}})),s.default.createElement(_.default,{show:V,ads:i,branch:O,onClose:function(){z(!1),x(null)}}),s.default.createElement(E.default,{show:Y,writeAccess:e.rights.MANAGE_ADVERTISER,retailBranch:N,handleClose:function(){U(!1),A(null)},handleSubmit:function(e,t){return l(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return e>0?[4,fe(e,t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,de(t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))}}),s.default.createElement(w.default,{show:W,existingBranches:n,handleSubmit:function(t){return l(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:G(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,p.Post({path:"/api/advertisers/"+e.options.scopeId+"/retailbranches",body:t})];case 2:return n.sent(),le(),ae.current.addNotification(f.success("Retail branches successfully imported.",!1)),[3,4];case 3:return n.sent(),G(!1),ae.current.addNotification(f.error("Error importing retail branches.")),[3,4];case 4:return J(!1),[2]}}))}))},handleClose:function(){J(!1)}}),s.default.createElement(S.default,{message:"Delete retail branch "+pe+"?",show:K,onClose:function(){Z(!1)},onConfirm:function(){return l(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:G(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,p.Delete({path:"/api/advertisers/"+e.options.scopeId+"/retailbranches/"+D})];case 2:return n.sent(),t=c.get(M,"name",""),le(),ae.current.addNotification(f.success(s.default.createElement("span",null,"Retail branch ",s.default.createElement("strong",null,t)," deleted."),!1)),[3,4];case 3:return n.sent(),G(!1),ae.current.addNotification(f.error("Error deleting retail branch.")),[3,4];case 4:return Z(!1),T(-1),k(null),[2]}}))}))}}),s.default.createElement(d.default,{ref:ae}))}},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},l=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&l(t,e,n);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=u(n(0)),d=s(n(14)),f=u(n(23)),p=s(n(17)),m=u(n(1)),h=u(n(22)),g=u(n(15)),v=s(n(3)),b=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.tableId="retailbranches-table",r.onSort=function(e,t){r.setState({defaultSorted:{dataField:e,order:t}})},r.onSizePerPageChange=function(e,t){g.storeSizePerPage(e,r.tableId,r.props.user),r.setState({sizePerPage:e})},r.editFormatter=function(e,t){return t.writeAccess?c.createElement("a",{onClick:function(e){e.preventDefault(),r.props.editClick(t.id)},href:"",className:"table-btn mr-10"},c.createElement(v.default,{name:"pencil"})):""},r.previewFormatter=function(e,t){return c.createElement("a",{onClick:function(e){e.preventDefault(),r.props.previewClick(t.id)},href:"",className:"table-btn mr-10"},c.createElement(v.default,{name:"eye"}))},r.deleteFormatter=function(e,t){return t.writeAccess?c.createElement("a",{onClick:function(e){e.preventDefault(),r.props.deleteClick(t.id)},href:"",className:"table-btn mr-10"},c.createElement(v.default,{name:"remove"})):null},r.state={page:1,sizePerPage:g.getInitialSizePerPage(r.tableId,r.props.user),defaultSorted:r.defaultSorted()},r}return a(t,e),t.prototype.metrics=function(){return[{col:"branchId",label:"id",align:"left"},{col:"name",label:"name"},{col:"country",label:"country"},{col:"region",label:"region"},{col:"city",label:"city"}]},t.prototype.getIsBranchIdNumeric=function(){var e=this.props.retailBranches.map((function(e){return e.branchId})),t=e.filter((function(e){return h.isNumeric(e)}));return e.length===t.length},t.prototype.numericSort=function(e,t,n,r){return"asc"===n?parseInt(e)-parseInt(t):parseInt(t)-parseInt(e)},t.prototype.defaultSorted=function(){return{dataField:"branchId",order:"asc"}},t.prototype.getColumns=function(){var e=this,t=this.getIsBranchIdNumeric(),n=this.metrics().map((function(n){var r={dataField:n.col,text:n.label||n.col,align:n.align||"left",headerAlign:n.align||"left",sort:!0,onSort:e.onSort,sortCaret:g.columnSort,formatter:g.getFormatter(n.type)};return"branchId"===n.col&&t&&(r.sortFunc=e.numericSort),r})),r=[{dataField:"df1",isDummyField:!0,text:"",formatter:this.editFormatter,headerStyle:{width:"40px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:this.deleteFormatter,headerStyle:{width:"40px"}},{dataField:"df3",isDummyField:!0,text:"",formatter:this.previewFormatter,headerStyle:{width:"40px"}}];return[{dataField:"id",text:"#",hidden:!0},{dataField:"writeAccess",text:"#",hidden:!0}].concat(r,n)},t.prototype.getRows=function(){var e=this.metrics().map((function(e){return e.col})),t=this.props.rights.MANAGE_ADVERTISER;return this.props.retailBranches.map((function(n){var r=m.pick(n,e),a=m.get(n,"id",-1);return m.assign({id:a,writeAccess:t},r)}))},t.prototype.getCurrentPage=function(){var e=g.getLastPage(this.getRows(),this.state.sizePerPage);return this.state.page>e?e:this.state.page},t.prototype.render=function(){var e=this,t=f.Search.SearchBar,n=this.getRows(),r=this.getColumns(),a=g.getSizePerPage(this.state.sizePerPage,n.length);return c.createElement(f.default,{keyField:"id",data:n,columns:r,search:!0},(function(l){return c.createElement("div",null,c.createElement("div",{className:"search-label-container"},c.createElement(v.default,{name:"search"}),c.createElement(t,i({},l.searchProps,{tableId:e.tableId,placeholder:"Filter records"}))),c.createElement(d.default,i({},l.baseProps,{classes:"table-borderless",id:e.tableId,bordered:!1,striped:!0,hover:!0,keyField:"id",data:n,columns:r,defaultSorted:[e.state.defaultSorted],pagination:p.default({page:e.getCurrentPage(),sizePerPage:a,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:e.props.retailBranches.length}],onPageChange:function(t,n){e.setState({page:t})},onSizePerPageChange:e.onSizePerPageChange})})))}))},t}(c.Component);t.default=b},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=u(n(0)),c=o(n(1)),d=n(2),f=u(n(38)),p=o(n(7)),m=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleEntering=function(){r.loadData(r.props)},r.handleClose=function(){var e=r.initialState();r.setState(e,(function(){r.props.handleClose()}))},r.handleBranchIdChange=function(e){var t=e.target.value,n=p.required(t);r.setState({branchId:t,branchIdValidation:n})},r.handleNameChange=function(e){var t=e.target.value,n=p.required(t);r.setState({name:t,nameValidation:n})},r.handleUrlTagChange=function(e){var t=e.target.value,n=p.required(t);r.setState({urlTag:t,urlTagValidation:n})},r.handleTargetingZipCodesChange=function(e,t){var n=e;if(e.length>0){var a=e[e.length-1].value.split(/[\s,]+/).map((function(e){return{value:e,label:e}}));a.length>1&&(n=e.slice(0,e.length-1).concat(a))}r.setState({targetingZipCodes:n})},r.handleSubmit=function(){var e=r.state.branchId,t=p.required(e),n=r.state.name,a=p.required(n),i=r.state.urlTag,l=p.required(i);document.getElementById("retailbranch-radius").value=r.state.radius;var o=r.state.targetingZipCodes.map((function(e){return e.value.toString()}));[t.error,a.error,l.error].indexOf(!0)>-1?r.setState({branchIdValidation:t,nameValidation:a,urlTagValidation:l}):r.setState({saving:!0},(function(){var e=r.state.location.split(","),t={branchId:r.state.branchId,name:r.state.name,urlTag:r.state.urlTag,country:r.state.country,region:r.state.region,city:r.state.city,latitude:parseFloat(e[0]),longitude:parseFloat(e[1]),radius:parseFloat(r.state.radius),postalCode:r.state.postalCode,address1:r.state.address1,address2:r.state.address2,targetingZipCodes:o,custom1:r.state.custom1,custom2:r.state.custom2,custom3:r.state.custom3,custom4:r.state.custom4,custom5:r.state.custom5,custom6:r.state.custom6,custom7:r.state.custom7,custom8:r.state.custom8,custom9:r.state.custom9};r.props.handleSubmit(r.state.id,t)}))},r.state=r.initialState(),r}return a(t,e),t.prototype.loadData=function(e){if(e.retailBranch){var t=c.get(e,"retailBranch.id",-1),n=c.get(e,"retailBranch.branchId",""),r=c.get(e,"retailBranch.name",""),a=c.get(e,"retailBranch.urlTag",""),i=c.get(e,"retailBranch.country",""),l=c.get(e,"retailBranch.region",""),o=c.get(e,"retailBranch.city",""),u=c.get(e,"retailBranch.postalCode",""),s=c.get(e,"retailBranch.address1",""),d=c.get(e,"retailBranch.address2",""),f=[c.get(e,"retailBranch.latitude",""),c.get(e,"retailBranch.longitude","")].join(","),p=(c.get(e,"retailBranch.radius")||"").toString(),m=(c.get(e,"retailBranch.targetingZipCodes")||[]).map((function(e){return{value:e,label:e}})),h=c.get(e,"retailBranch.custom1",""),g=c.get(e,"retailBranch.custom2",""),v=c.get(e,"retailBranch.custom3",""),b=c.get(e,"retailBranch.custom4",""),y=c.get(e,"retailBranch.custom5",""),E=c.get(e,"retailBranch.custom6",""),_=c.get(e,"retailBranch.custom7",""),w=c.get(e,"retailBranch.custom8",""),S=c.get(e,"retailBranch.custom9","");this.setState({id:t,branchId:n,name:r,urlTag:a,country:i,region:l,city:o,postalCode:u,location:f,radius:p,address1:s,address2:d,targetingZipCodes:m,custom1:h,custom2:g,custom3:v,custom4:b,custom5:y,custom6:E,custom7:_,custom8:w,custom9:S,saving:!1})}else this.setState(this.initialState())},t.prototype.initialState=function(){return{id:-1,branchId:"",name:"",urlTag:"",country:"",region:"",city:"",postalCode:"",location:"",radius:"",address1:"",address2:"",targetingZipCodes:[],custom1:"",custom2:"",custom3:"",custom4:"",custom5:"",custom6:"",custom7:"",custom8:"",custom9:"",branchIdValidation:{error:!1,message:""},nameValidation:{error:!1,message:""},urlTagValidation:{error:!1,message:""},saving:!1}},t.prototype.render=function(){var e=this;return s.default.createElement(d.Modal,{className:"retailbranch-modal",size:"lg",show:this.props.show,onHide:this.handleClose,onEntering:this.handleEntering,backdrop:"static"},s.default.createElement(d.Modal.Header,{closeButton:!0},s.default.createElement(d.Modal.Title,null,"Retail branch setup")),s.default.createElement(d.Modal.Body,null,s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-branchid"},s.default.createElement(d.Form.Label,null,"Id *"),s.default.createElement(d.Form.Control,{autoFocus:!0,disabled:!this.props.writeAccess||this.state.id>0,type:"text",value:this.state.branchId,isInvalid:this.state.branchIdValidation.error,onChange:this.handleBranchIdChange}),this.state.branchIdValidation.error&&s.default.createElement(d.Form.Control.Feedback,{type:"invalid"},this.state.branchIdValidation.message))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-name"},s.default.createElement(d.Form.Label,null,"Name *"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,isInvalid:this.state.nameValidation.error,type:"text",value:this.state.name,onChange:this.handleNameChange}),this.state.nameValidation.error&&s.default.createElement(d.Form.Control.Feedback,{type:"invalid"},this.state.nameValidation.message)))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-urltag"},s.default.createElement(d.Form.Label,null,"Landing page *"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,isInvalid:this.state.urlTagValidation.error,type:"text",value:this.state.urlTag,onChange:this.handleUrlTagChange}),this.state.urlTagValidation.error&&s.default.createElement(d.Form.Control.Feedback,{type:"invalid"},this.state.urlTagValidation.message)))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-country"},s.default.createElement(d.Form.Label,null,"Country"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.country,onChange:function(t){e.setState({country:t.target.value})}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-region"},s.default.createElement(d.Form.Label,null,"Region"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.region,onChange:function(t){e.setState({region:t.target.value})}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-city"},s.default.createElement(d.Form.Label,null,"City"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.city,onChange:function(t){e.setState({city:t.target.value})}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-postalcode"},s.default.createElement(d.Form.Label,null,"Postal code"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.postalCode,onChange:function(t){e.setState({postalCode:t.target.value})}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-location"},s.default.createElement(d.Form.Label,null,"Location"),s.default.createElement(d.Form.Control,{disabled:!this.props.writeAccess,type:"text",placeholder:"latitude,longitude",value:this.state.location,onChange:function(t){e.setState({location:t.target.value})}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-radius"},s.default.createElement(d.Form.Label,null,"Radius"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,required:!0,type:"number",min:"0",value:this.state.radius,onChange:function(t){e.setState({radius:t.target.value})}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-targetingzipcodes"},s.default.createElement(d.Form.Label,null,"Targeting postal codes"),s.default.createElement(f.default,{className:"react-select-container multiple",classNamePrefix:"react-select",isClearable:!0,isMulti:!0,onChange:this.handleTargetingZipCodesChange,value:this.state.targetingZipCodes})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-address1"},s.default.createElement(d.Form.Label,null,"Address line 1"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.address1,onChange:function(t){e.setState({address1:t.target.value})}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-address2"},s.default.createElement(d.Form.Label,null,"Address line 2"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.address2,onChange:function(t){e.setState({address2:t.target.value})}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-custom1"},s.default.createElement(d.Form.Label,null,"Custom 1"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.custom1,onChange:function(t){e.setState({custom1:t.target.value})}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-custom2"},s.default.createElement(d.Form.Label,null,"Custom 2"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.custom2,onChange:function(t){e.setState({custom2:t.target.value})}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-custom3"},s.default.createElement(d.Form.Label,null,"Custom 3"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.custom3,onChange:function(t){e.setState({custom3:t.target.value})}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-custom4"},s.default.createElement(d.Form.Label,null,"Custom 4"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.custom4,onChange:function(t){e.setState({custom4:t.target.value})}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-custom5"},s.default.createElement(d.Form.Label,null,"Custom 5"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.custom5,onChange:function(t){e.setState({custom5:t.target.value})}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-custom6"},s.default.createElement(d.Form.Label,null,"Custom 6"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.custom6,onChange:function(t){e.setState({custom6:t.target.value})}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-custom7"},s.default.createElement(d.Form.Label,null,"Custom 7"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.custom7,onChange:function(t){e.setState({custom7:t.target.value})}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-custom8"},s.default.createElement(d.Form.Label,null,"Custom 8"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.custom8,onChange:function(t){e.setState({custom8:t.target.value})}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(d.Form.Group,{controlId:"retailbranch-custom9"},s.default.createElement(d.Form.Label,null,"Custom 9"),s.default.createElement(d.Form.Control,{readOnly:!this.props.writeAccess,type:"text",value:this.state.custom9,onChange:function(t){e.setState({custom9:t.target.value})}}))))),s.default.createElement(d.Modal.Footer,null,s.default.createElement(d.Button,{variant:"light",size:"sm",onClick:this.handleClose},"CANCEL"),s.default.createElement(d.Button,{variant:"primary",size:"sm",onClick:this.handleSubmit,disabled:this.state.saving},"SAVE")))},t}(s.default.Component);t.default=m},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=u(n(46)),d=u(n(47)),f=i(n(4)),p=i(n(33)),m=u(n(5)),h=u(n(10)),g=n(2),v=u(n(9));t.default=function(e){var t,n=s.useState(null),r=n[0],a=n[1],i=s.useState(!0),u=i[0],b=i[1],y=s.useState(!1),E=y[0],_=y[1],w=s.useState(!1),S=w[0],P=w[1],C=s.useState(""),O=C[0],x=C[1],I=s.useState(e.ads.length>0?e.ads[0].value:"0"),N=I[0],A=I[1],j=s.useState(!!r&&p.isVideoAd(r.type)),M=j[0],k=j[1];s.useEffect((function(){D()}),[N]);var F=function(){_(!1),a(null),b(!1),P(!1),x(""),e.onClose()},D=function(){return l(void 0,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:b(!0),_(!1),r.label=1;case 1:return r.trys.push([1,5,,6]),"0"==N?[3,4]:[4,f.Get({path:"/api/ads/"+N})];case 2:return t=r.sent(),[4,f.Get({path:"/api/ads/previewRetail/"+t.advertiserId+"/ad/"+t.id+"/branch/"+e.branch.id})];case 3:n=r.sent(),t.previewTag=n.preview,a(t),k(p.isVideoAd(t.type)),r.label=4;case 4:return b(!1),_(!0),P(!1),x(""),[3,6];case 5:return r.sent(),b(!1),P(!0),x("Error loading advertiser ad."),a(null),[3,6];case 6:return[2]}}))}))};return s.default.createElement(g.Modal,{dialogClassName:"modal-xxl",show:e.show,onEntering:D,onHide:F,backdrop:"static"},s.default.createElement(g.Modal.Header,{closeButton:!0},s.default.createElement(g.Modal.Title,null,"Ad preview - branch ",null===(t=null==e?void 0:e.branch)||void 0===t?void 0:t.name)),s.default.createElement(g.Modal.Body,null,s.default.createElement("div",{className:"row"},s.default.createElement(m.default,{visible:u}),!u&&!S&&s.default.createElement("div",{className:"col-lg-12"},e.ads.length>0&&s.default.createElement("span",null," Ad:",s.default.createElement(g.Form.Group,null,s.default.createElement(v.default,{inputId:"preview-from-branch",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:e.ads.find((function(e){return e.value===N})),onChange:function(e){return A(e.value)},options:e.ads}))),E&&r&&M&&s.default.createElement(c.default,{id:"video-preview-player",ad:r}),E&&r&&!M&&s.default.createElement(d.default,{id:"banner-preview",ad:r})),!u&&S&&s.default.createElement("div",{className:"col-lg-12"},s.default.createElement(h.default,{message:O})))),s.default.createElement(g.Modal.Footer,null,s.default.createElement(g.Button,{variant:"light",size:"sm",onClick:F},"CANCEL")))}},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=u(n(0)),c=n(2),d=o(n(1)),f=o(n(22)),p=u(n(65)),m=u(n(3)),h=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleEntering=function(){var e=r.initialState();r.setState(e)},r.handleClose=function(){var e=r.initialState();r.setState(e,(function(){r.props.handleClose()}))},r.fileChange=function(e){var t=d.get(e,"target.files[0]",null);r.dataToImport(t,(function(e,n,a){r.setState({file:t,fileErrors:e,fileWarnings:n,fileSuccessText:t.name,fileValidationText:"",retailBranches:a||[]})}))},r.radioChange=function(e){if(e.target.checked){var t="replace"===e.target.value;r.setState({replaceAll:t})}},r.onDropError=function(e){e?r.setState({fileErrors:[e],fileSuccessText:"",fileWarnings:[],fileValidationText:"",retailBranches:[]}):r.setState({fileErrors:[],fileSuccessText:"",fileWarnings:[],fileValidationText:"",retailBranches:[]})},r.onDropUpload=function(e){r.setState({dropLoading:!0},(function(){var t=e[0].file,n=Math.random().toString(36);r.dataToImport(t,(function(e,a,i){r.setState({file:t,fileInputKey:n,fileErrors:e,fileWarnings:a,fileSuccessText:t.name,retailBranches:i||[],dropLoading:!1})}))}))},r.handleSubmit=function(){r.state.file?0===r.state.fileErrors.length?r.setState({saving:!0,fileValidationText:""},(function(){var e=r.state.replaceAll,t=r.state.retailBranches;r.props.handleSubmit({replaceAll:e,retailBranches:t})})):r.setState({fileValidationText:"Fix the above file errors before submitting."}):r.setState({fileValidationText:"No file found."})},r.state=r.initialState(),r}return a(t,e),t.prototype.initialState=function(){return{file:null,fileInputKey:"0",retailBranches:[],replaceAll:!1,saving:!1,dropLoading:!1,fileErrors:[],fileWarnings:[],fileSuccessText:"",fileValidationText:""}},t.prototype.dataToImport=function(e,t){var n=this,r=new FileReader;r.onload=function(e){var r,a=e.target.result,i=f.fixExcelData(a),l=(r=XLSX.read(btoa(i),{type:"base64"})).SheetNames[0],o=XLSX.utils.sheet_to_json(r.Sheets[l],{header:1,blankRows:!1}),u=n.filterEmptyRows(o),s=n.importMapping(),c=u.shift().map((function(e){return e.trim()})),d=c.map((function(e){return s[e]})),p=n.getColumnErrors(d),m=n.getColumnWarnings(d,c,s);if(p.length>0)t(p,m);else{var h=n.getDataToImport(u,d),g=n.getRowsErrors(h),v=m.length>0?m:n.getRowsWarnings(h);g.length>0?t(g,v):t(g,v,h)}},r.readAsArrayBuffer(e)},t.prototype.filterEmptyRows=function(e){return e.filter((function(e){return 0!==e.length&&""!==e.map((function(e){return null==e?"":e.trim()})).join("")}))},t.prototype.importMapping=function(){return{id:"branchId",name:"name","landing page":"urlTag",latitude:"latitude",longitude:"longitude",radius:"radius","targeting postal codes":"targetingZipCodes",country:"country",region:"region",city:"city","postal code":"postalCode","address line 1":"address1","address line 2":"address2","custom 1":"custom1","custom 2":"custom2","custom 3":"custom3","custom 4":"custom4","custom 5":"custom5","custom 6":"custom6","custom 7":"custom7","custom 8":"custom8","custom 9":"custom9"}},t.prototype.getRequiredImportFields=function(){return["branchId","name","urlTag"]},t.prototype.getRadiusWarningFields=function(){return["radius","latitude","longitude"]},t.prototype.getPostalCodeWarningFields=function(){return["targetingZipCodes"]},t.prototype.getColumnErrors=function(e){var t=this.getRequiredImportFields(),n=d.difference(t,e);return n.length>0?['Missing required columns: "'+n.join(", ")+'".']:[]},t.prototype.getColumnWarnings=function(e,t,n){var r=[],a=t.filter((function(e){return d.isUndefined(n[e])}));a.length>0&&r.push('The following unrecognized columns will be ignored: "'+a.join(", ")+'".');var i=this.getRadiusWarningFields(),l=d.difference(i,e);l.length>0&&r.push('Missing radius based targeting columns:  "'+l.join(", ")+'".');var o=this.getPostalCodeWarningFields();return d.difference(o,e).length>0&&r.push("Missing targeting postal codes column."),r},t.prototype.getDataToImport=function(e,t){return e.map((function(e){var n={};return t.forEach((function(t,r){t&&("targetingZipCodes"===t?e[r]?n[t]=e[r].split(","):n[t]=null:n[t]=e[r]||null)})),n}))},t.prototype.getRowsErrors=function(e){var t=[],n=this.getDuplicateIds(e);n.length>10?t.push("Some ids are not unique within the update."):n.length>0&&t.push("Some ids are not unique within the update: "+n.join(", ")+".");var r=this.getRequiredImportFields(),a=this.getMissingFieldsIds(e,r);return a.length>10?t.push('Some branches lack mandatory field "id, name and/or landing page".'):a.length>0&&t.push("Branches with id: "+a.join(", ")+' lack mandatory field "id, name and/or landing page".'),t},t.prototype.getRowsWarnings=function(e){var t=[],n=this.getRadiusWarningFields(),r=this.getMissingFieldsIds(e,n);r.length>10?t.push('Some branches lack radius based targeting fields "latitude, longitude and/or radius".'):r.length>0&&t.push("Branches with id: "+r.join(", ")+' lack radius based targeting fields "latitude, longitude and/or radius".');var a=this.getPostalCodeWarningFields(),i=this.getMissingFieldsIds(e,a);i.length>10?t.push('Some branches lack "targeting postal codes".'):i.length>0&&t.push("Branches with id: "+r.join(", ")+' lack "targeting postal codes".');var l=this.getRenamedBranches(e);return l.length>10?t.push(l.length+" number of ids will receive a new name. All existing statistics, costs and retail campaigns are tied to the branch's id. Performing this update will therefore display the new branch name for these existing statistics and retail campaigns . Make very sure, that this is indeed what you want (In most cases using a new id, rather than reusing an existing id is what should happen)"):l.length>0&&t.push("Branches with id: "+l.join(",")+" will receive a new name. All existing statistics, costs and retail campaigns are tied to the branch's id. Performing this update will therefore display the new branch name for these existing statistics and retail campaigns . Make very sure, that this is indeed what you want (In most cases using a new id, rather than reusing an existing id is what should happen)"),t},t.prototype.getDuplicateIds=function(e){var t=d.countBy(e,"branchId");return Object.keys(t).filter((function(e){return t[e]>1}))},t.prototype.getMissingFieldsIds=function(e,t){return e.filter((function(e){return d.values(d.pick(e,t)).filter((function(e){return null===e})).length>0})).map((function(e){return e.branchId}))},t.prototype.getRenamedBranches=function(e){var t=e.map((function(e){return d.pick(e,["branchId","name"])})),n=this.props.existingBranches.map((function(e){return d.pick(e,["branchId","name"])})),r=[];return t.forEach((function(e){var t=n.find((function(t){return t.branchId===e.branchId}));t&&e.name!==t.name&&r.push(e.branchId)})),r},t.prototype.render=function(){return s.default.createElement(c.Modal,{size:"lg",show:this.props.show,onHide:this.handleClose,onEntering:this.handleEntering,backdrop:"static"},s.default.createElement(c.Modal.Header,{closeButton:!0},s.default.createElement(c.Modal.Title,null,"Retail branches import")),s.default.createElement(c.Modal.Body,null,s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12"},s.default.createElement(c.Form.Group,{id:"retailbranch-import-file"},s.default.createElement("p",null,"Upload an excel file to import retail branches. You can download an example file ",s.default.createElement("a",{href:"/files/import-retail-branches-template.xlsx"},"here")),s.default.createElement(c.Form.Control,{key:this.state.fileInputKey,type:"file",accept:".xls,.xlsx",onChange:this.fileChange})),s.default.createElement(c.Form.Group,null,s.default.createElement(p.default,{singleUpload:!0,exts:[".xls",".xlsx"],text:"Drag and drop file",loading:this.state.dropLoading,onError:this.onDropError,onUpload:this.onDropUpload}),s.default.createElement("div",{className:"pt-2"},s.default.createElement("div",{className:"text-success pb-2"},this.state.fileSuccessText),this.state.fileErrors.length>0&&s.default.createElement(c.Alert,{variant:"danger"},s.default.createElement("div",null,s.default.createElement(m.default,{name:"times-circle"})," ",s.default.createElement("strong",null,"Errors")),s.default.createElement("ul",{className:"pl-3"},this.state.fileErrors.map((function(e,t){return s.default.createElement("li",{key:"error-"+t},e)})))),this.state.fileWarnings.length>0&&s.default.createElement(c.Alert,{variant:"warning"},s.default.createElement("div",null,s.default.createElement(m.default,{name:"warning"})," ",s.default.createElement("strong",null,"Warnings")),s.default.createElement("ul",{className:"pl-3"},this.state.fileWarnings.map((function(e,t){return s.default.createElement("li",{key:"warning-"+t},e)}))))))),s.default.createElement("div",{className:"col-sm-12"},s.default.createElement("div",null,s.default.createElement(c.Form.Check,{inline:!0,id:"retailbranch-import-type-append",type:"radio",name:"retailbranch-import-type",value:"append",checked:!this.state.replaceAll,onChange:this.radioChange,label:"Add/update retail branches"}),s.default.createElement(c.Form.Check,{inline:!0,id:"retailbranch-import-type-replace",type:"radio",name:"retailbranch-import-type",value:"replace",checked:this.state.replaceAll,onChange:this.radioChange,label:"Replace all retail branches"}))),s.default.createElement("div",{className:"col-sm-12"},s.default.createElement("div",{className:"text-danger"},this.state.fileValidationText)))),s.default.createElement(c.Modal.Footer,null,s.default.createElement(c.Button,{variant:"light",size:"sm",onClick:this.handleClose},"CANCEL"),s.default.createElement(c.Button,{variant:"primary",size:"sm",onClick:this.handleSubmit,disabled:this.state.saving},"SAVE")))},t}(s.default.Component);t.default=h},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=n(6),c=n(2),d=l(n(13)),f=o(n(12)),p=o(n(55)),m=o(n(41)),h=o(n(16)),g=o(n(28));t.default=function(e){var t=s.useParams(),n=t.page,a=t.scope,i=t.scopeId,l=u.useContext(f.default),o=l.data,v=l.loadError,b="/"+n+"/"+a+"/"+i,y="/:page/:scope/:scopeId",E=d.getRights(o.rights),_=function(e){return e.VIEW_CAMPAIGN?"campaigns":null}(E),w=u.useContext(h.default),S=u.useContext(g.default).daterange,P=S.startDate.format("YYYY-MM-DD"),C=S.endDate.format("YYYY-MM-DD"),O="?sd="+P+"&ed="+C,x={rights:E,user:w,scope:a,scopeId:i,options:{startDate:P,endDate:C,scope:"cluster",scopeId:parseInt(i,10),statistics:E.VIEW_STATISTICS,videoMetrics:e.videoMode},videoMode:e.videoMode};return o.campaignGroup||v.error?u.default.createElement(u.Fragment,null,u.default.createElement("div",{className:"row page-tabs"},u.default.createElement(c.Nav,{as:"ul",variant:"tabs",defaultActiveKey:"/campaigns"},E.VIEW_CAMPAIGN&&u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:b+"/campaigns"+O},"Campaigns"))),u.default.createElement("div",{style:{marginRight:"25px"}},u.default.createElement(m.default,null))),u.default.createElement("div",{className:"row"},u.default.createElement(s.Switch,null,_&&u.default.createElement(s.Redirect,{exact:!0,from:""+y,to:y+"/"+_+O}),E.VIEW_CAMPAIGN&&u.default.createElement(s.Route,{path:y+"/campaigns"},u.default.createElement(p.default,r({},x)))))):null}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=l(n(0)),d=n(6),f=n(188),p=n(2),m=n(189),h=l(n(1)),g=l(n(4)),v=l(n(13)),b=l(n(21)),y=l(n(190)),E=s(n(12)),_=s(n(191)),w=s(n(202)),S=s(n(209)),P=s(n(218)),C=s(n(229)),O=s(n(239)),x=s(n(247)),I=s(n(259)),N=s(n(16)),A=s(n(5)),j=s(n(98)),M=s(n(27)),k=s(n(3));t.default=function(){var e=d.useParams(),t=e.page,n=e.scope,a=e.scopeId,i=e.tab,l=d.useHistory(),s=c.useContext(E.default),F=s.data,D=s.loading,T=s.loadError,R=s.updateReload,B=s.updateLoading,G=v.getRights(h.get(F,"rights")),L=c.useContext(N.default),V=h.get(F,"campaign"),z=b.isRetail(h.get(V,"structure")),q=h.get(V,"videoCampaign"),Y=b.isAdserving(h.get(V,"biddingType")),U=c.useState(null),H=U[0],W=U[1],J=c.useState(null),X=J[0],K=J[1],Z=c.useState(null),$=Z[0],Q=Z[1],ee=c.useState(null),te=ee[0],ne=ee[1],re=c.useState(null),ae=re[0],ie=re[1],le=c.useState(null),oe=le[0],ue=le[1],se=c.useState(null),ce=se[0],de=se[1],fe=c.useState(null),pe=fe[0],me=fe[1],he=c.useState(!0),ge=he[0],ve=he[1],be=c.useState(!0),ye=be[0],Ee=be[1],_e=c.useState(!0),we=_e[0],Se=_e[1],Pe=c.useState(!0),Ce=Pe[0],Oe=Pe[1],xe=c.useState(!0),Ie=xe[0],Ne=xe[1],Ae=c.useState(!0),je=Ae[0],Me=Ae[1],ke=c.useState(""),Fe=ke[0],De=ke[1],Te=c.useState(!1),Re=Te[0],Be=Te[1],Ge=c.useState(!1),Le=Ge[0],Ve=Ge[1],ze=c.useState(!1),qe=ze[0],Ye=ze[1],Ue=ge&&ye&&we&&Ce&&Ie&&je;function He(){W(null),K(null),Q(null),ne(null),ie(null),ue(null),de(null),me(null),ve(!0),Ee(!0),Se(!0),Oe(!0),Ne(!0),Me(!0),Ye(!1)}m.useBeforeUnload(qe,"There are unsaved changes, are you sure you want to leave?"),c.useEffect((function(){i||l.push("/"+t+"/"+n+"/"+a+"/general")}),[]),c.useEffect(He,[a]),c.useEffect((function(){D&&He()}),[D]);var We=function(e){e!==i&&l.push("/"+t+"/"+n+"/"+a+"/"+e)};function Je(e){return o(this,void 0,void 0,(function(){var t,n,r,a;return u(this,(function(i){switch(i.label){case 0:if(!Ue)return[3,6];t={generalTab:H,targetingTab:X,inventoryTab:$,adsTab:te,segmentsTab:ae,advancedRulesTab:oe,substrategiesTab:ce,retailTab:pe},n=y.convert(t,z,Y,q,G),console.log("SAVING ALL! "+JSON.stringify(n)),i.label=1;case 1:return i.trys.push([1,5,,6]),B(!0),[4,g.Post({path:"/api/campaigns/"+V.id+"/settings",body:n})];case 2:return i.sent(),e?(r=V.isActive?"deactivate":"activate",[4,g.Post({path:"/api/campaigns/"+V.id+"/"+r})]):[3,4];case 3:i.sent(),i.label=4;case 4:return R(!0),De(""),Be(!1),[3,6];case 5:return a=i.sent(),R(!0),De("There was an error saving the campaign settings. Try again!"),Be(!0),console.log("err",a),[3,6];case 6:return[2]}}))}))}function Xe(e){return e?"nav-link":"nav-link nav-link-danger"}if(D)return c.default.createElement(A.default,{visible:D});if(V&&F.settings&&!T.error){var Ke=function(){var e=h.get(F,"settings.constraints.maxBidPrice");return z?h.get(pe,"retailBox.maxBidPrice")||e:h.get(H,"budgetBox.maxBidPrice")||e}(),Ze={data:F,isRetail:z,rights:G,onChange:function(e){h.isNull(H)||Ye(!0),W(e)},onValidate:ve},$e={data:F,rights:G,onChange:function(e){h.isNull(X)||Ye(!0),K(e)},onValidate:Ee},Qe={data:F,rights:G,user:L,isAdserving:Y,maxBidPrice:Ke,onChange:function(e){h.isNull($)||Ye(!0),Q(e)},onValidate:Se},et={data:F,rights:G,isAdserving:Y,dataFeedAllowed:z,onChange:function(e){h.isNull(te)||Ye(!0),ne(e)}},tt={data:F,rights:G,maxBidPrice:Ke,onChange:function(e){h.isNull(ae)||Ye(!0),ie(e)}},nt={data:F,rights:G,user:L,maxBidPrice:Ke,onChange:function(e){h.isNull(oe)||Ye(!0),ue(e)},onValidate:Oe},rt={data:F,rights:G,user:L,maxBidPrice:Ke,onChange:function(e){h.isNull(ce)||Ye(!0),de(e)},onValidate:Ne},at={data:F,rights:G,onChange:function(e){var t,n;!h.isNull(pe)&&(null===(t=null==pe?void 0:pe.retailBox)||void 0===t?void 0:t.retailStrategies)&&(null===(n=null==pe?void 0:pe.retailBox)||void 0===n?void 0:n.retailStrategies.length)>0&&Ye(!0),me(e)},onValidate:Me};return c.default.createElement(c.Fragment,null,c.default.createElement(f.Prompt,{message:function(e,r){return"/"+t+"/"+n+"/"+a===e.pathname.split("/",4).join("/")||!qe||"There are unsaved changes, are you sure you want to leave?"}}),!Ue&&c.default.createElement(p.Alert,{variant:"danger",className:"alert-position"},c.default.createElement("span",{className:"font-weight-bold"},"Errors in the following sections! "),!ge&&c.default.createElement("button",{className:"mr-2 btn btn-danger btn-xs",onClick:function(){We("general")}},"GENERAL"),!ye&&c.default.createElement("button",{className:"mr-2 btn btn-danger btn-xs",onClick:function(){We("targeting")}},"TARGETING"),!we&&c.default.createElement("button",{className:"mr-2 btn btn-danger btn-xs",onClick:function(){We("inventory")}},"INVENTORY"),!Ce&&c.default.createElement("button",{className:"mr-2 btn btn-danger btn-xs",onClick:function(){We("advanced-rules")}},"ADVANCED RULES"),!Ie&&c.default.createElement("button",{className:"mr-2 btn btn-danger btn-xs",onClick:function(){We("strategies")}},"SUB-STRATEGIES"),!je&&c.default.createElement("button",{className:"mr-2 btn btn-danger btn-xs",onClick:function(){We("retail")}},"RETAIL")),Re&&c.default.createElement(p.Alert,{variant:"danger",className:"alert-position",dismissible:!0,onClose:function(){Be(!1)}},c.default.createElement("span",{className:"font-weight-bold"},Fe)),c.default.createElement(p.Tab.Container,{id:"campaign-settings-tabs",activeKey:i||"general",defaultActiveKey:i||"general",onSelect:We},c.default.createElement("div",{className:"row page-tabs"},c.default.createElement(p.Nav,{as:"ul",variant:"tabs"},c.default.createElement(p.Nav.Item,{as:"li"},c.default.createElement(p.Nav.Link,{className:Xe(ge),eventKey:"general"},"General")),z&&c.default.createElement(p.Nav.Item,{as:"li"},c.default.createElement(p.Nav.Link,{className:Xe(je),eventKey:"retail"},"Retail")),c.default.createElement(p.Nav.Item,{as:"li"},c.default.createElement(p.Nav.Link,{className:Xe(ye),eventKey:"targeting"},"Targeting")),c.default.createElement(p.Nav.Item,{as:"li"},c.default.createElement(p.Nav.Link,{className:Xe(we),eventKey:"inventory"},"Inventory")),G.VIEW_ADS&&c.default.createElement(p.Nav.Item,{as:"li"},c.default.createElement(p.Nav.Link,{className:"nav-link",eventKey:"ads"},"Ads")),G.VIEW_SEGMENTS&&c.default.createElement(p.Nav.Item,{as:"li"},c.default.createElement(p.Nav.Link,{className:"nav-link",eventKey:"segments"},"Segments")),c.default.createElement(p.Nav.Item,{as:"li"},c.default.createElement(p.Nav.Link,{className:Xe(Ce),eventKey:"advanced-rules"},"Advanced rules")),!z&&c.default.createElement(p.Nav.Item,{as:"li"},c.default.createElement(p.Nav.Link,{className:Xe(Ie),eventKey:"strategies"},"Sub-strategies"))),c.default.createElement("div",{style:{marginRight:"25px"}},c.default.createElement("button",{className:"btn btn-linkbutton btn-sm mr-2",onClick:function(){if(h.get(l,"location.state.fromDashboard")||!1)l.goBack();else{var e=h.get(V,"advertiserId");l.push("/settings/advertiser/"+e)}}},"CANCEL"),c.default.createElement(p.Button,{variant:"primary",size:"sm",className:"mr-2",disabled:!G.MANAGE_CAMPAIGN||!qe,onClick:function(){return o(void 0,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,Je(!1)];case 1:return e.sent(),[2]}}))}))}},"SAVE"),Y&&c.default.createElement(p.Button,{variant:"primary",size:"sm",className:"mr-2",disabled:qe,onClick:function(){var e=(h.get(F,"settings.tags")||[]).filter((function(e){return e.finalized}));b.exportTags(V,e)}},c.default.createElement(k.default,{name:"download"})," EXPORT TAGS"),c.default.createElement(j.default,{status:V.status,rights:G,isActive:V.isActive,startTime:h.get(H,"generalBox.startTime"),endTime:h.get(H,"generalBox.endTime"),onClick:function(){Ve(!0)}}),c.default.createElement(M.default,{message:"Update campaign status?",show:Le,onClose:function(){return Ve(!1)},onConfirm:function(){return o(void 0,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return Ve(!1),[4,Je(!0)];case 1:return e.sent(),[2]}}))}))}}))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-sm-12 pt-3"},c.default.createElement(p.Tab.Content,null,c.default.createElement(p.Tab.Pane,{eventKey:"general"},c.default.createElement(_.default,r({},Ze))),z&&c.default.createElement(p.Tab.Pane,{eventKey:"retail"},c.default.createElement(w.default,r({},at))),c.default.createElement(p.Tab.Pane,{eventKey:"targeting"},c.default.createElement(S.default,r({},$e))),c.default.createElement(p.Tab.Pane,{eventKey:"inventory"},c.default.createElement(P.default,r({},Qe))),G.VIEW_ADS&&c.default.createElement(p.Tab.Pane,{eventKey:"ads"},c.default.createElement(C.default,r({},et))),G.VIEW_SEGMENTS&&c.default.createElement(p.Tab.Pane,{eventKey:"segments"},c.default.createElement(O.default,r({},tt))),c.default.createElement(p.Tab.Pane,{eventKey:"advanced-rules"},c.default.createElement(x.default,r({},nt))),!z&&c.default.createElement(p.Tab.Pane,{eventKey:"strategies"},c.default.createElement(I.default,r({},rt))))))))}return null}},function(e,t){e.exports=require("react-router")},function(e,t){e.exports=require("react-use")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.convert=void 0;var l=i(n(1));function o(e){switch(e){case"evenly":return 1;case"frontloaded":return 1.2;case"fast":return 20;default:return null}}function u(e){return e&&e.length>0?{values:e}:null}function s(e,t){return l.isNil(e)?null:t?e/100:e}function c(e){return e.map((function(e){return l.omit(e,"condition.displayNames")}))}function d(e){return e.map((function(e){return l.omit(e,"displayNames")}))}t.convert=function(e,t,n,r,a){return{isRetail:t,isAdserving:n,videoCampaign:r,campaign:function(e,t){var n=l.get(e,"generalTab.generalBox.name"),r=l.get(e,"generalTab.generalBox.startTime"),a=l.get(e,"generalTab.generalBox.endTime"),i=l.get(e,"generalTab.generalBox.revenueType"),u=l.get(e,"generalTab.generalBox.deliveryType"),s=l.get(e,"generalTab.generalBox.clusterId"),c=l.get(e,"generalTab.generalBox.remarks"),d=l.get(e,"generalTab.commercialBox.mediaAgencyRevenueModel"),f=l.get(e,"generalTab.commercialBox.commercialValue"),p={name:n,startTime:r,endTime:a,revenueType:i,frontLoading:o(u),clusterId:s>0?s:null,remarks:c};t||(p.distributeUsers=l.get(e,"substrategiesTab.substrategiesBox.distributeUsers"),p.redistributeBudget=l.get(e,"substrategiesTab.substrategiesBox.redistributeBudget"),p.useDataFeed=l.get(e,"substrategiesTab.substrategiesBox.useDataFeed"),p.floorPriceOnly=l.get(e,"generalTab.budgetBox.floorPriceOnly")?1:0);t&&(p.floorPriceOnly=l.get(e,"retailTab.retailBox.floorPriceOnly")?1:0);var m=function(e,t){var n={mediaAgencyRevenueModel:e,mediaAgencyRevenuePerImpression:null,mediaAgencyRevenuePerClick:null,mediaAgencyRevenuePerSale:null,mediaAgencyMargin:null};1===e?n.mediaAgencyRevenuePerImpression=t:2===e?n.mediaAgencyRevenuePerClick=t:3===e?n.mediaAgencyRevenuePerSale=t:5===e&&(n.mediaAgencyMargin=t);return n}(d,f);return p=l.assign(p,m)}(e,t),constraints:function(e,t){var n={maxBudgetPerDay:null,maxBudgetPerWeek:null,maxBudgetPerMonth:null,maxBudgetPerCampaign:null,impressionsPerDayAllUsers:null,impressionsPerCampaignAllUsers:null,impressionsPerDayPerUser:null,impressionsPerWeekPerUser:null,impressionsPerMonthPerUser:null,impressionsPerCampaignPerUser:null,clicksPerDayPerUser:null,clicksPerWeekPerUser:null,clicksPerMonthPerUser:null,clicksPerCampaignPerUser:null,conversionsPerDayPerUser:null,conversionsPerWeekPerUser:null,conversionsPerMonthPerUser:null,conversionsPerCampaignPerUser:null},r=t?l.get(e,"retailTab.retailBox.budget"):l.get(e,"generalTab.budgetBox.budget"),a=t?l.get(e,"retailTab.retailBox.budgetPeriod"):l.get(e,"generalTab.budgetBox.budgetPeriod");"day"===a?n.maxBudgetPerDay=r:"week"===a?n.maxBudgetPerWeek=r:"month"===a?n.maxBudgetPerMonth=r:"campaign"===a&&(n.maxBudgetPerCampaign=r);var i=t?l.get(e,"retailTab.retailBox.impressions"):l.get(e,"generalTab.budgetBox.impressions"),o=t?l.get(e,"retailTab.retailBox.impressionsPeriod"):l.get(e,"generalTab.budgetBox.impressionsPeriod");"day"===o?n.impressionsPerDayAllUsers=i:"campaign"===o&&(n.impressionsPerCampaignAllUsers=i);var u=t?l.get(e,"retailTab.retailBox.maxBidPrice"):l.get(e,"generalTab.budgetBox.maxBidPrice");n.maxBidPrice=u,(t?l.get(e,"retailTab.retailBox.fixedBidPrice"):l.get(e,"generalTab.budgetBox.fixedBidPrice"))?n.minBidPrice=n.maxBidPrice:n.minBidPrice=0;return n}(e,t),targeting:function(e,t){var n=l.get(e,"generalTab.generalBox.dayHour"),r=l.get(e,"generalTab.frequencyCapBox"),a=l.get(e,"segmentsTab.segmentsBox.segmentRules"),i={values:l.get(e,"segmentsTab.segmentsBox.digitalAudience")||[]},o=u(l.get(e,"targetingTab.positionBox.deviceTypes")),s=u(l.get(e,"targetingTab.osBox.os")),f=u(l.get(e,"targetingTab.browserBox.browsers")),p=u(l.get(e,"targetingTab.languageBox.languages")),m=function(e){var t=u(l.get(e,"countries")||[]),n=u(l.get(e,"regions")||[]),r=l.get(e,"cities")||[],a=l.get(e,"radius")||null,i=0===r.length?null:{values:r,radius:a},o=l.get(e,"postalCodes")||[],s=0===o.length?null:{values:o,countryCode:l.get(e,"countryCode")};return{country:t,region:n,city:i,postalCode:s}}(l.get(e,"targetingTab.geoTargetingBox")),h=u(l.get(e,"targetingTab.positionBox.inventoryTypes")),g=u(l.get(e,"targetingTab.positionBox.positionTypes")),v=u(l.get(e,"targetingTab.videoTargetingBox.playerSizes")),b=u(l.get(e,"targetingTab.videoTargetingBox.initiationTypes")),y=u(l.get(e,"inventoryTab.publishersAndExchangesBox.publishersAndExchanges")),E=d(l.get(e,"inventoryTab.inventoryRulesBox.domains")),_=d(l.get(e,"inventoryTab.inventoryRulesBox.domainLists")),w=d(l.get(e,"inventoryTab.inventoryRulesBox.topLevelDomains")),S=d(l.get(e,"inventoryTab.inventoryRulesBox.applications")),P=d(l.get(e,"inventoryTab.inventoryRulesBox.applicationLists")),C={rules:c(l.get(e,"advancedRulesTab.advancedRulesBox.advancedRules")||[])},O={basicRules:{time:{dayHour:n},user:{campaignFrequencyCaps:r,segmentRules:a,digitalAudience:i},device:{deviceType:o,os:s,browser:f,language:p,geo:m},inventory:{inventoryType:h,positionOnPage:g,playerSize:v,initiationType:b,publishersAndExchanges:y,domains:E,domainLists:_,topLevelDomains:w,applications:S,applicationLists:P}},advancedRules:C};t||(O.strategies=(l.get(e,"substrategiesTab.substrategiesBox.strategies")||[]).map((function(e){var t=c(e.rules||[]);return l.assign({},e,{rules:t})})));return O}(e,t),deals:a.MANAGE_DEALS?l.get(e,"inventoryTab.dealsBox"):null,ads:a.MANAGE_ADS?l.get(e,"adsTab.adsBox"):null,metricTargets:function(e,t){var n=function(e,t){return t?{maximumPerformance:{CTR:s(e.maximumPerformanceCTR,!0)},minimumPerformance:{CTR:s(e.minimumPerformanceCTR,!0),COMPLETION_RATE:s(e.completionRate,!0)},maximumBid:{CPC:s(e.CPC,!1),CPCV:s(e.CPCV,!1)}}:{maximumPerformance:{CTR:s(e.maximumPerformanceCTR,!0)},minimumPerformance:{CTR:s(e.minimumPerformanceCTR,!0),VIEWABLE_MEASURABLE:s(e.viewableMeasurable,!0),VIEWABLE:s(e.viewable,!0)},maximumBid:{CPC:s(e.CPC,!1),CPV:s(e.CPV,!1)}}}(l.get(e,"generalTab.targetsBox"),t),r={};return l.forEach(n,(function(e,t){r[t]=[],l.forEach(e,(function(e,n){l.isNull(e)||r[t].push({metric:n,value:e})}))})),r}(e,r),retailStrategies:{retailStrategies:t?l.get(e,"retailTab.retailBox.retailStrategies"):null,replaceAll:!0}}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=l(n(192)),c=o(n(193)),d=o(n(194)),f=o(n(195)),p=o(n(198)),m=o(n(200));t.default=function(e){var t=u.useState(null),n=t[0],a=t[1],i=u.useState(null),l=i[0],o=i[1],h=u.useState(null),g=h[0],v=h[1],b=u.useState(null),y=b[0],E=b[1],_=u.useState(null),w=_[0],S=_[1],P=u.useState(!0),C=P[0],O=P[1],x=u.useState(!0),I=x[0],N=x[1],A=u.useState(!0),j=A[0],M=A[1],k=u.useState(!0),F=k[0],D=k[1],T=u.useState(!0),R=T[0],B=T[1],G={generalBox:n,budgetBox:l,targetsBox:g,frequencyCapBox:y,commercialBox:w},L=C&&I&&j&&F&&R;u.useEffect((function(){var t=JSON.stringify({generalBox:null,budgetBox:null,targetsBox:null,frequencyCapBox:null,commercialBox:null});JSON.stringify(G)!==t&&e.onChange(G)}),[JSON.stringify(G)]),u.useEffect((function(){e.onValidate(L)}),[L]);var V=s.getGeneralBoxProps(e.data,e.rights,(function(e,t){a(e),O(t)})),z=s.getBudgetBoxProps(e.data,e.rights,(function(e,t){o(e),N(t)})),q=s.getTargetsBoxProps(e.data,e.rights,(function(e,t){v(e),M(t)})),Y=s.getFrequencyCapBoxProps(e.data,e.rights,(function(e,t){E(e),D(t)})),U=e.rights.MANAGE_CAMPAIGN?s.getCommercialBoxProps(e.data,e.rights,(function(e,t){S(e),B(t)})):null;return u.default.createElement("div",{className:"row no-gutters"},u.default.createElement("div",{className:"col-lg-6"},u.default.createElement(p.default,r({},V))),u.default.createElement("div",{className:"col-lg-6"},!e.isRetail&&u.default.createElement(c.default,r({},z)),u.default.createElement(m.default,r({},q)),u.default.createElement(f.default,r({},Y)),e.rights.MANAGE_CAMPAIGN&&u.default.createElement(d.default,r({},U))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getCommercialBoxProps=t.getFrequencyCapBoxProps=t.getTargetsBoxProps=t.getBudgetBoxProps=t.getGeneralBoxProps=void 0;var l=i(n(1)),o=i(n(21));t.getGeneralBoxProps=function(e,t,n){var r=l.get(e,"campaign"),a=l.get(e,"settings.targeting");return{id:l.get(r,"id"),advertiserId:l.get(r,"advertiserId"),clusterId:l.get(r,"clusterId")||-1,name:l.get(r,"name"),startTime:l.get(r,"startTime"),endTime:l.get(r,"endTime"),videoCampaign:l.get(r,"videoCampaign"),revenueType:l.get(r,"revenueType"),deliveryType:u(l.get(r,"frontLoading")),remarks:l.get(r,"remarks")||"",dayHour:l.get(a,"basicRules.time.dayHour"),rights:t,onChange:n}};t.getBudgetBoxProps=function(e,t,n){var r=l.get(e,"campaign"),a=l.get(e,"settings.constraints"),i=o.getBudgetFields(a),u=o.getImpressionsFields(a);return{id:l.get(r,"id"),budget:l.get(i,"budget"),budgetPeriod:l.get(i,"budgetPeriod"),impressions:l.get(u,"impressions"),impressionsPeriod:l.get(u,"impressionsPeriod")||"campaign",maxBidPrice:l.get(a,"maxBidPrice"),fixedBidPrice:l.get(a,"minBidPrice")===l.get(a,"maxBidPrice"),floorPriceOnly:0!==l.get(r,"floorPriceOnly"),rights:t,onChange:n}};t.getTargetsBoxProps=function(e,t,n){var r=l.get(e,"campaign"),a=l.get(e,"settings.metricTargets"),i=s(a,"minimumPerformance","CTR",!0),o=s(a,"minimumPerformance","VIEWABLE_MEASURABLE",!0),u=s(a,"minimumPerformance","VIEWABLE",!0),d=s(a,"minimumPerformance","COMPLETION_RATE",!0),f=s(a,"maximumPerformance","CTR",!0);return{id:l.get(r,"id"),videoCampaign:r.videoCampaign,open:c(a),minimumPerformanceCTR:i,viewableMeasurable:o,viewable:u,completionRate:d,maximumPerformanceCTR:f,CPC:s(a,"maximumBid","CPC",!1),CPCV:s(a,"maximumBid","CPCV",!1),CPV:s(a,"maximumBid","CPV",!1),rights:t,onChange:n}};t.getFrequencyCapBoxProps=function(e,t,n){var r=l.get(e,"settings.targeting");return{id:l.get(e,"campaign.id"),frequencyCaps:l.get(r,"basicRules.user.campaignFrequencyCaps"),rights:t,onChange:n}};function u(e){return l.isNull(e)||e<=1.1?"evenly":e>1.1&&e<=10?"frontloaded":e>10?"fast":"evenly"}function s(e,t,n,r){var a=null;if(e&&e[t]){var i=(e[t]||[]).find((function(e){return e.metric===n}));i&&(a=r?100*i.value:i.value)}return a}function c(e){var t=[];return l.forEach(e,(function(e,n){t=t.concat(e)})),t.length>0}t.getCommercialBoxProps=function(e,t,n){var r=l.get(e,"campaign"),a=null;return 1===r.mediaAgencyRevenueModel?a=r.mediaAgencyRevenuePerImpression:2===r.mediaAgencyRevenueModel?a=r.mediaAgencyRevenuePerClick:3===r.mediaAgencyRevenueModel?a=r.mediaAgencyRevenuePerSale:5===r.mediaAgencyRevenueModel&&(a=r.mediaAgencyMargin),{id:l.get(r,"id"),mediaAgencyRevenueModel:r.mediaAgencyRevenueModel,commercialValue:a,rights:t,onChange:n}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(9)),c=l(n(37)),d=i(n(1)),f=i(n(21)),p=l(n(34)),m=l(n(32)),h=l(n(3));t.default=function(e){var t=o.useState(e.budget),n=t[0],r=t[1],a=o.useState(e.budgetPeriod),i=a[0],l=a[1],g=o.useState(e.maxBidPrice),v=g[0],b=g[1],y=o.useState(e.floorPriceOnly),E=y[0],_=y[1],w=o.useState(e.fixedBidPrice),S=w[0],P=w[1],C=o.useState(e.impressions),O=C[0],x=C[1],I=o.useState(e.impressionsPeriod),N=I[0],A=I[1],j=o.useState({error:!1,message:""}),M=j[0],k=j[1],F=o.useState({error:!1,message:""}),D=F[0],T=F[1],R={budget:n,budgetPeriod:i,maxBidPrice:v,floorPriceOnly:E,fixedBidPrice:S,impressions:O,impressionsPeriod:N},B=!(M.error||D.error);function G(e){return e?{error:!1,message:""}:{error:!0,message:"Please fill out this field."}}o.useEffect((function(){r(e.budget),l(e.budgetPeriod),b(e.maxBidPrice),_(e.floorPriceOnly),P(e.fixedBidPrice),x(e.impressions),A(e.impressionsPeriod),k({error:!1,message:""}),T({error:!1,message:""})}),[e.id]),o.useEffect((function(){e.onChange(R,B)}),[JSON.stringify(R),B]);var L=M.error?"form-control is-invalid":"form-control",V=D.error?"form-control is-invalid":"form-control",z=f.budgetPeriodOptions(),q=f.impressionsPeriodOptions(),Y=e.rights.MANAGE_CAMPAIGN||!1;return o.default.createElement(p.default,{title:"Budget"},o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Label,null,"Budget *"),o.default.createElement(u.InputGroup,null,o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"â‚¬")),o.default.createElement(c.default,{disabled:!Y,id:"settings-budget-budget",className:L,value:n,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:2,onValueChange:function(e){var t=d.get(e,"floatValue"),n=G(t);r(t),k(n)}}),M.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},M.message))),o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Group,{style:{marginTop:"27px"}},o.default.createElement(s.default,{isDisabled:!Y,inputId:"settings-budget-budget-period",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:z.find((function(e){return e.value===i})),onChange:function(e){var t=e.value;l(t)},options:z})))),o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Label,null,"Max bidprice (CPM)"),o.default.createElement(u.InputGroup,null,o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"â‚¬")),o.default.createElement(c.default,{disabled:!Y,id:"settings-budget-maxbidprice",className:V,value:v,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(e){var t=d.get(e,"floatValue"),n=G(t);b(t),T(n)}}),D.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},D.message))),o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Group,{style:{marginTop:"33px"}},o.default.createElement(m.default,{disabled:!Y,classes:"d-inline-block mr-2",id:"settings-budget-floorpriceonly",checked:E,onChange:function(e){_(e),S&&P(!1)}},"On deals bid external floor price"),o.default.createElement(m.default,{disabled:!Y,classes:"d-inline-block",id:"settings-budget-fixedbidprice",checked:S,onChange:function(e){P(e),E&&_(!1)}},"Fixed bid price only"))),o.default.createElement("div",{className:"col-lg-12 px-1"},E&&o.default.createElement(u.Alert,{variant:"warning"},o.default.createElement(h.default,{name:"warning"})," Only use this option if your campaign uses a pre made deal managed in an external system. This can be useful if the floor price of this deal is managed in a different currency, which may cause small variations in the euro floor price."),S&&o.default.createElement(u.Alert,{variant:"warning"},o.default.createElement(h.default,{name:"warning"})," Using a fixed bid price disables dynamic bidding based on campaign pacing and performance. Using a fixed bid price does not increase likelihood of winning impressions and is typically not recommended."))),o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Label,null,"Max impressions"),o.default.createElement(u.Form.Group,null,o.default.createElement(c.default,{disabled:!Y,id:"settings-budget-impressions",className:"form-control",value:O,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:0,onValueChange:function(e){var t=d.get(e,"floatValue");x(t)}}))),o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Group,{style:{marginTop:"27px"}},o.default.createElement(s.default,{isDisabled:!Y,inputId:"settings-budget-impressions-period",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:q.find((function(e){return e.value===N})),onChange:function(e){var t=e.value;A(t)},options:q})))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(37)),c=i(n(1)),d=i(n(7)),f=i(n(21)),p=l(n(34));t.default=function(e){var t=o.useState(e.mediaAgencyRevenueModel),n=t[0],r=t[1],a=o.useState(e.commercialValue),i=a[0],l=a[1],m=o.useState({error:!1,message:""}),h=m[0],g=m[1],v=o.useState({error:!1,message:""}),b=v[0],y=v[1],E={mediaAgencyRevenueModel:n,commercialValue:i},_=!(h.error||b.error);o.useEffect((function(){r(e.mediaAgencyRevenueModel),l(e.commercialValue),g({error:!1,message:""}),y({error:!1,message:""})}),[e.id]),o.useEffect((function(){e.onChange(E,_)}),[JSON.stringify(E),_]);var w=function(e){if(e.target.checked){var t=parseInt(e.target.value,10);r(t)}},S=f.commercialTypeOptions(),P=[1,2,3].indexOf(n)>-1,C=b.error?"form-control is-invalid":"form-control",O=e.rights.MANAGE_CAMPAIGN||!1;return o.default.createElement(p.default,{title:"Commercial Agreements"},o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-8 px-1"},o.default.createElement(u.Form.Group,{className:"pt-1"},o.default.createElement(u.Form.Label,{className:"width-100"},"Type"),S.map((function(e,t){return o.default.createElement(u.Form.Check,{inline:!0,disabled:!O,id:"settings-commercial-commercialtype-"+e.value,type:"radio",value:e.value,name:"settings-commercial-commercialtype",checked:e.value===n.toString(),onChange:w,label:e.label})})))),o.default.createElement("div",{className:"col-lg-4 px-1"},5===n&&o.default.createElement(u.InputGroup,null,o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"%")),o.default.createElement(u.Form.Control,{disabled:!O,id:"settings-commercial-percentvalue",required:!0,type:"number",min:"0",max:"100",step:"0.01",isInvalid:h.error,value:c.toString(i),onChange:function(e){var t=""!==e.target.value.trim()?parseFloat(e.target.value):null,n=d.native(e.target);l(t),g(n)}}),h.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},h.message)),P&&o.default.createElement(u.InputGroup,null,o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"â‚¬")),o.default.createElement(s.default,{disabled:!O,id:"settings-commercial-currencyvalue",className:C,value:i,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(e){var t=c.get(e,"floatValue");c.isNil(t)?y({error:!0,message:"Please fill out this field."}):y({error:!1,message:""}),l(t)}}),b.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},b.message)))))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=l(n(1)),c=n(42),d=l(n(21)),f=o(n(34)),p=o(n(196));t.default=function(e){var t=D(s.get(e,"frequencyCaps.impressions")||[]),n=D(s.get(e,"frequencyCaps.clicks")||[]),a=D(s.get(e,"frequencyCaps.conversions")||[]),i=e.rights.MANAGE_CAMPAIGN||!1,l=t.map((function(e){return!0})),o=n.map((function(e){return!0})),m=a.map((function(e){return!0})),h=u.useState(t),g=h[0],v=h[1],b=u.useState(n),y=b[0],E=b[1],_=u.useState(a),w=_[0],S=_[1],P=u.useState(l),C=P[0],O=P[1],x=u.useState(o),I=x[0],N=x[1],A=u.useState(m),j=A[0],M=A[1],k={impressions:T(g),clicks:T(y),conversions:T(w)},F=!(C.indexOf(!1)>-1||I.indexOf(!1)>-1||j.indexOf(!1)>-1);function D(e){return e.map((function(e){return s.assign({},e,{key:c.v4()})}))}function T(e){return e.map((function(e){return s.omit(e,"key")}))}function R(e,t,n,r,a){var i=s.cloneDeep(e);i[n]=r;var l=s.cloneDeep(t);return l[n]=a,{rows:i,validations:l}}function B(e,t,n){var r=s.cloneDeep(e),a=s.cloneDeep(t);return r.length>0&&a.length>0&&(r.splice(n,1),a.splice(n,1)),{rows:r,validations:a}}function G(e,t,n){var r=s.cloneDeep(e),a=s.cloneDeep(t);return r.push(n),a.push(!0),{rows:r,validations:a}}function L(e){var t=d.frequencyCapsPeriodOptions(),n=e.map((function(e){return e.sinceStartOf}));return t.filter((function(e){return-1===n.indexOf(e.value)}))}u.useEffect((function(){v(t),E(n),S(a),O(l),N(o),M(m)}),[e.id]),u.useEffect((function(){e.onChange(k,F)}),[JSON.stringify(k),F]);var V=[{label:"Max impressions",field:"impressions",rows:g,options:L(g),writeAccess:i,onChange:function(e,t,n){var r=R(g,C,e,t,n);v(r.rows),O(r.validations)},onDelete:function(e){var t=B(g,C,e);v(t.rows),O(t.validations)},onAdd:function(e){var t=G(g,C,e);v(t.rows),O(t.validations)}},{label:"Max clicks",field:"clicks",rows:y,options:L(y),writeAccess:i,onChange:function(e,t,n){var r=R(y,I,e,t,n);E(r.rows),N(r.validations)},onDelete:function(e){var t=B(y,I,e);E(t.rows),N(t.validations)},onAdd:function(e){var t=G(y,I,e);E(t.rows),N(t.validations)}},{label:"Max conversions",field:"conversions",rows:w,options:L(w),writeAccess:i,onChange:function(e,t,n){var r=R(w,j,e,t,n);S(r.rows),M(r.validations)},onDelete:function(e){var t=B(w,j,e);S(t.rows),M(t.validations)},onAdd:function(e){var t=G(w,j,e);S(t.rows),M(t.validations)}}];return u.default.createElement(f.default,{title:"User Frequency Capping"},V.map((function(e,t){return u.default.createElement(p.default,r({},e))})))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),i=n(2),l=n(42),o=r(n(3)),u=r(n(197));t.default=function(e){var t=function(t,n,r){e.onChange(t,n,r)},n=function(t){e.onDelete(t)};return a.default.createElement("div",{className:"row no-gutters"},a.default.createElement("div",{className:"col-lg-12"},a.default.createElement(i.Form.Group,null,a.default.createElement(i.Form.Label,{className:"px-1"},e.label),a.default.createElement("div",null,e.rows.map((function(r,i){return a.default.createElement(u.default,{key:r.key,index:i,row:r,field:e.field,options:e.options,writeAccess:e.writeAccess,onChange:t,onDelete:n})}))),a.default.createElement(i.Button,{size:"sm",variant:"primary",onClick:function(){e.options.length>0&&e.onAdd({maximum:null,sinceStartOf:e.options[0].value,key:l.v4()})},disabled:!e.writeAccess},a.default.createElement(o.default,{name:"plus"})," ADD"))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(9)),c=i(n(1)),d=i(n(7)),f=i(n(21)),p=l(n(3));t.default=function(e){var t=o.useState({error:!1,message:""}),n=t[0],r=t[1];o.useEffect((function(){var t=d.native(document.getElementById(e.field+"-"+e.row.key+"-maximum"));r(t),e.onChange(e.index,{maximum:e.row.maximum,sinceStartOf:e.row.sinceStartOf,key:e.row.key},!t.error)}),[]);var a=f.frequencyCapsPeriodOptions().filter((function(t){return t.value===e.row.sinceStartOf||c.findIndex(e.options,(function(e){return e.value===t.value}))>-1}));return o.default.createElement("div",null,o.default.createElement("div",{className:"array-row"},o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-6 px-1 pb-1"},o.default.createElement(u.Form.Control,{required:!0,disabled:!e.writeAccess,id:e.field+"-"+e.row.key+"-maximum",type:"number",min:"0",isInvalid:n.error,value:c.toString(e.row.maximum),onChange:function(t){var n=""!==t.target.value?parseInt(t.target.value,10):null,a=d.native(t.target);e.onChange(e.index,{maximum:n,sinceStartOf:e.row.sinceStartOf,key:e.row.key},!a.error),r(a)}}),n.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},n.message)),o.default.createElement("div",{className:"col-lg-6 px-1 pb-1"},o.default.createElement(s.default,{isDisabled:!e.writeAccess,inputId:e.field+"-"+e.row.key+"-period",className:"react-select-container",classNamePrefix:"react-select",onChange:function(t){var r=t.value;e.onChange(e.index,{maximum:e.row.maximum,sinceStartOf:r,key:e.row.key},!n.error)},value:a.find((function(t){return t.value===e.row.sinceStartOf})),options:a})))),o.default.createElement("div",{className:"array-row-remove-btn"},o.default.createElement("a",{href:"",className:"table-btn",onClick:function(t){t.preventDefault(),e.writeAccess&&e.onDelete(e.index)}},o.default.createElement(p.default,{name:"remove"}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=u(n(9)),f=u(n(35)),p=u(n(11)),m=i(n(7)),h=i(n(21)),g=u(n(34)),v=u(n(3)),b=u(n(199)),y=u(n(5));t.default=function(e){var t=s.useState(e.name),n=t[0],r=t[1],a=s.useState(p.default.unix(e.startTime)),i=a[0],u=a[1],E=s.useState(p.default.unix(e.endTime)),_=E[0],w=E[1],S=s.useState(e.revenueType),P=S[0],C=S[1],O=s.useState(e.deliveryType),x=O[0],I=O[1],N=s.useState(e.dayHour),A=N[0],j=N[1],M=s.useState(e.clusterId),k=M[0],F=M[1],D=s.useState([]),T=D[0],R=D[1],B=s.useState(e.remarks),G=B[0],L=B[1],V=s.useState({error:!1,message:""}),z=V[0],q=V[1],Y=s.useState({error:!1,message:""}),U=Y[0],H=Y[1],W=s.useState(!0),J=W[0],X=W[1],K={name:n,startTime:p.default(i).unix(),endTime:p.default(_).unix(),revenueType:P,deliveryType:x,dayHour:A,clusterId:k,remarks:G},Z=!(U.error||z.error);s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return X(!0),r(e.name),u(p.default.unix(e.startTime)),w(p.default.unix(e.endTime)),C(e.revenueType),I(e.deliveryType),j(e.dayHour),L(e.remarks),q({error:!1,message:""}),H({error:!1,message:""}),F(e.clusterId),[4,h.campaigngroupOptions(e.advertiserId)];case 1:return t=n.sent(),R(t),X(!1),[2]}}))}))}()}),[e.id]),s.useEffect((function(){e.onChange(K,Z)}),[JSON.stringify(K),Z]);var $=function(e){if(e.target.checked){var t=parseInt(e.target.value);C(t)}},Q=function(e){if(e.target.checked){var t=e.target.value;I(t)}};function ee(e,t){var n={error:!1,message:""};return e&&t?e.isAfter(t)&&(n={error:!0,message:"End date should be same or after start date."}):n={error:!0,message:"Please fill out start/end date"},n}var te=h.revenueTypeOptions(e.videoCampaign),ne=h.deliveryTypeOptions(),re=e.rights.MANAGE_CAMPAIGN||!1;return s.default.createElement(g.default,{title:"General"},s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,{controlId:"settings-general-name"},s.default.createElement(c.Form.Label,null,"Name *"),s.default.createElement(c.Form.Control,{type:"text",value:n,required:!0,maxLength:200,isInvalid:z.error,disabled:!re,onChange:function(e){var t=e.target.value,n=m.native(e.target);r(t),q(n)}}),z.error&&s.default.createElement(c.Form.Control.Feedback,{type:"invalid"},z.message)))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1 pb-2"},s.default.createElement(c.Form.Label,null,"Start date *"),s.default.createElement(c.InputGroup,null,s.default.createElement(c.InputGroup.Prepend,null,s.default.createElement(c.InputGroup.Text,null,s.default.createElement(v.default,{name:"calendar"}))),s.default.createElement(f.default,{inputProps:{disabled:!re},dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm",onChange:function(e){var t=ee(e,_);u(e),H(t)},value:i}),U.error&&s.default.createElement(c.Form.Control.Feedback,{type:"invalid",style:{display:"block"}},U.message))),s.default.createElement("div",{className:"col-lg-6 px-1 pb-2"},s.default.createElement(c.Form.Label,null,"End date *"),s.default.createElement(c.InputGroup,null,s.default.createElement(c.InputGroup.Prepend,null,s.default.createElement(c.InputGroup.Text,null,s.default.createElement(v.default,{name:"calendar"}))),s.default.createElement(f.default,{inputProps:{disabled:!re},dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm",onChange:function(e){var t=ee(i,e);w(e),H(t)},value:_})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,{className:"width-100"},"Optimize"),te.map((function(e,t){return s.default.createElement(c.Form.Check,{inline:!0,disabled:!re,id:"settings-general-revenuetype-"+e.value,type:"radio",value:e.value,name:"settings-general-revenuetype",checked:e.value===P.toString(),onChange:$,label:e.label})}))))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,{className:"width-100"},"Delivery"),ne.map((function(e,t){return s.default.createElement(c.Form.Check,{inline:!0,disabled:!re,id:"settings-general-deliverytype-"+e.value,type:"radio",value:e.value,name:"settings-general-deliverytype",checked:e.value===x,onChange:Q,label:e.label})}))),"frontloaded"===x&&s.default.createElement(c.Alert,{variant:"warning"},s.default.createElement(v.default,{name:"warning"})," Campaign tries to deliver slightly ahead of schedule. This builds up a buffer to reduce the chance of underdelivery if issues arise at some point during the campaign."),"fast"===x&&s.default.createElement(c.Alert,{variant:"warning"},s.default.createElement("p",null,s.default.createElement(v.default,{name:"warning"})," NOTE: this does not increase the chance of winning impressions, and will likely hurt the campaign's performance. For any delivery type, bids are modified by scheduling and will automatically be increased to meet the campaign's goal by the scheduled date."),s.default.createElement("p",null,'By selecting "as fast as possible", the campaign will completely disregard scheduling and will always "overbid". In most cases of underdelivery, increasing the maximum bid price or expanding the targeting is a more effective way to meet the campaign\'s goals.')))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,"Day parting"),s.default.createElement("p",null,"Select cells in the grid, then assign hours and days using the bid button. Cells are selected by clicking. Click day or hour label to select whole row or column. Use shift-click (on cells, rows or columns) to select a range."),s.default.createElement(b.default,{disabled:!re,data:A,onChange:function(e){j(e)}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(y.default,{visible:J,loaderClass:"loading-input"}),!J&&s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,"Campaign group"),s.default.createElement(d.default,{isDisabled:!re,inputId:"settings-general-campaigngroup",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:T.find((function(e){return e.value===k})),onChange:function(e){F(e.value)},options:T})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,{controlId:"settings-general-remarks"},s.default.createElement(c.Form.Label,null,"Campaign remarks"),s.default.createElement(c.Form.Control,{as:"textarea",disabled:!re,type:"text",value:G,rows:6,onChange:function(e){var t=e.target.value;L(t)}})))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(0)),o=i(n(1)),u=i(n(22));t.default=function(e){var t=["mo","tu","we","th","fr","sa","su"],n=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],r=l.useState([]),a=r[0],i=r[1],s=l.useState([]),c=s[0],d=s[1],f=l.useState([]),p=f[0],m=f[1],h=l.useState(function(){var t=[];return o.forEach(e.data,(function(e,n){var r=function(e){switch(e){case"monday":return 0;case"tuesday":return 1;case"wednesday":return 2;case"thursday":return 3;case"friday":return 4;case"saturday":return 5;case"sunday":return 6}}(n),a=e.map((function(e){return r+"__"+e}));t=t.concat(a)})),t}()),g=h[0],v=h[1],b=l.useState(null),y=b[0],E=b[1];function _(e,t){var n=["cell"];return g.indexOf(e+"__"+t)>-1&&n.push("bid"),a.indexOf(e+"__"+t)>-1&&n.push("selected"),n.join(" ")}function w(e){var t=["day-col"];return c.indexOf(e)>-1&&t.push("selected"),t.join(" ")}function S(e){var t=["hour-row"];return p.indexOf(e)>-1&&t.push("selected"),t.join(" ")}function P(){i([]),d([]),m([])}l.useEffect((function(){var t=function(){var e={monday:[],tuesday:[],wednesday:[],thursday:[],friday:[],saturday:[],sunday:[]};return g.forEach((function(t){var n=t.split("__");if(2===n.length){var r=function(e){switch(e){case 0:return"monday";case 1:return"tuesday";case 2:return"wednesday";case 3:return"thursday";case 4:return"friday";case 5:return"saturday";case 6:return"sunday"}}(parseInt(n[0])),a=parseInt(n[1]);e[r].push(a)}})),e}();e.onChange(t)}),[JSON.stringify(g)]);var C=function(t,n){if(!e.disabled&&y){var r=function(e,t){for(var n=Math.abs(e.col-t.col),r=Math.abs(e.row-t.row),a=Math.min(e.col,t.col),i=Math.min(e.row,t.row),l=[],o=0;o<=n;o++)for(var u=0;u<=r;u++)l.push(i+u+"__"+(a+o));return l}(y,{row:t,col:n});i(r)}},O=function(t){e.disabled||y&&(E(null),d([]),m([]))};var x=e.disabled?"hrdaygrid disabled":"hrdaygrid";return l.default.createElement(l.Fragment,null,l.default.createElement("div",{className:"hrdaygrid-buttons"},l.default.createElement("button",{className:"btn btn-primary btn-sm mr-1",disabled:e.disabled,onClick:function(){var e=o.union(g,a);v(e),P()}},"BID"),l.default.createElement("button",{className:"btn btn-light btn-sm",disabled:e.disabled,onClick:function(){var e=o.difference(g,a);v(e),P()}},"CLEAR")),l.default.createElement("table",{className:x},t.map((function(t,r){return l.default.createElement("tr",{key:"row-"+r},l.default.createElement("td",{onClick:function(){!function(t){if(!e.disabled){var r=c.findIndex((function(e){return e===t})),l=n.map((function(e,n){return t+"__"+n})),u=c.concat(),s=[];r>-1?(s=o.difference(a,l),u.splice(r,1)):(s=o.union(a,l),u.push(t)),d(u),i(s)}}(r)},className:w(r)},t),n.map((function(t,n){return l.default.createElement("td",{key:"col-"+r+"-"+n,className:_(r,n),onClick:function(){!function(t,n){if(!e.disabled){var r=t+"__"+n,l=u.addOrRemoveItemFromArray(a,r);i(l)}}(r,n)},onMouseDown:function(t){!function(t,n){e.disabled||E({row:t,col:n})}(r,n)},onMouseOver:function(e){C(r,n)},onMouseUp:O})})))})),l.default.createElement("tr",null,l.default.createElement("td",null),n.map((function(n,r){return l.default.createElement("td",{onClick:function(){!function(n){if(!e.disabled){var r=p.findIndex((function(e){return e===n})),l=t.map((function(e,t){return t+"__"+n})),u=p.concat(),s=[];r>-1?(s=o.difference(a,l),u.splice(r,1)):(s=o.union(a,l),u.push(n)),m(u),i(s)}}(r)},className:S(r),key:"col-"+r},n)})))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(37)),c=i(n(1)),d=i(n(7)),f=l(n(3)),p=l(n(201));t.default=function(e){var t=o.useState(e.minimumPerformanceCTR),n=t[0],r=t[1],a=o.useState(e.viewableMeasurable),i=a[0],l=a[1],m=o.useState(e.viewable),h=m[0],g=m[1],v=o.useState(e.completionRate),b=v[0],y=v[1],E=o.useState(e.maximumPerformanceCTR),_=E[0],w=E[1],S=o.useState(e.CPC),P=S[0],C=S[1],O=o.useState(e.CPCV),x=O[0],I=O[1],N=o.useState(e.CPV),A=N[0],j=N[1],M=o.useState(e.open),k=M[0],F=M[1],D=o.useState(!1),T=D[0],R=D[1],B=o.useState(!1),G=B[0],L=B[1],V=o.useState(!1),z=V[0],q=V[1],Y=o.useState({error:!1,message:""}),U=Y[0],H=Y[1],W=o.useState({error:!1,message:""}),J=W[0],X=W[1],K=o.useState({error:!1,message:""}),Z=K[0],$=K[1],Q=o.useState({error:!1,message:""}),ee=Q[0],te=Q[1],ne=o.useState({error:!1,message:""}),re=ne[0],ae=ne[1],ie={minimumPerformanceCTR:n,viewableMeasurable:i,viewable:h,completionRate:b,maximumPerformanceCTR:_,CPC:P,CPCV:x,CPV:A},le=!(U.error||J.error||Z.error||ee.error||re.error);o.useEffect((function(){r(e.minimumPerformanceCTR),l(e.viewableMeasurable),y(e.completionRate),g(e.viewable),w(e.maximumPerformanceCTR),C(e.CPC),I(e.CPCV),j(e.CPV),F(e.open),R(!1),L(!1),q(!1),H({error:!1,message:""}),X({error:!1,message:""}),$({error:!1,message:""}),te({error:!1,message:""}),ae({error:!1,message:""})}),[e.id]),o.useEffect((function(){e.onChange(ie,le)}),[JSON.stringify(ie),le]);var oe=e.rights.MANAGE_CAMPAIGN||!1;return o.default.createElement(p.default,{title:"Targets",open:k,onClick:function(){F(!k)}},o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement("span",{className:"font-weight-bold"},"Minimum performance"),o.default.createElement("a",{style:{fontSize:"1.1em"},className:"text-info ml-1",href:"",onClick:function(e){e.preventDefault(),R(!T)}},o.default.createElement(f.default,{name:"info-circle"})),T&&o.default.createElement(u.Alert,{onClose:function(){R(!1)},variant:"info",dismissible:!0},"By setting a minimum performance you are excluding inventory that is not expected to meet this level from being bid on. This may also negatively affect the campaign, as it does mean that only higher quality - but more expensive inventory - can be bought. Setting the bar too high may even result in a campaign not being able to find any inventory that it can bid on."))),o.default.createElement("div",{className:"row no-gutters mb-3"},o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Label,null,"Click-through rate"),o.default.createElement(u.InputGroup,null,o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"%")),o.default.createElement(u.Form.Control,{disabled:!oe,id:"settings-targets-ctr-min-performance",type:"number",min:"0",max:"100",step:"0.01",isInvalid:U.error,value:c.toString(n),onChange:function(e){var t=""!==e.target.value?parseFloat(e.target.value):null,n=d.native(e.target);r(t),H(n)}}),U.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},U.message)))),!e.videoCampaign&&o.default.createElement(o.Fragment,null,o.default.createElement("div",{className:"row no-gutters mb-3"},o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Label,null,"Viewable measurable"),o.default.createElement(u.InputGroup,null,o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"%")),o.default.createElement(u.Form.Control,{disabled:!oe,id:"settings-targets-viewable-measurable",type:"number",min:"0",max:"100",step:"0.01",isInvalid:J.error,value:c.toString(i),onChange:function(e){var t=""!==e.target.value?parseFloat(e.target.value):null,n=d.native(e.target);l(t),X(n)}}),J.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},J.message)))),o.default.createElement("div",{className:"row no-gutters mb-3"},o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Label,null,"Viewable"),o.default.createElement(u.InputGroup,null,o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"%")),o.default.createElement(u.Form.Control,{disabled:!oe,id:"settings-targets-viewable",type:"number",min:"0",max:"100",step:"0.01",isInvalid:Z.error,value:c.toString(h),onChange:function(e){var t=""!==e.target.value?parseFloat(e.target.value):null,n=d.native(e.target);g(t),$(n)}}),Z.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},Z.message))))),e.videoCampaign&&o.default.createElement("div",{className:"row no-gutters mb-3"},o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Label,null,"Completion rate"),o.default.createElement(u.InputGroup,null,o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"%")),o.default.createElement(u.Form.Control,{disabled:!oe,id:"settings-targets-completion-rate",type:"number",min:"0",max:"100",step:"0.01",isInvalid:ee.error,value:c.toString(b),onChange:function(e){var t=""!==e.target.value?parseFloat(e.target.value):null,n=d.native(e.target);y(t),te(n)}}),ee.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},ee.message)))),o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement("span",{className:"font-weight-bold"},"Maximum performance"),o.default.createElement("a",{style:{fontSize:"1.1em"},className:"text-info ml-1",href:"",onClick:function(e){e.preventDefault(),L(!G)}},o.default.createElement(f.default,{name:"info-circle"})),G&&o.default.createElement(u.Alert,{onClose:function(){L(!1)},variant:"info",dismissible:!0},"Setting a maximum performance may help to exclude inventory that has suspiciously good results. This typically means advertisement areas that move during the loading of a pageâ€™s content and result in a high number of unintentional clicks."))),o.default.createElement("div",{className:"row no-gutters mb-3"},o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Label,null,"Click-through rate"),o.default.createElement(u.InputGroup,null,o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"%")),o.default.createElement(u.Form.Control,{disabled:!oe,id:"settings-targets-ctr-max-performance",type:"number",min:"0",max:"100",step:"0.01",isInvalid:re.error,value:c.toString(_),onChange:function(e){var t=""!==e.target.value?parseFloat(e.target.value):null,n=d.native(e.target);w(t),ae(n)}}),re.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},re.message)))),o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement("span",{className:"font-weight-bold"},"Maximum cost"),o.default.createElement("a",{style:{fontSize:"1.1em"},className:"text-info ml-1",href:"",onClick:function(e){e.preventDefault(),q(!z)}},o.default.createElement(f.default,{name:"info-circle"})),z&&o.default.createElement(u.Alert,{onClose:function(){q(!1)},variant:"info",dismissible:!0},"Setting a maximum cost on a metric may help when trying to optimize your campaign on several metrics. For example if you are optimizing on clicks, but do not want to pay more than 1 euro CPM per viewable impression then you can set that as an additional limit here."))),o.default.createElement("div",{className:"row no-gutters mb-3"},o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Label,null,"Cost per click"),o.default.createElement(u.InputGroup,null,o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"â‚¬")),o.default.createElement(s.default,{disabled:!oe,id:"settings-cpc",className:"form-control",value:P,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(e){C(c.get(e,"floatValue"))}})))),!e.videoCampaign&&o.default.createElement("div",{className:"row no-gutters mb-3"},o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Label,null,"Cost per view"),o.default.createElement(u.InputGroup,null,o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"â‚¬")),o.default.createElement(s.default,{disabled:!oe,id:"settings-cpv",className:"form-control",value:A,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(e){j(c.get(e,"floatValue"))}})))),e.videoCampaign&&o.default.createElement("div",{className:"row no-gutters mb-3"},o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Label,null,"Cost per completed video"),o.default.createElement(u.InputGroup,null,o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"â‚¬")),o.default.createElement(s.default,{disabled:!oe,id:"settings-cpcv",className:"form-control",value:x,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(e){I(c.get(e,"floatValue"))}})))))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),i=n(2),l=r(n(3));t.default=function(e){return a.default.createElement("div",{className:"card mb-2"},a.default.createElement("a",{className:"collapse-header",href:"",onClick:function(t){t.preventDefault(),e.onClick()},"aria-expanded":e.open},a.default.createElement(l.default,{name:e.open?"chevron-up":"chevron-down"}),a.default.createElement("h5",{className:"px-1"},e.title)),a.default.createElement(i.Collapse,{in:e.open},a.default.createElement("div",null,e.children)))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=l(n(203)),c=o(n(204));t.default=function(e){var t=u.useState(null),n=t[0],a=t[1],i=u.useState(!0),l=i[0],o=i[1],d=u.useState(null),f=(d[0],d[1],{retailBox:n}),p=l;u.useEffect((function(){e.onChange(f)}),[JSON.stringify(f)]),u.useEffect((function(){e.onValidate(p)}),[p]);var m=s.getRetailBoxProps(e.data,e.rights,(function(e,t){a(e),o(t)}));return u.default.createElement("div",{className:"row no-gutters"},u.default.createElement("div",{className:"col-lg-12"},u.default.createElement(c.default,r({},m))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getRetailBoxProps=void 0;var l=i(n(1)),o=i(n(21));t.getRetailBoxProps=function(e,t,n){var r=l.get(e,"campaign"),a=l.get(e,"settings.constraints"),i=o.getBudgetFields(a),u=o.getImpressionsFields(a),s=l.get(e,"settings.retailStrategies",[]),c=l.get(r,"structure");return{id:l.get(r,"id"),advertiserId:l.get(r,"advertiserId"),structure:c,budget:l.get(i,"budget"),budgetPeriod:l.get(i,"budgetPeriod"),impressions:l.get(u,"impressions"),impressionsPeriod:l.get(u,"impressionsPeriod"),maxBidPrice:l.get(a,"maxBidPrice"),fixedBidPrice:l.get(a,"minBidPrice")===l.get(a,"maxBidPrice"),floorPriceOnly:0!==l.get(r,"floorPriceOnly"),retailStrategies:s,rights:t,onChange:n}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(9)),c=l(n(37)),d=i(n(1)),f=i(n(22)),p=i(n(21)),m=i(n(36)),h=l(n(32)),g=l(n(3)),v=l(n(34)),b=l(n(205)),y=l(n(5)),E=l(n(206)),_=l(n(207)),w=l(n(208));t.default=function(e){var t,n=o.useState(e.budget),r=n[0],a=n[1],i=o.useState(e.budgetPeriod),l=i[0],S=i[1],P=o.useState(e.maxBidPrice),C=P[0],O=P[1],x=o.useState(e.floorPriceOnly),I=x[0],N=x[1],A=o.useState(e.fixedBidPrice),j=A[0],M=A[1],k=o.useState(e.impressions),F=k[0],D=k[1],T=o.useState(e.impressionsPeriod||"campaign"),R=T[0],B=T[1],G=o.useState([]),L=G[0],V=G[1],z=o.useState(null),q=z[0],Y=z[1],U=o.useState({error:!1,message:""}),H=U[0],W=U[1],J=o.useState({error:!1,message:""}),X=J[0],K=J[1],Z=o.useState(!0),$=Z[0],Q=Z[1],ee=o.useState(!1),te=ee[0],ne=ee[1],re=o.useState(!1),ae=re[0],ie=re[1],le=o.useState(!1),oe=le[0],ue=le[1],se=(t=L.map((function(e){return d.omit(e,"retailBranch")})),{budget:r,budgetPeriod:l,maxBidPrice:C,floorPriceOnly:I,fixedBidPrice:j,impressions:F,impressionsPeriod:R,retailStrategies:t}),ce=!(H.error||X.error);function de(e){return e?{error:!1,message:""}:{error:!0,message:"Please fill out this field."}}o.useEffect((function(){a(e.budget),S(e.budgetPeriod),O(e.maxBidPrice),N(e.floorPriceOnly),M(e.fixedBidPrice),D(e.impressions),B(e.impressionsPeriod||"campaign"),V(d.cloneDeep(e.retailStrategies)),W({error:!1,message:""}),K({error:!1,message:""}),ne(!1),ie(!1),ue(!1)}),[e.id]),o.useEffect((function(){e.onChange(se,ce)}),[JSON.stringify(se),ce]),o.useEffect((function(){Q(!1)}),[JSON.stringify(L)]);function fe(e,t){return parseInt(e.branchId)-parseInt(t.branchId)}function pe(e,t){return e.branchId<t.branchId?-1:e.branchId>t.branchId?1:0}function me(e,t){var n=d.sumBy(L,(function(t){return d.get(t,"campaignConstraints["+e+"]",0)}));if(0!==t&&!d.isNil(t)&&n!==t&&0!==L.length){var r=L.map((function(r){var a=d.assign({},r);if(0===n)a.campaignConstraints[e]=t/L.length;else{var i=a.campaignConstraints[e]/n;a.campaignConstraints[e]=t*i}return a}));V(r)}}function he(e,t){var n=d.sumBy(t,(function(t){return d.get(t,"campaignConstraints["+e+"]",0)}));"budget"===e?a(n):D(n)}var ge=H.error?"form-control is-invalid":"form-control",ve=X.error?"form-control is-invalid":"form-control",be=p.budgetPeriodOptions(),ye=p.impressionsPeriodOptions(),Ee=L.map((function(e){return e.retailBranchId})),_e=e.rights.MANAGE_CAMPAIGN||!1;return o.default.createElement(v.default,{title:"RETAIL_GPS"===e.structure?"Retail - GPS based":"Retail - Postal code based"},o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Label,null,"Sum of budgets"),o.default.createElement(u.InputGroup,null,o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"â‚¬")),o.default.createElement(c.default,{disabled:!_e,id:"settings-retail-budget",className:ge,value:r,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:2,onValueChange:function(e){var t=d.get(e,"floatValue"),n=de(t);a(t),W(n),me("budget",t)}}),H.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},H.message))),o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Group,{style:{marginTop:"27px"}},o.default.createElement(s.default,{isDisabled:!_e,inputId:"settings-retail-budget-period",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:be.find((function(e){return e.value===l})),onChange:function(e){var t=e.value;S(t)},options:be})))),o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Label,null,"Max bidprice (CPM)"),o.default.createElement(u.InputGroup,null,o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"â‚¬")),o.default.createElement(c.default,{disabled:!_e,id:"settings-retail-maxbidprice",className:ve,value:C,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(e){var t=d.get(e,"floatValue"),n=de(t);O(t),K(n)}}),X.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},X.message))),o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Group,{style:{marginTop:"33px"}},o.default.createElement(h.default,{disabled:!_e,classes:"d-inline-block mr-2",id:"settings-retail-floorpriceonly",checked:I,onChange:function(e){N(e),j&&M(!1)}},"On deals bid external floor price"),o.default.createElement(h.default,{disabled:!_e,classes:"d-inline-block",id:"settings-retail-fixedbidprice",checked:j,onChange:function(e){M(e),I&&N(!1)}},"Fixed bid price only"))),o.default.createElement("div",{className:"col-lg-12 px-1"},I&&o.default.createElement(u.Alert,{variant:"warning"},o.default.createElement(g.default,{name:"warning"})," Only use this option if your campaign uses a pre made deal managed in an external system. This can be useful if the floor price of this deal is managed in a different currency, which may cause small variations in the euro floor price."),j&&o.default.createElement(u.Alert,{variant:"warning"},o.default.createElement(g.default,{name:"warning"})," Using a fixed bid price disables dynamic bidding based on campaign pacing and performance. Using a fixed bid price does not increase likelihood of winning impressions and is typically not recommended."))),o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Label,null,"Sum of impression caps"),o.default.createElement(u.Form.Group,null,o.default.createElement(c.default,{disabled:!_e,id:"settings-retail-impressions",className:"form-control",value:F,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:0,onValueChange:function(e){var t=d.get(e,"floatValue");me("impressionCap",t),D(t)}}))),o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Group,{style:{marginTop:"27px"}},o.default.createElement(s.default,{isDisabled:!_e,inputId:"settings-retail-impressions-period",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:ye.find((function(e){return e.value===R})),onChange:function(e){var t=e.value;B(t)},options:ye})))),o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement("h5",{className:"pull-left"},"Retail branches"),o.default.createElement("div",{className:"table-btn-container"},o.default.createElement(u.Button,{size:"sm",disabled:!_e,variant:"primary",className:"mr-2",onClick:function(){ne(!0)}},o.default.createElement(g.default,{name:"plus"})," ADD RETAIL BRANCHES"),o.default.createElement(u.Button,{size:"sm",disabled:!_e,variant:"primary",className:"mr-2",onClick:function(){ue(!0)}},o.default.createElement(g.default,{name:"upload"})," IMPORT"),o.default.createElement(u.Button,{size:"sm",disabled:!_e,variant:"primary",className:"mr-2",onClick:function(){var t=["id","name","budget","impressions","max bid price","RETAIL_GPS"===e.structure?"radius":"targeting postal codes","landing page","custom 1","custom 2","custom 3","custom 4","custom 5","custom 6","custom 7","custom 8","custom 9"].map((function(e){return m.getBoldCell(e)})),n=m.currencyFormat(),r=function(e){return t=L.map((function(e){return e.branchId})),n=t.filter((function(e){return f.isNumeric(e)})),t.length===n.length?e.sort(fe):e.sort(pe);var t,n}(d.cloneDeep(L)).map((function(t){var r="RETAIL_GPS"===e.structure?d.get(t,"geoTargeting.radius")||"":(d.get(t,"geoTargeting.targetingZipCodes")||[]).join(",");return[m.getCell(d.get(t,"branchId")),m.getCell(d.get(t,"retailBranch.name")),m.getCell(d.get(t,"campaignConstraints.budget"),null,n),m.getCell(d.get(t,"campaignConstraints.impressionCap")||""),m.getCell(d.get(t,"campaignConstraints.maxBid"),null,n),m.getCell(r),m.getCell(d.get(t,"dynamicAdParameters.urlTag")||""),m.getCell(d.get(t,"dynamicAdParameters.custom1")||""),m.getCell(d.get(t,"dynamicAdParameters.custom2")||""),m.getCell(d.get(t,"dynamicAdParameters.custom3")||""),m.getCell(d.get(t,"dynamicAdParameters.custom4")||""),m.getCell(d.get(t,"dynamicAdParameters.custom5")||""),m.getCell(d.get(t,"dynamicAdParameters.custom6")||""),m.getCell(d.get(t,"dynamicAdParameters.custom7")||""),m.getCell(d.get(t,"dynamicAdParameters.custom8")||""),m.getCell(d.get(t,"dynamicAdParameters.custom9")||"")]})),a=[t].concat(r);m.save(a,"Campaign retail branches","CampaignRetailBranches_"+e.id)}},o.default.createElement(g.default,{name:"download"})," EXPORT")),o.default.createElement(y.default,{visible:$}),!$&&o.default.createElement(b.default,{records:L,structure:e.structure,writeAccess:_e,editClick:function(e){var t=L.find((function(t){return t.retailBranchId===e}));Y(t),ie(!0)},deleteClick:function(e){Q(!0);var t=L.filter((function(t){return t.retailBranchId!==e}));he("budget",t),he("impressionCap",t),V(t)}}))),o.default.createElement(E.default,{show:te,ids:Ee,advertiserId:e.advertiserId,onClose:function(){return ne(!1)},onSubmit:function(e){var t=L.concat(e);he("budget",t),he("impressionCap",t),V(t),ne(!1)}}),o.default.createElement(_.default,{show:ae,retailStrategy:q,structure:e.structure,writeAccess:_e,maxBidPrice:C,onClose:function(){return ie(!1)},onSubmit:function(e){var t=L.findIndex((function(t){return t.retailBranchId===e.retailBranchId}));if(t>-1){var n=d.cloneDeep(L);n[t]=e,JSON.stringify(n)!==JSON.stringify(L)&&Q(!0),he("budget",n),he("impressionCap",n),V(n)}ie(!1)}}),o.default.createElement(w.default,{show:oe,structure:e.structure,advertiserId:e.advertiserId,onClose:function(){ue(!1)},onSubmit:function(e){JSON.stringify(e)!==JSON.stringify(L)&&Q(!0),he("budget",e),he("impressionCap",e),V(e),ue(!1)}}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=o(n(14)),c=l(n(23)),d=o(n(17)),f=n(2),p=l(n(1)),m=l(n(8)),h=l(n(15)),g=o(n(3));t.default=function(e){var t="retail-strategies-table",n=u.useState(1),a=n[0],i=n[1],l=u.useState(30),o=l[0],v=l[1],b=u.useState({dataField:"id",order:"desc"}),y=b[0],E=b[1],_=function(e,t){E({dataField:e,order:t})},w=function(e,t){i(e)},S=function(e,t){v(e)},P=function(t,n,r){if(e.writeAccess){var a=u.default.createElement(f.Tooltip,{id:"retailstrategy-delete-tooltip-"+r},"unlink"),i=m.getPopperConfig();return u.default.createElement(f.OverlayTrigger,{placement:"top",overlay:a,popperConfig:i},u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.deleteClick(n.retailBranchId)},href:"",className:"table-btn"},u.default.createElement(g.default,{name:"remove"})))}return null},C=function(t,n,r){var a=e.writeAccess?"edit":"view",i=e.writeAccess?"pencil":"search-plus",l=u.default.createElement(f.Tooltip,{id:"retailstrategy-edit-tooltip-"+r},a),o=m.getPopperConfig();return u.default.createElement(f.OverlayTrigger,{placement:"top",overlay:l,popperConfig:o},u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.retailBranchId)},href:"",className:"table-btn"},u.default.createElement(g.default,{name:i})))},O=function(e,t,n){if(e&&e.length>0){if(e.length>5){var r=e.join(", "),a=u.default.createElement(f.Popover,{id:"retail-strategy-zip-"+n},u.default.createElement(f.Popover.Content,null,r)),i=m.getPopperConfig(),l=e.slice(0,5).join(", ")+" and "+(e.length-5)+" more";return u.default.createElement(f.OverlayTrigger,{trigger:"hover",placement:"right",overlay:a,popperConfig:i},u.default.createElement("span",{className:"pointer"},l))}return e.join(", ")}return"-"};function x(){var t=h.getLastPage(e.records,o);return a>t?t:a}var I=c.Search.SearchBar,N=[{dataField:"df1",isDummyField:!0,text:"",formatter:C,headerStyle:{width:"30px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:P,headerStyle:{width:"30px"}},{dataField:"retailBranchId",hidden:!0},{dataField:"branchId",text:"#",sort:!0,onSort:_,sortCaret:h.columnSort},{dataField:"name",text:"Name",sort:!0,onSort:_,sortCaret:h.columnSort},{dataField:"budget",text:"Budget",sort:!0,onSort:_,sortCaret:h.columnSort,formatter:h.currencyFormatter},{dataField:"impressionCap",text:"Impressions",sort:!0,onSort:_,sortCaret:h.columnSort,formatter:h.numberFormatter},{dataField:"maxBid",text:"Max bid",sort:!0,onSort:_,sortCaret:h.columnSort,formatter:h.currencyFormatter},"RETAIL_GPS"===e.structure?{dataField:"radius",text:"Radius",sort:!0,onSort:_,sortCaret:h.columnSort,formatter:h.numberFormatter}:{dataField:"targetingZipCodes",text:"Postal codes",sort:!0,onSort:_,sortCaret:h.columnSort,formatter:O}],A=e.records.map((function(e){return{branchId:p.get(e,"retailBranch.branchId"),retailBranchId:p.get(e,"retailBranchId"),name:p.get(e,"retailBranch.name"),budget:p.get(e,"campaignConstraints.budget"),impressionCap:p.get(e,"campaignConstraints.impressionCap"),maxBid:p.get(e,"campaignConstraints.maxBid"),radius:p.get(e,"geoTargeting.radius")||p.get(e,"retailBranch.radius"),targetingZipCodes:p.get(e,"geoTargeting.targetingZipCodes")||p.get(e,"retailBranch.targetingZipCodes")||[]}}));return u.default.createElement(c.default,{keyField:"id",data:A,columns:N,search:!0},(function(e){return u.default.createElement("div",null,u.default.createElement("div",{className:"search-label-container"},u.default.createElement(g.default,{name:"search"}),u.default.createElement(I,r({},e.searchProps,{placeholder:"Filter records",tableId:t}))),u.default.createElement(s.default,r({},e.baseProps,{classes:"table-borderless",id:t,bordered:!1,hover:!0,striped:!0,keyField:"id",data:A,columns:N,defaultSorted:[y],pagination:d.default({page:x(),sizePerPage:o,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100}],onPageChange:w,onSizePerPageChange:S})})))}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=u(n(37)),f=i(n(1)),p=i(n(4)),m=u(n(5)),h=u(n(93));t.default=function(e){var t=s.useState(null),n=t[0],r=t[1],a=s.useState(null),i=a[0],u=a[1],g=s.useState(null),v=g[0],b=g[1],y=s.useState([]),E=y[0],_=y[1],w=s.useState([]),S=w[0],P=w[1],C=s.useState(!0),O=C[0],x=C[1];return s.default.createElement(c.Modal,{size:"lg",show:e.show,onHide:e.onClose,onEntering:function(){return l(void 0,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return x(!0),[4,p.Get({path:"/api/advertisers/"+e.advertiserId+"/retailbranches"})];case 1:return t=r.sent(),n=t.filter((function(t){return e.ids.indexOf(t.id)<0})),_(n),x(!1),[2]}}))}))},backdrop:"static"},s.default.createElement(c.Modal.Header,{closeButton:!0},s.default.createElement(c.Modal.Title,null,"Add retail branches")),s.default.createElement(c.Modal.Body,null,s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-4 px-1"},s.default.createElement(c.Form.Label,null,"Budget"),s.default.createElement(c.InputGroup,null,s.default.createElement(c.InputGroup.Prepend,null,s.default.createElement(c.InputGroup.Text,null,"â‚¬")),s.default.createElement(d.default,{id:"add-retail-budget",className:"form-control",value:n,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:2,onValueChange:function(e){var t=f.get(e,"floatValue");r(t)}}))),s.default.createElement("div",{className:"col-lg-4 px-1"},s.default.createElement(c.Form.Label,null,"Impression cap"),s.default.createElement(c.Form.Group,null,s.default.createElement(d.default,{id:"add-retail-impressions",className:"form-control",value:v,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:0,onValueChange:function(e){var t=f.get(e,"floatValue");b(t)}}))),s.default.createElement("div",{className:"col-lg-4 px-1"},s.default.createElement(c.Form.Label,null,"Max bidprice"),s.default.createElement(c.InputGroup,null,s.default.createElement(c.InputGroup.Prepend,null,s.default.createElement(c.InputGroup.Text,null,"â‚¬")),s.default.createElement(d.default,{id:"add-retail-maxbidprice",className:"form-control",value:i,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(e){var t=f.get(e,"floatValue");u(t)}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Label,{className:"pull-left"},"Retail branches"),s.default.createElement(m.default,{visible:O}),!O&&s.default.createElement(h.default,{records:E,onChange:function(e){P(e)}})))),s.default.createElement(c.Modal.Footer,null,s.default.createElement(c.Button,{size:"sm",variant:"light",onClick:e.onClose},"CLOSE"),s.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:function(){var t=E.filter((function(e){return S.indexOf(e.id)>-1})).map((function(e){return{retailBranchId:e.id,branchId:e.branchId,campaignConstraints:{budget:n||0,impressionCap:v,maxBid:i},geoTargeting:{radius:null,targetingZipCodes:null},dynamicAdParameters:{urlTag:null,custom1:null,custom2:null,custom3:null,custom4:null,custom5:null,custom6:null,custom7:null,custom8:null,custom9:null},retailBranch:e}}));e.onSubmit(t)}},"SAVE")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=u(n(37)),f=u(n(38)),p=i(n(1)),m=i(n(7));t.default=function(e){var t,n,r,a=s.useState(null),i=a[0],u=a[1],h=s.useState(null),g=h[0],v=h[1],b=s.useState(null),y=b[0],E=b[1],_=s.useState([]),w=_[0],S=_[1],P=s.useState(null),C=P[0],O=P[1],x=s.useState(""),I=x[0],N=x[1],A=s.useState(""),j=A[0],M=A[1],k=s.useState(""),F=k[0],D=k[1],T=s.useState(""),R=T[0],B=T[1],G=s.useState(""),L=G[0],V=G[1],z=s.useState(""),q=z[0],Y=z[1],U=s.useState(""),H=U[0],W=U[1],J=s.useState(""),X=J[0],K=J[1],Z=s.useState(""),$=Z[0],Q=Z[1],ee=s.useState(""),te=ee[0],ne=ee[1],re=s.useState({error:!1,message:""}),ae=re[0],ie=re[1];function le(e){return""===e?null:e}return s.default.createElement(c.Modal,{size:"lg",show:e.show,onHide:e.onClose,onEntering:function(){return l(void 0,void 0,void 0,(function(){var t,n,r,a,i,l,s,c,d,f,m,h,g,b,y;return o(this,(function(o){return t=p.get(e,"retailStrategy.campaignConstraints.budget")||0,n=p.get(e,"retailStrategy.campaignConstraints.impressionCap"),r=p.get(e,"retailStrategy.campaignConstraints.maxBid"),a=(p.get(e,"retailStrategy.geoTargeting.targetingZipCodes")||[]).map((function(e){return{value:e,label:e}})),i=p.get(e,"retailStrategy.geoTargeting.radius"),l=p.get(e,"retailStrategy.dynamicAdParameters.urlTag",""),s=p.get(e,"retailStrategy.dynamicAdParameters.custom1",""),c=p.get(e,"retailStrategy.dynamicAdParameters.custom2",""),d=p.get(e,"retailStrategy.dynamicAdParameters.custom3",""),f=p.get(e,"retailStrategy.dynamicAdParameters.custom4",""),m=p.get(e,"retailStrategy.dynamicAdParameters.custom5",""),h=p.get(e,"retailStrategy.dynamicAdParameters.custom6",""),g=p.get(e,"retailStrategy.dynamicAdParameters.custom7",""),b=p.get(e,"retailStrategy.dynamicAdParameters.custom8",""),y=p.get(e,"retailStrategy.dynamicAdParameters.custom9",""),u(t),E(n),v(r),S(a),O(i),N(l),M(s),D(c),B(d),V(f),Y(m),W(h),K(g),Q(b),ne(y),ie({error:!1,message:""}),[2]}))}))},backdrop:"static"},s.default.createElement(c.Modal.Header,{closeButton:!0},s.default.createElement(c.Modal.Title,null,"Edit retail branch")),s.default.createElement(c.Modal.Body,null,s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-4 px-1"},s.default.createElement(c.Form.Label,null,"Budget"),s.default.createElement(c.InputGroup,null,s.default.createElement(c.InputGroup.Prepend,null,s.default.createElement(c.InputGroup.Text,null,"â‚¬")),s.default.createElement(d.default,{id:"edit-retail-budget",className:"form-control",value:i,disabled:!e.writeAccess,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:2,onValueChange:function(e){var t=p.get(e,"floatValue");u(t)}}))),s.default.createElement("div",{className:"col-lg-4 px-1"},s.default.createElement(c.Form.Label,null,"Impression cap"),s.default.createElement(c.Form.Group,null,s.default.createElement(d.default,{id:"edit-retail-impressions",className:"form-control",placeholder:"No impression limit",value:y,disabled:!e.writeAccess,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:0,onValueChange:function(e){var t=p.get(e,"floatValue");E(t)}}))),s.default.createElement("div",{className:"col-lg-4 px-1"},s.default.createElement(c.Form.Label,null,"Max bidprice"),s.default.createElement(c.InputGroup,null,s.default.createElement(c.InputGroup.Prepend,null,s.default.createElement(c.InputGroup.Text,null,"â‚¬")),s.default.createElement(d.default,{id:"edit-retail-maxbidprice",className:"form-control",value:g,disabled:!e.writeAccess,placeholder:"Campaign max bid: "+e.maxBidPrice,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(e){var t=p.get(e,"floatValue");v(t)}})))),s.default.createElement("div",{className:"row no-gutters"},"RETAIL_ZIP"===e.structure&&s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,{controlId:"edit-retail-targetingzipcodes"},s.default.createElement(c.Form.Label,null,"Targeting postal codes"),s.default.createElement(f.default,{className:"react-select-container multiple",classNamePrefix:"react-select",isClearable:!0,isMulti:!0,isDisabled:!e.writeAccess,placeholder:(r=p.get(e,"retailStrategy.retailBranch.targetingZipCodes",[]),r.length>0?"Branch default: "+r.join(","):""),onChange:function(e,t){var n=e;if(e.length>0){var r=e[e.length-1].value.split(/[\s,]+/).map((function(e){return{value:e,label:e}}));r.length>1&&(n=e.slice(0,e.length-1).concat(r))}S(n)},value:w}))),"RETAIL_GPS"===e.structure&&s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,{controlId:"edit-retail-radius"},s.default.createElement(c.Form.Label,null,"Radius"),s.default.createElement(c.Form.Control,{disabled:!e.writeAccess,required:!0,type:"number",min:"0",placeholder:(n=p.get(e,"retailStrategy.retailBranch.radius",null),p.isNil(n)?"Branch default: "+n:""),isInvalid:ae.error,value:p.toString(C),onChange:function(e){var t=""!==e.target.value.trim()?parseFloat(e.target.value):null,n=m.native(e.target);O(t),ie(n)}})),ae.error&&s.default.createElement(c.Form.Control.Feedback,{type:"invalid"},ae.message))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,{controlId:"edit-retail-urltag"},s.default.createElement(c.Form.Label,null,"Landing page *"),s.default.createElement(c.Form.Control,{disabled:!e.writeAccess,type:"text",placeholder:(t=p.get(e,"retailStrategy.retailBranch.urlTag",""),""!==t?"Branch default: "+t:""),value:I,onChange:function(e){N(e.target.value)}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Group,{controlId:"edit-retail-custom1"},s.default.createElement(c.Form.Label,null,"Custom 1"),s.default.createElement(c.Form.Control,{disabled:!e.writeAccess,type:"text",value:j,onChange:function(e){M(e.target.value)}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Group,{controlId:"edit-retail-custom2"},s.default.createElement(c.Form.Label,null,"Custom 2"),s.default.createElement(c.Form.Control,{disabled:!e.writeAccess,type:"text",value:F,onChange:function(e){D(e.target.value)}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Group,{controlId:"edit-retail-custom3"},s.default.createElement(c.Form.Label,null,"Custom 3"),s.default.createElement(c.Form.Control,{disabled:!e.writeAccess,type:"text",value:R,onChange:function(e){B(e.target.value)}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Group,{controlId:"edit-retail-custom4"},s.default.createElement(c.Form.Label,null,"Custom 4"),s.default.createElement(c.Form.Control,{disabled:!e.writeAccess,type:"text",value:L,onChange:function(e){V(e.target.value)}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Group,{controlId:"edit-retail-custom5"},s.default.createElement(c.Form.Label,null,"Custom 5"),s.default.createElement(c.Form.Control,{disabled:!e.writeAccess,type:"text",value:q,onChange:function(e){Y(e.target.value)}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Group,{controlId:"edit-retail-custom6"},s.default.createElement(c.Form.Label,null,"Custom 6"),s.default.createElement(c.Form.Control,{disabled:!e.writeAccess,type:"text",value:H,onChange:function(e){W(e.target.value)}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Group,{controlId:"edit-retail-custom7"},s.default.createElement(c.Form.Label,null,"Custom 7"),s.default.createElement(c.Form.Control,{disabled:!e.writeAccess,type:"text",value:X,onChange:function(e){K(e.target.value)}}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Group,{controlId:"edit-retail-custom8"},s.default.createElement(c.Form.Label,null,"Custom 8"),s.default.createElement(c.Form.Control,{disabled:!e.writeAccess,type:"text",value:$,onChange:function(e){Q(e.target.value)}})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Group,{controlId:"edit-retail-custom9"},s.default.createElement(c.Form.Label,null,"Custom 9"),s.default.createElement(c.Form.Control,{disabled:!e.writeAccess,type:"text",value:te,onChange:function(e){ne(e.target.value)}}))))),s.default.createElement(c.Modal.Footer,null,s.default.createElement(c.Button,{size:"sm",variant:"light",onClick:e.onClose},"CLOSE"),s.default.createElement(c.Button,{size:"sm",disabled:!e.writeAccess,variant:"primary",onClick:function(){if(!ae.error){var t=w.map((function(e){return e.value})),n="RETAIL_GPS"===e.structure?{radius:C,targetingZipCodes:null}:{radius:null,targetingZipCodes:t.length>0?t:null},r={branchId:p.get(e,"retailStrategy.branchId"),retailBranchId:p.get(e,"retailStrategy.retailBranchId"),campaignConstraints:{budget:i||0,impressionCap:y,maxBid:g},geoTargeting:n,dynamicAdParameters:{urlTag:le(I),custom1:le(j),custom2:le(F),custom3:le(R),custom4:le(L),custom5:le(q),custom6:le(H),custom7:le(X),custom8:le($),custom9:le(te)},retailBranch:p.get(e,"retailStrategy.retailBranch")};e.onSubmit(r)}}},"SAVE")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=i(n(1)),f=i(n(4)),p=i(n(22)),m=u(n(65)),h=u(n(3)),g=u(n(5));t.default=function(e){var t=s.useState([]),n=t[0],r=t[1],a=s.useState([]),i=a[0],u=a[1],v=s.useState(null),b=v[0],y=v[1],E=s.useState("0"),_=E[0],w=E[1],S=s.useState([]),P=S[0],C=S[1],O=s.useState(""),x=O[0],I=O[1],N=s.useState(""),A=N[0],j=N[1],M=s.useState(!1),k=M[0],F=M[1],D=s.useState(!1),T=D[0],R=D[1],B=s.useState(!0),G=B[0],L=B[1];function V(e,t){var n=new FileReader;n.onload=function(e){var n,r=e.target.result,a=p.fixExcelData(r),l=(n=XLSX.read(btoa(a),{type:"base64"})).SheetNames[0],o=function(e){return e.filter((function(e){return 0!==e.length&&""!==e.map((function(e){return null==e?"":e.trim()})).join("")}))}(XLSX.utils.sheet_to_json(n.Sheets[l],{header:1,blankRows:!1})),u={id:"branchId",name:"name",budget:"budget",impressions:"impressionCap","max bid price":"maxBid",radius:"radius","targeting postal codes":"targetingZipCodes","landing page":"urlTag","custom 1":"custom1","custom 2":"custom2","custom 3":"custom3","custom 4":"custom4","custom 5":"custom5","custom 6":"custom6","custom 7":"custom7","custom 8":"custom8","custom 9":"custom9"},s=o.shift().map((function(e){return e.trim()})).map((function(e){return u[e]})),c=function(e){var t=["branchId","budget"],n=d.difference(t,e);if(n.length>0)return['Missing required columns: "'+n.join(", ")+'".'];return[]}(s);if(c.length>0)t(c);else{var f=function(e,t){return e.map((function(e){var n={};return t.forEach((function(t,r){t&&("targetingZipCodes"===t?e[r]?n[t]=e[r].split(","):n[t]=null:n[t]=e[r]||null)})),n}))}(o,s);console.log(JSON.stringify(f));var m=function(e){var t=[],n=function(e){var t=d.countBy(e,"branchId");return Object.keys(t).filter((function(e){return t[e]>1}))}(e);n.length>10?t.push("Some ids are not unique within the update."):n.length>0&&t.push("Some ids are not unique within the update: "+n.join(", ")+".");var r=["branchId","budget"],a=function(e,t){return e.filter((function(e){return d.values(d.pick(e,t)).filter((function(e){return null===e})).length>0})).map((function(e){return e.branchId}))}(e,r);a.length>10?t.push('Some branches lack mandatory fields "id, budget".'):a.length>0&&t.push("Branches with id: "+a.join(", ")+' lack mandatory fields "id, budget".');return t}(f);if(m.length>0)t(m);else{var h=function(e){return e.map((function(e){var t=i.find((function(t){return e.branchId===t.branchId})),n=/[^0-9.]/;console.log("BEFORE "+e.budget),console.log("AFTER "+e.budget.replace(n,""));var r=parseFloat((e.budget||"").replace(n,"")),a=e.maxBid?parseFloat(e.maxBid.replace(n,"")):null,l=e.impressionCap?parseInt((e.impressionCap||"").replace(n,"")):null;return t?{campaignConstraints:{maxBid:a,budget:r,impressionCap:l},geoTargeting:{radius:e.radius,targetingZipCodes:e.targetingZipCodes},dynamicAdParameters:{urlTag:e.urlTag,custom1:e.custom1,custom2:e.custom2,custom3:e.custom3,custom4:e.custom4,custom5:e.custom5,custom6:e.custom6,custom7:e.custom7,custom8:e.custom8,custom9:e.custom9},branchId:e.branchId,retailBranchId:t.id,retailBranch:t}:null})).filter((function(e){return null!==e}))}(f);t(m,h)}}},n.readAsArrayBuffer(e)}return s.default.createElement(c.Modal,{size:"lg",show:e.show,onHide:e.onClose,onEntering:function(){return l(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return L(!0),[4,f.Get({path:"/api/advertisers/"+e.advertiserId+"/retailbranches",qs:{archived:"any"}})];case 1:return t=n.sent(),u(t),r([]),y(null),w("0"),C([]),I(""),j(""),F(!1),L(!1),R(!1),[2]}}))}))},backdrop:"static"},s.default.createElement(c.Modal.Header,{closeButton:!0},s.default.createElement(c.Modal.Title,null,"Retail branches import")),s.default.createElement(c.Modal.Body,null,s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12"},s.default.createElement(g.default,{visible:G}),!G&&s.default.createElement(s.Fragment,null),s.default.createElement(c.Form.Group,{id:"retailbranch-import-file"},s.default.createElement("p",null,"Upload an excel file to import retail branches. You can download an example file ",s.default.createElement("a",{href:"RETAIL_GPS"===e.structure?"/files/import-campaign-retail-gps-template.xlsx":"/files/import-campaign-retail-zip-template.xlsx"},"here")),s.default.createElement(c.Form.Control,{key:_,type:"file",accept:".xls,.xlsx",onChange:function(e){var t=d.get(e,"target.files[0]",null);V(t,(function(e,n){y(t),C(e),I(t.name),j(""),r(n||[])}))}})),s.default.createElement(c.Form.Group,null,s.default.createElement(m.default,{singleUpload:!0,exts:[".xls",".xlsx"],text:"Drag and drop file",loading:k,onError:function(e){e?(C([e]),I(""),j(""),r([])):(C([]),I(""),j(""),r([]))},onUpload:function(e){F(!0);var t=d.get(e,"[0].file"),n=Math.random().toString(36);V(t,(function(e,a){y(t),w(n),C(e),I(t.name),j(""),r(a||[]),F(!1)}))}}),s.default.createElement("div",{className:"pt-2"},s.default.createElement("div",{className:"text-success pb-2"},x),P.length>0&&s.default.createElement(c.Alert,{variant:"danger"},s.default.createElement("div",null,s.default.createElement(h.default,{name:"times-circle"})," ",s.default.createElement("strong",null,"Errors")),s.default.createElement("ul",{className:"pl-3"},P.map((function(e,t){return s.default.createElement("li",{key:"error-"+t},e)}))))))),s.default.createElement("div",{className:"col-sm-12"},s.default.createElement("div",{className:"text-danger"},A)))),s.default.createElement(c.Modal.Footer,null,s.default.createElement(c.Button,{variant:"light",size:"sm",onClick:e.onClose},"CANCEL"),s.default.createElement(c.Button,{variant:"primary",size:"sm",onClick:function(){b?0===P.length?(R(!0),j(""),e.onSubmit(n)):j("Fix the above file errors before submitting."):j("No file found.")},disabled:T},"SAVE")))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=l(n(1)),c=l(n(210)),d=o(n(211)),f=o(n(212)),p=o(n(213)),m=o(n(215)),h=o(n(216)),g=o(n(217));t.default=function(e){var t=s.get(e.data,"campaign.videoCampaign"),n=u.useState(null),a=n[0],i=n[1],l=u.useState(null),o=l[0],v=l[1],b=u.useState(null),y=b[0],E=b[1],_=u.useState(null),w=_[0],S=_[1],P=u.useState(null),C=P[0],O=P[1],x=u.useState(null),I=x[0],N=x[1],A=u.useState(!0),j=A[0],M=A[1],k={positionBox:a,videoTargetingBox:o,geoTargetingBox:y,browserBox:w,osBox:C,languageBox:I},F=j;u.useEffect((function(){var t=JSON.stringify({positionBox:null,videoTargetingBox:null,geoTargetingBox:null,browserBox:null,osBox:null,languageBox:null});JSON.stringify(k)!==t&&e.onChange(k)}),[JSON.stringify(k)]),u.useEffect((function(){e.onValidate(F)}),[F]);var D=c.getPositionBoxProps(e.data,e.rights,(function(e){i(e)})),T=c.getVideoTargetingBoxProps(e.data,e.rights,(function(e){v(e)})),R=c.getGeoTargetingBoxProps(e.data,e.rights,(function(e,t){E(e),M(t)})),B=c.getBrowserBoxProps(e.data,e.rights,(function(e){S(e)})),G=c.getOSBoxProps(e.data,e.rights,(function(e){O(e)})),L=c.getLanguageBoxProps(e.data,e.rights,(function(e){N(e)}));return u.default.createElement("div",{className:"row no-gutters"},u.default.createElement("div",{className:"col-lg-6"},u.default.createElement(d.default,r({},D)),t&&u.default.createElement(f.default,r({},T)),u.default.createElement(p.default,r({},R))),u.default.createElement("div",{className:"col-lg-6"},u.default.createElement(m.default,r({},B)),u.default.createElement(h.default,r({},G)),u.default.createElement(g.default,r({},L))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getGeoTargetingBoxProps=t.getLanguageBoxProps=t.getOSBoxProps=t.getBrowserBoxProps=t.getVideoTargetingBoxProps=t.getPositionBoxProps=void 0;var l=i(n(1));t.getPositionBoxProps=function(e,t,n){return{id:l.get(e,"campaign.id"),deviceTypes:l.get(e,"settings.targeting.basicRules.device.deviceType.values")||[],inventoryTypes:l.get(e,"settings.targeting.basicRules.inventory.inventoryType.values")||[],positionTypes:l.get(e,"settings.targeting.basicRules.inventory.positionOnPage.values")||[],rights:t,onChange:n}};t.getVideoTargetingBoxProps=function(e,t,n){return{id:l.get(e,"campaign.id"),playerSizes:l.get(e,"settings.targeting.basicRules.inventory.playerSize.values")||[],initiationTypes:l.get(e,"settings.targeting.basicRules.inventory.initiationType.values")||[],rights:t,onChange:n}};t.getBrowserBoxProps=function(e,t,n){return{id:l.get(e,"campaign.id"),browsers:l.get(e,"settings.targeting.basicRules.device.browser.values")||[],rights:t,onChange:n}};t.getOSBoxProps=function(e,t,n){return{id:l.get(e,"campaign.id"),os:l.get(e,"settings.targeting.basicRules.device.os.values")||[],rights:t,onChange:n}};t.getLanguageBoxProps=function(e,t,n){return{id:l.get(e,"campaign.id"),languages:l.get(e,"settings.targeting.basicRules.device.language.values")||[],rights:t,onChange:n}};t.getGeoTargetingBoxProps=function(e,t,n){return{id:l.get(e,"campaign.id"),countries:l.get(e,"settings.targeting.basicRules.device.geo.country"),regions:l.get(e,"settings.targeting.basicRules.device.geo.region"),cities:l.get(e,"settings.targeting.basicRules.device.geo.city"),postalCodes:l.get(e,"settings.targeting.basicRules.device.geo.postalCode"),rights:t,onChange:n}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=i(n(4)),f=u(n(53)),p=u(n(5)),m=u(n(34));t.default=function(e){var t=s.useState(e.deviceTypes),n=t[0],r=t[1],a=s.useState(e.inventoryTypes),i=a[0],u=a[1],h=s.useState(e.positionTypes),g=h[0],v=h[1],b=s.useState([]),y=b[0],E=b[1],_=s.useState([]),w=_[0],S=_[1],P=s.useState([]),C=P[0],O=P[1],x=s.useState(!0),I=x[0],N=x[1],A={deviceTypes:n,inventoryTypes:i,positionTypes:g};s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n,a,i,l,s,c,f;return o(this,(function(o){switch(o.label){case 0:N(!0),r(e.deviceTypes),u(e.inventoryTypes),v(e.positionTypes),o.label=1;case 1:return o.trys.push([1,3,,4]),t=d.Get({path:"/api/targeting/suggestion/basic/device/deviceType",qs:{campaignId:e.id,all:"false"}}),n=d.Get({path:"/api/targeting/suggestion/basic/inventory/inventoryType",qs:{all:"false"}}),a=d.Get({path:"/api/targeting/suggestion/basic/inventory/positionOnPage",qs:{all:"false"}}),[4,Promise.all([t,n,a])];case 2:return i=o.sent(),l=i[0],s=i[1],c=i[2],E(l),S(s),O(c),[3,4];case 3:return f=o.sent(),console.log(f),[3,4];case 4:return N(!1),[2]}}))}))}()}),[e.id]),s.useEffect((function(){e.onChange(A)}),[JSON.stringify(A)]);var j=e.rights.MANAGE_CAMPAIGN||!1;return s.default.createElement(m.default,{title:"Inventory type & Positioning"},s.default.createElement("div",{className:"row no-gutters"},s.default.createElement(p.default,{visible:I}),!I&&s.default.createElement(s.Fragment,null,s.default.createElement("div",{className:"col-lg-4 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,"Device"),y.length>0&&s.default.createElement(f.default,{disabled:!j,id:"settings-targeting-devicetypes",options:y,checked:n,onChange:function(e){r(e)}}))),s.default.createElement("div",{className:"col-lg-4 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,"Inventory type"),w.length>0&&s.default.createElement(f.default,{disabled:!j,id:"settings-targeting-inventorytypes",options:w,checked:i,onChange:function(e){u(e)}}))),s.default.createElement("div",{className:"col-lg-4 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,"Position on page"),C.length>0&&s.default.createElement(f.default,{disabled:!j,id:"settings-targeting-positiontypes",options:C,checked:g,onChange:function(e){v(e)}}))))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=i(n(4)),f=u(n(34)),p=u(n(53)),m=u(n(5));t.default=function(e){var t=s.useState(e.playerSizes),n=t[0],r=t[1],a=s.useState(e.initiationTypes),i=a[0],u=a[1],h=s.useState([]),g=h[0],v=h[1],b=s.useState([]),y=b[0],E=b[1],_=s.useState(!0),w=_[0],S=_[1],P={playerSizes:n,initiationTypes:i};s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n,a,i,l,s;return o(this,(function(o){switch(o.label){case 0:S(!0),r(e.playerSizes),u(e.initiationTypes),o.label=1;case 1:return o.trys.push([1,3,,4]),t=d.Get({path:"/api/targeting/suggestion/basic/inventory/playerSize",qs:{all:"false"}}),n=d.Get({path:"/api/targeting/suggestion/basic/inventory/initiationType",qs:{all:"false"}}),[4,Promise.all([t,n])];case 2:return a=o.sent(),i=a[0],l=a[1],v(i),E(l),[3,4];case 3:return s=o.sent(),console.log(s),[3,4];case 4:return S(!1),[2]}}))}))}()}),[e.id]),s.useEffect((function(){e.onChange(P)}),[JSON.stringify(P)]);var C=e.rights.MANAGE_CAMPAIGN||!1;return s.default.createElement(f.default,{title:"Video targeting"},s.default.createElement("div",{className:"row no-gutters"},s.default.createElement(m.default,{visible:w}),!w&&s.default.createElement(s.Fragment,null,s.default.createElement("div",{className:"col-lg-4 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,"Video player size"),g.length>0&&s.default.createElement(p.default,{disabled:!C,id:"settings-targeting-playersizes",options:g,checked:n,onChange:function(e){r(e)}}))),s.default.createElement("div",{className:"col-lg-4 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,"User initiation type"),y.length>0&&s.default.createElement(p.default,{disabled:!C,id:"settings-targeting-initiationtypes",options:y,checked:i,onChange:function(e){u(e)}}))))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(9)),c=l(n(38)),d=i(n(1)),f=i(n(22)),p=i(n(7)),m=i(n(21)),h=l(n(34)),g=l(n(48));t.default=function(e){var t=f.countries(),n=o.useState(B()),r=n[0],a=n[1],i=o.useState(m.attributeValueNameSelectOptions(e.countries)),l=i[0],v=i[1],b=o.useState(m.attributeValueNameSelectOptions(e.regions)),y=b[0],E=b[1],_=o.useState(m.attributeValueNameSelectOptions(e.cities)),w=_[0],S=_[1],P=o.useState(d.get(e,"cities.radius",null)),C=P[0],O=P[1],x=o.useState(m.attributeValueNameSelectOptions(e.postalCodes)),I=x[0],N=x[1],A=o.useState(d.get(e,"postalCodes.countryCode","")),j=A[0],M=A[1],k=o.useState({error:!1,message:""}),F=k[0],D=k[1],T="country-region-city-form"===r?{countries:l.map((function(e){return e.value})),regions:y.map((function(e){return e.value})),cities:w.map((function(e){return e.value})),radius:C}:{countryCode:j,postalCodes:I.map((function(e){return e.value}))},R="country-region-city-form"!==r||!F.error;function B(){return(d.get(e,"postalCodes.values")||[]).length>0?"postalcode-form":"country-region-city-form"}o.useEffect((function(){var t=B();a(t),v(m.attributeValueNameSelectOptions(e.countries)),E(m.attributeValueNameSelectOptions(e.regions)),S(m.attributeValueNameSelectOptions(e.cities)),O(d.get(e,"cities.radius",null)),N(m.attributeValueNameSelectOptions(e.postalCodes)),M(d.get(e,"postalCodes.countryCode","NL")),D({error:!1,message:""})}),[e.id]),o.useEffect((function(){e.onChange(T,R)}),[JSON.stringify(T),R]);var G=function(e){e.target.checked&&a(e.target.value)},L=[{value:"country-region-city-form",label:"Country / Region / City"},{value:"postalcode-form",label:"Postal codes"}],V=e.rights.MANAGE_CAMPAIGN||!1;return o.default.createElement(h.default,{title:"Geo targeting"},o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement(u.Form.Group,null,L.map((function(e,t){return o.default.createElement(u.Form.Check,{inline:!0,disabled:!V,id:"geotargeting-radio-"+e.value,type:"radio",value:e.value,name:"geotargeting-radio",checked:e.value===r,onChange:G,label:e.label})}))))),"country-region-city-form"===r&&o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Country"),o.default.createElement(g.default,{id:"settings-targeting-country",writeAccess:V,url:"/api/targeting/suggestion/basic/device/geo/country",placeholder:"all",values:l,onChange:v})),o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Region"),o.default.createElement(g.default,{id:"settings-targeting-region",writeAccess:V,url:"/api/targeting/suggestion/basic/device/geo/region",placeholder:"all",values:y,onChange:E})),o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"City"),o.default.createElement(g.default,{id:"settings-targeting-city",writeAccess:V,url:"/api/targeting/suggestion/basic/device/geo/city",placeholder:"all",values:w,onChange:S})),o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Target around these cities (radius in km)"),o.default.createElement(u.Form.Control,{disabled:!V,id:"settings-targeting-radius",type:"number",min:"0",step:"0.01",isInvalid:F.error,value:d.toString(C),onChange:function(e){var t=""!==e.target.value.trim()?parseFloat(e.target.value):null,n=p.native(e.target);O(t),D(n)}}),F.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},F.message)))),"postalcode-form"===r&&o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-4 px-1"},o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Country"),o.default.createElement(s.default,{isDisabled:!V,inputId:"settings-targeting-postalcode-country",className:"react-select-container",classNamePrefix:"react-select",onChange:function(e){M(e.value)},value:t.find((function(e){return e.value===j})),options:t}))),o.default.createElement("div",{className:"col-lg-8 px-1"},o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Postal codes"),o.default.createElement(c.default,{isDisabled:!V,className:"react-select-container",inputId:"settings-targeting-postalcodes",classNamePrefix:"react-select",placeholder:" ",isClearable:!0,isMulti:!0,value:I,onChange:function(e,t){if("create-option"===t.action){if(e.length>0){var n=e[e.length-1].value.split(/[\s]+/).map((function(e){return{value:e,label:e}})),r=I.concat(n);N(r)}}else N(e)}})))))}},function(e,t){e.exports=require("react-select/async-creatable")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=u(n(9)),f=i(n(4)),p=u(n(5)),m=u(n(34));t.default=function(e){var t=s.useState(e.browsers),n=t[0],r=t[1],a=s.useState([]),i=a[0],u=a[1],h=s.useState(!0),g=h[0],v=h[1],b={browsers:n};s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n;return o(this,(function(a){switch(a.label){case 0:v(!0),r(e.browsers),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,f.Get({path:"/api/targeting/suggestion/basic/device/browser"})];case 2:return t=a.sent(),u(t),[3,4];case 3:return n=a.sent(),console.log(n),[3,4];case 4:return v(!1),[2]}}))}))}()}),[e.id]),s.useEffect((function(){e.onChange(b)}),[JSON.stringify(b)]);var y=e.rights.MANAGE_CAMPAIGN||!1;return s.default.createElement(m.default,{title:"Browser"},s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(p.default,{visible:g,loaderClass:"loading-input"}),!g&&s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,"Browsers"),s.default.createElement(d.default,{isDisabled:!y,inputId:"settings-targeting-browsers",className:"react-select-container multiple",classNamePrefix:"react-select",name:"settings-targeting-browsers-name",placeholder:"all",isMulti:!0,value:i.filter((function(e){return n.indexOf(e.value)>-1})),clearable:!0,closeMenuOnSelect:!1,onChange:function(e,t){if("select-option"===t.action&&e.length>0)if("-1"===e[e.length-1].value){var n=i.filter((function(e){return"-1"!==e.value})).map((function(e){return e.value}));r(n)}else{n=(e||[]).map((function(e){return e.value}));r(n)}else{n=(e||[]).map((function(e){return e.value}));r(n)}},options:i})))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=u(n(9)),f=i(n(4)),p=u(n(5)),m=u(n(34));t.default=function(e){var t=s.useState(e.os),n=t[0],r=t[1],a=s.useState([]),i=a[0],u=a[1],h=s.useState(!0),g=h[0],v=h[1],b={os:n};s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n;return o(this,(function(a){switch(a.label){case 0:v(!0),r(e.os),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,f.Get({path:"/api/targeting/suggestion/basic/device/os"})];case 2:return t=a.sent(),u(t),[3,4];case 3:return n=a.sent(),console.log(n),[3,4];case 4:return v(!1),[2]}}))}))}()}),[e.id]),s.useEffect((function(){e.onChange(b)}),[JSON.stringify(b)]);var y=e.rights.MANAGE_CAMPAIGN||!1;return s.default.createElement(m.default,{title:"OS"},s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(p.default,{visible:g,loaderClass:"loading-input"}),!g&&s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,"OS"),s.default.createElement(d.default,{isDisabled:!y,inputId:"settings-targeting-os",className:"react-select-container multiple",classNamePrefix:"react-select",name:"settings-targeting-os-name",placeholder:"all",isMulti:!0,value:i.filter((function(e){return n.indexOf(e.value)>-1})),clearable:!0,closeMenuOnSelect:!1,onChange:function(e,t){if("select-option"===t.action&&e.length>0)if("-1"===e[e.length-1].value){var n=i.filter((function(e){return"-1"!==e.value})).map((function(e){return e.value}));r(n)}else{n=(e||[]).map((function(e){return e.value}));r(n)}else{n=(e||[]).map((function(e){return e.value}));r(n)}},options:i})))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=u(n(9)),f=i(n(4)),p=u(n(5)),m=u(n(34));t.default=function(e){var t=s.useState(e.languages),n=t[0],r=t[1],a=s.useState([]),i=a[0],u=a[1],h=s.useState(!0),g=h[0],v=h[1],b={languages:n};s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n;return o(this,(function(a){switch(a.label){case 0:v(!0),r(e.languages),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,f.Get({path:"/api/targeting/suggestion/basic/device/language"})];case 2:return t=a.sent(),u(t),[3,4];case 3:return n=a.sent(),console.log(n),[3,4];case 4:return v(!1),[2]}}))}))}()}),[e.id]),s.useEffect((function(){e.onChange(b)}),[JSON.stringify(b)]);var y=e.rights.MANAGE_CAMPAIGN||!1;return s.default.createElement(m.default,{title:"Language"},s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(p.default,{visible:g,loaderClass:"loading-input"}),!g&&s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,"Language"),s.default.createElement(d.default,{isDisabled:!y,inputId:"settings-targeting-language",className:"react-select-container multiple",classNamePrefix:"react-select",name:"settings-targeting-language-name",placeholder:"all",isMulti:!0,value:i.filter((function(e){return n.indexOf(e.value)>-1})),clearable:!0,closeMenuOnSelect:!1,onChange:function(e,t){if("select-option"===t.action&&e.length>0)if("-1"===e[e.length-1].value){var n=i.filter((function(e){return"-1"!==e.value})).map((function(e){return e.value}));r(n)}else{n=(e||[]).map((function(e){return e.value}));r(n)}else{n=(e||[]).map((function(e){return e.value}));r(n)}},options:i})))))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=l(n(219)),c=o(n(220)),d=o(n(224)),f=o(n(227));t.default=function(e){var t=u.useState(null),n=t[0],a=t[1],i=u.useState(null),l=i[0],o=i[1],p=u.useState(null),m=p[0],h=p[1],g=u.useState(!0),v=g[0],b=g[1],y={publishersAndExchangesBox:n,dealsBox:l,inventoryRulesBox:m},E=v;u.useEffect((function(){var t=JSON.stringify({publishersAndExchangesBox:null,dealsBox:null,inventoryRulesBox:null});JSON.stringify(y)!==t&&e.onChange(y)}),[JSON.stringify(y)]),u.useEffect((function(){e.onValidate(E)}),[E]);var _=s.getPublishersAndExchangesBoxProps(e.data,e.rights,e.isAdserving,(function(e){a(e)})),w=e.rights.VIEW_DEALS?s.getDealsBoxProps(e.data,e.rights,(function(e){o(e)})):null,S=s.getInventoryRulesBoxProps(e.data,e.maxBidPrice,e.rights,e.user,(function(e,t){h(e),b(t)}));return u.default.createElement("div",{className:"row no-gutters"},u.default.createElement("div",{className:"col-lg-6"},u.default.createElement(f.default,r({},_)),e.rights.VIEW_DEALS&&u.default.createElement(c.default,r({},w))),u.default.createElement("div",{className:"col-lg-6"},u.default.createElement(d.default,r({},S))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getInventoryRulesBoxProps=t.getDealsBoxProps=t.getPublishersAndExchangesBoxProps=void 0;var l=i(n(1));t.getPublishersAndExchangesBoxProps=function(e,t,n,r){return{id:l.get(e,"campaign.id"),isAdserving:n,videoCampaign:l.get(e,"campaign.videoCampaign"),agencyId:l.get(e,"campaign.agencyId"),publishersAndExchanges:l.get(e,"settings.targeting.basicRules.inventory.publishersAndExchanges"),rights:t,onChange:r}};t.getDealsBoxProps=function(e,t,n){return{id:l.get(e,"campaign.id"),deals:l.get(e,"settings.deals",[]),rights:t,onChange:n}};t.getInventoryRulesBoxProps=function(e,t,n,r,a){return{id:l.get(e,"campaign.id"),advertiserId:l.get(e,"campaign.advertiserId"),user:r,rights:n,domains:l.get(e,"settings.targeting.basicRules.inventory.domains"),domainLists:l.get(e,"settings.targeting.basicRules.inventory.domainLists"),topLevelDomains:l.get(e,"settings.targeting.basicRules.inventory.topLevelDomains"),applications:l.get(e,"settings.targeting.basicRules.inventory.applications"),applicationLists:l.get(e,"settings.targeting.basicRules.inventory.applicationLists"),maxBidPrice:t,onChange:a}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(3)),c=l(n(34)),d=l(n(221)),f=l(n(222)),p=l(n(5));t.default=function(e){var t=o.useState(e.deals||[]),n=t[0],r=t[1],a=o.useState(!1),i=a[0],l=a[1],m=o.useState(!0),h=m[0],g=m[1],v={deals:n.map((function(e){return{dealId:e.dealId,campaignId:e.campaignId}}))};o.useEffect((function(){r(e.deals||[])}),[e.id]),o.useEffect((function(){e.onChange(v)}),[JSON.stringify(v)]),o.useEffect((function(){g(!1)}),[JSON.stringify(n)]);var b=n.map((function(e){return e.dealId})),y=e.rights.MANAGE_CAMPAIGN&&e.rights.MANAGE_DEALS;return o.default.createElement(c.default,null,o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement("h5",{className:"pull-left"},"Deals"),o.default.createElement("div",{className:"table-btn-container"},o.default.createElement(u.Button,{size:"sm",variant:"primary",className:"mr-2",disabled:!y,onClick:function(){l(!0)}},o.default.createElement(s.default,{name:"plus"})," ADD DEALS")),o.default.createElement(p.default,{visible:h}),!h&&o.default.createElement(d.default,{records:n,writeAccess:y,deleteClick:function(e){g(!0);var t=n.filter((function(t){return t.dealId!==e}));r(t)}})),o.default.createElement(f.default,{show:i,campaignId:e.id,campaignDealIds:b,onClose:function(){l(!1)},onSubmit:function(e){var t=n.concat(e);g(!0),r(t),l(!1)}})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=o(n(14)),c=l(n(23)),d=o(n(17)),f=n(2),p=l(n(1)),m=l(n(8)),h=l(n(15)),g=o(n(3));t.default=function(e){var t=u.useState(1),n=t[0],a=t[1],i=u.useState(30),l=i[0],o=i[1],v=u.useState({dataField:"id",order:"desc"}),b=v[0],y=v[1],E=function(e,t){y({dataField:e,order:t})},_=function(e,t){a(e)},w=function(e,t){o(e)},S=function(t,n){return e.writeAccess?u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.deleteClick(n.dealId)},href:"",className:"table-btn"},u.default.createElement(g.default,{name:"remove"})):null},P=function(e,t,n){if(t.description){var r=m.getPopperConfig(),a=u.default.createElement(f.Popover,{id:"popover-campaign-deals-hover-"+n},u.default.createElement(f.Popover.Content,null,t.description));return u.default.createElement(f.OverlayTrigger,{trigger:"hover",placement:"top",overlay:a,popperConfig:r},u.default.createElement("div",null,e))}return e};var C=function(){var t=h.getLastPage(e.records,l);return n>t?t:n},O=c.Search.SearchBar,x=[{dataField:"id",text:"#",hidden:!0},{dataField:"dealId",text:"#",hidden:!0},{dataField:"df1",isDummyField:!0,text:"",formatter:S,headerStyle:{width:"30px"}},{dataField:"externalId",text:"External id",sort:!0,onSort:E,sortCaret:h.columnSort},{dataField:"ssp",text:"SSP",sort:!0,onSort:E,sortCaret:h.columnSort},{dataField:"name",text:"Name",sort:!0,onSort:E,sortCaret:h.columnSort,formatter:P}],I=e.records.map((function(e){return{id:e.id||null,dealId:p.get(e,"dealId",""),externalId:p.get(e,"deal.externalId",""),ssp:p.get(e,"deal.ssp",""),name:p.get(e,"deal.name",""),description:p.get(e,"deal.description","")}}));return u.default.createElement(c.default,{keyField:"id",data:I,columns:x,search:!0},(function(e){return u.default.createElement("div",null,u.default.createElement("div",{className:"search-label-container"},u.default.createElement(g.default,{name:"search"}),u.default.createElement(O,r({},e.searchProps,{placeholder:"Filter records",tableId:"campaign-deals-table"}))),u.default.createElement(s.default,r({},e.baseProps,{classes:"table-borderless",id:"campaign-deals-table",bordered:!1,hover:!0,striped:!0,keyField:"dealId",data:I,columns:x,defaultSorted:[b],pagination:d.default({page:C(),sizePerPage:l,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"all",value:1e3}],onPageChange:_,onSizePerPageChange:w})})))}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=i(n(4)),f=u(n(223));t.default=function(e){var t=s.useState([]),n=t[0],r=t[1],a=s.useState([]),i=a[0],u=a[1];return s.default.createElement(c.Modal,{size:"lg",show:e.show,onHide:e.onClose,onEntering:function(){return l(void 0,void 0,void 0,(function(){var t,n;return o(this,(function(a){switch(a.label){case 0:return[4,d.Get({path:"/api/deals",qs:{campaignId:e.campaignId}})];case 1:return t=a.sent(),n=t.filter((function(t){return e.campaignDealIds.indexOf(t.id)<0})),r(n),[2]}}))}))},backdrop:"static"},s.default.createElement(c.Modal.Header,{closeButton:!0},s.default.createElement(c.Modal.Title,null,"Add deals")),s.default.createElement(c.Modal.Body,null,s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-lg-12"},s.default.createElement(f.default,{records:n,onChange:u})))),s.default.createElement(c.Modal.Footer,null,s.default.createElement(c.Button,{size:"sm",variant:"light",onClick:e.onClose},"CLOSE"),s.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:function(){var t=n.filter((function(e){return i.indexOf(e.id)>-1})).map((function(t){return{campaignId:e.campaignId,dealId:t.id,deal:t}}));e.onSubmit(t)}},"OKAY")))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(0)),c=u(n(14)),d=l(n(23)),f=u(n(17)),p=n(2),m=l(n(1)),h=l(n(8)),g=l(n(15)),v=u(n(3));t.default=function(e){var t=s.useState(1),n=t[0],a=t[1],i=s.useState(10),l=i[0],u=i[1],b=s.useState({dataField:"id",order:"desc"}),y=b[0],E=b[1],_=s.useState([]),w=_[0],S=_[1],P=d.Search.SearchBar,C=[{dataField:"id",text:"#",hidden:!0},{dataField:"externalId",text:"External id",sort:!0,onSort:x,sortCaret:g.columnSort},{dataField:"ssp",text:"SSP",sort:!0,onSort:x,sortCaret:g.columnSort},{dataField:"name",text:"Name",sort:!0,onSort:x,sortCaret:g.columnSort,formatter:k},{dataField:"owner",text:"Owner",sort:!0,onSort:x,sortCaret:g.columnSort}],O=e.records.map((function(e){var t=m.pick(e,["id","externalId","ssp","name","description"]);return t.owner=m.get(e,"scope.owner"),t}));s.useEffect((function(){e.onChange(w)}),[JSON.stringify(w)]);var x=function(e,t){E({dataField:e,order:t})},I=function(e,t){a(e)},N=function(e,t){u(e)},A=function(e,t){S(t?o(o([],w),[e.id]):w.filter((function(t){return t!==e.id})))},j=function(e){var t=O.map((function(e){return e.id}));S(e?t:[])};function M(){var t=g.getLastPage(e.records,l);return n>t?t:n}var k=function(e,t,n){if(t.description){var r=h.getPopperConfig(),a=s.default.createElement(p.Popover,{id:"popover-deals-hover-"+n},s.default.createElement(p.Popover.Content,null,t.description));return s.default.createElement(p.OverlayTrigger,{trigger:"hover",placement:"top",overlay:a,popperConfig:r},s.default.createElement("div",null,e))}return e};return s.default.createElement(d.default,{keyField:"id",data:O,columns:C,search:!0},(function(e){return s.default.createElement("div",null,s.default.createElement("div",{className:"search-label-container"},s.default.createElement(v.default,{name:"search"}),s.default.createElement(P,r({},e.searchProps,{placeholder:"Filter records",tableId:"deals-select-table"}))),s.default.createElement(c.default,r({},e.baseProps,{id:"deals-select-table",bordered:!1,hover:!0,classes:"table-borderless",striped:!0,keyField:"id",data:O,columns:C,selectRow:{mode:"checkbox",clickToSelect:!0,classes:"selected",selected:w,onSelect:A,onSelectAll:j},defaultSorted:[y],pagination:f.default({page:M(),sizePerPage:l,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"10",value:10},{text:"30",value:30},{text:"50",value:50},{text:"100",value:100}],onPageChange:I,onSizePerPageChange:N})})))}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=l(n(0)),d=l(n(1)),f=l(n(21)),p=s(n(225));t.default=function(e){var t=e.domains.map((function(e){return!0})),n=e.domainLists.map((function(e){return!0})),a=e.topLevelDomains.map((function(e){return!0})),i=e.applications.map((function(e){return!0})),l=e.applicationLists.map((function(e){return!0})),s=c.useState(e.domains),m=s[0],h=s[1],g=c.useState(e.domainLists),v=g[0],b=g[1],y=c.useState(e.topLevelDomains),E=y[0],_=y[1],w=c.useState(e.applications),S=w[0],P=w[1],C=c.useState(e.applicationLists),O=C[0],x=C[1],I=c.useState([]),N=I[0],A=I[1],j=c.useState([]),M=j[0],k=j[1],F=c.useState([]),D=F[0],T=F[1],R=c.useState([]),B=R[0],G=R[1],L=c.useState([]),V=L[0],z=L[1],q=c.useState("advertiser"),Y=q[0],U=q[1],H=c.useState("advertiser"),W=H[0],J=H[1],X=c.useState(e.advertiserId),K=X[0],Z=X[1],$={domains:ee(m),domainLists:ee(v),topLevelDomains:ee(E),applications:ee(S),applicationLists:ee(O)},Q=!(N.indexOf(!1)>-1||M.indexOf(!1)>-1||D.indexOf(!1)>-1||B.indexOf(!1)>-1||V.indexOf(!1)>-1);function ee(e){return e.map((function(e){return e.id<0?d.assign({},e,{id:null}):e}))}function te(e,t,n,r,a){var i=d.cloneDeep(e);i[n]=r;var l=d.cloneDeep(t);return l[n]=a,{rules:i,validations:l}}function ne(e,t,n){var r=d.cloneDeep(e),a=d.cloneDeep(t);return r.length>0&&a.length>0&&(r.splice(n,1),a.splice(n,1)),{rules:r,validations:a}}function re(e,t,n){var r=d.cloneDeep(e),a=d.cloneDeep(t);return r.push(n),a.push(!0),{rules:r,validations:a}}c.useEffect((function(){!function(){o(this,void 0,void 0,(function(){var r;return u(this,(function(o){switch(o.label){case 0:return h(e.domains),b(e.domainLists),_(e.topLevelDomains),P(e.applications),x(e.applicationLists),A(t),k(n),T(a),G(i),z(l),e.rights.MANAGE_LISTS?[4,f.getListModalMaxLevel(e.user,e.advertiserId)]:[3,2];case 1:r=o.sent(),U(r),J("advertiser"),Z(e.advertiserId),o.label=2;case 2:return[2]}}))}))}()}),[e.id]),c.useEffect((function(){e.onChange($,Q)}),[JSON.stringify($),Q]);var ae=[{title:"Domain",rules:m,listRules:v,attribute:"domain",listAttribute:"domain(Lists)",creatable:!0,campaignId:e.id,editAsText:!0,createLists:e.rights.MANAGE_LISTS,rights:e.rights,listModalScope:W,listModalScopeId:K,listModalMaxLevel:Y,maxBidPrice:e.maxBidPrice,onListRuleChange:function(e,t,n){var r=te(v,M,e,t,n);b(r.rules),k(r.validations)},onListRuleDelete:function(e){var t=ne(v,M,e);b(t.rules),k(t.validations)},onListRuleAdd:function(e){var t=re(v,M,e);b(t.rules),k(t.validations)},onRuleChange:function(e,t,n){var r=te(m,N,e,t,n);h(r.rules),A(r.validations)},onRuleDelete:function(e){var t=ne(m,N,e);h(t.rules),A(t.validations)},onRuleAdd:function(e){var t=re(m,N,e);h(t.rules),A(t.validations)}},{title:"Top level domain",rules:E,attribute:"topLevelDomain",creatable:!1,campaignId:e.id,editAsText:!1,createLists:!1,rights:e.rights,maxBidPrice:e.maxBidPrice,onRuleChange:function(e,t,n){var r=te(E,D,e,t,n);_(r.rules),T(r.validations)},onRuleDelete:function(e){var t=ne(E,D,e);_(t.rules),T(t.validations)},onRuleAdd:function(e){var t=re(E,D,e);_(t.rules),T(t.validations)}},{title:"Application name",rules:S,listRules:O,attribute:"application",listAttribute:"application(Lists)",creatable:!0,campaignId:e.id,editAsText:!0,createLists:e.rights.MANAGE_LISTS,rights:e.rights,listModalScope:W,listModalScopeId:K,listModalMaxLevel:Y,maxBidPrice:e.maxBidPrice,onListRuleChange:function(e,t,n){var r=te(O,V,e,t,n);x(r.rules),z(r.validations)},onListRuleDelete:function(e){var t=ne(O,V,e);x(t.rules),z(t.validations)},onListRuleAdd:function(e){var t=re(O,V,e);x(t.rules),z(t.validations)},onRuleChange:function(e,t,n){var r=te(S,B,e,t,n);P(r.rules),G(r.validations)},onRuleDelete:function(e){var t=ne(S,B,e);P(t.rules),G(t.validations)},onRuleAdd:function(e){var t=re(S,B,e);P(t.rules),G(t.validations)}}];return c.default.createElement(c.Fragment,null,ae.map((function(e,t){return c.default.createElement(p.default,r({},e))})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=l(n(1)),c=n(2),d=o(n(3)),f=o(n(226));t.default=function(e){var t=u.useState((e.rules||[]).concat(e.listRules||[]).length>0),n=t[0],a=t[1],i=u.useState(0),l=i[0],o=i[1];var p=function(){e.onRuleAdd(m())};function m(){var e=l-1;return o(e),{id:e,values:[],displayNames:[],consequence:{action:"REQUIRED"}}}var h=(e.listRules||[]).map((function(t,n){return{isList:!0,rule:t,campaignId:e.campaignId,attribute:e.listAttribute,attributeName:e.title+" lists",creatable:!1,maxBidPrice:e.maxBidPrice,listModalScope:e.listModalScope,listModalScopeId:e.listModalScopeId,listModalMaxLevel:e.listModalMaxLevel,rights:e.rights,onChange:function(t,n,r){e.onListRuleChange&&e.onListRuleChange(t,n,r)},onDelete:function(t){e.onListRuleDelete&&e.onListRuleDelete(t)}}})),g=(e.rules||[]).map((function(t){return{isList:!1,rule:t,campaignId:e.campaignId,attribute:e.attribute,attributeName:e.title,creatable:e.creatable,maxBidPrice:e.maxBidPrice,editAsText:e.editAsText,createLists:e.createLists,listModalScope:e.listModalScope,listModalScopeId:e.listModalScopeId,listModalMaxLevel:e.listModalMaxLevel,rights:e.rights,onChange:function(t,n,r){e.onRuleChange(t,n,r)},onDelete:function(t){e.onRuleDelete(t)}}})),v=e.rights.MANAGE_CAMPAIGN||!1;return u.default.createElement("div",{className:"inventory-rules-box"},u.default.createElement(c.Card,{id:"accordion-"+e.attribute},u.default.createElement(c.Card.Header,{onClick:function(){a(!n)}},e.title),u.default.createElement(c.Collapse,{in:n},u.default.createElement(c.Card.Body,null,h.map((function(e,t){return u.default.createElement(f.default,r({key:s.get(e,"rule.id"),index:t},e))})),g.map((function(e,t){return u.default.createElement(f.default,r({key:s.get(e,"rule.id"),index:t},e))})),u.default.createElement("div",{className:"row no-gutters"},u.default.createElement("div",{className:"col-lg-12 p-4"},u.default.createElement("div",{className:"pull-right"},e.listAttribute&&u.default.createElement(c.DropdownButton,{disabled:!v,size:"sm",alignRight:!0,title:u.default.createElement(u.Fragment,null,u.default.createElement(d.default,{name:"plus"})," CREATE RULE FROM"),id:"create-rule-dropdown-"+e.attribute},u.default.createElement(c.Dropdown.Item,{disabled:!v,onClick:function(){e.onListRuleAdd&&e.onListRuleAdd(m())}},"Existing lists"),u.default.createElement(c.Dropdown.Item,{disabled:!v,onClick:p},"Values")),!e.listAttribute&&u.default.createElement(c.Button,{size:"sm",disabled:!v,variant:"primary",onClick:p},u.default.createElement(d.default,{name:"plus"})," CREATE RULE"))))))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=u(n(9)),f=u(n(37)),p=i(n(1)),m=u(n(19)),h=i(n(8)),g=i(n(7)),v=i(n(20)),b=i(n(4)),y=i(n(21)),E=u(n(3)),_=u(n(48)),w=u(n(72)),S=u(n(73));t.default=function(e){var t=y.ruleBidOptions(),n=y.attributeValueNameSelectOptions({values:p.get(e,"rule.values")||[],displayNames:p.get(e,"rule.displayNames")||[]}),r=p.get(e,"rule.consequence.action"),a=p.get(e,"rule.consequence.limitBid",null),i="/api/targeting/suggestion/advanced/campaign/"+e.campaignId+"/attribute/"+e.attribute,u=e.isList?"react-select-container multiple bordered":"react-select-container multiple",P=e.rights.MANAGE_CAMPAIGN||!1,C=s.useState(!1),O=C[0],x=C[1],I=s.useState(!1),N=I[0],A=I[1],j=s.useState({error:!1,message:""}),M=j[0],k=j[1],F=s.useState({error:!1,message:""}),D=F[0],T=F[1],R=s.useRef(null);s.useEffect((function(){var t=g.required(p.get(e,"rule.values")||[]);T(t),e.onChange(e.index,e.rule,!t.error)}),[]),s.useEffect((function(){if("LIMIT_BID"===r){var t=g.limitBid(a,e.maxBidPrice);k(t),e.onChange(e.index,e.rule,!t.error)}}),[e.maxBidPrice]);var B=M.error?"form-control is-invalid":"form-control",G=s.default.createElement(c.Tooltip,{id:"inventory-rule-delete-tooltip-"+e.attribute+"-"+e.index},"delete rule"),L=h.getPopperConfig();return s.default.createElement("div",{className:"inventory-rule"},s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-2"},s.default.createElement(c.OverlayTrigger,{placement:"top",overlay:G,popperConfig:L},s.default.createElement("a",{href:"",className:"table-btn-lg pull-right",onClick:function(t){t.preventDefault(),P&&e.onDelete(e.index)}},s.default.createElement(E.default,{name:"remove"}))))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,e.isList&&s.default.createElement(E.default,{name:"list"})," ",e.attributeName),s.default.createElement(_.default,{id:"inventory-attribute-"+e.attribute+"-"+e.index,writeAccess:P,creatable:e.creatable,url:i,classNames:u,onChange:function(t){var n=t.map((function(e){return e.value})),r=t.map((function(e){return e.__isNew__?e.value:e.label})),a=g.required(n);T(a);var i=p.assign({},e.rule,{values:n,displayNames:r});e.onChange(e.index,i,!a.error&&!M.error)},values:n}),D.error&&s.default.createElement(c.Form.Control.Feedback,{type:"invalid",style:{display:"block"}},D.message),!e.isList&&e.editAsText&&s.default.createElement("ul",{className:"rule-link-list"},s.default.createElement("li",null,s.default.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),x(!0)}},"Edit as text")),e.createLists&&s.default.createElement("li",null,s.default.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),A(!0)}},"Create list like this")))),s.default.createElement(w.default,{show:O,attribute:e.attribute,attributeDisplayName:e.attributeName,writeAccess:P,values:p.get(e,"rule.values",[]),onClose:function(){x(!1)},onSubmit:function(t){x(!1);var n=p.assign({},e.rule,{values:t,displayNames:t});T({error:!1,message:""}),e.onChange(e.index,n,!0)}}),e.createLists&&s.default.createElement(s.Fragment,null,s.default.createElement(S.default,{show:N,list:null,attribute:e.attribute,attributeDisplayName:e.attributeName,acceptAnyValue:e.creatable,rights:e.rights,scope:e.listModalScope,scopeId:e.listModalScopeId,maxLevel:e.listModalMaxLevel,attributeValues:p.get(e,"rule.values",[]),onClose:function(){return A(!1)},onSubmit:function(e,t){return l(void 0,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=p.pick(t,"scope","name","description","attributeValues","attribute"),[4,b.Post({path:"/api/lists",body:e})];case 1:return n.sent(),A(!1),R.current.addNotification(v.success(s.default.createElement("span",null,"List ",s.default.createElement("strong",null,t.name)," created."),!1)),[3,3];case 2:return n.sent(),A(!1),R.current.addNotification(v.error("Error creating list.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(m.default,{ref:R})))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-4 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,"Bid"),s.default.createElement(d.default,{isDisabled:!P,inputId:"inventory-bid-action-"+e.attribute+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:t.find((function(e){return e.value===r})),onChange:function(t){var n=t.value,r=p.get(e,"rule.consequence.limitBid"),a=y.getRuleConsequence(n,r),i={error:!1,message:""};"LIMIT_BID"===n&&(i=g.limitBid(r,e.maxBidPrice));var l=p.assign({},e.rule,{consequence:a});k(i),e.onChange(e.index,l,!i.error&&!D.error)},options:t}))),"LIMIT_BID"===r&&s.default.createElement("div",{className:"col-lg-8 px-1"},s.default.createElement(c.InputGroup,{style:{marginTop:"27px"}},s.default.createElement(c.InputGroup.Prepend,null,s.default.createElement(c.InputGroup.Text,null,"â‚¬")),s.default.createElement(f.default,{disabled:!P,id:"inventory-limit-bid-"+e.attribute+"-"+e.index,className:B,value:a,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){var n=p.get(t,"floatValue"),r=p.get(e,"rule.consequence.action"),a=y.getRuleConsequence(r,n),i=p.assign({},e.rule,{consequence:a}),l=g.limitBid(n,e.maxBidPrice);k(l),e.onChange(e.index,i,!l.error&&!D.error)}}),M.error&&s.default.createElement(c.Form.Control.Feedback,{type:"invalid"},M.message)))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=i(n(1)),s=i(n(8)),c=l(n(34)),d=l(n(228));t.default=function(e){var t=o.useState(u.get(e,"publishersAndExchanges.values",[])),n=t[0],r=t[1],a=["ORTEC_IFRAME","ORTEC_JS","ORTEC_TRK_CLK","ORTEC_TRK_IMP"],i=e.isAdserving?{publishersAndExchanges:a}:{publishersAndExchanges:n};o.useEffect((function(){r(u.get(e,"publishersAndExchanges.values",[]))}),[e.id]),o.useEffect((function(){e.onChange(i)}),[JSON.stringify(i)]);var l,f=(l=s.isSter(e.agencyId),s.isAbovo(e.agencyId),e.videoCampaign?l?[{value:"video_cookieless",path:"/images/ssp-logos/Ster-cookieless.png",style:{maxHeight:"60px",marginTop:"-15px"}}]:[{value:"SpotX",path:"/images/ssp-logos/SpotX.png",style:{height:"30px"}},{value:"video",path:"/images/ssp-logos/OptOutRev.png",style:{height:"30px"}},{value:"video_cookieless",path:"/images/ssp-logos/OptOutNoCookie.png",style:{height:"30px"}},{value:"smartclip",path:"/images/ssp-logos/smartclip.png",style:{maxHeight:"30px"}},{value:"FreeWheel",path:"/images/ssp-logos/freewheel.png",style:{marginTop:"3px"}}]:l?[{value:"STER_ADHESE",path:"/images/ssp-logos/Ster-cookieless.png",style:{maxHeight:"60px",marginTop:"-15px"}},{value:"display_cookieless",path:"/images/ssp-logos/Ster-cookieless-dev.png",style:{maxHeight:"60px",marginTop:"-15px"}}]:[{value:"AppNexus",path:"/images/ssp-logos/xandr.svg",style:{height:"30px",marginTop:"-2px"}},{value:"display",path:"/images/ssp-logos/OptOutRev.png",style:{height:"30px",marginTop:"3px"}},{value:"display_cookieless",path:"/images/ssp-logos/OptOutNoCookie.png",style:{height:"30px",marginTop:"3px"}},{value:"Google AdX",path:"/images/ssp-logos/GoogleAdX.png"},{value:"Improve",path:"/images/ssp-logos/Improve.png",style:{margin:"-4px"}},{value:"JustPremium",path:"/images/ssp-logos/JustPremium.png"},{value:"Microsoft",path:"/images/ssp-logos/Microsoft.png"},{value:"OpenX",path:"/images/ssp-logos/OpenX.png"},{value:"Pubmatic",path:"/images/ssp-logos/Pubmatic.png"},{value:"Rubicon",path:"/images/ssp-logos/Rubicon.png"},{value:"Semilo",path:"/images/ssp-logos/Semilo.png"},{value:"WebAdsNL",path:"/images/ssp-logos/WebAdsNL.png"}]),p=e.rights.MANAGE_CAMPAIGN||!1;return o.default.createElement(c.default,{title:"Exchanges & Publishers"},o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-12 px-1"},!e.isAdserving&&o.default.createElement(o.Fragment,null,o.default.createElement(d.default,{id:"settings-inventory-publishersandexchanges",disabled:!p,checked:n,options:f,selectAll:!0,listClassNames:"publishers-exchanges-list",onChange:function(e){r(e)}}),o.default.createElement("a",{download:!0,style:{fontSize:"1.1em"},className:"pull-right clearfix",href:"/files/inventory.xlsx"},"Inventory per week")),e.isAdserving&&o.default.createElement("img",{src:"/images/ssp-logos/OptOutRev.png",alt:"Adserving",style:{height:"40px",paddingTop:"10px"}}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(32)),s=i(n(1));t.default=function(e){var t=o.useState(a()),n=t[0],r=t[1];function a(){var t={};return e.options.forEach((function(n){t[n.value]=e.checked.indexOf(n.value)>-1})),t}function i(e){var t=[];return s.forEach(e,(function(e,n){e&&t.push(n)})),t}o.useEffect((function(){var e=a();r(e)}),[e.checked]);return o.default.createElement("div",{className:e.listClassNames},e.selectAll&&o.default.createElement(u.default,{classes:"select-all",id:e.id+"-all",disabled:!!e.disabled,checked:i(n).length===Object.keys(n).length,onChange:function(t){var n={};e.options.forEach((function(e){n[e.value]=t}));var r=i(n);e.onChange(r)}},"Select all"),e.options.map((function(t,r){return o.default.createElement(u.default,{key:r,id:e.id+"-"+r,disabled:!!e.disabled,checked:n[t.value],onChange:function(r){!function(t,r){var a=s.assign({},n);a[t]=r;var l=i(a);e.onChange(l)}(t.value,r)}},o.default.createElement("img",{src:t.path,alt:t.value,style:t.style}))})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=l(n(230)),c=o(n(231));t.default=function(e){var t=u.useState(null),n=t[0],a=t[1],i={adsBox:n};u.useEffect((function(){var t=JSON.stringify({adsBox:null});JSON.stringify(i)!==t&&e.onChange(i)}),[JSON.stringify(i)]);var l=s.getAdsBoxProps(e.data,e.rights,e.isAdserving,e.dataFeedAllowed,(function(e){a(e)}));return u.default.createElement("div",{className:"row no-gutters"},u.default.createElement("div",{className:"col-lg-12"},u.default.createElement(c.default,r({},l))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getAdsBoxProps=void 0;var l=i(n(1));t.getAdsBoxProps=function(e,t,n,r,a){return{id:l.get(e,"campaign.id"),advertiserId:l.get(e,"campaign.advertiserId"),branches:l.get(e,"settings.retailStrategies"),rights:t,isAdserving:n,dataFeedAllowed:r,videoCampaign:l.get(e,"campaign.videoCampaign"),ads:l.get(e,"settings.ads",[]),tags:l.get(e,"settings.tags",[]),dataFeeds:l.get(e,"settings.dataFeeds",[]),onChange:a}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(6),s=n(2),c=i(n(1)),d=l(n(3)),f=l(n(34)),p=l(n(232)),m=(l(n(233)),l(n(234))),h=l(n(235)),g=l(n(236)),v=l(n(237)),b=l(n(238)),y=l(n(96)),E=l(n(5));t.default=function(e){var t=u.useHistory(),n=o.useState(e.ads||[]),r=n[0],a=n[1],i=o.useState(e.tags||[]),l=i[0],_=i[1],w=o.useState(e.dataFeeds||[]),S=w[0],P=(w[1],o.useState(!0)),C=P[0],O=P[1],x=o.useState(!0),I=(x[0],x[1]),N=o.useState(null),A=N[0],j=N[1],M=o.useState(null),k=M[0],F=M[1],D=o.useState(null),T=D[0],R=D[1],B=o.useState(null),G=B[0],L=B[1],V=o.useState(!1),z=V[0],q=V[1],Y=o.useState(!1),U=Y[0],H=Y[1],W=o.useState(!1),J=W[0],X=W[1],K=o.useState(!1),Z=K[0],$=K[1],Q=o.useState(!1),ee=Q[0],te=Q[1],ne=o.useState(-1),re=ne[0],ae=ne[1],ie=o.useState(!1),le=ie[0],oe=ie[1],ue=o.useState([]),se=ue[0],ce=ue[1],de=o.useState([]),fe=de[0],pe=de[1],me=o.useState([]),he=me[0],ge=me[1],ve=o.useState(-1),be=ve[0],ye=ve[1],Ee=o.useState(-1),_e=Ee[0],we=Ee[1],Se=function(){var t=c.partition(se,(function(e){return e.id>0})),n=t[0],r=t[1];if(e.isAdserving){var a=c.partition(fe,(function(e){return e.id>0})),i=a[0],l=a[1];return{adsToUpdate:n,adsToCreate:r,adsToDelete:he,tagsToUpdate:i,tagsToCreate:l}}return{adsToUpdate:n,adsToCreate:r,adsToDelete:he,tagsToUpdate:[],tagsToCreate:[]}}();o.useEffect((function(){a(e.ads||[]),_(e.tags||[])}),[e.id]),o.useEffect((function(){e.onChange(Se)}),[JSON.stringify(Se)]),o.useEffect((function(){O(!1)}),[JSON.stringify(r)]),o.useEffect((function(){I(!1)}),[JSON.stringify(l)]);function Pe(e){var t=l.findIndex((function(t){return t.id===e.id}));if(t>-1&&JSON.stringify(l[t])!==JSON.stringify(e)){I(!0);var n=c.cloneDeep(l);n[t]=e,_(n);var r,a=fe.findIndex((function(t){return t.id===e.id}));if(a>-1)(r=c.cloneDeep(fe))[a]=e,pe(r);else(r=c.cloneDeep(fe)).push(e),pe(r)}}function Ce(e){return!!e&&se.findIndex((function(t){return t.id===e.id}))>-1}var Oe=e.rights.MANAGE_CAMPAIGN&&e.rights.MANAGE_ADS;return o.default.createElement(f.default,null,o.default.createElement("div",{className:"row no-gutters"},!1,o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement("h5",{className:"pull-left"},"Ads"),o.default.createElement("div",{className:"table-btn-container"},o.default.createElement(s.Button,{size:"sm",variant:"primary",className:"mr-2",disabled:!Oe,onClick:function(){q(!0)}},o.default.createElement(d.default,{name:"plus"})," LINK ADS"),e.rights.MANAGE_ADS&&o.default.createElement("button",{className:"btn btn-linkbutton btn-sm mr-2",onClick:function(){t.push("/advault/advertiser/"+e.advertiserId)}},o.default.createElement(d.default,{name:"upload"})," UPLOAD NEW ADS")),o.default.createElement(E.default,{visible:C}),!C&&o.default.createElement(p.default,{writeAccess:Oe,isAdserving:e.isAdserving,videoCampaign:e.videoCampaign,records:r,tags:l,editClick:function(e){var t=r.find((function(t){return t.id===e}));F(t),X(!0)},previewClick:function(e){var t=r.find((function(t){return t.id===e}));R(t),$(!0)},shareClick:function(e){ae(e),te(!0)},deleteClick:function(e){if(O(!0),e>0){var t=he.concat();t.push(e),ge(t)}var n=r.filter((function(t){return t.id!==e}));a(n);var i=se.filter((function(t){return t.id!==e}));ce(i)}}))),o.default.createElement(m.default,{isAdserving:e.isAdserving,videoCampaign:e.videoCampaign,tags:l,ads:r,advertiserId:e.advertiserId,show:z,onClose:function(){q(!1)},onSubmit:function(t){O(!0),I(!0);var n=_e,i=be,o=c.cloneDeep(r),u=c.cloneDeep(se),s=c.cloneDeep(l),d=c.cloneDeep(fe);t.ads.forEach((function(r){var a={id:n,campaignId:e.id,bannerId:r.id,clickUrl:t.clickUrl,startTime:t.startTime,endTime:t.endTime,name:r.name,active:1};if(e.isAdserving)if(t.tagId){a.tagId=t.tagId;var l=s.findIndex((function(e){return e.id===t.tagId}));if(s[l]&&!s[l].defaultCampaignBannerId){s[l].defaultCampaignBannerId=n,s[l].finalized=!0;var f=d.findIndex((function(e){return e.id===t.tagId}));d[f]?d[f]=s[l]:d.push(s[l])}}else{var p={id:i,name:"Tag: "+r.name,campaignId:e.id,supportedSizes:[r.width+"x"+r.height],iframe:!0,javascript:!0,tracking:!0,finalized:!0,defaultCampaignBannerId:n};a.tagId=i,s.push(p),d.push(p),i--}var m=c.assign({},a,{banner:r});u.push(a),o.push(m),n--})),a(o),ce(u),we(n),e.isAdserving&&(_(s),pe(d),ye(be)),q(!1)}}),o.default.createElement(g.default,{show:J,ad:k,isAdserving:e.isAdserving,dataFeedAllowed:e.dataFeedAllowed,tags:l,dataFeeds:S,isNewOrUpdated:Ce(k),writeAccess:Oe,onClose:function(){X(!1),F(null)},onSubmit:function(t){var n=c.cloneDeep(r),i=c.cloneDeep(se),o=n.findIndex((function(e){return e.id===t.id}));if(JSON.stringify(n[o])!==JSON.stringify(t)){O(!0),o>-1&&(n[o]=t,a(n));var u=c.omit(t,["banner"]),s=i.findIndex((function(e){return e.id===t.id}));s>-1?i[s]=u:i.push(u),ce(i),e.isAdserving&&t.id<0&&function(e){var t=l.find((function(t){return t.defaultCampaignBannerId===e.id}));if(t&&t.id!==e.tagId){var n=r.find((function(n){return n.tagId===t.id&&n.id!==e.id}));n?(t.defaultCampaignBannerId=n.id,t.finalized=!0):(t.defaultCampaignBannerId=null,t.finalized=!1),Pe(t)}else{var a=l.find((function(t){return t.id===e.tagId}));if(a&&!a.defaultCampaignBannerId)Pe(c.assign({},a,{defaultCampaignBannerId:e.id,finalized:!0}))}}(t)}X(!1),F(null)}}),o.default.createElement(b.default,{show:Z,ad:T,dataFeeds:e.dataFeeds,branches:e.branches?e.branches:[],isNewOrUpdated:Ce(T),onClose:function(){$(!1),R(null)}}),e.videoCampaign&&o.default.createElement(y.default,{id:re,show:ee,onClose:function(){te(!1),ae(-1)}}),e.isAdserving&&o.default.createElement(o.Fragment,null,o.default.createElement(h.default,{show:U,tag:A,campaignId:e.id,ads:r,writeAccess:Oe,onClose:function(){H(!1),j(null)},onSubmit:function(e){e.id?Pe(e):function(e){I(!0);var t=c.assign({},e,{id:be}),n=c.cloneDeep(l);n.push(t),_(n);var r=c.cloneDeep(fe);r.push(t),pe(r),ye(be-1)}(e),H(!1)}}),o.default.createElement(v.default,{show:le,tag:G,onClose:function(){oe(!1),L(null)}})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=o(n(14)),c=l(n(23)),d=o(n(17)),f=n(2),p=l(n(1)),m=o(n(11)),h=l(n(22)),g=l(n(8)),v=l(n(15)),b=l(n(33)),y=o(n(3));t.default=function(e){var t=u.useState(1),n=t[0],a=t[1],i=u.useState(30),l=i[0],o=i[1],E=u.useState({dataField:"id",order:"desc"}),_=E[0],w=E[1],S=function(e,t){w({dataField:e,order:t})},P=function(e,t){a(e)},C=function(e,t){o(e)},O=function(t,n,r){if(e.writeAccess&&!n.defaultForTag){var a=u.default.createElement(f.Tooltip,{id:"campaignad-delete-tooltip-"+r},"unlink"),i=g.getPopperConfig();return u.default.createElement(f.OverlayTrigger,{placement:"top",overlay:a,popperConfig:i},u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.deleteClick(n.id)},href:"",className:"table-btn"},u.default.createElement(y.default,{name:"remove"})))}return null},x=function(t,n,r){var a=e.writeAccess?"edit":"view",i=e.writeAccess?"pencil":"search-plus",l=u.default.createElement(f.Tooltip,{id:"campaignad-edit-tooltip-"+r},a),o=g.getPopperConfig();return u.default.createElement(f.OverlayTrigger,{placement:"top",overlay:l,popperConfig:o},u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id)},href:"",className:"table-btn"},u.default.createElement(y.default,{name:i})))},I=function(t,n,r){var a=u.default.createElement(f.Tooltip,{id:"campaignad-preview-tooltip-"+r},"preview"),i=g.getPopperConfig();return u.default.createElement(f.OverlayTrigger,{placement:"top",overlay:a,popperConfig:i},u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.previewClick(n.id)},href:"",className:"table-btn"},u.default.createElement(y.default,{name:"eye"})))},N=function(t,n,r){var a=p.get(n,"bannerId");if(e.videoCampaign&&a>0){var i=u.default.createElement(f.Tooltip,{id:"campaignad-share-tooltip-"+r},"share"),l=g.getPopperConfig();return u.default.createElement(f.OverlayTrigger,{placement:"top",overlay:i,popperConfig:l},u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.shareClick(a)},href:"",className:"table-btn"},u.default.createElement(y.default,{name:"share-alt"})))}return null},A=function(e,t){if(!p.isNil(e)){var n=m.default.unix(e);return h.getStartDate(n)}return"Campaign"},j=function(e,t){if(!p.isNil(e)){var n=m.default.unix(e);return h.getEndDate(n)}return"Campaign"};function M(e,t){return{dataField:e,text:t,sort:!0,onSort:S,sortCaret:v.columnSort}}function k(e,t){return{dataField:e,isDummyField:!0,text:"",formatter:t,headerStyle:{width:"30px"}}}function F(){var t=v.getLastPage(e.records,l);return n>t?t:n}var D,T,R,B,G,L,V,z,q,Y,U,H,W=c.Search.SearchBar,J=(D=k("df1",x),T=k("df2",O),R=k("df3",I),B={dataField:"bannerId",text:"#",sort:!0,onSort:S,sortCaret:v.columnSort,formatter:b.idFormatter},G=M("name","Name"),L={dataField:"status",text:"status",sort:!0,onSort:S,sortFunc:b.statusSort,sortCaret:v.columnSort,formatter:b.statusFormatter},V={dataField:"cookieLess",text:"cookieless",sort:!0,onSort:S,sortCaret:v.columnSort,formatter:v.booleanFormatter},z={dataField:"startTime",text:"Start date",sort:!0,onSort:S,sortCaret:v.columnSort,formatter:A},q={dataField:"endTime",text:"End date",sort:!0,onSort:S,sortCaret:v.columnSort,formatter:j},Y=M("adType","Ad type"),U=e.videoCampaign?M("dimension","Duration"):M("dimension","Banner dimensions"),H=M("fileSize","File size"),e.videoCampaign?[D,T,R,k("df4",N),B,G,L,V,z,q,Y,U,H]:e.isAdserving?[D,T,R,B,M("tagName","Tag"),{dataField:"defaultForTag",text:"Default for tag",sort:!0,onSort:S,sortCaret:v.columnSort,formatter:v.booleanFormatter},G,L,V,z,q,Y,U,H]:[D,T,R,B,G,L,V,z,q,Y,U,H]),X=e.records.map((function(t){var n={id:t.id,bannerId:t.bannerId,active:t.active,clickUrl:t.clickUrl,campaignId:t.campaignId,name:t.name,previewTag:t.banner.previewTag,dimension:b.dimensionDurationColumn(t.banner),status:b.statusColumn(t.banner),fileSize:p.get(t.banner,"bannerMemSize",0),adType:t.banner.adType,startTime:t.startTime,endTime:t.endTime,cookieLess:t.banner.cookieLess,adWorking:t.banner.adWorking,hostAt3rdParty:t.banner.hostAt3rdParty,approved:t.banner.approved};if(e.isAdserving){var r=e.tags.find((function(e){return e.id===t.tagId}));n.tagId=t.tagId,n.tagName=p.get(r,"name",""),n.defaultForTag=!!r&&r.defaultCampaignBannerId===t.id}return n}));return u.default.createElement(c.default,{keyField:"id",data:X,columns:J,search:!0},(function(e){return u.default.createElement("div",null,u.default.createElement("div",{className:"search-label-container"},u.default.createElement(y.default,{name:"search"}),u.default.createElement(W,r({},e.searchProps,{placeholder:"Filter records",tableId:"campaign-ads-table"}))),u.default.createElement(s.default,r({},e.baseProps,{classes:"table-borderless",id:"campaign-ads-table",bordered:!1,hover:!0,striped:!0,keyField:"id",data:X,columns:J,defaultSorted:[_],pagination:d.default({page:F(),sizePerPage:l,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100}],onPageChange:P,onSizePerPageChange:C})})))}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=o(n(14)),c=l(n(23)),d=o(n(17)),f=n(2),p=l(n(1)),m=l(n(8)),h=l(n(15)),g=l(n(33)),v=o(n(3));t.default=function(e){var t=u.useState(1),n=t[0],a=t[1],i=u.useState(30),l=i[0],o=i[1],b=u.useState({dataField:"id",order:"desc"}),y=b[0],E=b[1],_=function(e,t){E({dataField:e,order:t})},w=function(e,t){a(e)},S=function(e,t){o(e)},P=function(t,n,r){if(n.id>0&&n.finalized&&n.iframeTag){var a=u.default.createElement(f.Tooltip,{id:"campaigntag-preview-tooltip-"+r},"preview"),i=m.getPopperConfig();return u.default.createElement(f.OverlayTrigger,{placement:"top",overlay:a,popperConfig:i},u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.previewClick(n.id)},href:"",className:"table-btn"},u.default.createElement(v.default,{name:"eye"})))}return null},C=function(t,n,r){var a=e.writeAccess?"edit":"view",i=e.writeAccess?"pencil":"search-plus",l=u.default.createElement(f.Tooltip,{id:"campaigntag-edit-tooltip-"+r},a),o=m.getPopperConfig();return u.default.createElement(f.OverlayTrigger,{placement:"top",overlay:l,popperConfig:o},u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id)},href:"",className:"table-btn"},u.default.createElement(v.default,{name:i})))},O=function(e,t,n){return e.map((function(e,t){return u.default.createElement("span",{className:"ad-tag-size"},e)}))};function x(){var t=h.getLastPage(e.records,l);return n>t?t:n}var I=c.Search.SearchBar,N=[{dataField:"df1",isDummyField:!0,text:"",formatter:C,headerStyle:{width:"30px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:P,headerStyle:{width:"30px"}},{dataField:"id",text:"#",sort:!0,onSort:_,sortCaret:h.columnSort,formatter:g.idFormatter},{dataField:"name",text:"Name",sort:!0,onSort:_,sortCaret:h.columnSort},{dataField:"status",text:"status",sort:!0,onSort:_,sortFunc:g.statusSort,sortCaret:h.columnSort,formatter:g.statusFormatter},{dataField:"supportedSizes",text:"Supported sizes",sort:!0,onSort:_,sortCaret:h.columnSort,formatter:O},{dataField:"iframe",text:"IFrame",sort:!0,onSort:_,sortCaret:h.columnSort,formatter:h.booleanFormatter},{dataField:"javascript",text:"Javascript",sort:!0,onSort:_,sortCaret:h.columnSort,formatter:h.booleanFormatter},{dataField:"tracking",text:"Tracking",sort:!0,onSort:_,sortCaret:h.columnSort,formatter:h.booleanFormatter},{dataField:"defaultBanner",text:"Default ad",sort:!0,onSort:_,sortCaret:h.columnSort}],A=e.records.map((function(t){var n,r={color:(n=t).finalized?"green":"orange",title:n.finalized?"Tag is finalized and okay":"Tag not finalized yet; assign a default creative"},a="";if(t.defaultCampaignBannerId){var i=e.campaignBanners.find((function(e){return e.id===t.defaultCampaignBannerId}));i&&(a=i.name)}return p.assign({},t,{status:r,defaultBanner:a})}));return u.default.createElement(c.default,{keyField:"id",data:A,columns:N,search:!0},(function(e){return u.default.createElement("div",null,u.default.createElement("div",{className:"search-label-container"},u.default.createElement(v.default,{name:"search"}),u.default.createElement(I,r({},e.searchProps,{placeholder:"Filter records",tableId:"campaign-tags-table"}))),u.default.createElement(s.default,r({},e.baseProps,{classes:"table-borderless",id:"campaign-tags-table",bordered:!1,hover:!0,striped:!0,keyField:"id",data:A,columns:N,defaultSorted:[y],pagination:d.default({page:x(),sizePerPage:l,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100}],onPageChange:w,onSizePerPageChange:S})})))}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=u(n(9)),f=u(n(35)),p=u(n(11)),m=i(n(1)),h=i(n(4)),g=i(n(33)),v=i(n(7)),b=u(n(3));t.default=function(e){var t=s.useState("create"),n=t[0],r=t[1],a=s.useState(null),i=a[0],u=a[1],y=s.useState([]),E=y[0],_=y[1],w=s.useState([]),S=w[0],P=w[1],C=s.useState(""),O=C[0],x=C[1],I=s.useState(null),N=I[0],A=I[1],j=s.useState(null),M=j[0],k=j[1],F=s.useState({error:!1,message:""}),D=F[0],T=F[1],R=s.useState({error:!1,message:""}),B=R[0],G=R[1],L=s.useState({error:!1,message:""}),V=L[0],z=L[1];function q(){var e=S.map((function(e){return e.value}));return E.filter((function(t){return e.indexOf(t.id)>-1}))}var Y=e.isAdserving?(e.tags||[]).map((function(e){return{value:e.id,label:e.name}})):[],U=function(){if(e.videoCampaign)return E.filter((function(e){return g.isVideoAd(e.type)&&1===e.submissionType}));if(e.isAdserving){if("select"===n){var t=e.tags.find((function(e){return e.id===i})),r=m.get(t,"supportedSizes")||[];return E.filter((function(e){var t=e.width+"x"+e.height;return!g.isThirdPartyBanner(e)&&r.indexOf(t)>-1}))}return E.filter((function(e){return!g.isThirdPartyBanner(e)}))}return E.filter((function(e){return!g.isVideoAd(e.type)&&1===e.submissionType}))}().map((function(t){var n=e.ads.filter((function(e){return e.bannerId===t.id})).length;return{value:t.id,label:t.name,count:n}}));return s.default.createElement(c.Modal,{size:"lg",show:e.show,onHide:e.onClose,onEntering:function(){return l(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return e.isAdserving&&(e.tags||[]).length>0&&u(e.tags[0].id),r("create"),P([]),x(""),A(null),k(null),T({error:!1,message:""}),G({error:!1,message:""}),z({error:!1,message:""}),[4,h.Get({path:"/api/ads",qs:{advertiserId:e.advertiserId,active:"true"}})];case 1:return t=n.sent(),_(t),[2]}}))}))},backdrop:"static"},s.default.createElement(c.Modal.Header,{closeButton:!0},s.default.createElement(c.Modal.Title,null,"Link ads")),s.default.createElement(c.Modal.Body,null,s.default.createElement("div",{className:"row no-gutters"},!1,e.isAdserving&&"select"===n&&s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(d.default,{inputId:"link-ads-tag-select",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:Y.find((function(e){return e.value===i})),onChange:function(e){u(e.value)},options:Y}),B.error&&s.default.createElement(c.Form.Control.Feedback,{type:"invalid",style:{display:"block"}},B.message))),s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(d.default,{inputId:"link-ads-select",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isMulti:!0,closeMenuOnSelect:!1,formatOptionLabel:function(e){return 0===e.count?e.label:s.default.createElement("span",null,s.default.createElement("span",{className:"badge badge-secondary"},e.count,"x")," ",e.label)},value:S,onChange:function(e){P(e);var t=(e||[]).map((function(e){return e.value})),n=v.required(t);T(n)},options:U}),D.error&&s.default.createElement(c.Form.Control.Feedback,{type:"invalid",style:{display:"block"}},D.message))),s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,"Landing Page (left blank uses ad landing page)"),s.default.createElement(c.Form.Control,{id:"link-ads-clickurl",type:"text",value:O,isInvalid:V.error,onChange:function(e){var t=e.target.value,n=v.url(t,!1);x(t),z(n)}}),V.error&&s.default.createElement(c.Form.Control.Feedback,{type:"invalid"},V.message)))),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Label,null,"Start time (left blank uses campaign start time)"),s.default.createElement(c.InputGroup,null,s.default.createElement(c.InputGroup.Prepend,null,s.default.createElement(c.InputGroup.Text,null,s.default.createElement(b.default,{name:"calendar"}))),s.default.createElement(f.default,{dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm",onChange:function(e){A(p.default(e).unix())},value:N?p.default.unix(N):null}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Label,null,"End time (left blank uses campaign end time)"),s.default.createElement(c.InputGroup,null,s.default.createElement(c.InputGroup.Prepend,null,s.default.createElement(c.InputGroup.Text,null,s.default.createElement(b.default,{name:"calendar"}))),s.default.createElement(f.default,{dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm",onChange:function(e){k(p.default(e).unix())},value:M?p.default.unix(M):null}))))),s.default.createElement(c.Modal.Footer,null,s.default.createElement(c.Button,{size:"sm",variant:"light",onClick:e.onClose},"CLOSE"),s.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:function(){var t=(S||[]).map((function(e){return e.value})),r=v.required(t),a=v.url(O,!1);if(e.isAdserving){var l=e.isAdserving&&"select"===n&&0===e.tags.length?{error:!0,message:"Please create at least one tag in order to link ads."}:{error:!1,message:""};if(l.error||r.error||a.error)T(r),G(l),z(a);else{var o={ads:q(),clickUrl:O,startTime:N,endTime:M};"select"===n&&(o.tagId=i),e.onSubmit(o)}}else if(r.error||a.error)T(r),z(a);else{o={ads:q(),clickUrl:O,startTime:N,endTime:M};e.onSubmit(o)}}},"OKAY")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(9)),c=i(n(1)),d=i(n(7)),f=l(n(32));t.default=function(e){var t=o.useState(""),n=t[0],r=t[1],a=o.useState([]),i=a[0],l=a[1],p=o.useState(!0),m=p[0],h=p[1],g=o.useState(!0),v=g[0],b=g[1],y=o.useState(!0),E=y[0],_=y[1],w=o.useState(null),S=w[0],P=w[1],C=o.useState({error:!1,message:""}),O=C[0],x=C[1],I=o.useState({error:!1,message:""}),N=I[0],A=I[1],j=o.useState({error:!1,message:""}),M=j[0],k=j[1];o.useEffect((function(){var e=D();k(e)}),[m,v,E]);function F(){return e.tag?e.ads.filter((function(t){return t.tagId===e.tag.id})):[]}function D(){return m||v||E?{error:!1,message:""}:{error:!0,message:"Please select at least one of the above attributes."}}function T(t){var n=d.required(t||[]);if(!n.error&&e.tag&&(e.tag.id<0||!e.tag.finalized)){var r=c.uniq(F().map((function(e){return e.banner.width+"x"+e.banner.height}))),a=c.difference(r,t);a.length>0&&(n={error:!0,message:"Some connected ads are not supported by the Tag's sizes. Please add ("+a.join(", ")+") or remove the offending ads."})}return n}var R=["300x250","728x90","320x240","320x50","320x100","300x600","160x600","970x250","336x280","120x600","320x320","320x160","320x250","468x60","970x90","320x480","300x50","800x250","1800x1000","1800x200","120x90","375x375","970x1000","300x100","320x500","640x480","600x500"].map((function(e){return{value:e,label:e}})),B=F().map((function(e){return{value:e.id,label:e.name}})),G=!e.writeAccess||c.get(e,"tag.finalized",!1)&&c.get(e,"tag.id")>0;return o.default.createElement(u.Modal,{size:"lg",show:e.show,onHide:e.onClose,onEntering:function(){e.tag?(r(c.get(e,"tag.name")),l(c.get(e,"tag.supportedSizes",[])),h(c.get(e,"tag.iframe",!1)),b(c.get(e,"tag.javascript",!1)),_(c.get(e,"tag.tracking",!1)),P(c.get(e,"tag.defaultCampaignBannerId",null))):(r(""),l([]),h(!0),b(!0),_(!0),P(null),x({error:!1,message:""}),A({error:!1,message:""}),k({error:!1,message:""}))},backdrop:"static"},o.default.createElement(u.Modal.Header,{closeButton:!0},o.default.createElement(u.Modal.Title,null,"Tag settings")),o.default.createElement(u.Modal.Body,null,o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement(u.Form.Group,{controlId:"tag-settings-name"},o.default.createElement(u.Form.Label,null,"Name *"),o.default.createElement(u.Form.Control,{autoFocus:!0,disabled:!e.writeAccess,type:"text",value:n,isInvalid:O.error,onChange:function(e){var t=e.target.value,n=d.required(t);r(t),x(n)}}),O.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},O.message))),o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Supported sizes *"),o.default.createElement(s.default,{inputId:"tag-settings-supported-sizes",className:"react-select-container multiple",classNamePrefix:"react-select",name:"tag-settings-supported-sizes-name",isDisabled:G,isMulti:!0,value:i.map((function(e){return{value:e,label:e}})),clearable:!0,closeMenuOnSelect:!1,onChange:function(e){var t=(e||[]).map((function(e){return e.value})),n=T(t);l(t),A(n)},options:R}),N.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid",style:{display:"block"}},N.message))),o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Supported tag types *"),o.default.createElement(f.default,{id:"tag-settings-iframe",checked:m,disabled:G,onChange:h},"Iframe"),o.default.createElement(f.default,{id:"tag-settings-javascript",checked:v,disabled:G,onChange:b},"Javascript"),o.default.createElement(f.default,{id:"tag-settings-tracking",checked:E,disabled:G,onChange:_},"Tracking"),M.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid",style:{display:"block"}},M.message))),e.tag&&o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement(s.default,{inputId:"tag-settings-default-campaignbanner-id",className:"react-select-container multiple",classNamePrefix:"react-select",name:"tag-settings-default-campaignbanner-id-name",isDisabled:!e.writeAccess,value:B.find((function(e){return e.value===S})),onChange:function(e){P(e.value)},options:B})))),o.default.createElement(u.Modal.Footer,null,o.default.createElement(u.Button,{size:"sm",variant:"light",onClick:e.onClose},"CLOSE"),o.default.createElement(u.Button,{size:"sm",variant:"primary",disabled:!e.writeAccess,onClick:function(){var t=d.required(n),r=T(i),a=D();if(t.error||r.error||a.error)x(t),A(r),k(a);else if(e.tag){var l={name:n};S&&(l.defaultCampaignBannerId=S),(e.tag.id<0||!e.tag.finalized)&&(l.supportedSizes=i||[],l.iframe=m,l.javascript=v,l.tracking=E),e.onSubmit(c.assign({},e.tag,l))}else{var o={name:n,supportedSizes:i,iframe:m,javascript:v,tracking:E,finalized:!1,campaignId:e.campaignId};e.onSubmit(o)}}},"SAVE")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(0)),d=n(43),f=n(2),p=s(n(9)),m=s(n(35)),h=n(44),g=s(n(11)),v=i(n(1)),b=i(n(4)),y=i(n(33)),E=i(n(7)),_=s(n(3)),w=s(n(5)),S=s(n(10)),P=s(n(46)),C=s(n(47));t.default=function(e){var t,n=v.get(e,"ad.id"),r=c.useState(null),a=r[0],i=r[1],s=c.useState(v.get(e,"ad.name")||""),O=s[0],x=s[1],I=c.useState(v.get(e,"ad.tagId")),N=I[0],A=I[1],j=c.useState(v.get(e,"ad.clickUrl")||""),M=j[0],k=j[1],F=c.useState(v.get(e,"ad.startTime")||null),D=F[0],T=F[1],R=c.useState(v.get(e,"ad.endTime")||null),B=R[0],G=R[1],L=c.useState(v.get(e,"ad.dataFeedId")||null),V=L[0],z=L[1],q=c.useState({error:!1,message:""}),Y=q[0],U=q[1],H=c.useState({error:!1,message:""}),W=H[0],J=H[1],X=c.useState(!1),K=X[0],Z=X[1],$=c.useState(!0),Q=$[0],ee=$[1],te=c.useState(!1),ne=te[0],re=te[1],ae=c.useState(!1),ie=ae[0],le=ae[1],oe=c.useState(""),ue=oe[0],se=oe[1],ce=c.useRef(null);c.useEffect((function(){var t;z(null===(t=e.ad)||void 0===t?void 0:t.dataFeedId)}),[JSON.stringify(null===(t=e.ad)||void 0===t?void 0:t.dataFeedId)]);var de=function(){if(e.isAdserving){var t=v.get(e,"ad.banner.width")+"x"+v.get(e,"ad.banner.height");return e.tags.filter((function(e){return e.supportedSizes.indexOf(t)>-1})).map((function(e){return{value:e.id,label:e.name}}))}return[]}(),fe=u([{value:null,label:"None"}],e.dataFeeds.map((function(e){return{value:e.id,label:e.name}}))),pe=v.get(a,"previewTag")||v.get(a,"tag")||"",me=v.get(a,"clickUrl")?"default landing page: "+v.get(a,"clickUrl"):"",he=!!a&&y.isVideoAd(a.type);return c.default.createElement(f.Modal,{dialogClassName:"modal-xxl",show:e.show,onHide:e.onClose,onEntering:function(){return l(void 0,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:ee(!0),re(!1),t=v.get(e,"ad.banner.id"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,b.Get({path:"/api/ads/"+t})];case 2:return n=r.sent(),i(n),ee(!1),re(!0),le(!1),se(""),[3,4];case 3:return r.sent(),ee(!1),le(!0),se("Error loading advertiser ad."),i(null),[3,4];case 4:return x(v.get(e,"ad.name")||""),A(v.get(e,"ad.tagId")),k(v.get(e,"ad.clickUrl")||""),T(v.get(e,"ad.startTime")||null),G(v.get(e,"ad.endTime")||null),z(v.get(e,"ad.dataFeedId")||null),U({error:!1,message:""}),J({error:!1,message:""}),[2]}}))}))},backdrop:"static"},c.default.createElement(f.Modal.Header,{closeButton:!0},c.default.createElement(f.Modal.Title,null,"Ad settings")),c.default.createElement(f.Modal.Body,null,c.default.createElement("div",{className:"row no-gutters"},c.default.createElement(w.default,{visible:Q}),!Q&&!ie&&c.default.createElement(c.Fragment,null,c.default.createElement("div",{className:"col-lg-5"},c.default.createElement("div",{className:"row no-gutters"},e.isAdserving&&c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(f.Form.Group,null,c.default.createElement(f.Form.Label,null,"Tag"),c.default.createElement(p.default,{inputId:"ad-settings-tag",className:"react-select-container multiple",classNamePrefix:"react-select",name:"ad-settings-tag-name",isDisabled:n>0,value:de.find((function(e){return e.value===N})),onChange:function(e){A(e.value)},options:de}))),c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(f.Form.Group,{controlId:"ad-settings-name"},c.default.createElement(f.Form.Label,null,"Name *"),c.default.createElement(f.Form.Control,{autoFocus:!0,disabled:!e.writeAccess,type:"text",value:O,isInvalid:Y.error,onChange:function(e){var t=e.target.value,n=E.required(t);x(t),U(n)}}),Y.error&&c.default.createElement(f.Form.Control.Feedback,{type:"invalid"},Y.message))),c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(f.Form.Group,null,c.default.createElement(f.Form.Label,null,"Landing Page"),c.default.createElement(f.Form.Control,{disabled:!e.writeAccess,id:"ad-settings-clickurl",type:"text",placeholder:me,value:M,isInvalid:W.error,onChange:function(e){var t=e.target.value,n=E.url(t,!1);k(t),J(n)}}),W.error&&c.default.createElement(f.Form.Control.Feedback,{type:"invalid"},W.message)))),c.default.createElement("div",{className:"row no-gutters mb-3"},c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(f.Form.Label,null,"Start time (left blank uses campaign start time)"),c.default.createElement(f.InputGroup,null,c.default.createElement(f.InputGroup.Prepend,null,c.default.createElement(f.InputGroup.Text,null,c.default.createElement(_.default,{name:"calendar"}))),c.default.createElement(m.default,{inputProps:{disabled:!e.writeAccess},dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm",onChange:function(e){T(g.default(e).unix())},value:D?g.default.unix(D):null}))),c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(f.Form.Label,null,"End time (left blank uses campaign end time)"),c.default.createElement(f.InputGroup,null,c.default.createElement(f.InputGroup.Prepend,null,c.default.createElement(f.InputGroup.Text,null,c.default.createElement(_.default,{name:"calendar"}))),c.default.createElement(m.default,{inputProps:{disabled:!e.writeAccess},dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm",onChange:function(e){G(g.default(e).unix())},value:B?g.default.unix(B):null})))),c.default.createElement("div",{className:"row no-gutters"},e.dataFeedAllowed&&c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(f.Form.Group,null,c.default.createElement(f.Form.Label,null,"Data feed"),c.default.createElement(p.default,{inputId:"ad-settings-data-feed",className:"react-select-container",classNamePrefix:"react-select",name:"ad-settings-data-feed-name",clearable:!0,closeMenuOnSelect:!0,value:fe.find((function(e){return e.value===V})),onChange:function(e){z(e.value)},options:fe})))),c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(f.Form.Group,{controlId:"ad-settings-previewtag"},c.default.createElement(f.Form.Label,null,"Preview code"),c.default.createElement("div",{className:K?"gray-box mb-2 highlight-box":"gray-box mb-2"},pe),c.default.createElement(h.CopyToClipboard,{text:pe,onCopy:function(){Z(!0),setTimeout((function(){Z(!1)}),2e3)}},c.default.createElement("button",{ref:ce,className:"btn btn-primary btn-sm pull-right"},c.default.createElement(_.default,{name:"files-o"})," GET CODE")),c.default.createElement(f.Overlay,{target:d.findDOMNode(ce.current),show:K,placement:"bottom"},c.default.createElement(f.Tooltip,{id:"copy-share-tag-tooltip"},"Copied!")))))),a&&c.default.createElement("div",{className:"col-lg-7"},c.default.createElement("div",{className:"col-lg-12"},e.isNewOrUpdated&&c.default.createElement("div",{className:"text-danger"},"Preview is possibly outdated; please save the campaign"),ne&&he&&c.default.createElement(P.default,{id:"ad-settings-video-preview-player",ad:a}),ne&&!he&&c.default.createElement(C.default,{id:"ad-settings-banner-preview",ad:a})))),!Q&&ie&&c.default.createElement("div",{className:"col-lg-12"},c.default.createElement(S.default,{message:ue})))),c.default.createElement(f.Modal.Footer,null,c.default.createElement(f.Button,{size:"sm",variant:"light",onClick:e.onClose},"CLOSE"),c.default.createElement(f.Button,{size:"sm",variant:"primary",disabled:!e.writeAccess,onClick:function(){var t=E.required(O);if(t.error)U(t);else{var r={id:n,name:O,clickUrl:M||null,startTime:D||null,endTime:B||null,dataFeedId:V||null};e.isAdserving&&n<0&&(r.tagId=N),z(null),e.onSubmit(v.assign({},e.ad,r))}}},"OKAY")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(0)),u=n(2),s=i(n(1)),c=i(n(33));t.default=function(e){var t=function(){$("#tag-iframe-preview").html(""),e.onClose()};return o.default.createElement(u.Modal,{dialogClassName:"modal-xxl",show:e.show,onEntering:function(){var t=s.get(e,"tag.iframeTag","");$("#tag-iframe-preview").html(t);var n=$("#tag-iframe-preview").find("iframe"),r=n.width(),a=n.height();!function(e,t,n){var r=e.parent().width(),a=c.previewScale(t,r),i=c.previewStyle(t,n,a);e.attr("style",i),e.parent().height(n*a)}(n,r,a)},onHide:t,backdrop:"static"},o.default.createElement(u.Modal.Header,{closeButton:!0},o.default.createElement(u.Modal.Title,null,"Tag preview - id: ",s.get(e,"tag.id",""))),o.default.createElement(u.Modal.Body,null,o.default.createElement("div",{id:"tag-iframe-preview"})),o.default.createElement(u.Modal.Footer,null,o.default.createElement(u.Button,{variant:"light",size:"sm",onClick:t},"CANCEL")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=i(n(1)),d=u(n(46)),f=u(n(47)),p=i(n(4)),m=i(n(33)),h=u(n(5)),g=u(n(10)),v=n(2),b=u(n(9));t.default=function(e){var t=c.get(e,"ad.banner.id"),n=c.get(e,"ad.id"),r=T(e.branches),a=s.useState(null),i=a[0],u=a[1],y=s.useState(!0),E=y[0],_=y[1],w=s.useState(!1),S=w[0],P=w[1],C=s.useState(!1),O=C[0],x=C[1],I=s.useState(""),N=I[0],A=I[1],j=s.useState(r.length>0?r[0].retailBranch.id:0),M=j[0],k=j[1];s.useEffect((function(){D()}),[M]);var F=function(){P(!1),u(null),_(!1),x(!1),A(""),e.onClose()},D=function(){return l(void 0,void 0,void 0,(function(){var r,a,i;return o(this,(function(l){switch(l.label){case 0:_(!0),P(!1),l.label=1;case 1:return l.trys.push([1,4,,5]),r="/api/ads/preview/"+e.ad.banner.advertiserId+"/ad/"+e.ad.banner.id+"/campaign/"+e.ad.campaignId,M>0&&(r+="/branch/"+M),r+="/campaignbanner/"+n,[4,p.Get({path:r})];case 2:return a=l.sent(),[4,p.Get({path:"/api/ads/"+t})];case 3:return(i=l.sent()).previewTag=a.preview,u(i),_(!1),P(!0),x(!1),A(""),[3,5];case 4:return l.sent(),_(!1),x(!0),A("Error loading advertiser ad."),u(null),[3,5];case 5:return[2]}}))}))};function T(t){var n=t;if(e.ad){var r=e.dataFeeds.find((function(t){return t.id==e.ad.dataFeedId}));r&&(n=n.filter((function(e){return!!r.rows&&r.rows.findIndex((function(t){return t.key==e.branchId}))>=0})))}return n}var R=T(e.branches||[]).map((function(e){return{value:e.retailBranch.id,label:e.retailBranch.name}})),B=!!i&&m.isVideoAd(i.type);return s.default.createElement(v.Modal,{dialogClassName:"modal-xxl",show:e.show,onEntering:D,onHide:F,backdrop:"static"},s.default.createElement(v.Modal.Header,{closeButton:!0},s.default.createElement(v.Modal.Title,null,"Ad preview - id: ",n)),s.default.createElement(v.Modal.Body,null,n>0&&s.default.createElement("div",{className:"row"},s.default.createElement(h.default,{visible:E}),!E&&!O&&s.default.createElement("div",{className:"col-lg-12"},e.isNewOrUpdated&&s.default.createElement("div",{className:"text-danger mb-2"},"Preview is possibly outdated; please save the campaign"),R.length>0&&s.default.createElement("span",null," Branch:",s.default.createElement(v.Form.Group,null,s.default.createElement(b.default,{inputId:"preview-from-branch",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:R.find((function(e){return e.value===M})),onChange:function(e){return k(e.value)},options:R}))),S&&B&&s.default.createElement(d.default,{id:"video-preview-player",ad:i}),S&&!B&&s.default.createElement(f.default,{id:"banner-preview",ad:i})),!E&&O&&s.default.createElement("div",{className:"col-lg-12"},s.default.createElement(g.default,{message:N})))),s.default.createElement(v.Modal.Footer,null,s.default.createElement(v.Button,{variant:"light",size:"sm",onClick:F},"CANCEL")))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=l(n(240)),c=o(n(241));t.default=function(e){var t=u.useState(null),n=t[0],a=t[1],i={segmentsBox:n};u.useEffect((function(){var t=JSON.stringify({segmentsBox:null});JSON.stringify(i)!==t&&e.onChange(i)}),[JSON.stringify(i)]);var l=s.getSegmentsBoxProps(e.data,e.maxBidPrice,e.rights,(function(e){a(e)}));return u.default.createElement("div",{className:"row no-gutters"},u.default.createElement("div",{className:"col-lg-12"},u.default.createElement(c.default,r({},l))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getSegmentsBoxProps=void 0;var l=i(n(1));t.getSegmentsBoxProps=function(e,t,n,r){return{id:l.get(e,"campaign.id"),advertiserId:l.get(e,"campaign.advertiserId"),rights:n,maxBidPrice:t,segmentRules:l.get(e,"settings.targeting.basicRules.user.segmentRules",[]),digitalAudience:l.get(e,"settings.targeting.basicRules.user.digitalAudience",{displayNames:[],values:[]}),onChange:r}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=n(2),f=i(n(1)),p=i(n(4)),m=u(n(3)),h=u(n(34)),g=u(n(5)),v=u(n(242)),b=u(n(243)),y=u(n(244)),E=u(n(245));t.default=function(e){var t=c.useHistory(),n=s.useState(!1),r=n[0],a=n[1],i=s.useState([]),u=i[0],_=i[1],w=s.useState(null),S=w[0],P=w[1],C=s.useState(e.segmentRules),O=C[0],x=C[1],I=s.useState(f.get(e,"digitalAudience.values",[])),N=I[0],A=I[1],j=s.useState(null),M=j[0],k=j[1],F=s.useState(-1),D=F[0],T=F[1],R=s.useState(!1),B=R[0],G=R[1],L=s.useState(!0),V=L[0],z=L[1],q={segmentRules:O,digitalAudience:N};s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return[4,p.Get({path:"/api/segments",qs:{advertiserId:e.advertiserId}})];case 1:return t=r.sent(),[4,p.Get({path:"/api/attributes/da-targeting"})];case 2:return n=r.sent(),_(t),P(n),x(e.segmentRules),A(f.get(e,"digitalAudience.values",[])),[2]}}))}))}()}),[e.id]),s.useEffect((function(){e.onChange(q)}),[JSON.stringify(q)]),s.useEffect((function(){z(!1)}),[JSON.stringify(O)]);var Y=e.rights.MANAGE_CAMPAIGN&&e.rights.MANAGE_SEGMENTS;return s.default.createElement(h.default,null,s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement("h5",{className:"pull-left"},"Advertiser segments"),s.default.createElement("div",{className:"table-btn-container"},s.default.createElement(d.Button,{size:"sm",variant:"primary",disabled:!Y,className:"mr-2",onClick:function(){a(!0),k(null),T(-1)}},s.default.createElement(m.default,{name:"plus"})," ADD RULE"),e.rights.MANAGE_SEGMENTS&&s.default.createElement("button",{className:"btn btn-linkbutton btn-sm mr-2",onClick:function(){t.push("/segments/advertiser/"+e.advertiserId)}},s.default.createElement(m.default,{name:"plus"})," CREATE NEW SEGMENT")),s.default.createElement(g.default,{visible:V}),!V&&s.default.createElement(v.default,{writeAccess:Y,records:O,segments:u,deleteClick:function(e){z(!0);var t=f.cloneDeep(O);t.splice(e,1),x(t)},editClick:function(e){k(O[e]),T(e),a(!0)}}),s.default.createElement(b.default,{show:r,index:D,segmentRule:M,writeAccess:Y,maxBidPrice:e.maxBidPrice,segments:u,onClose:function(){a(!1),k(null),T(-1)},onSubmit:function(e,t){var n=f.cloneDeep(O);e>-1?JSON.stringify(n[e])!==JSON.stringify(t)&&(z(!0),n[e]=t):(z(!0),n.push(t)),x(n),a(!1),k(null),T(-1)}})),s.default.createElement("div",{className:"col-lg-12 px-1 pt-2"},s.default.createElement("h5",{className:"pull-left"},"Audience segments"),s.default.createElement("div",{className:"table-btn-container"},s.default.createElement(d.Button,{size:"sm",variant:"primary",disabled:!Y,className:"mr-2",onClick:function(){G(!0)}},s.default.createElement(m.default,{name:"plus"})," UPDATE RULES")),s.default.createElement(y.default,{digitalAudienceValues:N,daTargeting:S}),s.default.createElement(E.default,{show:B,digitalAudienceValues:N,daTargeting:S,onClose:function(){G(!1)},onSubmit:function(e){A(e),G(!1)}}))))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=o(n(14)),c=l(n(23)),d=o(n(17)),f=n(2),p=l(n(1)),m=l(n(8)),h=l(n(15)),g=o(n(3));t.default=function(e){var t="campaign-segments-table",n=u.useState(1),a=n[0],i=n[1],l=u.useState(30),o=l[0],v=l[1],b=u.useState({dataField:"id",order:"desc"}),y=b[0],E=b[1],_=function(e,t){E({dataField:e,order:t})},w=function(e,t){i(e)},S=function(e,t){v(e)},P=function(t,n,r){if(e.writeAccess){var a=u.default.createElement(f.Tooltip,{id:"segment-delete-tooltip-"+n.id},"delete"),i=m.getPopperConfig();return u.default.createElement(f.OverlayTrigger,{placement:"top",overlay:a,popperConfig:i},u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.deleteClick(n.id)},href:"",className:"table-btn"},u.default.createElement(g.default,{name:"remove"})))}return null},C=function(t,n,r){var a=e.writeAccess?"edit":"view",i=e.writeAccess?"pencil":"search-plus",l=u.default.createElement(f.Tooltip,{id:"segment-edit-tooltip-"+n.id},a),o=m.getPopperConfig();return u.default.createElement(f.OverlayTrigger,{placement:"top",overlay:l,popperConfig:o},u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id)},href:"",className:"table-btn"},u.default.createElement(g.default,{name:i})))};function O(e){switch(p.get(e,"consequence.action")){case"REQUIRED":return"bid";case"LIMIT_BID":return"bid no more than "+p.get(e,"consequence.limitBid")+"â‚¬";case"NO_BID":return"no bid"}}var x,I=function(){var t=h.getLastPage(e.records,o);return a>t?t:a},N=c.Search.SearchBar,A=[{dataField:"segmentId",text:"#",hidden:!0},{dataField:"df1",isDummyField:!0,text:"",formatter:C,headerStyle:{width:"30px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:P,headerStyle:{width:"30px"}},{dataField:"displayName",text:"Name",sort:!0,onSort:_,sortCaret:h.columnSort},{dataField:"type",text:"Type",sort:!0,onSort:_,sortCaret:h.columnSort},{dataField:"lastEvent",text:"Active",sort:!0,onSort:_,sortCaret:h.columnSort,formatter:h.segmentActiveFormatter},{dataField:"targeting",text:"Targeting",sort:!0,onSort:_,sortCaret:h.columnSort},{dataField:"period",text:"Period",sort:!0,onSort:_,sortCaret:h.columnSort}],j=(x=e.segments.reduce((function(e,t){return e[t.id]=t,e}),{}),e.records.map((function(e,t){var n,r,a,i,l=x[e.segmentId];return{id:t,segmentId:e.segmentId,displayName:e.displayName,type:p.get(l,"type",""),lastEvent:p.get(l,"lastEvent"),targeting:O(e),period:(n=e,r=p.get(n,"addedInPast.timeUnit",""),a=p.get(n,"addedInPast.time"),i=r.toLowerCase(),a>1&&(i+="s"),a+" "+i)}})));return u.default.createElement(c.default,{keyField:"id",data:j,columns:A,search:!0},(function(e){return u.default.createElement("div",null,u.default.createElement("div",{className:"search-label-container"},u.default.createElement(g.default,{name:"search"}),u.default.createElement(N,r({},e.searchProps,{placeholder:"Filter records",tableId:t}))),u.default.createElement(s.default,r({},e.baseProps,{classes:"table-borderless",id:t,bordered:!1,hover:!0,striped:!0,keyField:"id",data:j,columns:A,defaultSorted:[y],pagination:d.default({page:I(),sizePerPage:o,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:(e.records||[]).length}],onPageChange:w,onSizePerPageChange:S})})))}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(9)),c=l(n(37)),d=i(n(1)),f=i(n(7)),p=i(n(21));t.default=function(e){var t=o.useState(-1),n=t[0],r=t[1],a=o.useState(""),i=a[0],l=a[1],m=o.useState("REQUIRED"),h=m[0],g=m[1],v=o.useState(null),b=v[0],y=v[1],E=o.useState(30),_=E[0],w=E[1],S=o.useState("DAY"),P=S[0],C=S[1],O=o.useState({error:!1,message:""}),x=O[0],I=O[1],N=o.useState({error:!1,message:""}),A=N[0],j=N[1];var M=e.segments.map((function(e){return{value:e.id,label:e.name}})),k=p.ruleBidOptions(),F=p.timeUnitOptions(),D=A.error?"form-control is-invalid":"form-control";return o.default.createElement(u.Modal,{size:"lg",show:e.show,onHide:e.onClose,onEntering:function(){e.segmentRule?(r(d.get(e,"segmentRule.segmentId")),l(d.get(e,"segmentRule.displayName")),g(d.get(e,"segmentRule.consequence.action")),y(d.get(e,"segmentRule.consequence.limitBid",null)),w(d.get(e,"segmentRule.addedInPast.time",null))):(r(e.segments.length>0?e.segments[0].id:-1),l(e.segments.length>0?e.segments[0].name:""),g("REQUIRED"),y(null),w(30)),I({error:!1,message:""}),j({error:!1,message:""})},backdrop:"static"},o.default.createElement(u.Modal.Header,{closeButton:!0},o.default.createElement(u.Modal.Title,null,"Rule settings")),o.default.createElement(u.Modal.Body,null,o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement(u.Form.Group,null,o.default.createElement(s.default,{isDisabled:!!e.segmentRule||!e.writeAccess,inputId:"segment-rule-select",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:M.find((function(e){return e.value===n})),onChange:function(e){r(e.value),l(e.label)},options:M})))),o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-4 px-1"},o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Bid"),o.default.createElement(s.default,{inputId:"segment-bid-action",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isDisabled:!e.writeAccess,value:k.find((function(e){return e.value===h})),onChange:function(e){g(e.value),j({error:!1,message:""})},options:k}))),"LIMIT_BID"===h&&o.default.createElement("div",{className:"col-lg-8 px-1"},o.default.createElement(u.InputGroup,{style:{marginTop:"27px"}},o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"â‚¬")),o.default.createElement(c.default,{id:"segment-limit-bid",className:D,disabled:!e.writeAccess,value:b,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){var n=d.get(t,"floatValue"),r=f.limitBid(n,e.maxBidPrice);y(n),j(r)}}),A.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},A.message)))),o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-4 px-1"},o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Period"),o.default.createElement(u.Form.Control,{id:"segment-time",disabled:!e.writeAccess,required:!0,type:"number",min:"0",value:d.isNil(_)?"":_.toString(),isInvalid:x.error,onChange:function(e){var t=parseInt(e.target.value,10),n=f.native(e.target);w(t),I(n)}}),x.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},x.message))),o.default.createElement("div",{className:"col-lg-4 px-1"},o.default.createElement(u.Form.Group,{style:{marginTop:"28px"}},o.default.createElement(s.default,{inputId:"segment-time-unit",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isDisabled:!e.writeAccess,value:F.find((function(e){return e.value===P})),onChange:function(e){C(e.value)},options:F}))))),o.default.createElement(u.Modal.Footer,null,o.default.createElement(u.Button,{size:"sm",variant:"light",onClick:e.onClose},"CLOSE"),o.default.createElement(u.Button,{size:"sm",variant:"primary",disabled:!e.writeAccess,onClick:function(){var t={error:!1,message:""};if("LIMIT_BID"===h&&(t=f.limitBid(b,e.maxBidPrice)),j(t),!x.error&&!t.error){var r={segmentId:n,displayName:i,addedInPast:{time:_,timeUnit:P},consequence:p.getRuleConsequence(h,b)};e.onSubmit(e.index,r)}}},e.segmentRule?"UPDATE":"ADD")))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=o(n(14)),c=l(n(23)),d=o(n(17)),f=l(n(1)),p=l(n(15)),m=o(n(3));t.default=function(e){var t="campaign-dasegments-table",n=u.useState(1),a=n[0],i=n[1],l=u.useState(30),o=l[0],h=l[1],g=u.useState({dataField:"id",order:"desc"}),v=g[0],b=g[1],y=[{dataField:"name",text:"Name",sort:!0,onSort:_,sortCaret:p.columnSort},{dataField:"cpm",text:"CPM price (cents)",sort:!0,onSort:_,sortCaret:p.columnSort},{dataField:"action",text:"Action",sort:!0,onSort:_,sortCaret:p.columnSort},{dataField:"selected",text:"Selected segments",sort:!0,onSort:_,sortCaret:p.columnSort}],E=function(){var t=f.get(e,"digitalAudienceValues",[]),n=function e(t,n){return t.forEach((function(t){t.children&&t.children.length>0?e(t.children,n):n.push(t)})),n}(f.get(e,"daTargeting.children",[]),[]).filter((function(e){var n=f.get(e,"segmentId")||-1;return t.indexOf(n.toString())>-1})),r=f.groupBy(n,"attributeName"),a=[];return f.forEach(r,(function(e,t){var n=f.maxBy(e,"cpmPriceCents"),r=e.map((function(e){return e.name})).join(", ");a.push({name:t,cpm:f.get(n,"cpmPriceCents"),action:"bid",selected:r})})),a}(),_=function(e,t){b({dataField:e,order:t})},w=function(e,t){i(e)},S=function(e,t){h(e)};var P=c.Search.SearchBar;return u.default.createElement(c.default,{keyField:"id",data:E,columns:y,search:!0},(function(e){return u.default.createElement("div",null,u.default.createElement("div",{className:"search-label-container"},u.default.createElement(m.default,{name:"search"}),u.default.createElement(P,r({},e.searchProps,{placeholder:"Filter records",tableId:t}))),u.default.createElement(s.default,r({},e.baseProps,{classes:"table-borderless",id:t,bordered:!1,hover:!0,striped:!0,keyField:"id",data:E,columns:y,defaultSorted:[v],pagination:d.default({page:(n=p.getLastPage(E,o),a>n?n:a),sizePerPage:o,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:(e.records||[]).length}],onPageChange:w,onSizePerPageChange:S})})));var n}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(246)),c=i(n(1)),d=l(n(3));t.default=function(e){var t=o.useState([]),n=t[0],r=t[1],a=o.useState([]),i=a[0],l=a[1],f=function e(t){return t.map((function(t){var n={value:t.segmentId.toString(),label:t.name};return t.children&&t.children.length>0&&(n.children=e(t.children)),n}))}(c.get(e,"daTargeting.children",[]));return o.default.createElement(u.Modal,{size:"lg",show:e.show,onHide:e.onClose,onEntering:function(){var t=c.get(e,"digitalAudienceValues",[]),n=function(t){var n=t.map((function(t){return function e(t,n){if(t.segmentId.toString()===n)return[];if(t.children&&t.children.length>0)for(var r=0;r<t.children.length;r++){var a=e(t.children[r],n);if(a)return t.children[r].children&&t.children[r].children.length>0&&a.unshift(t.children[r].segmentId.toString()),a}return null}(e.daTargeting,t)}));return c.uniq(c.flatten(n))}(t);r(t),l(n)},backdrop:"static"},o.default.createElement(u.Modal.Header,{closeButton:!0},o.default.createElement(u.Modal.Title,null,"Rule settings")),o.default.createElement(u.Modal.Body,null,o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement(s.default,{icons:{check:o.default.createElement(d.default,{name:"check-square"}),uncheck:o.default.createElement(d.default,{name:"square-o"}),halfCheck:o.default.createElement(d.default,{name:"minus-square"}),expandClose:o.default.createElement(d.default,{name:"plus"}),expandOpen:o.default.createElement(d.default,{name:"minus"}),expandAll:null,collapseAll:null,parentClose:null,parentOpen:null,leaf:null},nodes:f,checked:n,expanded:i,onCheck:r,onExpand:l})))),o.default.createElement(u.Modal.Footer,null,o.default.createElement(u.Button,{size:"sm",variant:"light",onClick:e.onClose},"CLOSE"),o.default.createElement(u.Button,{size:"sm",variant:"primary",onClick:function(){e.onSubmit(n)}},"UPDATE")))}},function(e,t){e.exports=require("react-checkbox-tree")},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=l(n(57)),c=o(n(248));t.default=function(e){var t=u.useState(null),n=t[0],a=t[1],i=u.useState(!0),l=i[0],o=i[1],d={advancedRulesBox:n},f=l;u.useEffect((function(){var t=JSON.stringify({advancedRulesBox:null});JSON.stringify(d)!==t&&e.onChange(d)}),[JSON.stringify(d)]),u.useEffect((function(){e.onValidate(f)}),[f]);var p=s.getAdvancedRulesBoxProps(e.data,e.maxBidPrice,e.rights,e.user,(function(e,t){a(e),o(t)}));return u.default.createElement("div",{className:"row no-gutters"},u.default.createElement("div",{className:"col-lg-12"},u.default.createElement(c.default,r({},p))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=i(n(1)),f=i(n(8)),p=i(n(21)),m=i(n(57)),h=u(n(34)),g=u(n(97)),v=u(n(5)),b=u(n(3));t.default=function(e){var t=(e.advancedRules||[]).map((function(e){return!0})),n=s.useState({}),r=n[0],a=n[1],i=s.useState(e.advancedRules||[]),u=i[0],y=i[1],E=s.useState(t),_=E[0],w=E[1],S=s.useState("advertiser"),P=S[0],C=S[1],O=s.useState(e.advertiserId),x=O[0],I=O[1],N=s.useState("advertiser"),A=N[0],j=N[1],M=s.useState(!0),k=M[0],F=M[1],D=s.useState(0),T=D[0],R=D[1],B=f.attributeOptions(r),G={advancedRules:m.setNullIds(u)},L=_.indexOf(!1)<0;s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(l){switch(l.label){case 0:return F(!0),n={scope:"campaign",scopeId:e.id,video:e.videoCampaign?"true":"false"},[4,m.getTargetingAttributes(n)];case 1:return r=l.sent(),a(r),e.rights.MANAGE_LISTS?[4,p.getListModalMaxLevel(e.user,e.advertiserId)]:[3,3];case 2:i=l.sent(),j(i),C("advertiser"),I(e.advertiserId),l.label=3;case 3:return y(e.advancedRules||[]),w(t),F(!1),[2]}}))}))}()}),[e.id]),s.useEffect((function(){e.onChange(G,L)}),[JSON.stringify(G),L]);var V=function(e,t,n){var r=d.cloneDeep(u);r[e]=t;var a=_.concat();a[e]=n,y(r),w(a)},z=function(e){var t=d.cloneDeep(u),n=_.concat();t.length>0&&n.length>0&&(t.splice(e,1),n.splice(e,1)),y(t),w(n)},q=e.rights.MANAGE_CAMPAIGN||!1;return s.default.createElement(h.default,{title:"Advanced rules"},s.default.createElement(v.default,{visible:k}),!k&&s.default.createElement(s.Fragment,null,u.map((function(t,n){return s.default.createElement(g.default,{key:t.ruleId,index:n,rule:t,campaignId:e.id,strategyId:"advanced-rules",attributes:B,writeAccess:q,createLists:e.rights.MANAGE_LISTS,listModalScope:P,listModalScopeId:x,listModalMaxLevel:A,maxBidPrice:e.maxBidPrice,onDelete:z,onChange:V})})),s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 pr-2 pb-2 pt-3"},s.default.createElement("div",{className:"pull-right"},s.default.createElement(c.Button,{disabled:!q,size:"sm",variant:"primary",onClick:function(){var e,t,n=d.cloneDeep(u);n.push((e=f.firstGroupSelectOption(B),R(t=T-1),{ruleId:t,attribute:e.value,condition:{values:[],displayNames:[]},consequence:{action:"REQUIRED"}}));var r=_.concat();r.push(!0),y(n),w(r)}},s.default.createElement(b.default,{name:"plus"})," CREATE ADVANCED RULE"))))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(37)),c=l(n(9)),d=i(n(1)),f=i(n(57)),p=i(n(7));t.default=function(e){var t=d.get(e,"consequence.action"),n=d.get(e,"consequence.limitBid"),r=d.get(e,"consequence.increaseBidPercentage"),a=d.get(e,"consequence.decreaseBidPercentage"),i=o.useState({error:!1,message:""}),l=i[0],m=i[1],h=o.useState({error:!1,message:""}),g=h[0],v=h[1],b=o.useState({error:!1,message:""}),y=b[0],E=b[1];o.useEffect((function(){if("LIMIT_BID"===t){var r=p.limitBid(n,e.maxBidPrice);E(r),e.onChange(e.consequence,!r.error)}}),[e.maxBidPrice]);var _=y.error?"form-control is-invalid":"form-control";return o.default.createElement(o.Fragment,null,o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Bid"),o.default.createElement(c.default,{isDisabled:!e.writeAccess,inputId:"strategy-rule-consequence-"+e.strategyId+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",name:"consequence-select",value:e.options.find((function(e){return e.value===t})),clearable:!1,onChange:function(t){var i=t.value;if("REQUIRED"===i||"NO_BID"===i)e.onChange({action:i},!0);else if("LIMIT_BID"===i){var l=p.limitBid(n,e.maxBidPrice);E(l),e.onChange({action:i},!l.error)}else if("INCREASE_BID_PERCENTAGE"===i){var o=p.required(d.toString(r));m(o),e.onChange({action:i},!o.error)}else if("DECREASE_BID_PERCENTAGE"===i){var u=p.required(d.toString(a));v(u),e.onChange({action:i},!u.error)}},options:e.options})),"LIMIT_BID"===t&&o.default.createElement(u.InputGroup,null,o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"â‚¬")),o.default.createElement(s.default,{disabled:!e.writeAccess,id:"strategy-rule-limit-bid-"+e.strategyId+"-"+e.index,className:_,value:n,thousandSeparator:!0,allowNegative:!1,allowLeadingZeros:!1,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(n){var r=d.get(n,"floatValue"),a=f.getRuleConsequence(t,r),i=p.limitBid(r,e.maxBidPrice);E(i),e.onChange(a,!i.error)}}),y.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},y.message)),"INCREASE_BID_PERCENTAGE"===t&&o.default.createElement(u.InputGroup,null,o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"%")),o.default.createElement(u.Form.Control,{disabled:!e.writeAccess,id:"strategy-rule-increase-bid-"+e.strategyId+"-"+e.index,required:!0,type:"number",min:"0",max:"10000",step:"0.01",isInvalid:l.error,value:d.toString(r),onChange:function(n){var r=""!==n.target.value.trim()?parseFloat(n.target.value):null,a=p.native(n.target),i=f.getRuleConsequence(t,r);m(a),e.onChange(i,!a.error)}}),l.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},l.message)),"DECREASE_BID_PERCENTAGE"===t&&o.default.createElement(u.InputGroup,null,o.default.createElement(u.InputGroup.Prepend,null,o.default.createElement(u.InputGroup.Text,null,"%")),o.default.createElement(u.Form.Control,{disabled:!e.writeAccess,id:"strategy-rule-decrease-bid-"+e.strategyId+"-"+e.index,required:!0,type:"number",min:"0",max:"100",step:"0.01",isInvalid:g.error,value:d.toString(a),onChange:function(n){var r=""!==n.target.value.trim()?parseFloat(n.target.value):null,a=p.native(n.target),i=f.getRuleConsequence(t,r);v(a),e.onChange(i,!a.error)}}),g.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},g.message)))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(0)),s=l(n(21)),c=o(n(251)),d=o(n(252)),f=o(n(253)),p=o(n(254)),m=o(n(255)),h=o(n(256)),g=o(n(257)),v=o(n(258));t.default=function(e){var t=s.getEntityAttributes();return"userInteraction"===e.attribute?u.default.createElement(v.default,r({},e)):"postalCode"===e.attribute?u.default.createElement(h.default,r({},e)):"cityDistance"===e.attribute?u.default.createElement(d.default,r({},e)):"ip"===e.attribute?u.default.createElement(m.default,r({},e)):"gps"===e.attribute||"gpsHyperLocal"===e.attribute?u.default.createElement(p.default,r({},e)):t.indexOf(e.attribute)>-1?u.default.createElement(f.default,r({},e)):"segment"===e.attribute?u.default.createElement(g.default,r({},e)):u.default.createElement(c.default,r({},e))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=i(n(1)),f=i(n(7)),p=i(n(21)),m=u(n(19)),h=i(n(20)),g=i(n(4)),v=u(n(48)),b=u(n(72)),y=u(n(73));t.default=function(e){var t=s.useState(!1),n=t[0],r=t[1],a=s.useState(!1),i=a[0],u=a[1],E=s.useState({error:!1,message:""}),_=E[0],w=E[1],S=s.useRef(null),P=d.get(e,"condition.values",[]),C=d.get(e,"condition.displayNames",[]),O=p.attributeValueNameSelectOptions({values:P,displayNames:C});s.useEffect((function(){var t=f.required(P);w(t),e.onChange(e.condition,!t.error)}),[]);var x=e.isList?"react-select-container multiple bordered":"react-select-container multiple";return s.default.createElement(s.Fragment,null,s.default.createElement(c.Form.Group,null,s.default.createElement(c.Form.Label,null,e.attributeName),s.default.createElement(v.default,{id:"strategy-rule-condition-attrvalues-"+e.strategyId+"-"+e.index,writeAccess:e.writeAccess,url:"/api/targeting/suggestion/advanced/campaign/"+e.campaignId+"/attribute/"+e.attribute,creatable:e.acceptAnyValue,classNames:x,values:O,onChange:function(t){var n=(t||[]).map((function(e){return e.value})),r=function(t){return e.acceptAnyValue?(t||[]).map((function(e){return e.value})):(t||[]).map((function(e){return e.label}))}(t),a=f.required(n),i=d.assign({},e.condition,{values:n,displayNames:r});e.onChange(i,!a.error),w(a)}}),!e.isList&&e.listsAllowed&&s.default.createElement("ul",{className:"rule-link-list"},s.default.createElement("li",null,s.default.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),r(!0)}},"Edit as text")),e.createLists&&s.default.createElement("li",null,s.default.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),u(!0)}},"Create list like this"))),_.error&&s.default.createElement(c.Form.Control.Feedback,{type:"invalid",style:{display:"block"}},_.message)),s.default.createElement(b.default,{show:n,attribute:e.attribute,attributeDisplayName:e.attributeName,writeAccess:e.writeAccess,values:P,onClose:function(){r(!1)},onSubmit:function(t){r(!1);var n=d.assign({},e.condition,{values:t,displayNames:t});w({error:!1,message:""}),e.onChange(n,!0)}}),e.createLists&&s.default.createElement(s.Fragment,null,s.default.createElement(y.default,{show:i,list:null,attribute:e.attribute,attributeDisplayName:e.attributeName,acceptAnyValue:e.acceptAnyValue,rights:{MANAGE_LISTS:e.createLists},scope:e.listModalScope,scopeId:e.listModalScopeId,maxLevel:e.listModalMaxLevel,attributeValues:P,onClose:function(){return u(!1)},onSubmit:function(e,t){return l(void 0,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=d.pick(t,"scope","name","description","attributeValues","attribute"),[4,g.Post({path:"/api/lists",body:e})];case 1:return n.sent(),u(!1),S.current.addNotification(h.success(s.default.createElement("span",null,"List ",s.default.createElement("strong",null,t.name)," created."),!1)),[3,3];case 2:return n.sent(),u(!1),S.current.addNotification(h.error("Error creating list.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(m.default,{ref:S})))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=i(n(1)),c=i(n(7)),d=i(n(21)),f=l(n(48));t.default=function(e){var t=o.useState({error:!1,message:""}),n=t[0],r=t[1],a=o.useState({error:!1,message:""}),i=a[0],l=a[1],p=s.get(e,"condition.values",[]),m=s.get(e,"condition.displayNames",[]),h=s.get(e,"condition.radius",0),g=d.attributeValueNameSelectOptions({values:p,displayNames:m});o.useEffect((function(){var t=c.required(p);r(t),e.onChange(e.condition,!t.error)}),[]);return o.default.createElement(o.Fragment,null,o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"City"),o.default.createElement(f.default,{id:"strategy-rule-condition-cities-"+e.strategyId+"-"+e.index,writeAccess:e.writeAccess,url:"/api/targeting/suggestion/advanced/campaign/"+e.campaignId+"/attribute/"+e.attribute,placeholder:"",values:g,onChange:function(t){var n=(t||[]).map((function(e){return e.value})),a=(t||[]).map((function(e){return e.label})),l=c.required(n),o=s.assign({},e.condition,{values:n,displayNames:a,radius:h});e.onChange(o,!(l.error||i.error)),r(l)}}),n.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid",style:{display:"block"}},n.message)),o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Target around these cities (radius in km)"),o.default.createElement(u.Form.Control,{id:"strategy-rule-condition-radius-"+e.strategyId+"-"+e.index,type:"number",min:"0",step:"0.01",disabled:!e.writeAccess,isInvalid:i.error,value:s.toString(h),onChange:function(t){var r=""!==t.target.value.trim()?parseFloat(t.target.value):0,a=c.native(t.target),i=s.assign({},e.condition,{values:p,displayNames:m,radius:r});e.onChange(i,!(n.error||a.error)),l(a)}}),i.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},i.message)))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=i(n(1)),c=i(n(21)),d=l(n(48));t.default=function(e){var t=o.useState({error:!1,message:""}),n=t[0],r=t[1],a=c.attributeIdValuesSelectOptions(e.condition);o.useEffect((function(){var t=s.get(e,"condition.ids",[]).length>0?{error:!1,message:""}:{error:!0,message:"Please fill out this field."};r(t),e.onChange(e.condition,!t.error)}),[]);var i=e.isList?"react-select-container multiple bordered":"react-select-container multiple";return o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,e.attributeName),o.default.createElement(d.default,{id:"strategy-rule-condition-entities-"+e.strategyId+"-"+e.index,writeAccess:e.writeAccess,url:"/api/targeting/suggestion/advanced/campaign/"+e.campaignId+"/attribute/"+e.attribute,creatable:!1,classNames:i,values:a,onChange:function(t){var n=(t||[]).map((function(e){return parseInt(e.value)})),a=(t||[]).map((function(e){return e.label})),i=(n||[]).length>0?{error:!1,message:""}:{error:!0,message:"Please fill out this field."},l=s.assign({},e.condition,{ids:n,displayNames:a});e.onChange(l,!i.error),r(i)}}),n.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid",style:{display:"block"}},n.message))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(38)),c=i(n(1)),d=i(n(7)),f=i(n(21));t.default=function(e){var t=o.useState({error:!1,message:""}),n=t[0],r=t[1],a=o.useState({error:!1,message:""}),i=a[0],l=a[1],p=c.get(e,"condition.locations",[]),m=f.gpsLocationsSelectOptions(p),h=c.get(e,"condition.radius",0);function g(e){var t=[];return e.forEach((function(e){var n=!1,r=e.split(",");if(2===r.length&&(n=r.every((function(e){return!isNaN(parseFloat(e))}))),n){var a={latitude:c.round(parseFloat(r[0]),6),longitude:c.round(parseFloat(r[1]),6)};t.push(a)}})),t}o.useEffect((function(){var t=p.length>0?{error:!1,message:""}:{error:!0,message:"Please fill out this field."};r(t),e.onChange(e.condition,!t.error)}),[]);return o.default.createElement(o.Fragment,null,o.default.createElement(u.Form.Group,{style:{marginTop:"26px"}},o.default.createElement(s.default,{className:"react-select-container",inputId:"strategy-rule-condition-gps-"+e.strategyId+"-"+e.index,classNamePrefix:"react-select",placeholder:"latitude,longitude",isClearable:!0,isDisabled:!e.writeAccess,isMulti:!0,value:m,onChange:function(t,n){if("create-option"===n.action){if(t.length>0){var a=g(t[t.length-1].value.split(/[\s]+/)),l=(f=p.concat(a)).length>0?{error:!1,message:""}:{error:!0,message:"Please fill out this field."};if(a.length>0){var o=c.assign({},e.condition,{locations:f});e.onChange(o,!(i.error||l.error))}r(l)}}else{var u=(t||[]).map((function(e){return e.value})),s=d.required(u),f=g(u);o=c.assign({},e.condition,{locations:f});e.onChange(o,!(i.error||s.error)),r(s)}}}),n.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid",style:{display:"block"}},n.message)),o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Radius (km)"),o.default.createElement(u.Form.Control,{id:"strategy-rule-condition-gps-radius-"+e.strategyId+"-"+e.index,type:"number",min:"0",step:"0.01",disabled:!e.writeAccess,isInvalid:i.error,value:c.toString(h),onChange:function(t){var r=""!==t.target.value.trim()?parseFloat(t.target.value):0,a=d.native(t.target),i=c.assign({},e.condition,{radius:r});e.onChange(i,!(n.error||a.error)),l(a)}}),i.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},i.message)))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(38)),c=i(n(1)),d=i(n(22)),f=i(n(7)),p=i(n(21));t.default=function(e){var t=o.useState({error:!1,message:""}),n=t[0],r=t[1],a=o.useState(""),i=a[0],l=a[1],m=c.get(e,"condition.values",[]),h=c.get(e,"condition.displayNames",[]),g=p.attributeValueNameSelectOptions({values:m,displayNames:h});o.useEffect((function(){var t=f.required(m);r(t),e.onChange(e.condition,!t.error)}),[]);return o.default.createElement(o.Fragment,null,o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Ip address"),o.default.createElement(s.default,{className:"react-select-container",inputId:"strategy-rule-condition-ip-"+e.strategyId+"-"+e.index,classNamePrefix:"react-select",placeholder:"e.g. 123.123.123.123 or 123.123.123.*",isClearable:!0,isDisabled:!e.writeAccess,isMulti:!0,value:g,onChange:function(t,n){if("create-option"===n.action){if(t.length>0){var a=t[t.length-1].value.split(/[\s,]+/),i=c.partition(a,(function(e){return d.isValidIp(e)})),o=i[0],u=i[1],s=u.length>0?'Incorrect ip format for "'+u.join(",")+'"':"";l(s);var p=m.concat(o),h=f.required(p);if(r(h),o.length>0){var g=c.assign({},e.condition,{values:p,displayNames:p});e.onChange(g,!h.error)}}}else{l("");p=(t||[]).map((function(e){return e.value}));var v=(t||[]).map((function(e){return e.label}));h=f.required(p),g=c.assign({},e.condition,{values:p,displayNames:v});e.onChange(g,!h.error),r(h)}}}),""!==i&&o.default.createElement("div",{className:"text-warning pt-2"},i),n.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid",style:{display:"block"}},n.message)))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(9)),c=l(n(38)),d=i(n(1)),f=i(n(22)),p=i(n(7)),m=i(n(21));t.default=function(e){var t=o.useState({error:!1,message:""}),n=t[0],r=t[1],a=f.countries(),i=d.get(e,"condition.countryCode","NL"),l=d.get(e,"condition.values",[]),h=d.get(e,"condition.displayNames",[]),g=m.attributeValueNameSelectOptions({values:l,displayNames:h});o.useEffect((function(){var t=p.required(l);r(t);var n=d.assign({},e.condition,{countryCode:i});e.onChange(n,!t.error)}),[]);return o.default.createElement(o.Fragment,null,o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Country"),o.default.createElement(s.default,{inputId:"strategy-rule-condition-postalcode-country-"+e.strategyId+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",isDisabled:!e.writeAccess,onChange:function(t){var r=d.assign({},e.condition,{countryCode:t.value});e.onChange(r,!n.error)},value:a.find((function(e){return e.value===i})),options:a})),o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Postal codes"),o.default.createElement(c.default,{className:"react-select-container",inputId:"strategy-rule-condition-postalcode-values-"+e.strategyId+"-"+e.index,classNamePrefix:"react-select",placeholder:" ",isClearable:!0,isDisabled:!e.writeAccess,isMulti:!0,value:g,onChange:function(t,n){if("create-option"===n.action){if(t.length>0){var a=t[t.length-1].value.split(/[\s]+/),i=l.concat(a),o=h.concat(a),u=p.required(i),s=d.assign({},e.condition,{values:i,displayNames:o});e.onChange(s,!u.error),r(u)}}else{i=(t||[]).map((function(e){return e.value})),o=(t||[]).map((function(e){return e.label}));var c=p.required(i);s=d.assign({},e.condition,{values:i,displayNames:o});e.onChange(s,!c.error),r(c)}}}),n.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid",style:{display:"block"}},n.message)))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(9)),c=i(n(1)),d=i(n(7)),f=i(n(21)),p=l(n(48));t.default=function(e){var t=o.useState({error:!1,message:""}),n=t[0],r=t[1],a=o.useState({error:!1,message:""}),i=a[0],l=a[1],m=f.attributeIdValuesSelectOptions(e.condition),h=c.get(e,"condition.addedInPast.time"),g=c.get(e,"condition.addedInPast.timeUnit");o.useEffect((function(){var t=c.get(e,"condition.ids",[]);if(0===t.length){var n=t.length>0?{error:!1,message:""}:{error:!0,message:"Please fill out this field."};r(n);var a=c.assign({},e.condition,{addedInPast:{time:h||30,timeUnit:g||"DAY"}});e.onChange(a,!n.error)}}),[]);var v=f.timeUnitOptions();return o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,e.attributeName),o.default.createElement(p.default,{id:"strategy-rule-condition-segments-"+e.strategyId+"-"+e.index,writeAccess:e.writeAccess,url:"/api/targeting/suggestion/advanced/campaign/"+e.campaignId+"/attribute/"+e.attribute,creatable:!1,classNames:"react-select-container multiple",values:m,onChange:function(t){var n=(t||[]).map((function(e){return parseInt(e.value)})),a=(t||[]).map((function(e){return e.label})),l=(n||[]).length>0?{error:!1,message:""}:{error:!0,message:"Please fill out this field."},o=c.assign({},e.condition,{ids:n,displayNames:a});e.onChange(o,!l.error&&!i.error),r(l)}}),n.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid",style:{display:"block"}},n.message))),o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Period"),o.default.createElement(u.Form.Control,{id:"strategy-rule-condition-segments-time-"+e.strategyId+"-"+e.index,disabled:!e.writeAccess,required:!0,type:"number",min:"0",value:c.toString(h),isInvalid:i.error,onChange:function(t){var r=""!==t.target.value?parseInt(t.target.value,10):null,a=d.native(t.target),i=c.assign({},e.condition,{addedInPast:{time:r,timeUnit:g}});e.onChange(i,!n.error&&!a.error),l(a)}}),i.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},i.message))),o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Group,{style:{marginTop:"27px"}},o.default.createElement(s.default,{inputId:"strategy-rule-condition-segments-period-"+e.strategyId+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isDisabled:!e.writeAccess,value:v.find((function(e){return e.value===g})),onChange:function(t){var r=c.assign({},e.condition,{addedInPast:{time:h,timeUnit:t.value}});e.onChange(r,!n.error&&!i.error)},options:v}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(9)),c=i(n(1)),d=i(n(7)),f=i(n(21));t.default=function(e){var t,n=c.get(e,"condition.inPast.time",30),r=o.useState(c.get(e,"condition.event","IMPRESSION")),a=r[0],i=r[1],l=o.useState((t=c.get(e,"condition.sinceStartOf"),c.isUndefined(t)?"inPast":"sinceStartOf")),p=l[0],m=l[1],h=o.useState(n),g=h[0],v=h[1],b=o.useState(c.get(e,"condition.inPast.timeUnit","DAY")),y=b[0],E=b[1],_=o.useState(c.get(e,"condition.sinceStartOf","DAY")),w=_[0],S=_[1],P=o.useState(c.get(e,"condition.minimum",null)),C=P[0],O=P[1],x=o.useState({error:!1,message:""}),I=x[0],N=x[1],A=o.useState(d.required(c.toString(c.get(e,"condition.minimum",null)))),j=A[0],M=A[1];o.useEffect((function(){var t="sinceStartOf"===p?{minimum:C,event:a,sinceStartOf:w,doneBy:"CAMPAIGN"}:{minimum:C,event:a,inPast:{time:g,timeUnit:y},doneBy:"CAMPAIGN"},n="sinceStartOf"===p?!j.error:!(j.error||I.error);e.onChange(t,n)}),[JSON.stringify({eventType:a,radioValue:p,time:g,timeUnit:y,sinceStartOf:w,minimum:C,timeValidation:I,minimumValidation:j})]);var k=function(e){if(e.target.checked){var t=e.target.value;m(t)}},F=[{value:"IMPRESSION",label:"Impression"},{value:"CLICK",label:"Click"},{value:"CONVERSION",label:"Conversion"}],D=[{value:"inPast",label:"Last x time"},{value:"sinceStartOf",label:"Since fixed time"}],T=f.timeUnitOptions(),R=[{value:"DAY",label:"Today"},{value:"WEEK",label:"Start of week"},{value:"MONTH",label:"Start of month"},{value:"ALL",label:"Start of campaign"}];return o.default.createElement(o.Fragment,null,o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Event type"),o.default.createElement(s.default,{inputId:"strategy-rule-condition-ui-event-type-"+e.strategyId+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",isDisabled:!e.writeAccess,name:"strategy-rule-condition-ui-event-type",value:F.find((function(e){return e.value===a})),clearable:!1,onChange:function(e){i(e.value)},options:F})),o.default.createElement(u.Form.Group,{className:"pt-1"},D.map((function(t,n){return o.default.createElement(u.Form.Check,{inline:!0,id:"strategy-rule-condition-ui-radio-"+e.strategyId+"-"+e.index+"-"+t.value,type:"radio",value:t.value,disabled:!e.writeAccess,name:"strategy-rule-condition-ui-radio-"+e.strategyId+"-"+e.index,checked:t.value===p,onChange:k,label:t.label})}))))),"inPast"===p&&o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Period"),o.default.createElement(u.Form.Control,{id:"strategy-rule-condition-ui-inpast-time-"+e.strategyId+"-"+e.index,disabled:!e.writeAccess,required:!0,type:"number",min:"0",value:c.toString(g),isInvalid:I.error,onChange:function(e){var t=""!==e.target.value?parseInt(e.target.value,10):null,n=d.native(e.target);v(t),N(n)}}),I.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},I.message))),o.default.createElement("div",{className:"col-lg-6 px-1"},o.default.createElement(u.Form.Group,{style:{marginTop:"27px"}},o.default.createElement(s.default,{inputId:"strategy-rule-condition-ui-inpast-period-"+e.strategyId+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isDisabled:!e.writeAccess,value:T.find((function(e){return e.value===y})),onChange:function(e){E(e.value)},options:T})))),"sinceStartOf"===p&&o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Period"),o.default.createElement(s.default,{inputId:"strategy-rule-condition-ui-since-period-"+e.strategyId+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",isDisabled:!e.writeAccess,value:R.find((function(e){return e.value===w})),clearable:!1,onChange:function(e){S(e.value)},options:R})))),o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-12 px-1"},o.default.createElement(u.Form.Group,null,o.default.createElement(u.Form.Label,null,"Number of events within time period"),o.default.createElement(u.Form.Control,{id:"strategy-rule-condition-ui-minimum-"+e.strategyId+"-"+e.index,disabled:!e.writeAccess,required:!0,type:"number",min:"0",value:c.toString(C),isInvalid:j.error,onChange:function(e){var t=""!==e.target.value?parseInt(e.target.value,10):null,n=d.native(e.target);O(t),M(n)}}),j.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},j.message)))))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=l(n(57)),c=o(n(260));t.default=function(e){var t=u.useState(null),n=t[0],a=t[1],i=u.useState(!0),l=i[0],o=i[1],d={substrategiesBox:n},f=l;u.useEffect((function(){var t=JSON.stringify({substrategiesBox:null});JSON.stringify(d)!==t&&e.onChange(d)}),[JSON.stringify(d)]),u.useEffect((function(){e.onValidate(f)}),[f]);var p=s.getSubstrategiesBoxProps(e.data,e.maxBidPrice,e.rights,e.user,(function(e,t){a(e),o(t)}));return u.default.createElement("div",{className:"row no-gutters"},u.default.createElement(c.default,r({},p)))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=i(n(1)),f=i(n(8)),p=i(n(21)),m=i(n(57)),h=u(n(32)),g=u(n(261)),v=u(n(5)),b=u(n(3));t.default=function(e){var t,n,r=(e.strategies||[]).map((function(e){return!0})),a=(e.strategies||[]).map((function(e){return(e.rules||[]).map((function(e){return!0}))})),i=s.useState(e.distributeUsers),u=i[0],y=i[1],E=s.useState(e.redistributeBudget),_=E[0],w=E[1],S=s.useState(e.useDataFeed),P=S[0],C=S[1],O=s.useState({}),x=O[0],I=O[1],N=s.useState(e.strategies),A=N[0],j=N[1],M=s.useState(r),k=M[0],F=M[1],D=s.useState(a),T=D[0],R=D[1],B=s.useState("advertiser"),G=B[0],L=B[1],V=s.useState(e.advertiserId),z=V[0],q=V[1],Y=s.useState("advertiser"),U=Y[0],H=Y[1],W=s.useState(!0),J=W[0],X=W[1],K=f.attributeOptions(x),Z={distributeUsers:u,redistributeBudget:_,useDataFeed:P,strategies:Q(A)},$=(t=k.indexOf(!1)<0,n=d.flatten(T).indexOf(!1)<0,t&&n);function Q(e){return e.map((function(e){var t=m.setNullIds(e.rules);return d.assign({},e,{rules:t})}))}s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n,i;return o(this,(function(l){switch(l.label){case 0:return X(!0),y(e.distributeUsers),w(e.redistributeBudget),j(e.strategies),F(r),R(a),t={scope:"campaign",scopeId:e.id,video:e.videoCampaign?"true":"false"},[4,m.getTargetingAttributes(t)];case 1:return n=l.sent(),I(n),e.rights.MANAGE_LISTS?[4,p.getListModalMaxLevel(e.user,e.advertiserId)]:[3,3];case 2:i=l.sent(),H(i),L("advertiser"),q(e.advertiserId),l.label=3;case 3:return X(!1),[2]}}))}))}()}),[e.id]),s.useEffect((function(){e.onChange(Z,$)}),[JSON.stringify(Z),$]);var ee=function(e,t,n){var r=d.cloneDeep(A);r[e]=t;var a=k.concat();a[e]=n,console.log(JSON.stringify(t)),j(r),F(a)},te=function(e){var t=d.cloneDeep(A),n=k.concat(),r=T.concat();t.splice(e,1),n.splice(e,1),r.splice(e,1),j(t),F(n),R(r)},ne=function(e,t,n,r){var a=d.cloneDeep(A);a[e].rules[t]=n;var i=T.concat();i[e][t]=r,j(a),R(i)},re=function(e,t){var n=d.cloneDeep(A),r=T.concat();n[e].rules.splice(t,1),j(n),r[e].splice(t,1),R(r)},ae=function(e,t){var n=d.cloneDeep(A),r=T.concat();n[e].rules.push(t),j(n),r[e].push(!0),R(r)},ie=e.rights.MANAGE_CAMPAIGN||!1;return s.default.createElement(s.Fragment,null,s.default.createElement(v.default,{visible:J}),!J&&s.default.createElement(s.Fragment,null,s.default.createElement("div",{className:"col-lg-12 pb-3"},s.default.createElement("h5",null,"Sub-strategies and A/B testing")),s.default.createElement("div",{className:"col-lg-12"},s.default.createElement(h.default,{id:"settings-strategies-distribute-users",checked:u,disabled:!ie,onChange:y},"A/B testing (Distribute users using budget percentages)"),s.default.createElement(h.default,{id:"settings-strategies-redistribute-budget",checked:!_,disabled:!ie,onChange:function(e){w(!e)}},"Do not redistribute unspent budget between sub-strategies"),s.default.createElement(h.default,{id:"settings-strategies-use-datafeeds",checked:P,disabled:!ie,onChange:C}," Allow data feeds in strategies")),s.default.createElement("div",{className:"col-lg-12"},A.map((function(t,n){var r,a;return s.default.createElement(g.default,{index:n,campaignId:e.id,strategy:t,attributes:K,writeAccess:ie,createLists:e.rights.MANAGE_LISTS,listModalScope:G,listModalScopeId:z,listModalMaxLevel:U,maxBidPrice:e.maxBidPrice,useDataFeeds:P,dynamicFeeds:e.dataFeeds,dynamicFeedId:null===(r=null==t?void 0:t.datafeed)||void 0===r?void 0:r.id,dynamicFeedKey:null===(a=null==t?void 0:t.datafeed)||void 0===a?void 0:a.key,onChange:ee,onDelete:te,onRuleChange:ne,onRuleDelete:re,onRuleAdd:ae})}))),s.default.createElement("div",{className:"col-lg-12 text-center"},s.default.createElement(c.Button,{variant:"primary",size:"sm",className:"mr-2",disabled:!ie,onClick:function(){if(0===A.length){j([{name:"A",percentage:50,rules:[]},{name:"B",percentage:50,rules:[]}]),F([!0,!0]),R([[],[]])}else{var e=d.cloneDeep(A);e.push({name:"",percentage:null,rules:[]}),j(e);var t=k.concat();t.push(!0),F(t);var n=T.concat();n.push([]),R(n)}}},s.default.createElement(b.default,{name:"plus"})," CREATE SUB-STRATEGY"))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(0)),s=n(2),c=i(n(1)),d=i(n(8)),f=i(n(7)),p=o(n(3)),m=o(n(97)),h=o(n(9));t.default=function(e){var t=u.useState({error:!1,message:""}),n=t[0],r=t[1],a=u.useState({error:!1,message:""}),i=a[0],o=a[1],g=u.useState(0),v=g[0],b=g[1],y=c.get(e,"strategy.name"),E=c.get(e,"strategy.percentage"),_=c.get(e,"strategy.rules",[]),w=c.get(e,"strategy.datafeed.key"),S=c.get(e,"strategy.datafeed.id"),P=l([{label:"None",value:null}],e.dynamicFeeds.map((function(e){return{label:e.name,value:e.id}})));u.useEffect((function(){var t=f.required(y||""),n=f.required(c.toString(E));r(t),o(n),e.onChange(e.index,e.strategy,!(t.error||n.error))}),[]);var C=function(t,n,r){e.onRuleChange(e.index,t,n,r)},O=function(t){e.onRuleDelete(e.index,t)};return u.default.createElement("div",{className:"strategy mb-2"},u.default.createElement("div",{className:"card"},u.default.createElement("div",{className:"card-header"},u.default.createElement("div",{className:"row no-gutters"},u.default.createElement("div",{className:"col-lg-6 px-2"},u.default.createElement(s.Form.Group,{controlId:"settings-strategies-name-"+e.index},u.default.createElement(s.Form.Label,null,"Strategy"),u.default.createElement(s.Form.Control,{type:"text",value:y,required:!0,disabled:!e.writeAccess,maxLength:64,isInvalid:n.error,onChange:function(t){var n=t.target.value,a=f.native(t.target),l=c.assign({},e.strategy,{name:n});e.onChange(e.index,l,!(a.error||i.error)),r(a)}}),n.error&&u.default.createElement(s.Form.Control.Feedback,{type:"invalid"},n.message))),u.default.createElement("div",{className:"col-lg-6 px-2"},u.default.createElement(s.Form.Label,null,"Apply to % budget"),u.default.createElement(s.InputGroup,null,u.default.createElement(s.InputGroup.Prepend,null,u.default.createElement(s.InputGroup.Text,null,"%")),u.default.createElement(s.Form.Control,{disabled:!e.writeAccess,id:"settings-strategies-percentage-"+e.index,required:!0,type:"number",min:"0",step:"0.01",isInvalid:i.error,value:c.toString(E),onChange:function(t){var r=""!==t.target.value.trim()?parseFloat(t.target.value):null,a=f.native(t.target),i=c.assign({},e.strategy,{percentage:r});e.onChange(e.index,i,!(n.error||a.error)),o(a)}}),i.error&&u.default.createElement(s.Form.Control.Feedback,{type:"invalid"},i.message)))),e.useDataFeeds?u.default.createElement("div",{className:"row no-gutters"},u.default.createElement("div",{className:"col-lg-6 px-2"},u.default.createElement(s.Form.Group,null,u.default.createElement(s.Form.Label,null,"Data feed"),u.default.createElement(h.default,{inputId:"strategy-rule-data-feed-"+e.index,isDisabled:!e.writeAccess,className:"react-select-container",classNamePrefix:"react-select",name:"data-feed-select",value:P.find((function(e){return e.value===S})),clearable:!1,options:P,onChange:function(t){var n,r=t.value,a=c.assign({},(null===(n=e.strategy)||void 0===n?void 0:n.datafeed)?e.strategy.datafeed:{},{id:r}),i=c.assign({},e.strategy,{datafeed:a});e.onChange(e.index,i,!0)}}),u.default.createElement(s.Form.Control.Feedback,{type:"invalid",style:{display:"block"}}))),u.default.createElement("div",{className:"col-lg-6 px-2"},u.default.createElement(s.Form.Group,{controlId:"settings-data-key-"+e.index},u.default.createElement(s.Form.Label,null,"Data key"),u.default.createElement(s.Form.Control,{type:"text",value:w,required:!1,disabled:!e.writeAccess,maxLength:64,placeholder:"Not fixed (dynamic)",onChange:function(t){var n,r=t.target.value,a=c.assign({},(null===(n=e.strategy)||void 0===n?void 0:n.datafeed)?e.strategy.datafeed:{},{key:""==r.trim()?null:r.trim()}),i=c.assign({},e.strategy,{datafeed:a});e.onChange(e.index,i,!0)}}),n.error&&u.default.createElement(s.Form.Control.Feedback,{type:"invalid"},n.message)))):null),u.default.createElement("div",{className:"card-body"},_.map((function(t,n){return u.default.createElement(m.default,{key:t.ruleId,index:n,rule:t,campaignId:e.campaignId,strategyId:"settings-strategies-"+e.index,attributes:e.attributes,writeAccess:e.writeAccess,createLists:e.createLists,maxBidPrice:e.maxBidPrice,listModalScope:e.listModalScope,listModalScopeId:e.listModalScopeId,listModalMaxLevel:e.listModalMaxLevel,onDelete:O,onChange:C})})),u.default.createElement("div",{className:"row no-gutters"},u.default.createElement("div",{className:"col-lg-12 pr-2 pb-2 pt-3"},u.default.createElement("div",{className:"pull-left"},u.default.createElement(s.Button,{size:"sm",variant:"secondary",disabled:!e.writeAccess,onClick:function(){e.onDelete(e.index)}},u.default.createElement(p.default,{name:"remove"})," DELETE SUB-STRATEGY")),u.default.createElement("div",{className:"pull-right"},u.default.createElement(s.Button,{size:"sm",variant:"primary",disabled:!e.writeAccess,onClick:function(){var t,n;e.onRuleAdd(e.index,(t=d.firstGroupSelectOption(e.attributes),b(n=v-1),{ruleId:n,attribute:t.value,condition:{values:[],displayNames:[]},consequence:{action:"REQUIRED"}}))}},u.default.createElement(p.default,{name:"plus"})," CREATE RULE")))))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=i(n(1)),f=u(n(29)),p=u(n(30)),m=u(n(31)),h=i(n(13)),g=u(n(12)),v=u(n(10)),b=u(n(26)),y=u(n(74)),E=u(n(16)),_=i(n(4)),w=i(n(8)),S=u(n(263)),P=u(n(98)),C=u(n(27)),O=u(n(3));t.default=function(){var e=c.useHistory(),t=c.useParams(),n=t.scope,r=t.scopeId,a=t.tab,i=s.useContext(g.default),u=i.data,x=i.updateReload,I=i.loading,N=i.updateLoading,A=h.getRights(u.rights),j=s.useContext(E.default),M=w.getMainRole(j),k=w.getVideoMode(j,M),F=s.useState(k),D=F[0],T=F[1],R=s.useState(!1),B=R[0],G=R[1],L=!("campaign"===n||"publisher"===n)||"publisher"===n&&"statistics"===a;if(A.VIEW_STATISTICS){if("campaign"===n){var V=d.get(u,"campaign"),z=function(){e.push(w.campaignSettingsLink("/settings/campaign/"+r+"/general"))};return s.default.createElement(s.Fragment,null,s.default.createElement(f.default,null,s.default.createElement("div",{className:"col-sm-9"},s.default.createElement(p.default,null),s.default.createElement(m.default,{id:"breadcrumb",minScope:"campaign"})),s.default.createElement("div",{className:"col-sm-3"},!I&&V&&s.default.createElement("div",{className:"pull-right",style:{marginRight:"10px"}},A.MANAGE_CAMPAIGN&&s.default.createElement(s.Fragment,null,s.default.createElement(P.default,{status:V.status,rights:A,isActive:V.isActive,startTime:V.startTime,endTime:V.endTime,onClick:function(){G(!0)}}),s.default.createElement("button",{className:"btn btn-linkbutton btn-sm ml-2",onClick:z},s.default.createElement(O.default,{name:"pencil"})," EDIT CAMPAIGN"),s.default.createElement(C.default,{message:"Update campaign status?",show:B,onClose:function(){return G(!1)},onConfirm:function(){return l(void 0,void 0,void 0,(function(){var e,t;return o(this,(function(n){switch(n.label){case 0:G(!1),n.label=1;case 1:return n.trys.push([1,3,,4]),N(!0),e=V.isActive?"deactivate":"activate",[4,_.Post({path:"/api/campaigns/"+V.id+"/"+e})];case 2:return n.sent(),x(!0),[3,4];case 3:return t=n.sent(),console.log("err",t),[3,4];case 4:return[2]}}))}))}})),!A.MANAGE_CAMPAIGN&&A.VIEW_CAMPAIGN&&s.default.createElement("button",{className:"btn btn-linkbutton btn-sm mr-2",onClick:z},s.default.createElement(O.default,{name:"search-plus"})," VIEW CAMPAIGN")))),s.default.createElement(b.default,{title:"Analytics"}),s.default.createElement(S.default,{videoMode:d.get(V,"videoCampaign")||!1}))}return s.default.createElement(s.Fragment,null,s.default.createElement(f.default,null,s.default.createElement("div",{className:"col-sm-9"},s.default.createElement(p.default,null),s.default.createElement(m.default,{id:"breadcrumb",minScope:"campaign"})),s.default.createElement("div",{className:"col-sm-3"},L&&s.default.createElement("div",{className:"pull-right"},s.default.createElement(y.default,{id:"video-mode",label:"Video mode",checked:D,onChange:function(e){T(e),w.storeVideoMode(j,M,e)}})))),s.default.createElement(b.default,{title:"Analytics"}),s.default.createElement(S.default,{videoMode:D}))}return s.default.createElement(v.default,{message:"Access forbidden"})}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(0)),l=n(6),o=a(n(264)),u=a(n(272));t.default=function(e){return"publisher"===l.useParams().scope?i.default.createElement(o.default,r({},e)):i.default.createElement(u.default,r({},e))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=n(6),c=n(2);n(63);var d=o(n(16)),f=o(n(12)),p=l(n(13)),m=l(n(8)),h=o(n(41)),g=o(n(99)),v=o(n(267)),b=o(n(270)),y=o(n(28));t.default=function(e){var t=s.useParams(),n=t.page,a=t.scope,i=t.scopeId,l=t.tab,o=u.useContext(f.default).data,E="/"+n+"/"+a+"/"+i,_="/:page/:scope/:scopeId",w=p.getRights(o.rights),S=u.useContext(d.default),P=u.useContext(y.default),C=P.daterange,O=P.attributeId,x=P.attributeId2,I=P.filters,N=P.opfilters,A=P.opgranularity,j=P.tgranularity,M=P.opmetric,k=P.tperiod,F=C.startDate.format("YYYY-MM-DD"),D=C.endDate.format("YYYY-MM-DD");var T,R,B={rights:w,user:S,data:o,options:(T=m.getSourceScope(a),"root"===a?{scope:T,startDate:F,endDate:D}:{scope:T,scopeId:i,startDate:F,endDate:D}),videoMode:e.videoMode},G=((R=new URLSearchParams("")).append("sd",F),R.append("ed",D),R.append("attributeId",O.toString()),R.append("attributeId2",x.toString()),I.forEach((function(e){R.append("filters[]",e)})),"?"+R.toString()),L=function(){var e=new URLSearchParams("");return e.append("sd",F),e.append("ed",D),e.append("opgranularity",A),e.append("opmetric",M),N.forEach((function(t){e.append("opfilters[]",t)})),"?"+e.toString()}(),V=function(){var e=new URLSearchParams("");return e.append("tgranularity",j),e.append("tperiod",k),"?"+e.toString()}();return u.default.createElement(u.Fragment,null,u.default.createElement("div",{className:"row page-tabs"},u.default.createElement(c.Nav,{as:"ul",variant:"tabs",defaultActiveKey:"/operational-dashboard"},u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:E+"/operational-dashboard"+L},"Operational dashboard")),u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:E+"/technical-dashboard"+V},"Technical dashboard")),u.default.createElement(c.Nav.Item,{as:"li"},u.default.createElement(s.NavLink,{activeClassName:"active",className:"nav-link",to:E+"/statistics"+G},"Statistics"))),u.default.createElement("div",{style:{marginRight:"25px"}},"technical-dashboard"!==l&&u.default.createElement(h.default,null))),u.default.createElement("div",{className:"row"},u.default.createElement(s.Switch,null,u.default.createElement(s.Redirect,{exact:!0,from:""+_,to:_+"/operational-dashboard"+L}),u.default.createElement(s.Route,{path:_+"/operational-dashboard"},u.default.createElement(v.default,r({},B))),u.default.createElement(s.Route,{path:_+"/technical-dashboard"},u.default.createElement(b.default,r({},B))),u.default.createElement(s.Route,{path:_+"/statistics"},u.default.createElement(g.default,r({},B))))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(78),d=i(n(1)),f=u(n(3)),p=i(n(15)),m=i(n(4));t.default=function(e){function t(){var t=$("#"+e.id);$.fn.DataTable.isDataTable("#"+e.id)&&t.DataTable().destroy()}function n(){if($.fn.DataTable.isDataTable("#"+e.id))for(var t=$("#"+e.id).DataTable(),n=function(){var t=e.metrics.map((function(t,n){return 0==n||e.checked.indexOf(t.col)>-1}));-1!==e.attributeId2&&t.unshift(!0);return t}(),r=function(r){t.column(r).visible(n[r]),$("#"+e.id).find("tr[data-parent]").each((function(){n[r]?$(this).find("td:eq("+r+")").removeClass("d-none"):$(this).find("td:eq("+r+")").addClass("d-none")}))},a=0;a<t.columns().nodes().length;a++)r(a)}function r(){var t=$("#"+e.id);t.off("click",".js-expand").on("click",".js-expand",(function(n){return l(this,void 0,void 0,(function(){var r,i,l,u,f,p,m,h,v,b;return o(this,(function(o){switch(o.label){case 0:return n.preventDefault(),(r=$(this)).data("loading")?[3,7]:(i=r.data("expanded"),l=r.closest("tr"),u=l.data("id"),f=t.find('tr[data-parent="'+u+'"]'),i?(r.attr("class","js-expand text-success"),r.find("i").attr("class","fa fa-plus-circle fa-lg"),f.hide(),$("#childrows-loading-"+u).closest("tr").remove(),[3,6]):[3,1]);case 1:return r.attr("class","js-expand text-danger"),r.find("i").attr("class","fa fa-minus-circle fa-lg"),f.length>0?(f.show(),[3,6]):[3,2];case 2:r.data("loading",!0),p=l.find("td").length,m="childrows-loading-"+d.kebabCase(u),l.after('<tr><td colspan="'+p+'"><div class="loading" id="'+m+'"></div></td></tr>'),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,a(u)];case 4:return h=o.sent(),$("#"+m).closest("tr").remove(),v=c.renderToStaticMarkup((y=h,E=u,_=l.attr("class"),(w=d.get(y,"statisticList",[])).length>0?s.default.createElement(s.Fragment,null,w.map((function(e,t){return s.default.createElement(g,{row:e,i:t,parent:E,rowClass:_})}))):s.default.createElement("tr",{className:_,"data-parent":E},s.default.createElement("td",null),s.default.createElement("td",{colSpan:e.checked.length+1},"No data")))),l.after(v),r.data("loading",!1),[3,6];case 5:return b=o.sent(),console.log(b),[3,6];case 6:r.data("expanded",!i),o.label=7;case 7:return[2]}var y,E,_,w}))}))}))}function a(t){var n={scope:e.options.scope,startDate:e.options.startDate,endDate:e.options.endDate,attributeId:e.attributeId,attributeId2:e.attributeId2,limit1:1,filter1:t,filter:e.filter};return d.isUndefined(e.options.scopeId)||(n.scopeId=e.options.scopeId),m.Get({path:"/api/statistics",qs:n})}function i(){return s.default.createElement("thead",null,s.default.createElement("tr",null,-1!==e.attributeId2&&s.default.createElement("th",null),e.metrics.map((function(e,t){return s.default.createElement("th",{key:"th-"+t},s.default.createElement("div",{className:"text-rotate"},s.default.createElement("span",null,e.label||e.col||"")))}))))}function u(){var t=d.get(e,"data.statisticList",[]);return s.default.createElement("tbody",null,t.map((function(e,t){return s.default.createElement(h,{row:e,i:t})})))}function h(t){return s.default.createElement("tr",{key:"tr-"+t.i,"data-id":t.row.name},-1!==e.attributeId2&&s.default.createElement("td",null,s.default.createElement("a",{style:{textDecoration:"none"},href:"#","data-expanded":"false",className:"js-expand text-success"},s.default.createElement(f.default,{names:["plus-circle","lg"]}))),e.metrics.map((function(e,n){return s.default.createElement("td",{key:"td-"+n,className:e.align?"text-"+e.align:"text-right"},b(t.row,e))})))}function g(t){return s.default.createElement("tr",{key:"tr-"+t.i,className:t.rowClass,"data-id":t.row.name,"data-parent":t.parent},s.default.createElement("td",null),e.metrics.map((function(e,n){return s.default.createElement("td",{key:"td-"+n,className:v(e,n)},b(t.row,e))})))}function v(t,n){return(t.align?"text-"+t.align:"text-right")+(e.checked.indexOf(t.col)>-1||0===n?"":" d-none")}function b(t,n){return 1===e.attributeFormat?p.getPercentageFormatter(n.type)(t[n.col]):p.getFormatter(n.type)(t[n.col])}function y(){var t=e.metrics.concat();t.shift();var n=d.get(e,"data.summary");return s.default.createElement("tfoot",null,s.default.createElement("tr",null,-1!==e.attributeId2&&s.default.createElement("td",null),s.default.createElement("td",null,"Total"),t.map((function(e,t){return s.default.createElement("td",{key:"td-"+t,className:e.align?"text-"+e.align:"text-right"},b(n,e))}))))}return s.useEffect((function(){return function(){if(e.metrics.length>0&&e.data){var t=$("#"+e.id),r=c.renderToStaticMarkup(s.default.createElement(s.Fragment,null,s.default.createElement(i,null),s.default.createElement(u,null),s.default.createElement(y,null)));t.html(r);var a={order:[[e.metrics[0].sort||0,"desc"]],paging:!0,searching:!0,dom:"<<t>ipl>",lengthMenu:[[30,50,100,-1],[30,50,100,"All"]],pageLength:30,scrollCollapse:!0,autoWidth:!1,columnDefs:[{width:"10%",targets:0},{targets:"_all",orderSequence:["desc","asc"]}],language:{search:"<i class='icon-filter_icon' aria-hidden='true'></i>",searchPlaceholder:"Filter records"}};-1!==e.attributeId2&&(a.columnDefs=[{width:"2%",targets:0,orderable:!1},{width:"10%",targets:1}]),t.DataTable(a),n()}}(),r(),$("#"+e.id).on("draw.dt",(function(){var e=$(this).find(".js-expand");e.attr("class","js-expand text-success"),e.find("i").attr("class","fa fa-plus-circle fa-lg"),e.data("expanded",!1)})),t}),[e.data]),s.useEffect((function(){r(),n()}),[e.checked]),s.useEffect((function(){$.fn.DataTable.isDataTable("#"+e.id)&&$("#"+e.id).DataTable().search(e.search).draw()}),[e.search]),s.default.createElement("table",{id:e.id,className:"table table-striped table-hover table-borderless statistics-table"})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(0)),s=n(2),c=o(n(9)),d=i(n(100)),f=i(n(49)),p=i(n(7)),m=o(n(3)),h=o(n(89)),g=o(n(53)),v=o(n(32)),b=o(n(50)),y=o(n(28));t.default=function(e){var t=e.metrics.map((function(e){return{value:e.col,label:e.label||e.col}})),n=u.useContext(y.default).daterange,r=e.selectedMetrics?e.selectedMetrics:e.metrics.map((function(e){return e.col})),a=f.getStatisticFilters(e.filters),i=u.useState(e.attributeId),o=i[0],E=i[1],_=u.useState(e.attributeId2),w=_[0],S=_[1],P=u.useState(n),C=P[0],O=P[1],x=u.useState(r),I=x[0],N=x[1],A=u.useState(a),j=A[0],M=A[1],k=u.useState(!0),F=k[0],D=k[1],T=u.useState(-1!==e.attributeId2),R=T[0],B=T[1],G=u.useState(!1),L=G[0],V=G[1],z=u.useState({error:!1,message:""}),q=z[0],Y=z[1];u.useEffect((function(){V(e.downloading)}),[e.downloading]);var U=function(e){var t=j.concat();t.length>0&&(t.splice(e,1),M(t))},H=function(e,t){var n=j.concat();n[e]=t,M(n)},W=d.getAttributeValue(o,e.attributeOptions),J=d.getAttribute2Value(w,e.attribute2Options);return u.default.createElement(s.Modal,{size:"lg",show:e.show,onHide:e.onClose,onEntering:function(){O(n),void 0!==e.selectedMetrics&&N(e.selectedMetrics),E(e.attributeId),S(e.attributeId2),B(-1!==e.attributeId2);var t=f.getStatisticFilters(e.filters);M(t),Y({error:!1,message:""})},backdrop:"static"},u.default.createElement(s.Modal.Header,{closeButton:!0},u.default.createElement(s.Modal.Title,null,"Customize report")),u.default.createElement(s.Modal.Body,null,u.default.createElement(s.Form.Group,null,u.default.createElement(s.Form.Label,null,"Period"),u.default.createElement("div",null,u.default.createElement(h.default,{id:e.id,daterange:C,onChange:function(e){var t=p.daterange(e);O(e),Y(t)}}),q.error&&u.default.createElement(s.Form.Control.Feedback,{type:"invalid",style:{display:"block"}},q.message))),u.default.createElement(s.Form.Group,null,u.default.createElement(c.default,{inputId:"react-select-statistics-report-attribute",className:"react-select-container",classNamePrefix:"react-select",name:"report-attribute-select",value:W,clearable:!1,onChange:function(e){var t=e.value;E(t)},options:e.attributeOptions})),u.default.createElement(s.Form.Group,null,u.default.createElement(c.default,{inputId:"react-select-statistics-report-attribute2",className:"react-select-container",classNamePrefix:"react-select",name:"report-attribute-select",value:J,clearable:!1,onChange:function(e){var t=e.value;S(t),B(-1!==t)},options:e.attribute2Options})),R&&u.default.createElement(s.Form.Group,null,u.default.createElement(v.default,{id:"statistics-report-includetotal",checked:F,onChange:function(e){D(e)}},"Include first dimension totals")),u.default.createElement(s.Form.Group,null,u.default.createElement(s.Form.Label,null,"Metrics"),u.default.createElement(g.default,{id:e.id+"-cb-list",listClassNames:"metrics-list",options:t,selectAll:!0,checked:I,onChange:function(e){N(e)}})),u.default.createElement(s.Form.Group,null,u.default.createElement(s.Form.Label,null,"Filters"),u.default.createElement("div",null,j.map((function(t,n){return u.default.createElement(b.default,{index:n,filter:t,writeAccess:!0,attributes:e.filterOptions,onChange:H,onDelete:U})}))),u.default.createElement("div",null,u.default.createElement("button",{className:"mr-2 btn btn-primary btn-xs",onClick:function(){M(l(l([],j),[{attributeId:-1,condition:"in",values:[]}]))}},u.default.createElement(m.default,{name:"plus"})," ADD FILTER"),j.length>0&&u.default.createElement("button",{className:"mr-2 btn btn-primary btn-xs",onClick:function(){M([])}},u.default.createElement(m.default,{name:"remove"})," CLEAR FILTERS")))),u.default.createElement(s.Modal.Footer,null,u.default.createElement(s.Button,{variant:"light",size:"sm",onClick:e.onClose},"CANCEL"),u.default.createElement(s.Button,{variant:"primary",size:"sm",onClick:function(){var t=e.metrics.filter((function(e){return I.indexOf(e.col)>-1})),n=f.getFilters(j),r=p.daterange(C);Y(r),r.error||e.onSubmit({daterange:C,selectedMetrics:t,attributeId:o,attributeId2:w,filters:n,includeTotal:F})},disabled:L},!L&&u.default.createElement(u.Fragment,null,u.default.createElement(m.default,{name:"download"})," DOWNLOAD"),L&&u.default.createElement(u.Fragment,null,u.default.createElement(m.default,{names:["refresh","spin"]})," DOWNLOADING"))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(0)),d=n(6),f=n(2),p=s(n(9)),m=s(n(11)),h=i(n(4)),g=i(n(8)),v=i(n(49)),b=s(n(50)),y=s(n(3)),E=s(n(5)),_=s(n(268)),w=s(n(269)),S=s(n(10)),P=s(n(28));t.default=function(e){var t=d.useHistory(),n=new URLSearchParams(location.search),r=c.useContext(P.default),a=r.opfilters,i=r.updateOpFilters,s=r.opgranularity,C=r.updateOpGranularity,O=r.opmetric,x=r.updateOpMetric,I=v.getStatisticFilters(a),N=c.useState([]),A=N[0],j=N[1],M=c.useState([]),k=M[0],F=M[1],D=c.useState(!0),T=D[0],R=D[1],B=c.useState(!0),G=B[0],L=B[1],V=c.useState(I),z=V[0],q=V[1],Y=c.useState({}),U=Y[0],H=Y[1],W=c.useState(!1),J=W[0],X=W[1],K=c.useState(""),Z=K[0],$=K[1],Q=c.useRef(null),ee=c.useRef(null);function te(e){e&&e.abort()}c.useEffect((function(){return function(){l(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,v.getFilterAttributes({scope:e.options.scope,scopeId:e.options.scopeId})];case 1:return t=r.sent(),H(t),[3,3];case 2:return n=r.sent(),console.log(n),[3,3];case 3:return[2]}}))}))}(),function(){te(Q.current),te(ee.current)}}),[]),c.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(i){switch(i.label){case 0:R(!0),i.label=1;case 1:return i.trys.push([1,3,,4]),te(Q.current),Q.current=new AbortController,l=m.default(e.options.startDate).startOf("day").format("YYYY-MM-DDTHH:mm:ss"),o=m.default(e.options.endDate).endOf("day").format("YYYY-MM-DDTHH:mm:ss"),t={attributeId:101,scope:e.options.scope,scopeId:e.options.scopeId,granularity:s,start:l,end:o,metrics:["maxAdpodSpots","impressions","bidsInternal","avgBid","winning_cpm"],sortMetric:"impressions",filter:a||[]},[4,h.Get({path:"/api/statistics/timeseries",qs:t,signal:Q.current.signal})];case 2:return n=i.sent(),r=function(e){var t=e.total;t.name="All";var n=[t],r=e.resultsPerValue.filter((function(e){return null!==e.name}));return n.concat(r)}(n),j(r),R(!1),[3,4];case 3:return"AbortError"===i.sent().name?(X(!1),$("")):(X(!0),$("Error loading data"),R(!1)),[3,4];case 4:return[2]}var l,o}))}))}(),function(){l(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(i){switch(i.label){case 0:L(!0),i.label=1;case 1:return i.trys.push([1,3,,4]),te(ee.current),ee.current=new AbortController,l=m.default(e.options.startDate).startOf("day").format("YYYY-MM-DDTHH:mm:ss"),o=m.default(e.options.endDate).endOf("day").format("YYYY-MM-DDTHH:mm:ss"),t={attributeId:102,scope:e.options.scope,scopeId:e.options.scopeId,granularity:s,start:l,end:o,metrics:["impressions","mediaCost"],sortMetric:"impressions",limit:9,filter:a||[]},[4,h.Get({path:"/api/statistics/timeseries",qs:t,signal:ee.current.signal})];case 2:return n=i.sent(),r=function(e){return e.resultsPerValue.filter((function(e){return null!==e.name}))}(n),F(r),L(!1),[3,4];case 3:return"AbortError"===i.sent().name?(X(!1),$("")):(X(!0),$("Error loading data"),L(!1)),[3,4];case 4:return[2]}var l,o}))}))}()}),[JSON.stringify({options:e.options,opfilters:a,opgranularity:s})]);var ne=function(e,t){var n=z.concat();n[e]=t,q(n)},re=function(e){var r=z.concat();r.length>0&&(r.splice(e,1),q(r)),0===r.length&&(n.delete("opfilters[]"),i([]),t.push(location.pathname+"?"+n.toString()))};if(J)return c.default.createElement("div",{className:"col-sm-12 pt-3"},c.default.createElement("div",{className:"card mb-2"},c.default.createElement("h3",null,c.default.createElement(S.default,{message:Z}))));var ae=[{value:"P1D",label:"per day"},{value:"PT1H",label:"per hour"}],ie=[{value:"impressions",label:"impressions"},{value:"mediaCost",label:"costs"}],le=[{value:-1,label:"Select dimension"}].concat(g.attributeIdOptions(U));return c.default.createElement("div",{className:"col-sm-12 pt-3 mb-2"},c.default.createElement("div",{className:"row no-gutters mb-2"},c.default.createElement("div",{className:"col-lg-8"},c.default.createElement(f.Button,{size:"sm",variant:"primary",onClick:function(){q(u(u([],z),[{attributeId:-1,condition:"in",values:[]}]))}},c.default.createElement(y.default,{name:"plus"})," ADD FILTER"),c.default.createElement("div",null,z.map((function(e,t){return c.default.createElement(b.default,{key:"filter-"+t,index:t,filter:e,attributes:le,writeAccess:!0,onChange:ne,onDelete:re})}))),z.length>0&&c.default.createElement("button",{className:"mr-2 btn btn-primary btn-xs",onClick:function(){var e=v.getFilters(z);i(e),n.delete("opfilters[]"),e.forEach((function(e){n.append("opfilters[]",e)})),t.push(location.pathname+"?"+n.toString())}},c.default.createElement(y.default,{name:"search"})," APPLY FILTERS"),z.length>0&&c.default.createElement("button",{className:"mr-2 btn btn-primary btn-xs",onClick:function(){i([]),n.delete("opfilters[]"),q([]),t.push(location.pathname+"?"+n.toString())}},c.default.createElement(y.default,{name:"remove"})," CLEAR FILTERS")),c.default.createElement("div",{className:"col-lg-4"},c.default.createElement("div",{className:"width-100 pull-right",style:{marginRight:"10px"}},c.default.createElement(p.default,{inputId:"react-select-granularity",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isSearchable:!1,value:ae.find((function(e){return e.value===s})),onChange:function(e){var r=e.value;n.set("opgranularity",r),C(r),t.push(location.pathname+"?"+n.toString())},options:ae})))),c.default.createElement(E.default,{visible:G}),!G&&k.length>0&&c.default.createElement("div",{className:"row mb-2"},c.default.createElement("div",{className:"col-lg-12"},c.default.createElement("div",{className:"card",style:{height:"550px"}},c.default.createElement("div",null,c.default.createElement("h3",{className:"pull-left"},"Advertisers"),c.default.createElement("div",{className:"width-150 pull-right"},c.default.createElement(p.default,{inputId:"react-select-advertisers-metric",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isSearchable:!1,value:ie.find((function(e){return e.value===O})),onChange:function(e){var r=e.value;n.set("opmetric",r),x(r),t.push(location.pathname+"?"+n.toString())},options:ie}))),c.default.createElement(_.default,{data:k,granularity:s,metric:O})))),c.default.createElement(E.default,{visible:T}),!T&&A.length>0&&A.map((function(e,t){return c.default.createElement("div",{key:"chart-row-"+t,className:"row mb-2"},c.default.createElement("div",{className:"col-lg-12"},c.default.createElement("div",{className:"card"},c.default.createElement("h3",null,e.name),c.default.createElement(w.default,{data:e,granularity:s}))))})))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),i=r(n(11)),l=r(n(56));t.default=function(e){var t,n=function(t){var n=e.data.map((function(t){return function(t){var n=[t.name],r=t.results.map((function(t){return t.metrics[e.metric]}));return n.concat(r)}(t)})),r=function(){var t={};return e.data.forEach((function(e){t[e.name]="area"})),t}(),a=[e.data.map((function(e){return e.name}))],i=!1;n.length>0&&2===n[0].length&&(i=!0);return{data:{columns:n,types:r,groups:a},padding:{right:20},axis:{x:{type:"category",categories:t,tick:{culling:{max:15},rotate:60,multiline:!1,fit:!0},height:100}},point:{show:i},size:{height:500}}}((t="P1D"===e.granularity?"YYYY-MM-DD":"YYYY-MM-DD HH:mm",e.data[0].results.map((function(e){return i.default(e.dateTime).format(t)}))));return a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:"col-lg-12"},a.default.createElement(l.default,{id:"advertisers-chart",options:n,height:"300px"})))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(0)),u=i(n(1)),s=l(n(11)),c=l(n(56));t.default=function(e){var t,n=u.kebabCase(e.data.name)+"-chart1",r=u.kebabCase(e.data.name)+"-chart2",a=(t="P1D"===e.granularity?"YYYY-MM-DD":"YYYY-MM-DD HH:mm",e.data.results.map((function(e){return s.default(e.dateTime).format(t)}))),i=d(["maxAdpodSpots","bidsInternal","impressions"],a),l=d(["avgBid","winning_cpm"],a);function d(t,n){var r=function(t){return t.map((function(t){return r=[f(n=t)],a=e.data.results.map((function(e){return e.metrics[n]})),r.concat(a);var n,r,a}))}(t),a=!1;return r.length>0&&2===r[0].length&&(a=!0),{data:{columns:r},padding:{right:20},axis:{x:{type:"category",categories:n,tick:{culling:{max:15},rotate:60,multiline:!1,fit:!0},height:100},y:{min:0,padding:{bottom:0}}},point:{show:a},size:{height:300}}}function f(e){switch(e){case"maxAdpodSpots":return"spots";case"bidsInternal":return"bids";case"avgBid":return"avg bid";case"winning_cpm":return"winning price";default:return e}}return o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-6"},o.default.createElement(c.default,{id:n,options:i,height:"300px"})),o.default.createElement("div",{className:"col-lg-6"},o.default.createElement(c.default,{id:r,options:l,height:"300px"})))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=u(n(9)),f=u(n(11)),p=i(n(1)),m=i(n(4)),h=u(n(5)),g=u(n(271)),v=u(n(10)),b=u(n(28));t.default=function(e){var t=c.useHistory(),n=new URLSearchParams(location.search),r=s.useContext(b.default),a=r.tgranularity,i=r.updateTGranularity,u=r.tperiod,y=r.updateTPeriod,E=s.useState([]),_=E[0],w=E[1],S=s.useState(!0),P=S[0],C=S[1],O=s.useState(!1),x=O[0],I=O[1],N=s.useState(""),A=N[0],j=N[1],M=s.useRef(null),k=s.useRef(null);function F(){return l(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(i){switch(i.label){case 0:C(!0),i.label=1;case 1:return i.trys.push([1,3,,4]),D(),M.current=new AbortController,t=function(){var t=function(){var e="",t=f.default().format("YYYY-MM-DDTHH:mm:ss");"24h"===u?e=f.default().subtract(24,"hours").format("YYYY-MM-DDTHH:mm:ss"):"3d"===u?e=f.default().subtract(3,"days").format("YYYY-MM-DDTHH:mm:ss"):"1w"===u&&(e=f.default().subtract(1,"weeks").format("YYYY-MM-DDTHH:mm:ss"));return{start:e,end:t}}(),n=t.start,r=t.end;return{attributeId:13,scope:e.options.scope,scopeId:e.options.scopeId,granularity:a,start:n,end:r,metrics:["timeout","request_number","request_failed","bid_filtered","bid_number","bid_error","won_bids","request_quantile_75","request_quantile_95","request_quantile_99"]}}(),[4,m.Get({path:"/api/statistics/timeseries/technical",qs:t,signal:M.current.signal})];case 2:return n=i.sent(),r=function(e){var t=e.total;t.name="All";var n=[t],r=e.resultsPerValue.filter((function(e){return null!==e.name}));return n.concat(r).map((function(e){return{name:e.name,results:e.results.map(T)}}))}(n),w(r),C(!1),[3,4];case 3:return"AbortError"===i.sent().name?(I(!1),j("")):(I(!0),j("Error loading data"),C(!1)),[3,4];case 4:return[2]}}))}))}function D(){M.current&&M.current.abort()}function T(e){var t=100*R(p.get(e,"metrics.timeout"),p.get(e,"metrics.request_number")),n=100*R(p.get(e,"metrics.request_failed"),p.get(e,"metrics.request_number")),r=100*R(p.get(e,"metrics.bid_filtered"),p.get(e,"metrics.bid_number")),a=100*R(p.get(e,"metrics.bid_error"),p.get(e,"metrics.bid_number")),i=1e3*p.get(e,"metrics.request_quantile_75"),l=1e3*p.get(e,"metrics.request_quantile_95"),o=1e3*p.get(e,"metrics.request_quantile_99");return{dateTime:e.dateTime,metrics:{timeouts:t,request_errors:n,bids_filtered:r,bids_error:a,request_quantile_75:i,request_quantile_95:l,request_quantile_99:o,request_number:p.get(e,"metrics.request_number",0),bid_number:p.get(e,"metrics.bid_number",0),won_bids:p.get(e,"metrics.won_bids",0)}}}function R(e,t){return 0===t||isNaN(t)||isNaN(e)?0:e/t}s.useEffect((function(){return function(){k.current&&clearInterval(k.current),D()}}),[]),s.useEffect((function(){k.current&&clearInterval(k.current),F(),k.current=setInterval(F,6e4)}),[JSON.stringify({scopeId:e.options.scopeId,scope:e.options.scope,tgranularity:a,tperiod:u})]);if(x)return s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",null,s.default.createElement(v.default,{message:A}))));var B=[{value:"PT10M",label:"per 10 minutes"},{value:"PT1H",label:"per hour"}],G=[{value:"24h",label:"Past 24 hours"},{value:"3d",label:"Past 3 days"},{value:"1w",label:"Past week"}];return s.default.createElement("div",{className:"col-sm-12 pt-3 mb-2"},s.default.createElement("div",{className:"row no-gutters mb-2"},s.default.createElement("div",{className:"col-lg-12"},s.default.createElement("div",{className:"width-150 pull-right",style:{marginRight:"10px"}},s.default.createElement(d.default,{inputId:"react-select-technical-granularity",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isSearchable:!1,value:B.find((function(e){return e.value===a})),onChange:function(e){var r=e.value;n.set("tgranularity",r),i(r),t.push(location.pathname+"?"+n.toString())},options:B})),s.default.createElement("div",{className:"width-150 pull-right",style:{marginRight:"10px"}},s.default.createElement(d.default,{inputId:"react-select-period",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isSearchable:!1,value:G.find((function(e){return e.value===u})),onChange:function(e){var r=e.value;n.set("tperiod",r),y(r),t.push(location.pathname+"?"+n.toString())},options:G})))),s.default.createElement(h.default,{visible:P}),!P&&_.length>0&&_.map((function(e,t){return s.default.createElement("div",{key:"technical-chart-row-"+t,className:"row mb-2"},s.default.createElement("div",{className:"col-lg-12"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,e.name),s.default.createElement(g.default,{data:e}))))})))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(0)),u=i(n(1)),s=l(n(11)),c=l(n(56));t.default=function(e){var t=u.kebabCase(e.data.name)+"-technical-chart1",n=u.kebabCase(e.data.name)+"-technical--chart2",r=u.kebabCase(e.data.name)+"-technical--chart3",a=e.data.results.map((function(e){return s.default(e.dateTime).format("YYYY-MM-DD HH:mm")})),i=f(["timeouts","request_errors","bids_filtered","bids_error"],a),l=f(["request_quantile_75","request_quantile_95","request_quantile_99"],a),d=f(["request_number","bid_number","won_bids"],a);function f(t,n){var r=function(t){return t.map((function(t){return r=[p(n=t)],a=e.data.results.map((function(e){return e.metrics[n]})),r.concat(a);var n,r,a}))}(t),a=!1;return r.length>0&&2===r[0].length&&(a=!0),{data:{columns:r},axis:{x:{type:"category",categories:n,padding:{right:20},tick:{culling:{max:15},rotate:60,multiline:!1,fit:!0},height:100},y:{min:0,padding:{bottom:0}}},point:{show:a},size:{height:300}}}function p(e){switch(e){case"timeouts":return"time outs";case"request_errors":return"request errors";case"bids_filtered":return"filtered bids";case"bids_error":return"bids error";case"request_quantile_75":return"response time (75%)";case"request_quantile_95":return"response time (95%)";case"request_quantile_99":return"response time (99%)";case"request_number":return"bid requests";case"bid_number":return"bids";case"won_bids":return"bids won";default:return e}}return o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-4"},o.default.createElement(c.default,{id:t,options:i,height:"300px"})),o.default.createElement("div",{className:"col-lg-4"},o.default.createElement(c.default,{id:n,options:l,height:"300px"})),o.default.createElement("div",{className:"col-lg-4"},o.default.createElement(c.default,{id:r,options:d,height:"300px"})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=l(n(0)),d=n(6),f=n(2);n(63);var p=s(n(16)),m=s(n(12)),h=l(n(13)),g=l(n(8)),v=s(n(41)),b=s(n(273)),y=s(n(292)),E=s(n(298)),_=s(n(99)),w=l(n(4)),S=s(n(303)),P=s(n(28));t.default=function(e){var t=d.useParams(),n=t.page,a=t.scope,i=t.scopeId,l=c.useContext(m.default).data,s=c.useState(!1),C=s[0],O=s[1],x="/"+n+"/"+a+"/"+i,I="/:page/:scope/:scopeId",N=h.getRights(l.rights),A=c.useContext(p.default),j=c.useContext(P.default),M=j.daterange,k=j.attributeId,F=j.attributeId2,D=j.filters,T=M.startDate.format("YYYY-MM-DD"),R=M.endDate.format("YYYY-MM-DD");c.useEffect((function(){!function(){o(this,void 0,void 0,(function(){var e,t;return u(this,(function(n){switch(n.label){case 0:return"root"!==a&&"organization"!==a?[3,1]:(O(!0),[3,7]);case 1:return"agency"!==a?[3,2]:[2,O(l.agency.digitalAudience||!1)];case 2:return"advertiser"!==a?[3,3]:[2,O(l.advertiser.digitalAudience||!1)];case 3:if(e=-1,"campaigngroup"===a?e=l.campaignGroup.advertiserId:"campaign"===a&&(e=l.campaign.advertiserId),!(e>0))return[3,7];n.label=4;case 4:return n.trys.push([4,6,,7]),[4,w.Get({path:"/api/advertisers/"+e})];case 5:return t=n.sent(),O(t.advertiser.digitalAudience||!1),[3,7];case 6:return n.sent(),O(!1),[3,7];case 7:return[2]}}))}))}()}),[JSON.stringify(l)]);var B,G,L={rights:N,user:A,data:l,options:(B=g.getSourceScope(a),"root"===a?{scope:B,startDate:T,endDate:R}:{scope:B,scopeId:i,startDate:T,endDate:R}),videoMode:e.videoMode},V=((G=new URLSearchParams("")).append("sd",T),G.append("ed",R),G.append("attributeId",k.toString()),G.append("attributeId2",F.toString()),D.forEach((function(e){G.append("filters[]",e)})),"?"+G.toString());return c.default.createElement(c.Fragment,null,c.default.createElement("div",{className:"row page-tabs"},c.default.createElement(f.Nav,{as:"ul",variant:"tabs",defaultActiveKey:"/dashboard"},c.default.createElement(f.Nav.Item,{as:"li"},c.default.createElement(d.NavLink,{activeClassName:"active",className:"nav-link",to:x+"/dashboard?sd="+T+"&ed="+R},"Dashboard")),c.default.createElement(f.Nav.Item,{as:"li"},c.default.createElement(d.NavLink,{activeClassName:"active",className:"nav-link",to:x+"/statistics"+V},"Statistics")),C&&c.default.createElement(f.Nav.Item,{as:"li"},c.default.createElement(d.NavLink,{activeClassName:"active",className:"nav-link",to:x+"/audience?sd="+T+"&ed="+R},"Audience")),c.default.createElement(f.Nav.Item,{as:"li"},c.default.createElement(d.NavLink,{activeClassName:"active",className:"nav-link",to:x+"/analysis?sd="+T+"&ed="+R},"Advanced analysis")),"campaign"===a&&c.default.createElement(f.Nav.Item,{as:"li"},c.default.createElement(d.NavLink,{activeClassName:"active",className:"nav-link",to:x+"/segments?sd="+T+"&ed="+R},"Segment insights"))),c.default.createElement("div",{style:{marginRight:"25px"}},c.default.createElement(v.default,null))),c.default.createElement("div",{className:"row"},c.default.createElement(d.Switch,null,c.default.createElement(d.Redirect,{exact:!0,from:""+I,to:I+"/dashboard?sd="+T+"&ed="+R}),c.default.createElement(d.Route,{path:I+"/dashboard"},c.default.createElement(b.default,r({},L))),c.default.createElement(d.Route,{path:I+"/statistics"},c.default.createElement(_.default,r({},L))),C&&c.default.createElement(d.Route,{path:I+"/audience"},c.default.createElement(y.default,r({},L))),c.default.createElement(d.Route,{path:I+"/analysis"},c.default.createElement(E.default,r({},L))),"campaign"===a&&c.default.createElement(d.Route,{path:I+"/segments"},c.default.createElement(S.default,r({},L))))))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(0)),l=n(6),o=a(n(274)),u=a(n(285)),s=a(n(286)),c=a(n(287)),d=a(n(288)),f=a(n(291));t.default=function(e){switch(l.useParams().scope){case"root":return i.default.createElement(o.default,r({},e));case"organization":return i.default.createElement(u.default,r({},e));case"agency":return i.default.createElement(s.default,r({},e));case"advertiser":return i.default.createElement(c.default,r({},e));case"campaigngroup":return i.default.createElement(f.default,r({},e));case"campaign":return i.default.createElement(d.default,r({},e))}return null}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=o(n(275)),c=o(n(277)),d=o(n(54));t.default=function(e){var t={startDate:e.options.startDate,endDate:e.options.endDate};return u.default.createElement(u.Fragment,null,u.default.createElement(d.default,r({},e)),u.default.createElement("div",{className:"col-sm-12"},u.default.createElement(s.default,{options:t,user:e.user})),u.default.createElement("div",{className:"col-sm-12"},u.default.createElement(c.default,{options:t,user:e.user})))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=i(n(1)),d=u(n(10)),f=u(n(5)),p=u(n(276)),m=i(n(4));t.default=function(e){var t=s.useState(!0),n=t[0],r=t[1],a=s.useState([]),i=a[0],u=a[1],h=s.useState(!1),g=h[0],v=h[1],b=s.useState(""),y=b[0],E=b[1],_=s.useRef(null);function w(){_.current&&_.current.abort()}return s.useEffect((function(){return w}),[]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n,a;return o(this,(function(i){switch(i.label){case 0:r(!0),i.label=1;case 1:return i.trys.push([1,3,,4]),w(),_.current=new AbortController,[4,m.Get({path:"/api/reporting/ssp",qs:e.options,signal:_.current.signal})];case 2:return t=i.sent(),n=c.get(t,"statisticList",[]),r(!1),u(n),[3,4];case 3:return a=i.sent(),console.log(a),"AbortError"===a.name?(v(!1),E("")):(v(!0),E("Error loading ssp bills."),r(!1)),[3,4];case 4:return[2]}}))}))}()}),[JSON.stringify(e.options)]),g?s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",null,s.default.createElement(d.default,{message:y}))):s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",{className:"pull-left"},"SSP Bills"),s.default.createElement(f.default,{visible:n}),!n&&s.default.createElement(p.default,{records:i,user:e.user}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=o(n(14)),c=l(n(23)),d=o(n(17)),f=l(n(1)),p=l(n(15)),m=o(n(3));t.default=function(e){var t="sspbills-table",n=u.useState(1),a=n[0],i=n[1],l=u.useState(p.getInitialSizePerPage(t,e.user)),o=l[0],h=l[1],g=u.useState({dataField:"name",order:"asc"}),v=g[0],b=g[1];function y(){var t=[{col:"name",label:"SSP name",align:"left"},{col:"impressions",label:"impressions",type:"number",align:"right"},{col:"media_costs",label:"media spend",type:"money",align:"right"}].map((function(e){return e.col}));return e.records.map((function(e){return f.pick(e,t)}))}var E=function(e,t){b({dataField:e,order:t})},_=function(e,t){i(e)},w=function(n,r){p.storeSizePerPage(n,t,e.user),h(n)},S=c.Search.SearchBar,P=y(),C=[{col:"name",label:"SSP name",align:"left"},{col:"impressions",label:"impressions",type:"number",align:"right"},{col:"media_costs",label:"media spend",type:"money",align:"right"}].map((function(e){return{dataField:e.col,text:e.label||e.col,align:e.align||"left",headerAlign:e.align||"left",sort:!0,onSort:E,sortCaret:p.columnSort,formatter:p.getFormatter(e.type)}})),O=p.getSizePerPage(o,P.length),x=P.length||30;return u.default.createElement(c.default,{keyField:"id",data:P,columns:C,search:!0},(function(e){return u.default.createElement("div",null,u.default.createElement("div",{className:"search-label-container"},u.default.createElement(m.default,{name:"search"}),u.default.createElement(S,r({},e.searchProps,{tableId:t,placeholder:"Filter records"}))),u.default.createElement(s.default,r({},e.baseProps,{id:t,bordered:!1,classes:"table-borderless",striped:!0,keyField:"id",data:P,columns:C,defaultSorted:[v],pagination:d.default({page:(n=p.getLastPage(y(),o),a>n?n:a),sizePerPage:O,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:x}],onPageChange:_,onSizePerPageChange:w})})));var n}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=i(n(1)),f=u(n(10)),p=u(n(5)),m=i(n(4)),h=i(n(36)),g=u(n(278)),v=u(n(3)),b=u(n(52));t.default=function(e){var t=s.useState(!0),n=t[0],r=t[1],a=s.useState([]),i=a[0],u=a[1],y=s.useState(null),E=y[0],_=y[1],w=s.useState(!1),S=w[0],P=w[1],C=s.useState(!1),O=C[0],x=C[1],I=s.useState(!1),N=I[0],A=I[1],j=s.useState(""),M=j[0],k=j[1],F=s.useRef(null);function D(){F.current&&F.current.abort()}function T(e){var t=e;return t.totalCosts=e.costs+e.uploadCosts,t}s.useEffect((function(){return D}),[]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n,a,i;return o(this,(function(l){switch(l.label){case 0:r(!0),l.label=1;case 1:return l.trys.push([1,3,,4]),D(),F.current=new AbortController,[4,m.Get({path:"/api/reporting/financials",qs:e.options,signal:F.current.signal})];case 2:return t=l.sent(),n=d.get(t,"statisticList",[]).map(T),a=T(d.get(t,"summary",{})),u(n),_(a),r(!1),[3,4];case 3:return i=l.sent(),console.log(i),"AbortError"===i.name?(A(!1),k("")):(A(!0),k("Error loading invoicing data."),r(!1)),[3,4];case 4:return[2]}}))}))}()}),[JSON.stringify(e.options)]);function R(e){return l(this,void 0,void 0,(function(){var t,n,r,a,i,l,u,s;return o(this,(function(o){switch(o.label){case 0:return t=e.daterange.startDate.format("YYYY-MM-DD"),n=e.daterange.endDate.format("YYYY-MM-DD"),r={startDate:t,endDate:n},[4,m.Get({path:"/api/reporting/financials",qs:r})];case 1:return a=o.sent(),i=d.get(a,"statisticList",[]).map(T),l=T(d.get(a,"summary",{})),i.push(l),u=e.selectedMetrics.map((function(e){return h.getBoldCell(e.label||e.col)})),s=[u],i.forEach((function(t){var n=[];e.selectedMetrics.forEach((function(e){var r=h.format(e),a=h.cellFormatter(t,e),i=h.getCell(a,null,r);n.push(i)})),s.push(n)})),h.save(s,"Invoicing","Invoicing_"+t+"_"+n),[2]}}))}))}var B=[{col:"agencyName",label:"agency name",align:"left"},{col:"advertiserName",label:"advertiser name",align:"left"},{col:"impressions",label:"impressions",type:"number",align:"right"},{col:"media_costs",label:"media spend",type:"money",align:"right"},{col:"adscienceFee",label:"adscience fee",type:"money",align:"right"},{col:"adservingCosts",label:"adserving cost",type:"money",align:"right"},{col:"uploadCosts",label:"banner upload costs",type:"money",align:"right"},{col:"bannerwise_costs",label:"bannerwise costs",type:"money",align:"right"},{col:"dma_costs",label:"dma",type:"money",align:"right"},{col:"dynamic_costs",label:"audience targeting",type:"money",align:"right"},{col:"cpm_fee_costs",label:"cpm fee",type:"money",align:"right"},{col:"other_third_costs",label:"audience insights",type:"money",align:"right"},{col:"totalCosts",label:"total costs",type:"money",align:"right"}];return N?s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",null,s.default.createElement(f.default,{message:M}))):s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",{className:"pull-left"},"Invoicing"),s.default.createElement("div",{className:"table-btn-container"},s.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:function(){P(!0)}},s.default.createElement(v.default,{name:"download"})," REPORT")),s.default.createElement(p.default,{visible:n}),!n&&s.default.createElement(g.default,{records:i,summary:E,metrics:B,user:e.user}),s.default.createElement(b.default,{id:"invoicing-report",show:S,downloading:O,metrics:B,onClose:function(){P(!1),x(!1)},onSubmit:function(e){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return x(!0),[4,R(e)];case 1:return t.sent(),x(!1),P(!1),[2]}}))}))}}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=o(n(14)),c=l(n(23)),d=o(n(17)),f=l(n(1)),p=l(n(15)),m=o(n(3));t.default=function(e){var t="invoicing-table",n=u.useState(1),a=n[0],i=n[1],l=u.useState(p.getInitialSizePerPage(t,e.user)),o=l[0],h=l[1],g=u.useState({dataField:"name",order:"asc"}),v=g[0],b=g[1];function y(){var t=e.metrics.map((function(e){return e.col}));return e.records.map((function(e){return f.pick(e,t)}))}var E=function(e,t){b({dataField:e,order:t})},_=function(e,t){i(e)},w=function(n,r){p.storeSizePerPage(n,t,e.user),h(n)},S=c.Search.SearchBar,P=y(),C=e.metrics.map((function(t,n){var r=p.getFormatter(t.type);if(0===n)return{dataField:t.col,text:t.label||t.col,align:t.align||"left",headerAlign:t.align||"left",footer:"Total",sort:!0,onSort:E,sortCaret:p.columnSort,formatter:r};var a=r(e.summary[t.col],null);return{dataField:t.col,text:t.label||t.col,align:t.align||"left",footerAlign:t.align||"left",headerAlign:t.align||"left",footer:a,sort:!0,onSort:E,sortCaret:p.columnSort,formatter:r}})),O=p.getSizePerPage(o,P.length),x=P.length||30;return u.default.createElement(c.default,{keyField:"id",data:P,columns:C,search:!0},(function(e){return u.default.createElement("div",null,u.default.createElement("div",{className:"search-label-container"},u.default.createElement(m.default,{name:"search"}),u.default.createElement(S,r({},e.searchProps,{tableId:t,placeholder:"Filter records"}))),u.default.createElement(s.default,r({},e.baseProps,{id:t,bordered:!1,classes:"table-borderless",striped:!0,keyField:"id",data:P,columns:C,defaultSorted:[v],pagination:d.default({page:(n=p.getLastPage(y(),o),a>n?n:a),sizePerPage:O,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:x}],onPageChange:_,onSizePerPageChange:w})})));var n}))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),i=r(n(5)),l=r(n(101));t.default=function(e){return a.default.createElement("div",{className:"col-sm-12 pt-3"},a.default.createElement("div",{className:"card mb-2"},a.default.createElement(i.default,{visible:e.showLoader}),!e.showLoader&&a.default.createElement(l.default,{data:e.data,videoMode:e.tabProps.videoMode})))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(0)),u=i(n(22));t.default=function(e){return o.default.createElement("div",{className:"row kpi-container"},e.metrics.map((function(t,n){return o.default.createElement("div",{className:"text-center kpi"},o.default.createElement("h3",null,u.getFormat(e.data[t.col],t.type)),o.default.createElement("span",null,t.label||t.col))})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=o(n(5)),c=o(n(101)),d=o(n(282)),f=o(n(283)),p=o(n(284));t.default=function(e){var t=e.tabProps.rights.VIEW_FINANCIALS?"col-lg-3 mb-2":"col-lg-6 mb-2";return u.default.createElement(u.Fragment,null,u.default.createElement("div",{className:"col-sm-12 mb-2 mt-3"},u.default.createElement("div",{className:"card"},u.default.createElement(s.default,{visible:e.showLoader}),!e.showLoader&&u.default.createElement(c.default,{data:e.data,videoMode:e.tabProps.videoMode}))),u.default.createElement("div",{className:"col-sm-12"},u.default.createElement("div",{className:"row no-gutters"},u.default.createElement("div",{className:"col-lg-6 mb-2"},u.default.createElement("div",{className:"card h-100"},u.default.createElement("h2",null,"Statistics"),u.default.createElement("hr",null),u.default.createElement(p.default,r({},e.tabProps)))),u.default.createElement("div",{className:t},u.default.createElement("div",{className:"card h-100"},u.default.createElement("h2",null,"Funnel"),u.default.createElement("hr",null),u.default.createElement(s.default,{visible:e.showLoader}),!e.showLoader&&u.default.createElement(d.default,{id:"funnel",data:e.data}))),e.tabProps.rights.VIEW_FINANCIALS&&u.default.createElement("div",{className:"col-lg-3 mb-2"},u.default.createElement("div",{className:"card h-100"},u.default.createElement("h2",null,"Financials"),u.default.createElement("hr",null),u.default.createElement(s.default,{visible:e.showLoader}),!e.showLoader&&u.default.createElement(f.default,{data:e.data,tabProps:e.tabProps}))))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(0)),o=i(n(22));t.default=function(e){if(e.data&&e.data.bids>0){l.useEffect((function(){new D3Funnel("#"+e.id).draw(t,n)}),[JSON.stringify(e.data)]);var t=[["Bids",[260,o.numberWithCommas(e.data.bids)]],["Impressions",[210,o.numberWithCommas(e.data.impressions)]],["Viewable",[185,o.numberWithCommas(e.data.viewable)]],["Clicks",[160,o.numberWithCommas(e.data.clicks)]],["Conversions",[140,o.numberWithCommas(e.data.conversions)]]],n={chart:{height:350},label:{format:"{l}\n{f}"},block:{dynamicSlope:!0}};return l.default.createElement("div",{id:e.id,className:"funnel"})}return l.default.createElement("div",null,"No data in selected period.")}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(0)),u=i(n(1)),s=i(n(22));t.default=function(e){if(e.data){var t=u.assign({},e.data,{fee:e.data.costs-e.data.expenses+e.data.cpm_fee_costs}),n="metaAgency"===e.tabProps.options.scope||"agency"===e.tabProps.options.scope||"advertiser"===e.tabProps.options.scope?[{col:"revenue",label:"revenue",type:"money"},{col:"fee",label:"fee",type:"money"},{col:"media_costs",label:"media spend",type:"money"},{col:"uploadCosts",label:"banner upload fee",type:"money"},{col:"audience_costs",label:"audience insights",type:"money"},{col:"audience_targeting_costs",label:"audience targeting",type:"money"},{col:"adservingCosts",label:"adserving",type:"money"},{col:"bannerwise_costs",label:"bannerwise costs",type:"money"},{col:"profit",label:"profit",type:"money"}]:[{col:"revenue",label:"revenue",type:"money"},{col:"fee",label:"fee",type:"money"},{col:"media_costs",label:"media spend",type:"money"},{col:"audience_costs",label:"audience insights",type:"money"},{col:"audience_targeting_costs",label:"audience targeting",type:"money"},{col:"adservingCosts",label:"adserving",type:"money"},{col:"dma_costs",label:"DMA spend",type:"money"},{col:"bannerwise_costs",label:"bannerwise costs",type:"money"},{col:"profit",label:"profit",type:"money"}];return o.default.createElement("div",null,n.map((function(e,n){return o.default.createElement("div",{className:"clearfix financials-row"},o.default.createElement("span",{className:"pull-left"},e.label||e.col),o.default.createElement("span",{className:"pull-right"},s.getFormat(t[e.col],e.type)))})))}return o.default.createElement("div",null,"No data in selected period.")}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=i(n(1)),f=i(n(4)),p=i(n(40)),m=u(n(25)),h=u(n(10)),g=u(n(5));t.default=function(e){var t=e.rights.VIEW_FINANCIALS?"campaign"==e.options.scope?[{label:"impact",config:{data:{names:{impressions:"imps won",clicks:"total clicks"},axes:{impressions:"y2",clicks:"y",conversions:"y"},types:{conversions:"bar"},keys:{value:["impressions","clicks","conversions"]}},axis:{y2:{show:!0}},padding:{left:60,right:60}}},{label:"financials",config:{data:{keys:{value:["revenue","profit","costs"]},names:{costs:"total cost"}},padding:{left:80,right:40}}},{label:"performance",config:{data:{type:"line",keys:{value:["cpc","cpo"]},names:{cpc:"cpc",cpo:"cpa"},axes:{cpc:"y",cpo:"y2"}},axis:{y2:{show:!0}},padding:{left:80,right:40}}},{label:"winrate",config:{data:{names:{impressions:"imps won",impressionsNotWon:"imps not won"},axes:{impressions:"y2",impressionsNotWon:"y2",winrate:"y"},types:{winrate:"line",impressions:"bar",impressionsNotWon:"bar"},groups:[["impressions","impressionsNotWon"]],keys:{value:["impressions","impressionsNotWon","winrate"]},order:function(e,t){return"impressions"==e.id?-1:1}},axis:{y2:{show:!0}},padding:{left:40,right:80}}},{label:"clicks",config:{data:{types:{uniqueClicks:"bar",nonUniqueClicks:"bar"},groups:[["uniqueClicks","nonUniqueClicks"]],keys:{value:["uniqueClicks","nonUniqueClicks"]},names:{uniqueClicks:"unique clicks",nonUniqueClicks:"non unique clicks"},order:function(e,t){return"uniqueClicks"==e.id?-1:1}}}},{label:"conversions",config:{data:{types:{postClickConversions:"bar",postViewConversions:"bar"},groups:[["postClickConversions","postViewConversions"]],keys:{value:["postClickConversions","postViewConversions"]},names:{postClickConversions:"post click conversions",postViewConversions:"post view conversions"}}}}]:"metaAgency"==e.options.scope||"agency"==e.options.scope||"advertiser"==e.options.scope||"cluster"==e.options.scope?[{label:"general",config:{data:{names:{clicks:"total clicks",impressions:"total imps"},axes:{impressions:"y2",clicks:"y",conversions:"y"},types:{conversions:"bar"},keys:{value:["impressions","clicks","conversions"]}},axis:{y2:{show:!0}},padding:{left:60,right:60}}},{label:"bids",config:{data:{names:{impressions:"total imps",bids:"bids"},axes:{bids:"y",impressions:"y",winrate:"y2"},keys:{value:["bids","impressions","winrate"]}},axis:{y2:{show:!0}},padding:{left:80,right:40}}},{label:"cost",config:{data:{names:{costs:"total cost",expenses:"media spend"},types:{costs:"area-step",expenses:"area-step"},keys:{value:["expenses","costs"]}}}},{label:"clicks",config:{data:{types:{uniqueClicks:"bar",nonUniqueClicks:"bar"},groups:[["uniqueClicks","nonUniqueClicks"]],keys:{value:["uniqueClicks","nonUniqueClicks"]},names:{uniqueClicks:"unique clicks",nonUniqueClicks:"non unique clicks"},order:function(e,t){return"uniqueClicks"==e.id?-1:1}}}},{label:"impressions",config:{data:{names:{impressions:"total imps"},axes:{impressions:"y"},keys:{value:["impressions"]}},padding:{left:60,right:60}}},{label:"performance",config:{data:{types:{postClickConversions:"bar",postViewConversions:"bar"},groups:[["postClickConversions","postViewConversions"]],keys:{value:["postClickConversions","postViewConversions"]}}}},{label:"revenue",config:{data:{names:{costs:"total cost"},keys:{value:["revenue","profit","costs"]}},padding:{left:80,right:40}}}]:[{label:"general",config:{data:{names:{impressions:"total imps",clicks:"total clicks"},axes:{impressions:"y2",clicks:"y",conversions:"y"},types:{conversions:"bar"},keys:{value:["impressions","clicks","conversions"]}},axis:{y2:{show:!0}},padding:{left:60,right:60}}}]:"campaign"==e.options.scope?[{label:"impact",config:{data:{names:{impressions:"imps won",clicks:"total clicks"},axes:{impressions:"y2",clicks:"y",conversions:"y"},types:{conversions:"bar"},keys:{value:["impressions","clicks","conversions"]}},axis:{y2:{show:!0}},padding:{left:60,right:60}}},{label:"performance",config:{data:{type:"line",keys:{value:["cpc","cpo"]},names:{cpc:"cpc",cpo:"cpa"},axes:{cpc:"y",cpo:"y2"}},axis:{y2:{show:!0}},padding:{left:80,right:40}}},{label:"winrate",config:{data:{names:{impressions:"imps won",impressionsNotWon:"imps not won"},axes:{impressions:"y2",impressionsNotWon:"y2",winrate:"y"},types:{winrate:"line",impressions:"bar",impressionsNotWon:"bar"},groups:[["impressions","impressionsNotWon"]],keys:{value:["impressions","impressionsNotWon","winrate"]},order:function(e,t){return"impressions"==e.id?-1:1}},axis:{y2:{show:!0}},padding:{left:40,right:80}}},{label:"clicks",config:{data:{types:{uniqueClicks:"bar",nonUniqueClicks:"bar"},groups:[["uniqueClicks","nonUniqueClicks"]],keys:{value:["uniqueClicks","nonUniqueClicks"]},names:{uniqueClicks:"unique clicks",nonUniqueClicks:"non unique clicks"},order:function(e,t){return"uniqueClicks"==e.id?-1:1}}}},{label:"conversions",config:{data:{types:{postClickConversions:"bar",postViewConversions:"bar"},groups:[["postClickConversions","postViewConversions"]],keys:{value:["postClickConversions","postViewConversions"]},names:{postClickConversions:"post click conversions",postViewConversions:"post view conversions"}}}}]:"agency"==e.options.scope||"advertiser"==e.options.scope||"cluster"==e.options.scope?[{label:"general",config:{data:{names:{clicks:"total clicks",impressions:"total imps"},axes:{impressions:"y2",clicks:"y",conversions:"y"},types:{conversions:"bar"},keys:{value:["impressions","clicks","conversions"]}},axis:{y2:{show:!0}},padding:{left:60,right:60}}},{label:"bids",config:{data:{names:{impressions:"total imps",bids:"bids"},axes:{bids:"y",impressions:"y",winrate:"y2"},keys:{value:["bids","impressions","winrate"]}},axis:{y2:{show:!0}},padding:{left:80,right:40}}},{label:"cost",config:{data:{names:{costs:"total cost",expenses:"media spend"},types:{costs:"area-step",expenses:"area-step"},keys:{value:["expenses","costs"]}}}},{label:"clicks",config:{data:{types:{uniqueClicks:"bar",nonUniqueClicks:"bar"},groups:[["uniqueClicks","nonUniqueClicks"]],keys:{value:["uniqueClicks","nonUniqueClicks"]},names:{uniqueClicks:"unique clicks",nonUniqueClicks:"non unique clicks"},order:function(e,t){return"uniqueClicks"==e.id?-1:1}}}},{label:"impressions",config:{data:{names:{impressions:"total imps"},axes:{impressions:"y"},keys:{value:["impressions"]}},padding:{left:60,right:60}}},{label:"performance",config:{data:{types:{postClickConversions:"bar",postViewConversions:"bar"},groups:[["postClickConversions","postViewConversions"]],keys:{value:["postClickConversions","postViewConversions"]}}}}]:[{label:"general",config:{data:{names:{impressions:"total imps",clicks:"total clicks"},axes:{impressions:"y2",clicks:"y",conversions:"y"},types:{conversions:"bar"},keys:{value:["impressions","clicks","conversions"]}},axis:{y2:{show:!0}},padding:{left:60,right:60}}}],n=s.useState(!0),r=n[0],a=n[1],i=s.useState([]),u=i[0],v=i[1],b=s.useState(t[0]),y=b[0],E=b[1],_=s.useState(0),w=_[0],S=_[1],P=s.useState(!1),C=P[0],O=P[1],x=s.useState(""),I=x[0],N=x[1],A=s.useRef(null);function j(){A.current&&A.current.abort()}return s.useEffect((function(){return j}),[]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n,r,i;return o(this,(function(l){switch(l.label){case 0:a(!0),l.label=1;case 1:return l.trys.push([1,3,,4]),j(),A.current=new AbortController,t=function(){var t={scope:e.options.scope,attributeId:p.Attributes.PER_DAY,startDate:e.options.startDate,endDate:e.options.endDate,limit:m.default.MAX_API_LIMIT,simple:"false",videoMetrics:"any",aggregator:"name"};void 0!==e.options.scopeId&&(t.scopeId=e.options.scopeId);return t}(),[4,f.Get({path:"/api/statistics",qs:t,signal:A.current.signal})];case 2:return n=l.sent(),r=function(e){var t=(e.statisticList||[]).concat();return t.forEach((function(e){e.winrate=(e.impressions/e.bids*100).toFixed(2),e.media=e.expenses,e.nonUniqueClicks=e.clicks-e.uniqueClicks,e.impressionsNotWon=e.bids-e.impressions,d.forEach(e,(function(t,n){e[n]=function(e){if(Number(e)===e&&e%1!=0)return parseFloat(e.toFixed(2));return e}(t)}))})),t}(n),v(r),a(!1),[3,4];case 3:return i=l.sent(),console.log(i),"AbortError"===i.name?(O(!1),N("")):(O(!0),N("Error loading data."),a(!1)),[3,4];case 4:return[2]}}))}))}()}),[JSON.stringify(e.options)]),s.useEffect((function(){var e,t;u.length>0&&!r&&(e={size:{height:320},padding:{top:0,right:20,bottom:0,left:40},color:{pattern:["#089bc2","#96c03d","#f58129","#a62174","#1f3364","#ccc"]},bindto:"#statistics-chart",data:{json:u,keys:{x:"displayName"},xFormat:"%Y-%m-%d"},axis:{x:{type:"timeseries",tick:{format:"%Y-%m-%d",rotate:60}}},grid:{y:{show:!1}},legend:{show:!0},point:{show:!0,r:3.5,focus:{expand:{r:4.5}}}},t=$.extend(!0,e,y.config),c3.generate(t))}),[u,y,r]),C?s.default.createElement("h3",null,s.default.createElement(h.default,{message:I})):s.default.createElement("div",{className:"text-center"},s.default.createElement(g.default,{visible:r}),!r&&s.default.createElement(s.Fragment,null,s.default.createElement(c.ButtonGroup,{size:"sm"},t.map((function(e,t){return s.default.createElement(c.Button,{className:w===t?"active":"",onClick:function(){E(e),S(t)},variant:"outline-secondary"},e.label.toUpperCase())}))),s.default.createElement("div",{id:"statistics-chart"})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(0)),l=a(n(54));t.default=function(e){return i.default.createElement(l.default,r({},e))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(0)),l=a(n(54));t.default=function(e){return i.default.createElement(l.default,r({},e))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(0)),l=a(n(54));t.default=function(e){return i.default.createElement(l.default,r({},e))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=l(n(1)),c=o(n(289)),d=o(n(54));t.default=function(e){var t=s.assign({},e,{type:"budget_completion"}),n=s.assign({},e,{type:"impression_completion"});return u.default.createElement(u.Fragment,null,u.default.createElement(d.default,r({},e)),u.default.createElement(c.default,r({},t)),u.default.createElement(c.default,r({},n)))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=i(n(1)),d=u(n(12)),f=i(n(4)),p=u(n(10)),m=u(n(5)),h=u(n(290)),g=u(n(91));t.default=function(e){var t=s.useContext(d.default).data,n=c.get(t,"campaign"),r=s.useState({}),a=r[0],i=r[1],u=s.useState(1),v=u[0],b=u[1],y=s.useState(!0),E=y[0],_=y[1],w=s.useState(!1),S=w[0],P=w[1],C=s.useState(""),O=C[0],x=C[1],I=s.useRef(null);function N(){I.current&&I.current.abort()}s.useEffect((function(){return N}),[]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:_(!0),t="budget_completion"===e.type?"budget":"impressions",r.label=1;case 1:return r.trys.push([1,3,,4]),N(),I.current=new AbortController,[4,f.Get({path:"/api/campaigns/"+e.options.scopeId+"/pacing/"+t,signal:I.current.signal})];case 2:return n=r.sent(),i(n),[3,4];case 3:return"AbortError"===r.sent().name?(P(!1),x("")):(P(!0),x("Error loading "+t+" data."),_(!1)),[3,4];case 4:return _(!1),[2]}}))}))}()}),[JSON.stringify(e.options)]);var A="budget_completion"===e.type?"Budget pacing":"Impressions pacing",j="budget_completion"===e.type?n.budgetPacing?c.assign({},n.budgetPacing,{percentageDone:n.percentageDone}):n.budgetPacing:n.impressionPacing?c.assign({},n.impressionPacing,{percentageDone:n.percentageDone}):n.impressionPacing;if(S)return s.default.createElement("div",{className:"col-sm-12 mb-2"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(p.default,{message:O}))));var M="budget_completion"===e.type?"budget":"impressions",k="budget_completion"===e.type?"campaign-budget-pacing":"campaign-impressions-pacing";return s.default.createElement("div",{className:"col-sm-12 mb-2"},s.default.createElement("div",{className:"card"},s.default.createElement("div",{style:{height:"35px"}},s.default.createElement("h2",{className:"pull-left"},A),s.default.createElement("div",{className:"pull-right",style:{width:"250px"}},s.default.createElement(h.default,{pacing:j,type:e.type}))),s.default.createElement("hr",null),s.default.createElement(m.default,{visible:E}),!E&&s.default.createElement(g.default,{id:k,type:M,data:a,predictionDays:v,onPredictionChange:function(e){b(e)}})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(0)),s=n(2),c=l(n(22)),d=l(n(8)),f=o(n(88));t.default=function(e){if(e.pacing){var t=e.pacing.action||"",n=e.pacing.percentage?100*e.pacing.percentage:0,a=100*e.pacing.percentageDone,i="budget_completion"===e.type?c.currency(e.pacing.actual||0):c.numberWithCommas(e.pacing.actual),l="completion-tooltip-"+e.type,o=u.default.createElement(s.Tooltip,{id:l},t),p=d.getPopperConfig(),m=void 0;if(null===e.pacing.actionType||-1===e.pacing.actionType)m=u.default.createElement("span",null,i);else{var h={color:d.completionBarColor(e.pacing.actionType),percentage:n,percentageDone:a,actual:i};m=u.default.createElement(f.default,r({},h))}return""===t?m:u.default.createElement("div",{className:"campaign-pacing-area"},u.default.createElement(s.OverlayTrigger,{placement:"top",overlay:o,popperConfig:p},m))}return null}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(0)),l=a(n(54));t.default=function(e){return i.default.createElement(l.default,r({},e))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=i(n(40)),f=u(n(25)),p=i(n(4)),m=u(n(5)),h=u(n(10)),g=u(n(293));t.default=function(e){var t=function(){var t={scope:e.options.scope,attributeId:d.Attributes.AUDIENCE_SEGMENT,startDate:e.options.startDate,endDate:e.options.endDate,limit:f.default.MAX_API_LIMIT,videoMetrics:"false",simple:"false",aggregator:"name"};void 0!==e.options.scopeId&&(t.scopeId=e.options.scopeId);return t}(),n=s.useState(!1),r=n[0],a=n[1],i=s.useState("unique_viewers"),u=i[0],v=i[1],b=s.useState({}),y=b[0],E=b[1],_=s.useState(!1),w=_[0],S=_[1],P=s.useState(""),C=P[0],O=P[1],x=s.useRef(null);function I(){var e=$("#metrics-header");if($(window).width()>1024){var t=e[0].offsetTop;window.pageYOffset>t?e.addClass("sticky-header"):e.removeClass("sticky-header")}else e.removeClass("sticky-header")}function N(){x.current&&x.current.abort()}s.useEffect((function(){return window.addEventListener("scroll",I),function(){window.removeEventListener("scroll",I),N()}}),[]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:a(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),N(),x.current=new AbortController,[4,p.Get({path:"/api/statistics",qs:t,signal:x.current.signal})];case 2:return e=r.sent(),E(e),a(!1),[3,4];case 3:return n=r.sent(),console.log(n),"AbortError"===n.name?(S(!1),O("")):(S(!0),O("Error loading statistics."),a(!1)),[3,4];case 4:return[2]}}))}))}()}),[JSON.stringify(t)]);var A=[{value:"unique_viewers",label:"unique viewers"},{value:"impressions",label:"impressions"},{value:"viewable",label:"views"}],j=function(e){e.target.checked&&v(e.target.value)};var M,k=(M=A.find((function(e){return e.value===u})))?M.label:"";return w?s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",null,s.default.createElement(h.default,{message:C})))):s.default.createElement("div",{className:"col-sm-12 pt-3 pb-3"},s.default.createElement("div",{id:"metrics-header",className:"row mb-2 no-gutters"},s.default.createElement("div",{className:"col-lg-6"},s.default.createElement("h3",null,s.default.createElement("span",{style:{textTransform:"capitalize"}},k))),s.default.createElement("div",{className:"col-lg-6"},s.default.createElement("div",{className:"pull-right"},A.map((function(e,t){return s.default.createElement(c.Form.Check,{inline:!0,id:"audience-metric-"+e.value,type:"radio",value:e.value,checked:e.value===u,onChange:j,label:e.label})}))))),s.default.createElement(m.default,{visible:r}),!r&&s.default.createElement(s.Fragment,null,s.default.createElement(g.default,{data:y,metrics:A,selectedMetric:u}),s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-lg-12"},s.default.createElement("div",{className:"pull-right"},s.default.createElement("div",{className:"audience-poweredby"},"Powered by "),s.default.createElement("div",{className:"audience-logo"},s.default.createElement("a",{href:"https://digitalaudience.io/",target:"_blank"},s.default.createElement("img",{src:"/images/dalogo.png",alt:"Digital Audience"}))))))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=i(n(1)),s=l(n(294));t.default=function(e){function t(t){var n={id:t.name,name:t.displayName},r=e.metrics.map((function(e){return e.value}));return u.assign({},n,u.pick(t,r))}function n(e,t,n,r){return e+"%"}function r(){var e,t;!function(){var e=$(".card .mosaic-groups"),t=e.parent().width()/e.width();t>1&&(t=1);var n=e.height()*t;e.parent().height(n),e.css("transform","scale("+t+")")}(),e=$(".choropleth-map"),(t=e.width()/e.find("svg").width()-.2)>1&&(t=1),e.css({transform:"scale("+t+", "+t+")"})}o.useEffect((function(){$(window).resize(r),r()}),[]),o.useEffect((function(){r()}),[e.selectedMetric]);var a=function(){try{var r=u.get(e.data,"statisticList",[]);r=(r=r.filter((function(e){return""!==e.name}))).map((function(e){return e.name=parseInt(e.name),e}));var a={gender:[3,4],age:u.range(6,13),employment:u.range(54,100),childGender:[31,32],childAge:u.range(33,39),householdIncome:u.range(666,671),houseOwnership:[710,711],propertyValue:u.range(723,730),education:u.range(672,676),mosaicSubgroups:u.range(946,1005),region:u.range(14,26)};return r.length>0?[{category:"gender",png:!0,type:"donut",width:6,height:300,title:"Gender",config:{padding:{top:0,right:0,bottom:0,left:0},type:"donut",size:{height:250}}},{category:"age",png:!0,type:"bar",width:6,height:300,title:"Age",config:{padding:{top:0,right:50,bottom:0,left:120},type:"bar",size:{height:250},axis:{rotated:!0,y:{tick:{rotate:60},label:"%"}},tooltip:{format:{value:n}}}},{category:"childGender",png:!0,type:"donut",width:6,height:300,title:"Child gender",config:{padding:{top:0,right:0,bottom:0,left:0},type:"donut",size:{height:250}}},{category:"childAge",png:!0,type:"bar",width:6,height:300,title:"Child age",config:{padding:{top:0,right:50,bottom:0,left:120},type:"bar",size:{height:250},axis:{rotated:!0,y:{tick:{rotate:60},label:"%"}},tooltip:{format:{value:n}}}},{category:"houseOwnership",png:!0,type:"donut",width:6,height:300,title:"House ownership",config:{padding:{top:0,right:50,bottom:0,left:0},type:"donut",size:{height:250}}},{category:"householdIncome",png:!0,type:"bar",width:6,height:300,title:"Household income",config:{padding:{top:0,right:50,bottom:0,left:120},type:"bar",size:{height:250},axis:{rotated:!0,y:{tick:{rotate:60},label:"%"}},tooltip:{format:{value:n}}}},{category:"propertyValue",png:!0,type:"bar",width:6,height:300,title:"Property value",config:{padding:{top:0,right:50,bottom:0,left:120},type:"bar",size:{height:250},axis:{rotated:!0,y:{tick:{rotate:60},label:"%"}},tooltip:{format:{value:n}}}},{category:"education",png:!0,type:"donut",width:6,height:300,title:"Education",config:{padding:{top:0,right:0,bottom:0,left:0},type:"donut",size:{height:250}}},{category:"employment",png:!0,type:"bar",width:6,height:650,title:"Employment",config:{padding:{top:0,right:50,bottom:0,left:200},type:"bar",size:{height:600},axis:{rotated:!0,y:{tick:{rotate:60},label:"%"}},tooltip:{format:{value:n}}}},{category:"region",png:!0,type:"map",width:6,height:650,title:"Regions"},{category:"mosaicSubgroups",png:!0,pngHeight:1500,type:"mosaic",width:12,title:""}].map((function(e){var n=u.assign({},e),i=r.filter((function(t){return a[e.category].indexOf(t.name)>-1}));return n.data=i.map(t),n})):[]}catch(e){console.log("Failed getting stats"+e)}}(),i=e.metrics.find((function(t){return t.value===e.selectedMetric}));return o.default.createElement("div",{className:"row no-gutters"},a.map((function(e){return o.default.createElement(s.default,{audienceCategory:e,property:i})})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(0)),l=a(n(295)),o=a(n(297));t.default=function(e){var t=e.audienceCategory.height?{height:e.audienceCategory.height+"px"}:{};return i.default.createElement("div",{className:"col-lg-"+e.audienceCategory.width+" mb-3"},i.default.createElement("div",{className:"card mr-2",style:t},i.default.createElement(l.default,r({},e)),i.default.createElement(o.default,r({},e)),i.default.createElement("div",{className:"graph-png-container"},i.default.createElement("div",{className:"attribute-graph",id:"chart-"+e.audienceCategory.category.toLowerCase()+"-png"}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=i(n(1)),c=i(n(102)),d=l(n(3));t.default=function(e){return o.default.createElement(o.Fragment,null,"mosaic"===e.audienceCategory.type&&o.default.createElement(u.Alert,{variant:"info"},o.default.createElement("p",null,o.default.createElement(d.default,{name:"info-circle"})," Without additional agreements with Whooz you are not permitted to process Whooz's information or use it in systems for purposes other than (exclusively) optimizing the purchase of audiences within Opt Out Advertising.")),e.audienceCategory.png&&o.default.createElement("div",{className:"row mb-1"},o.default.createElement("h4",{className:"col-sm-8"},e.audienceCategory.title),o.default.createElement("div",{className:"col-sm-4 text-right"},o.default.createElement("button",{onClick:function(t){t.preventDefault();var n=$(t.target);n.prop("disabled",!0);var r="#"+("chart-"+e.audienceCategory.category.toLowerCase())+"-png",a=$(r);!function(e,t,n){if("bar"===n.type||"donut"===n.type){var r=c.chartColumns(n,t),a="bar"===n.type?{width:1e3,height:500}:{width:1e3,height:1e3},i=s.assign({},n.config,{size:a}),l=c.createAttributeGraph(e,{property:t.label},s.assign({},{data:{columns:r,order:"desc"}},i));c3.generate(l)}else if("mosaic"===n.type)c.mosaicGraph(e,n,t);else if("map"===n.type){c.choroplethMap(e,n,t,{width:1e3,height:1e3,scale:1e4})}}(r,e.property,e.audienceCategory),setTimeout((function(){!function(e){var t=e.find("svg");t.length>0&&(t.find(".domain").css("fill","none"),t.find(".c3-chart-arc text").css({fill:"#fff",fontSize:"30px",opacity:1}),t.find(".c3 .tick text, .c3-legend-item, .c3-legend-item text, .c3-chart-arcs-title").css({fontSize:"30px"}),function(e){if(e.length>0){var t=e[0],n=document.createElement("canvas");n.width=t.clientWidth,n.height=t.clientHeight,t.parentNode.insertBefore(n,t),t.parentNode.removeChild(t);var r=document.createElement("div");r.appendChild(t),canvg(n,r.innerHTML,{ignoreDimensions:!0,scaleWidth:n.width,scaleHeight:n.height});var a=document.createElement("img");a.src=n.toDataURL("image/png"),n.parentNode.insertBefore(a,n),n.parentNode.removeChild(n)}}(t))}(a),html2canvas(a,{allowTaint:!0,onrendered:function(t){var r=t.toDataURL("image/png");download(r,e.audienceCategory.category+".png","image/png"),setTimeout((function(){a.removeAttr("style"),a.html(""),n.prop("disabled",!1)}),1e3)}})}),300)},type:"button",className:"btn btn-primary btn-sm"},o.default.createElement(d.default,{name:"download"})," PNG"))),!e.audienceCategory.png&&o.default.createElement("h4",null,e.audienceCategory.title))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regionsJson=void 0,t.regionsJson={type:"FeatureCollection",features:[{type:"Feature",properties:{id:25,name:"Groningen",created_at:"2013-11-30T17:55:36+0100",updated_at:"2013-11-30T17:55:36+0100",cartodb_id:1},geometry:{type:"MultiPolygon",coordinates:[[[[6.207928,53.36491],[6.19591,53.364991],[6.191454,53.367717],[6.183992,53.370462],[6.182507,53.371371],[6.184076,53.374955],[6.193108,53.375793],[6.205077,53.373017],[6.208065,53.372098],[6.209447,53.365798],[6.207928,53.36491]]],[[[6.779004,53.462114],[6.796862,53.455615],[6.797563,53.455981],[6.813717,53.464404],[6.831691,53.461494],[6.83455,53.456966],[6.832864,53.451594],[6.814894,53.454504],[6.813299,53.451827],[6.829763,53.448935],[6.829703,53.447138],[6.820704,53.448145],[6.820644,53.446348],[6.834127,53.444389],[6.847639,53.443327],[6.849235,53.446004],[6.838762,53.447928],[6.84326,53.457813],[6.862994,53.452128],[6.87629,53.444774],[6.882246,53.442903],[6.883719,53.441986],[6.883563,53.437494],[6.883469,53.434799],[6.881933,53.43392],[6.875624,53.423351],[6.875542,53.423214],[6.875045,53.40884],[6.879462,53.40609],[6.888168,53.396994],[6.88654,53.393419],[6.889514,53.392483],[6.890923,53.38977],[6.889232,53.384398],[6.889138,53.381703],[6.893331,53.372663],[6.896272,53.370829],[6.894613,53.366356],[6.897491,53.362725],[6.897302,53.357335],[6.900068,53.351998],[6.900116,53.351907],[6.902992,53.348275],[6.905995,53.348238],[6.906264,53.348234],[6.908997,53.3482],[6.926692,53.338987],[6.930943,53.336331],[6.931098,53.336234],[6.93707,53.335258],[6.938506,53.333442],[6.944412,53.33067],[6.944347,53.328873],[6.947155,53.326796],[6.945782,53.327057],[6.939845,53.328931],[6.935537,53.334379],[6.932503,53.33352],[6.932438,53.331723],[6.932393,53.33045],[6.932374,53.329926],[6.929372,53.329965],[6.930809,53.328149],[6.931107,53.327962],[6.932277,53.327231],[6.936779,53.327173],[6.942716,53.325299],[6.941086,53.321725],[6.947185,53.324342],[6.963526,53.319635],[6.96656,53.320494],[6.96806,53.320475],[6.978463,53.317641],[6.98443,53.316663],[6.999264,53.311971],[7.00073,53.311053],[7.011366,53.314505],[7.012764,53.311789],[7.011168,53.307515],[7.011095,53.307318],[7.027456,53.303501],[7.031955,53.303439],[7.038057,53.306052],[7.038023,53.305154],[7.039454,53.303336],[7.045418,53.302355],[7.045506,53.302318],[7.049848,53.300497],[7.050053,53.300501],[7.075376,53.30104],[7.081515,53.304548],[7.08305,53.305426],[7.098225,53.309705],[7.101189,53.308763],[7.099583,53.30609],[7.096583,53.306133],[7.090407,53.301726],[7.084302,53.299116],[7.082556,53.292849],[7.085201,53.283824],[7.082062,53.280273],[7.081991,53.278476],[7.078712,53.271332],[7.079999,53.265921],[7.085851,53.262243],[7.091097,53.258115],[7.091667,53.257666],[7.093129,53.256747],[7.097659,53.257581],[7.103473,53.253004],[7.112424,53.251977],[7.115492,53.25373],[7.119949,53.252767],[7.130362,53.250819],[7.134892,53.251652],[7.137778,53.248913],[7.143696,53.247029],[7.150793,53.246451],[7.157138,53.245933],[7.16017,53.246787],[7.163165,53.246743],[7.174998,53.242972],[7.19132,53.239132],[7.206256,53.238008],[7.207753,53.237986],[7.206369,53.240703],[7.209516,53.244251],[7.210861,53.240635],[7.213363,53.228912],[7.214708,53.225296],[7.217321,53.216267],[7.218095,53.199177],[7.217981,53.196482],[7.211884,53.193878],[7.208931,53.189751],[7.208703,53.189432],[7.219021,53.18568],[7.219344,53.185543],[7.227841,53.181949],[7.214231,53.178562],[7.206786,53.177784],[7.206717,53.177777],[7.203726,53.177823],[7.20208,53.174252],[7.201902,53.174064],[7.191128,53.162732],[7.189372,53.156466],[7.190567,53.149257],[7.184255,53.141262],[7.181229,53.140408],[7.179698,53.139532],[7.180884,53.132388],[7.180895,53.132324],[7.18351,53.123296],[7.184501,53.122891],[7.204078,53.114895],[7.199741,53.082601],[7.200872,53.075758],[7.200932,53.075392],[7.204618,53.056459],[7.213206,53.012281],[7.213263,53.01222],[7.217485,53.007721],[7.209775,53.001546],[7.201543,52.982794],[7.201413,52.982529],[7.182014,52.942637],[7.150998,52.911637],[7.150605,52.911239],[7.104827,52.864961],[7.10454,52.864671],[7.08765,52.85053],[7.087881,52.850075],[7.093166,52.839664],[7.072394,52.839959],[7.072417,52.840549],[7.072636,52.846248],[7.077227,52.849779],[7.077262,52.850677],[7.077128,52.850647],[7.069772,52.848985],[7.063974,52.852663],[7.048167,52.865435],[7.048125,52.865469],[7.046709,52.867287],[7.043705,52.86643],[7.041008,52.873658],[7.019103,52.87396],[7.018734,52.873965],[7.015764,52.874006],[7.017255,52.87652],[7.01735,52.876681],[7.036069,52.903221],[7.036188,52.903389],[7.040589,52.90842],[7.04085,52.908718],[7.045615,52.916742],[7.029908,52.919348],[7.02788,52.919684],[7.023488,52.921542],[7.023061,52.921812],[7.016223,52.926136],[7.016087,52.926222],[7.01477,52.927055],[7.014348,52.927422],[7.004432,52.936063],[7.003572,52.936812],[7.003242,52.937099],[7.001788,52.938018],[7.001363,52.938377],[6.9888,52.948979],[6.988674,52.949093],[6.98588,52.951621],[6.980603,52.956396],[6.978865,52.957967],[6.978715,52.958103],[6.970814,52.964764],[6.970049,52.965409],[6.969999,52.965451],[6.957036,52.976374],[6.95309,52.979699],[6.948556,52.983516],[6.948372,52.983672],[6.944066,52.988222],[6.944007,52.988278],[6.938303,52.99369],[6.938176,52.99377],[6.936846,52.994608],[6.935312,52.995477],[6.92224,53.002886],[6.922119,53.002967],[6.907611,53.012634],[6.905125,53.01429],[6.897819,53.019156],[6.897481,53.019381],[6.862483,53.042289],[6.843539,53.053264],[6.843464,53.053308],[6.83762,53.056974],[6.837528,53.057035],[6.815723,53.071618],[6.815408,53.071816],[6.814261,53.072535],[6.790501,53.087414],[6.777683,53.095435],[6.749859,53.112832],[6.748422,53.114646],[6.745599,53.11641],[6.744026,53.117393],[6.743588,53.117598],[6.738137,53.120156],[6.724018,53.120968],[6.72173,53.1211],[6.719351,53.121237],[6.718748,53.121271],[6.695183,53.122418],[6.694878,53.122433],[6.676848,53.119033],[6.676825,53.119025],[6.669702,53.116557],[6.669301,53.116418],[6.636166,53.106883],[6.636162,53.106884],[6.637732,53.109561],[6.636394,53.114968],[6.628978,53.116842],[6.630575,53.120421],[6.627878,53.12381],[6.62769,53.124046],[6.62326,53.125889],[6.619285,53.130883],[6.618932,53.131326],[6.618958,53.132225],[6.617515,53.134037],[6.614642,53.136727],[6.614603,53.136764],[6.60432,53.14316],[6.603591,53.143842],[6.601407,53.145886],[6.587982,53.14692],[6.587098,53.149514],[6.585216,53.155036],[6.588281,53.157702],[6.582499,53.16495],[6.581943,53.164745],[6.565882,53.158823],[6.565625,53.158825],[6.564387,53.158837],[6.562916,53.159751],[6.561592,53.166055],[6.561598,53.166273],[6.561616,53.166953],[6.561427,53.167252],[6.558747,53.171475],[6.548801,53.18121],[6.549069,53.181306],[6.549312,53.182352],[6.548569,53.182359],[6.54401,53.179707],[6.542514,53.179722],[6.540647,53.181112],[6.535179,53.185184],[6.52948,53.196024],[6.53063,53.196693],[6.531,53.196908],[6.516555,53.19966],[6.516107,53.199745],[6.516085,53.198897],[6.516084,53.198847],[6.515907,53.198744],[6.514564,53.197962],[6.514427,53.19803],[6.507176,53.201627],[6.497103,53.199144],[6.496631,53.199028],[6.493662,53.199954],[6.493721,53.202277],[6.493731,53.20265],[6.48482,53.205428],[6.463756,53.201125],[6.45058,53.197748],[6.4502,53.197651],[6.448704,53.197664],[6.447075,53.192286],[6.443995,53.188718],[6.424397,53.182598],[6.407858,53.179145],[6.40632,53.177361],[6.40628,53.17717],[6.404634,53.169286],[6.399259,53.165832],[6.398561,53.165383],[6.389452,53.159528],[6.389095,53.159278],[6.382294,53.154508],[6.381853,53.154199],[6.381853,53.154181],[6.381791,53.151503],[6.383265,53.150592],[6.381836,53.148931],[6.381729,53.148808],[6.366217,53.123774],[6.366215,53.12377],[6.366183,53.122393],[6.366174,53.121973],[6.366154,53.121075],[6.366089,53.120614],[6.364391,53.108608],[6.364377,53.108507],[6.35691,53.108567],[6.344705,53.088323],[6.344508,53.087996],[6.341543,53.088918],[6.341504,53.08893],[6.338577,53.089841],[6.338413,53.089882],[6.316303,53.095408],[6.296971,53.099151],[6.296306,53.100842],[6.293473,53.100237],[6.291037,53.100994],[6.28372,53.108238],[6.274834,53.1119],[6.262959,53.115582],[6.255491,53.115636],[6.254788,53.115599],[6.240538,53.114845],[6.23983,53.114887],[6.226473,53.115681],[6.213393,53.116457],[6.207672,53.116796],[6.20622,53.116882],[6.205492,53.11733],[6.203288,53.118686],[6.19462,53.124019],[6.194405,53.124152],[6.185558,53.130502],[6.176691,53.135953],[6.177018,53.153882],[6.177018,53.153925],[6.177133,53.160215],[6.177281,53.168303],[6.183203,53.175229],[6.183394,53.175452],[6.186468,53.179925],[6.186472,53.179933],[6.188031,53.18351],[6.188166,53.183687],[6.194165,53.191557],[6.2002,53.194212],[6.200302,53.199604],[6.204825,53.201371],[6.209315,53.20134],[6.219894,53.206659],[6.222957,53.210233],[6.229537,53.217908],[6.230616,53.219166],[6.230704,53.223659],[6.224854,53.23089],[6.224639,53.231022],[6.221894,53.232708],[6.21444,53.234557],[6.215972,53.236344],[6.216701,53.236771],[6.219002,53.23812],[6.223548,53.240785],[6.2191,53.242608],[6.219088,53.242613],[6.220621,53.2444],[6.225133,53.245267],[6.231142,53.246124],[6.234262,53.252393],[6.235795,53.254179],[6.232851,53.256896],[6.232869,53.257795],[6.237382,53.258661],[6.238916,53.260448],[6.238951,53.262245],[6.242832,53.266764],[6.243554,53.267604],[6.246588,53.26938],[6.251066,53.268449],[6.255581,53.269316],[6.255587,53.269624],[6.255635,53.272011],[6.25419,53.274718],[6.252763,53.278323],[6.252907,53.285511],[6.252938,53.285599],[6.254497,53.289993],[6.254543,53.290013],[6.26055,53.292645],[6.266549,53.292602],[6.26803,53.291692],[6.271103,53.295264],[6.275382,53.300238],[6.275713,53.300622],[6.280287,53.304183],[6.280409,53.304213],[6.290048,53.306603],[6.290844,53.3068],[6.293901,53.309473],[6.293914,53.31008],[6.293939,53.311271],[6.293783,53.311319],[6.287975,53.313113],[6.280492,53.314067],[6.287075,53.341877],[6.291541,53.340046],[6.292967,53.336441],[6.293043,53.340035],[6.29653,53.338369],[6.299195,53.34061],[6.293512,53.340366],[6.287572,53.342599],[6.287572,53.342599],[6.287094,53.342776],[6.279624,53.344629],[6.272172,53.34738],[6.254207,53.350206],[6.249702,53.350239],[6.239083,53.344922],[6.234579,53.344954],[6.233095,53.345863],[6.233254,53.35395],[6.246806,53.355652],[6.252886,53.359203],[6.257374,53.358272],[6.25741,53.360069],[6.25294,53.361898],[6.249954,53.362818],[6.240888,53.360187],[6.237883,53.360208],[6.233395,53.361139],[6.239474,53.36469],[6.239528,53.367386],[6.238079,53.370092],[6.238096,53.370991],[6.233536,53.368327],[6.221483,53.366614],[6.218444,53.364837],[6.211001,53.368483],[6.211036,53.37028],[6.214092,53.372955],[6.221605,53.372903],[6.23366,53.374617],[6.226165,53.375568],[6.22164,53.3747],[6.215664,53.376539],[6.208168,53.377489],[6.200638,53.376641],[6.191672,53.379398],[6.185661,53.379438],[6.184209,53.382143],[6.185745,53.38393],[6.191756,53.38389],[6.199271,53.38384],[6.202327,53.386515],[6.196417,53.391947],[6.185945,53.394713],[6.179948,53.395651],[6.179981,53.397448],[6.181551,53.401032],[6.186128,53.404597],[6.199661,53.404506],[6.2026,53.400892],[6.211535,53.396338],[6.217444,53.390905],[6.221918,53.389077],[6.224924,53.389056],[6.23396,53.389892],[6.23702,53.392566],[6.235552,53.394374],[6.232581,53.396192],[6.225082,53.397143],[6.222093,53.398062],[6.213124,53.40082],[6.195234,53.409029],[6.19504,53.409148],[6.193747,53.409938],[6.192277,53.411745],[6.199746,53.408999],[6.208591,53.409994],[6.209065,53.410047],[6.214818,53.410693],[6.245001,53.415874],[6.255547,53.416697],[6.261527,53.414857],[6.292882,53.403841],[6.301789,53.398382],[6.302041,53.39833],[6.30628,53.397449],[6.309286,53.397426],[6.316861,53.400064],[6.327464,53.403576],[6.333537,53.406225],[6.333557,53.407123],[6.35924,53.412311],[6.365297,53.414059],[6.381943,53.418416],[6.392429,53.416532],[6.413549,53.419049],[6.41388,53.41912],[6.425646,53.421642],[6.455818,53.424973],[6.481481,53.428337],[6.516104,53.428916],[6.529738,53.432382],[6.537236,53.431412],[6.546311,53.433123],[6.565826,53.436502],[6.565968,53.436527],[6.572061,53.439163],[6.581089,53.439074],[6.588662,53.440796],[6.608377,53.44599],[6.620493,53.448562],[6.629601,53.451165],[6.638137,53.452766],[6.638684,53.452868],[6.655399,53.458086],[6.669001,53.459739],[6.727933,53.466288],[6.72863,53.466315],[6.746028,53.466984],[6.756538,53.465966],[6.779004,53.462114]]],[[[6.408227,53.511655],[6.40672,53.511668],[6.400797,53.516211],[6.402347,53.517995],[6.403897,53.519779],[6.413007,53.522398],[6.422075,53.523219],[6.423517,53.520511],[6.418951,53.518753],[6.4129,53.517906],[6.408227,53.511655]]],[[[6.574993,53.545176],[6.59156,53.544113],[6.594602,53.544981],[6.602093,53.543109],[6.616969,53.535769],[6.597517,53.541358],[6.5899,53.538738],[6.567129,53.533571],[6.565695,53.536281],[6.565844,53.541671],[6.568885,53.54254],[6.575018,53.546074],[6.574993,53.545176]]],[[[6.489174,53.55228],[6.512959,53.538581],[6.51442,53.53677],[6.50398,53.541361],[6.487596,53.549599],[6.478568,53.550579],[6.477036,53.549695],[6.477013,53.548796],[6.487481,53.545107],[6.490498,53.545079],[6.512841,53.534089],[6.512817,53.533191],[6.505301,53.534159],[6.502378,53.537781],[6.496369,53.538735],[6.481218,53.536177],[6.481195,53.535279],[6.480965,53.526295],[6.477813,53.520931],[6.474752,53.519162],[6.471782,53.520986],[6.463052,53.533645],[6.452742,53.543621],[6.451256,53.544533],[6.457469,53.551667],[6.465103,53.555193],[6.469652,53.556051],[6.477196,53.555984],[6.489174,53.55228]]]]}},{type:"Feature",properties:{id:24,name:"Friesland",created_at:"2013-11-30T17:55:36+0100",updated_at:"2013-11-30T17:55:36+0100",cartodb_id:3},geometry:{type:"MultiPolygon",coordinates:[[[[5.202833,53.018881],[5.16716,52.999947],[5.165665,53.000843],[5.201338,53.019777],[5.207289,53.022482],[5.293638,53.068415],[5.301095,53.070218],[5.323472,53.073827],[5.327949,53.07383],[5.307064,53.070223],[5.296624,53.067519],[5.220683,53.027894],[5.213244,53.024289],[5.213254,53.021592],[5.20879,53.019788],[5.202833,53.018881]]],[[[5.368238,53.077438],[5.372717,53.072945],[5.377193,53.072945],[5.38167,53.072946],[5.386147,53.07025],[5.387959,53.066974],[5.389131,53.064858],[5.391783,53.060863],[5.392114,53.060364],[5.395098,53.058566],[5.395097,53.056769],[5.381672,53.056769],[5.378689,53.057668],[5.375705,53.058566],[5.368243,53.066653],[5.365256,53.071146],[5.365254,53.07564],[5.368238,53.076539],[5.368238,53.077438]]],[[[5.159645,53.296498],[5.15965,53.2956],[5.155146,53.29649],[5.149151,53.295579],[5.143172,53.291973],[5.134189,53.289258],[5.129706,53.286553],[5.122219,53.284739],[5.120736,53.28204],[5.119237,53.282036],[5.114715,53.285621],[5.114687,53.290114],[5.116175,53.291915],[5.126636,53.298228],[5.134125,53.300042],[5.143126,53.30006],[5.159645,53.296498]]],[[[5.093642,53.297253],[5.090648,53.296347],[5.087642,53.297239],[5.077142,53.297212],[5.062163,53.294476],[5.061884,53.294138],[5.060677,53.292675],[5.05022,53.287254],[5.03227,53.281811],[4.987379,53.271784],[4.97244,53.266342],[4.972475,53.262747],[4.975524,53.257366],[4.977039,53.255574],[4.971054,53.254654],[4.963579,53.252831],[4.954643,53.247407],[4.956141,53.247412],[4.95467,53.244711],[4.945709,53.241983],[4.932264,53.238338],[4.936796,53.23476],[4.935364,53.228464],[4.932387,53.226655],[4.926417,53.224835],[4.920466,53.221218],[4.913029,53.216695],[4.910044,53.215784],[4.889074,53.216598],[4.878605,53.215655],[4.874124,53.214737],[4.868179,53.211117],[4.862224,53.208395],[4.862246,53.206598],[4.868212,53.208421],[4.86973,53.206631],[4.86076,53.205693],[4.857767,53.20568],[4.856259,53.206572],[4.850182,53.213734],[4.850104,53.220024],[4.854552,53.223639],[4.863503,53.226374],[4.876917,53.231824],[4.924621,53.252687],[4.936552,53.258124],[4.951438,53.268065],[4.960396,53.271691],[5.002209,53.289806],[5.032107,53.30158],[5.062055,53.308854],[5.078559,53.308898],[5.098088,53.305352],[5.0996,53.303558],[5.098112,53.301758],[5.09462,53.298239],[5.093642,53.297253]]],[[[6.183321,53.415399],[6.190807,53.413552],[6.192127,53.411929],[6.191764,53.411748],[6.187766,53.411775],[6.187782,53.412673],[6.184808,53.41449],[6.178792,53.41453],[6.159144,53.409266],[6.162152,53.409246],[6.162135,53.408348],[6.157495,53.401189],[6.155879,53.394908],[6.157254,53.387711],[6.161715,53.384986],[6.163116,53.38055],[6.163121,53.380548],[6.163666,53.379913],[6.163649,53.379217],[6.163555,53.378877],[6.164542,53.375083],[6.162975,53.371498],[6.162942,53.369701],[6.162878,53.366107],[6.167205,53.356194],[6.168609,53.350793],[6.171515,53.345382],[6.17894,53.34084],[6.174321,53.33458],[6.177192,53.327371],[6.180111,53.322859],[6.178594,53.32197],[6.175576,53.321091],[6.168056,53.320242],[6.162037,53.319382],[6.162029,53.319377],[6.16052,53.318493],[6.17706,53.320183],[6.181595,53.32195],[6.181628,53.323748],[6.178676,53.326463],[6.177241,53.330067],[6.175789,53.332773],[6.17734,53.335458],[6.181926,53.339922],[6.192335,53.33446],[6.196821,53.333532],[6.198575,53.33352],[6.198831,53.333575],[6.19945,53.333752],[6.200051,53.335112],[6.195337,53.33444],[6.193853,53.335349],[6.192368,53.336258],[6.192385,53.337156],[6.192402,53.338055],[6.176118,53.350744],[6.176217,53.356135],[6.182274,53.358791],[6.19721,53.354198],[6.198644,53.350594],[6.19699,53.342517],[6.199942,53.339801],[6.203013,53.343375],[6.201596,53.347878],[6.204736,53.355046],[6.207757,53.355924],[6.218253,53.354953],[6.21972,53.353146],[6.218132,53.348664],[6.218097,53.346867],[6.222532,53.343241],[6.228485,53.340504],[6.229951,53.338696],[6.229881,53.335102],[6.234438,53.337766],[6.238906,53.335937],[6.255365,53.333123],[6.240425,53.336825],[6.235957,53.338654],[6.224103,53.346825],[6.221152,53.349541],[6.224208,53.352216],[6.227159,53.3495],[6.22859,53.345895],[6.234544,53.343157],[6.237529,53.342237],[6.24357,53.343992],[6.251167,53.348431],[6.254189,53.349308],[6.264645,53.346536],[6.273655,53.34647],[6.281088,53.34282],[6.287075,53.341877],[6.280492,53.314067],[6.287975,53.313113],[6.293783,53.311319],[6.293939,53.311271],[6.293914,53.31008],[6.293901,53.309473],[6.290844,53.3068],[6.290048,53.306603],[6.280409,53.304213],[6.280287,53.304183],[6.275713,53.300622],[6.275382,53.300238],[6.271103,53.295264],[6.26803,53.291692],[6.266549,53.292602],[6.26055,53.292645],[6.254543,53.290013],[6.254497,53.289993],[6.252938,53.285599],[6.252907,53.285511],[6.252763,53.278323],[6.25419,53.274718],[6.255635,53.272011],[6.255587,53.269624],[6.255581,53.269316],[6.251066,53.268449],[6.246588,53.26938],[6.243554,53.267604],[6.242832,53.266764],[6.238951,53.262245],[6.238916,53.260448],[6.237382,53.258661],[6.232869,53.257795],[6.232851,53.256896],[6.235795,53.254179],[6.234262,53.252393],[6.231142,53.246124],[6.225133,53.245267],[6.220621,53.2444],[6.219088,53.242613],[6.2191,53.242608],[6.223548,53.240785],[6.219002,53.23812],[6.216701,53.236771],[6.215972,53.236344],[6.21444,53.234557],[6.221894,53.232708],[6.224639,53.231022],[6.224854,53.23089],[6.230704,53.223659],[6.230616,53.219166],[6.229537,53.217908],[6.222957,53.210233],[6.219894,53.206659],[6.209315,53.20134],[6.204825,53.201371],[6.200302,53.199604],[6.2002,53.194212],[6.194165,53.191557],[6.188166,53.183687],[6.188031,53.18351],[6.186472,53.179933],[6.186468,53.179925],[6.183394,53.175452],[6.183203,53.175229],[6.177281,53.168303],[6.177133,53.160215],[6.177018,53.153925],[6.177018,53.153882],[6.176691,53.135953],[6.185558,53.130502],[6.194405,53.124152],[6.19462,53.124019],[6.203288,53.118686],[6.205492,53.11733],[6.20622,53.116882],[6.207672,53.116796],[6.213393,53.116457],[6.226473,53.115681],[6.23983,53.114887],[6.240538,53.114845],[6.254788,53.115599],[6.255491,53.115636],[6.262959,53.115582],[6.274834,53.1119],[6.28372,53.108238],[6.291037,53.100994],[6.293473,53.100237],[6.296306,53.100842],[6.296971,53.099151],[6.316303,53.095408],[6.305568,53.082009],[6.332313,53.076409],[6.351612,53.071761],[6.351967,53.07168],[6.367943,53.068034],[6.366194,53.053494],[6.366107,53.05277],[6.364349,53.040318],[6.364333,53.040201],[6.362721,53.034822],[6.375872,53.02303],[6.376102,53.022815],[6.407963,52.993101],[6.408266,52.99277],[6.413772,52.986759],[6.423982,52.977684],[6.424006,52.977658],[6.428341,52.973152],[6.406932,52.949069],[6.406671,52.948746],[6.403222,52.944476],[6.397603,52.937518],[6.394677,52.933893],[6.36915,52.92332],[6.3346,52.907421],[6.303781,52.926536],[6.283623,52.927475],[6.257718,52.928678],[6.247219,52.92426],[6.245661,52.920676],[6.24267,52.919799],[6.242321,52.919622],[6.232158,52.914481],[6.229132,52.911806],[6.228885,52.911577],[6.207948,52.89218],[6.201498,52.889409],[6.191471,52.885102],[6.191453,52.885095],[6.16155,52.873615],[6.161152,52.873434],[6.142086,52.864752],[6.141983,52.864708],[6.121145,52.855894],[6.120995,52.855806],[6.119645,52.855005],[6.095744,52.846161],[6.09551,52.846106],[6.088294,52.844408],[6.083783,52.840839],[6.080801,52.839957],[6.061905,52.840066],[6.061506,52.840068],[6.055402,52.838874],[6.055101,52.838815],[6.052574,52.838321],[6.055446,52.832013],[6.058373,52.8293],[6.058442,52.829214],[6.059829,52.827494],[6.057118,52.826206],[6.05745,52.826817],[6.057277,52.827112],[6.053999,52.825164],[6.05368,52.824639],[6.053672,52.824568],[6.044883,52.820387],[6.031465,52.815967],[6.031421,52.816022],[6.025636,52.823188],[6.009291,52.821477],[5.998856,52.817936],[5.997372,52.817944],[5.994548,52.819684],[5.99443,52.819756],[5.990017,52.822475],[5.987358,52.822488],[5.98706,52.823236],[5.987062,52.823389],[5.986964,52.823541],[5.984302,52.827671],[5.984156,52.827897],[5.976834,52.835124],[5.97249,52.843234],[5.959096,52.840603],[5.956104,52.838819],[5.957541,52.835217],[5.956045,52.834326],[5.947199,52.838862],[5.942723,52.837085],[5.942567,52.837072],[5.932323,52.836234],[5.926365,52.834464],[5.923364,52.831781],[5.92476,52.824584],[5.924679,52.824552],[5.915814,52.821029],[5.912793,52.816548],[5.91272,52.81652],[5.908321,52.814771],[5.900883,52.813005],[5.897864,52.808524],[5.882992,52.804992],[5.879996,52.802308],[5.879206,52.802311],[5.87703,52.80232],[5.869635,52.804148],[5.860756,52.805981],[5.851867,52.806915],[5.851267,52.806844],[5.844442,52.806045],[5.843889,52.806114],[5.845342,52.80836],[5.845075,52.808573],[5.844851,52.808551],[5.844448,52.808425],[5.843989,52.808065],[5.842346,52.806307],[5.837036,52.806972],[5.837064,52.809668],[5.834125,52.812375],[5.829693,52.814189],[5.825243,52.814206],[5.824759,52.814502],[5.82082,52.816918],[5.820835,52.818445],[5.819628,52.818303],[5.810418,52.815158],[5.795509,52.807121],[5.789551,52.804445],[5.788118,52.809842],[5.788028,52.810122],[5.785233,52.81884],[5.749807,52.840523],[5.747359,52.841273],[5.746846,52.841431],[5.725046,52.845019],[5.724609,52.845091],[5.727515,52.836994],[5.726024,52.836099],[5.714171,52.838828],[5.714191,52.841525],[5.717173,52.843314],[5.715689,52.843318],[5.714948,52.84332],[5.709751,52.843334],[5.708227,52.837946],[5.703781,52.838856],[5.699348,52.841564],[5.699372,52.844894],[5.699373,52.845159],[5.698386,52.845162],[5.697889,52.845163],[5.693442,52.846074],[5.686026,52.846991],[5.683051,52.8461],[5.672861,52.845611],[5.672834,52.845609],[5.665232,52.845244],[5.657809,52.845261],[5.656336,52.847062],[5.656375,52.853353],[5.65787,52.855147],[5.654912,52.856951],[5.644544,52.861468],[5.641574,52.861474],[5.635624,52.859689],[5.623721,52.85522],[5.619247,52.851633],[5.614798,52.852541],[5.613746,52.852613],[5.60144,52.853464],[5.585096,52.850796],[5.583599,52.848102],[5.583591,52.846305],[5.580598,52.840917],[5.574646,52.837331],[5.574424,52.837278],[5.567218,52.835545],[5.559794,52.834657],[5.553854,52.833767],[5.544949,52.833779],[5.528639,52.838293],[5.50046,52.846412],[5.500379,52.84644],[5.490077,52.850017],[5.489559,52.850107],[5.479689,52.851823],[5.464845,52.853631],[5.454456,52.856333],[5.45,52.855437],[5.448513,52.85364],[5.450042,52.852519],[5.441087,52.851846],[5.439602,52.851847],[5.430694,52.850952],[5.426238,52.849156],[5.414363,52.851855],[5.398033,52.858149],[5.384669,52.867137],[5.379752,52.869687],[5.37427,52.872529],[5.372785,52.87163],[5.362386,52.874324],[5.3609,52.876122],[5.360899,52.877919],[5.359411,52.881514],[5.358992,52.881893],[5.353464,52.886905],[5.354981,52.888374],[5.360889,52.894097],[5.369113,52.899073],[5.369803,52.899491],[5.372776,52.90039],[5.38318,52.903087],[5.387639,52.905783],[5.392099,52.906682],[5.393585,52.905783],[5.401018,52.906681],[5.406966,52.911174],[5.406967,52.91387],[5.407162,52.914458],[5.409945,52.922857],[5.408459,52.925554],[5.406973,52.926453],[5.405487,52.930048],[5.401106,52.939762],[5.401028,52.939935],[5.396566,52.94353],[5.402518,52.946226],[5.40847,52.947123],[5.408518,52.947269],[5.41145,52.95611],[5.406988,52.961503],[5.411349,52.961503],[5.411453,52.961503],[5.432302,52.972281],[5.424856,52.969588],[5.41592,52.964198],[5.414432,52.964198],[5.406995,52.976782],[5.404021,52.98577],[5.401043,52.989365],[5.401043,52.990264],[5.398067,53.001947],[5.396578,53.003745],[5.402539,53.008238],[5.404029,53.008238],[5.40552,53.010035],[5.407011,53.012731],[5.407012,53.015427],[5.407034,53.015518],[5.408422,53.021367],[5.408505,53.021718],[5.408506,53.022616],[5.404034,53.022617],[5.398073,53.024415],[5.396583,53.026213],[5.396583,53.028989],[5.396583,53.029808],[5.398074,53.030706],[5.401056,53.031605],[5.404038,53.032503],[5.405148,53.043169],[5.405535,53.046882],[5.404044,53.046882],[5.402734,53.043335],[5.401058,53.038794],[5.401057,53.034301],[5.399566,53.033402],[5.396584,53.033402],[5.393602,53.034301],[5.38913,53.041491],[5.384656,53.045985],[5.380182,53.048681],[5.378689,53.054073],[5.377197,53.05587],[5.392114,53.05587],[5.395097,53.05587],[5.399572,53.05587],[5.402554,53.053173],[5.404046,53.053173],[5.402555,53.05587],[5.395327,53.061968],[5.395098,53.062161],[5.392115,53.067554],[5.391904,53.067935],[5.390623,53.07025],[5.392116,53.072946],[5.389131,53.078338],[5.383161,53.085528],[5.380174,53.092717],[5.379978,53.09267],[5.37271,53.090919],[5.351821,53.078333],[5.34287,53.074735],[5.338394,53.073834],[5.336901,53.074733],[5.335409,53.074732],[5.335218,53.074725],[5.335167,53.074723],[5.331035,53.074575],[5.334305,53.075364],[5.334658,53.07545],[5.335408,53.075631],[5.348836,53.078332],[5.378681,53.096312],[5.381666,53.099008],[5.383159,53.105299],[5.378678,53.108893],[5.387639,53.112488],[5.387673,53.112501],[5.399589,53.116981],[5.399675,53.117085],[5.401083,53.118779],[5.401115,53.118804],[5.405566,53.122373],[5.407062,53.127765],[5.407105,53.12792],[5.410056,53.138548],[5.411559,53.152927],[5.416052,53.166406],[5.414559,53.170001],[5.412466,53.1709],[5.410753,53.171636],[5.404092,53.174496],[5.402597,53.177193],[5.405588,53.174496],[5.408579,53.173597],[5.4099,53.172405],[5.413469,53.1709],[5.416055,53.170899],[5.41456,53.171798],[5.414298,53.171798],[5.413065,53.171799],[5.41157,53.173596],[5.410075,53.175394],[5.411572,53.177191],[5.420549,53.179885],[5.419614,53.180447],[5.419518,53.180426],[5.419484,53.180526],[5.419054,53.180784],[5.416062,53.180785],[5.420552,53.18348],[5.426537,53.185275],[5.435519,53.189765],[5.435778,53.190076],[5.439012,53.193953],[5.440014,53.195155],[5.435526,53.196056],[5.435073,53.195648],[5.43253,53.193361],[5.435522,53.192461],[5.435521,53.191563],[5.434024,53.190665],[5.43352,53.190665],[5.433419,53.190665],[5.431031,53.190666],[5.429532,53.18797],[5.426538,53.186174],[5.414567,53.182582],[5.411573,53.178988],[5.410076,53.177191],[5.405588,53.176293],[5.407085,53.177192],[5.40858,53.177192],[5.410085,53.178095],[5.412095,53.180553],[5.413072,53.183481],[5.42205,53.186175],[5.426387,53.192244],[5.426544,53.192465],[5.429447,53.197685],[5.429542,53.197856],[5.438536,53.210433],[5.438537,53.211332],[5.447531,53.220314],[5.456524,53.225702],[5.462517,53.227495],[5.462834,53.22774],[5.473016,53.235576],[5.483515,53.241859],[5.489938,53.243394],[5.491009,53.24365],[5.504509,53.249928],[5.516507,53.25351],[5.520391,53.255251],[5.528512,53.258889],[5.537526,53.265169],[5.537638,53.265302],[5.539031,53.266964],[5.537532,53.266966],[5.546549,53.273245],[5.555557,53.276827],[5.561591,53.285805],[5.579638,53.29746],[5.587158,53.301941],[5.617209,53.310873],[5.626216,53.311754],[5.632234,53.314438],[5.632504,53.314524],[5.654787,53.321579],[5.681826,53.325111],[5.682042,53.325172],[5.719432,53.335796],[5.729984,53.341159],[5.766122,53.352733],[5.766299,53.352781],[5.785697,53.358061],[5.800743,53.360706],[5.808289,53.364275],[5.818832,53.366933],[5.827196,53.370225],[5.827883,53.370495],[5.845961,53.374921],[5.848995,53.377605],[5.868581,53.382021],[5.871607,53.383806],[5.879183,53.389167],[5.882189,53.389155],[5.883682,53.38825],[5.886699,53.389136],[5.879265,53.396356],[5.882272,53.396344],[5.886709,53.390035],[5.888202,53.38913],[5.892701,53.388213],[5.903233,53.389067],[5.912263,53.389926],[5.921271,53.388988],[5.927283,53.388961],[5.932492,53.388938],[5.933296,53.388934],[5.958932,53.395106],[5.968875,53.395906],[5.969468,53.395954],[5.9785,53.396808],[6.008659,53.402947],[6.00982,53.403028],[6.020701,53.403783],[6.021141,53.403807],[6.035751,53.404601],[6.036159,53.404651],[6.064376,53.408039],[6.064946,53.408035],[6.070391,53.408005],[6.073399,53.407987],[6.074324,53.407797],[6.077896,53.407063],[6.085385,53.405223],[6.088656,53.407522],[6.092992,53.41057],[6.094466,53.408764],[6.114,53.407749],[6.114092,53.407739],[6.129887,53.405923],[6.13051,53.405851],[6.139516,53.404897],[6.177305,53.415439],[6.183321,53.415399]]],[[[5.553193,53.442176],[5.554691,53.440377],[5.554684,53.43858],[5.556154,53.429592],[5.554653,53.430492],[5.553155,53.432292],[5.551685,53.44128],[5.550177,53.440383],[5.545642,53.434997],[5.544137,53.434999],[5.529077,53.431424],[5.517035,53.42964],[5.514028,53.430542],[5.511016,53.429646],[5.509512,53.429648],[5.497461,53.424268],[5.480903,53.419789],[5.473385,53.421592],[5.467373,53.424292],[5.464369,53.426989],[5.462861,53.425193],[5.471877,53.419795],[5.47338,53.418896],[5.474877,53.4153],[5.470364,53.415304],[5.462845,53.416207],[5.450819,53.420707],[5.446306,53.420709],[5.446305,53.419811],[5.456826,53.414413],[5.476373,53.411705],[5.480885,53.411701],[5.479379,53.410804],[5.476368,53.409009],[5.471854,53.408114],[5.455308,53.405428],[5.441774,53.405435],[5.428305,53.40544],[5.42824,53.405441],[5.407188,53.405446],[5.39215,53.404549],[5.377114,53.400954],[5.371565,53.39811],[5.366591,53.395561],[5.359078,53.390168],[5.350062,53.386571],[5.349802,53.386454],[5.344052,53.383873],[5.333532,53.38297],[5.330528,53.381171],[5.330135,53.381014],[5.326022,53.379372],[5.313997,53.381162],[5.312495,53.380263],[5.312497,53.379364],[5.307992,53.377564],[5.300585,53.376673],[5.300479,53.37666],[5.298977,53.376659],[5.295981,53.372164],[5.29448,53.371264],[5.277943,53.374845],[5.274937,53.374842],[5.268934,53.37214],[5.259913,53.373928],[5.257187,53.373925],[5.256908,53.373925],[5.253911,53.371226],[5.243405,53.367619],[5.240811,53.368133],[5.238895,53.368513],[5.226882,53.3667],[5.220876,53.365793],[5.217885,53.362194],[5.217899,53.3586],[5.216401,53.357699],[5.213397,53.357695],[5.211501,53.357692],[5.210393,53.35769],[5.207392,53.356787],[5.204396,53.354986],[5.195396,53.352276],[5.196902,53.35138],[5.199905,53.351384],[5.201407,53.351387],[5.201411,53.350488],[5.192412,53.347778],[5.184908,53.346867],[5.184904,53.347765],[5.181896,53.348659],[5.169877,53.349536],[5.160843,53.354013],[5.156342,53.353106],[5.153333,53.353998],[5.151812,53.35759],[5.154782,53.363886],[5.168247,53.374695],[5.183231,53.383707],[5.18473,53.384608],[5.184717,53.387304],[5.192209,53.392708],[5.198206,53.396312],[5.210222,53.399026],[5.251646,53.404388],[5.252304,53.404473],[5.276352,53.40899],[5.2974,53.411704],[5.298026,53.411798],[5.315211,53.414377],[5.315444,53.414412],[5.365074,53.42162],[5.365174,53.421637],[5.39817,53.427013],[5.444822,53.435986],[5.483968,53.444947],[5.512578,53.449414],[5.527631,53.449397],[5.539667,53.447585],[5.553193,53.442176]]],[[[6.054519,53.451227],[6.052958,53.447642],[6.049962,53.448557],[6.046979,53.45037],[6.047007,53.452167],[6.048553,53.454855],[6.054631,53.458416],[6.06213,53.456577],[6.063607,53.454771],[6.062074,53.452983],[6.057544,53.452109],[6.054519,53.451227]]],[[[5.691847,53.468863],[5.682799,53.467089],[5.678293,53.468897],[5.664739,53.468929],[5.663228,53.468034],[5.663222,53.467135],[5.672239,53.464418],[5.688784,53.461682],[5.730937,53.460671],[5.731444,53.460687],[5.785079,53.462299],[5.785157,53.462302],[5.896654,53.468172],[5.93583,53.469798],[5.949384,53.469735],[5.962913,53.467874],[5.97043,53.46694],[5.973417,53.465128],[5.971863,53.461541],[5.967309,53.458867],[5.958252,53.457113],[5.944702,53.457177],[5.928153,53.458151],[5.907075,53.458243],[5.893472,53.453808],[5.88743,53.452036],[5.866315,53.448528],[5.834659,53.444156],[5.80601,53.438868],[5.789456,53.438924],[5.78892,53.438966],[5.777425,53.439862],[5.772918,53.440775],[5.751856,53.441739],[5.741336,53.443568],[5.730808,53.444497],[5.73077,53.444489],[5.721763,53.442725],[5.717206,53.437346],[5.71419,53.436456],[5.703617,53.431092],[5.690056,53.428431],[5.68101,53.425758],[5.67719,53.425767],[5.674992,53.425772],[5.670467,53.423986],[5.673476,53.423979],[5.67498,53.423975],[5.668945,53.421294],[5.664438,53.422203],[5.659931,53.423112],[5.650916,53.424929],[5.62689,53.433066],[5.620891,53.436672],[5.614904,53.442974],[5.613432,53.449267],[5.616477,53.455551],[5.617982,53.455548],[5.630077,53.464511],[5.637627,53.46809],[5.655715,53.470746],[5.669275,53.471614],[5.691847,53.468863]]],[[[6.047449,53.48092],[6.051912,53.477301],[6.047407,53.478225],[6.038288,53.472883],[6.033756,53.472008],[6.029238,53.472033],[6.030798,53.475619],[6.03837,53.478274],[6.044436,53.480937],[6.047449,53.48092]]],[[[6.125884,53.486756],[6.127236,53.477761],[6.122517,53.466108],[6.119444,53.462533],[6.116479,53.465246],[6.113559,53.470656],[6.118168,53.476019],[6.119736,53.479604],[6.121365,53.486783],[6.118291,53.483208],[6.119874,53.487691],[6.126024,53.494842],[6.136634,53.498371],[6.138125,53.497464],[6.13508,53.495685],[6.12896,53.490331],[6.125884,53.486756]]],[[[6.361378,53.506651],[6.343193,53.502303],[6.337165,53.502351],[6.332664,53.503285],[6.328143,53.50332],[6.314482,53.498933],[6.305383,53.496306],[6.299318,53.494555],[6.287226,53.492849],[6.275099,53.489344],[6.27203,53.486671],[6.267474,53.484907],[6.266004,53.486715],[6.259887,53.482266],[6.262899,53.482244],[6.25682,53.479593],[6.24321,53.476994],[6.240233,53.478812],[6.238781,53.481518],[6.231373,53.487861],[6.231355,53.486962],[6.237257,53.480631],[6.237221,53.478834],[6.231161,53.477079],[6.228166,53.477998],[6.223648,53.47803],[6.214593,53.477194],[6.197975,53.474611],[6.194946,53.473732],[6.169343,53.473901],[6.161797,53.473051],[6.158769,53.472172],[6.157198,53.468588],[6.155628,53.465003],[6.151015,53.459641],[6.140366,53.453417],[6.140334,53.45162],[6.141808,53.449814],[6.137292,53.449842],[6.132808,53.451667],[6.123961,53.462505],[6.127019,53.465182],[6.134595,53.467831],[6.130108,53.469656],[6.128727,53.476854],[6.131848,53.483125],[6.136493,53.490285],[6.139553,53.492962],[6.157779,53.500934],[6.153258,53.500963],[6.145723,53.50101],[6.1396,53.495657],[6.141234,53.502836],[6.191017,53.50521],[6.23022,53.505841],[6.281518,53.508168],[6.296628,53.509852],[6.338951,53.514917],[6.355553,53.515684],[6.367612,53.515587],[6.370586,53.513765],[6.370545,53.511968],[6.361378,53.506651]]]]}},{type:"Feature",properties:{id:18,name:"Gelderland",created_at:"2013-11-30T17:55:36+0100",updated_at:"2013-11-30T17:55:36+0100",cartodb_id:6},geometry:{type:"MultiPolygon",coordinates:[[[[5.920931,52.483457],[5.926394,52.474935],[5.938203,52.477577],[5.946889,52.482799],[5.947104,52.482929],[5.951543,52.484705],[5.958905,52.48467],[5.966005,52.47761],[5.966172,52.477444],[5.970635,52.481017],[5.971006,52.481265],[5.983965,52.489912],[5.984006,52.48994],[6.001837,52.501534],[6.007779,52.505098],[6.012223,52.506873],[6.015169,52.506857],[6.019575,52.505935],[6.024007,52.50681],[6.025493,52.507701],[6.028478,52.510381],[6.040223,52.507621],[6.045781,52.505029],[6.046075,52.504892],[6.054792,52.500376],[6.054845,52.500349],[6.057763,52.498534],[6.062071,52.491319],[6.062082,52.491306],[6.063516,52.489513],[6.064056,52.48911],[6.070795,52.484078],[6.089834,52.477675],[6.100037,52.471322],[6.100167,52.471117],[6.102907,52.46681],[6.10419,52.455117],[6.102573,52.446138],[6.105471,52.443424],[6.109855,52.4416],[6.114223,52.438876],[6.120031,52.434346],[6.11996,52.434026],[6.118442,52.427165],[6.113928,52.4209],[6.113883,52.418204],[6.115309,52.415499],[6.110797,52.409234],[6.111465,52.408817],[6.119526,52.403787],[6.123919,52.402861],[6.131216,52.401023],[6.131205,52.400997],[6.131194,52.400971],[6.131188,52.40096],[6.131182,52.400945],[6.131174,52.400929],[6.13117,52.400914],[6.131166,52.400899],[6.130821,52.399611],[6.130515,52.399621],[6.130077,52.399635],[6.129737,52.399229],[6.125224,52.392965],[6.12649,52.38712],[6.126589,52.386664],[6.123764,52.382468],[6.123576,52.382189],[6.122077,52.3804],[6.121377,52.380234],[6.114704,52.378648],[6.082308,52.373449],[6.079329,52.37077],[6.077776,52.365385],[6.080685,52.363571],[6.090934,52.361712],[6.095281,52.358091],[6.095242,52.358072],[6.087884,52.354539],[6.079063,52.353692],[6.076099,52.351912],[6.076001,52.34562],[6.077399,52.341118],[6.074311,52.331248],[6.071252,52.323175],[6.069785,52.323184],[6.066838,52.322302],[6.066783,52.318707],[6.072636,52.317774],[6.079984,52.31863],[6.081366,52.313228],[6.08413,52.302425],[6.084268,52.302396],[6.088514,52.301501],[6.091432,52.300584],[6.100244,52.30143],[6.101724,52.30232],[6.104599,52.298707],[6.105992,52.294204],[6.111782,52.289675],[6.111651,52.281585],[6.113072,52.27888],[6.121776,52.273433],[6.121883,52.273227],[6.123196,52.270727],[6.123311,52.270197],[6.124557,52.264426],[6.127457,52.26261],[6.127395,52.262428],[6.12723,52.261948],[6.125918,52.258125],[6.124364,52.252741],[6.137233,52.250018],[6.137499,52.249962],[6.144054,52.247491],[6.144775,52.247219],[6.150679,52.249878],[6.153577,52.248061],[6.154995,52.245355],[6.152035,52.243576],[6.15191,52.243514],[6.143174,52.239139],[6.141634,52.234654],[6.147397,52.229224],[6.155866,52.226555],[6.156133,52.22647],[6.161957,52.224634],[6.163389,52.222827],[6.163326,52.219232],[6.164774,52.218324],[6.166253,52.219213],[6.169227,52.22189],[6.166348,52.224606],[6.163483,52.22822],[6.164962,52.229109],[6.166473,52.231796],[6.166989,52.231898],[6.174771,52.233434],[6.175288,52.233536],[6.18264,52.235284],[6.183451,52.234673],[6.189862,52.229842],[6.203053,52.23065],[6.205013,52.230234],[6.211802,52.228792],[6.217624,52.226953],[6.21629,52.229508],[6.214797,52.232367],[6.214983,52.232365],[6.21507,52.232259],[6.215537,52.232361],[6.217724,52.232346],[6.223529,52.229608],[6.229401,52.230465],[6.235256,52.230424],[6.239613,52.228594],[6.248395,52.228531],[6.255714,52.228477],[6.260998,52.229247],[6.261586,52.229333],[6.270333,52.22747],[6.271797,52.227459],[6.271908,52.227492],[6.277687,52.229213],[6.286506,52.230944],[6.293218,52.231715],[6.293843,52.231786],[6.296734,52.229966],[6.298124,52.22636],[6.321561,52.227076],[6.325971,52.22794],[6.339144,52.227834],[6.339336,52.236822],[6.342264,52.236799],[6.351184,52.243019],[6.36729,52.242886],[6.377599,52.245497],[6.377822,52.245586],[6.382031,52.247258],[6.383455,52.245448],[6.390736,52.243588],[6.40247,52.244387],[6.417091,52.243362],[6.417028,52.240665],[6.417025,52.240521],[6.416966,52.237969],[6.424181,52.233411],[6.429826,52.224372],[6.447132,52.213431],[6.452575,52.207374],[6.452834,52.207087],[6.454254,52.205276],[6.456872,52.202784],[6.457115,52.202553],[6.461481,52.201614],[6.470214,52.199737],[6.470203,52.199279],[6.470061,52.193445],[6.478784,52.184736],[6.480056,52.183465],[6.490225,52.180673],[6.493104,52.178848],[6.496006,52.177922],[6.512201,52.182264],[6.518049,52.182208],[6.518256,52.182186],[6.555772,52.178263],[6.555969,52.178243],[6.583867,52.182458],[6.58407,52.182481],[6.591201,52.183282],[6.591807,52.182932],[6.607038,52.17413],[6.604017,52.170565],[6.603992,52.169667],[6.608254,52.165128],[6.612614,52.164183],[6.618094,52.165798],[6.61851,52.16592],[6.621532,52.169484],[6.627478,52.173018],[6.630427,52.173886],[6.634787,52.172941],[6.640508,52.168385],[6.645095,52.175529],[6.64943,52.173684],[6.649621,52.173623],[6.672611,52.166242],[6.672717,52.166105],[6.674021,52.164429],[6.675352,52.159919],[6.673787,52.15634],[6.674834,52.141945],[6.66284,52.131287],[6.663199,52.131188],[6.672985,52.12848],[6.673236,52.128399],[6.678774,52.126619],[6.697704,52.124612],[6.707845,52.121802],[6.708211,52.121684],[6.716525,52.119007],[6.76181,52.119387],[6.760046,52.109518],[6.756769,52.097869],[6.755255,52.096089],[6.753823,52.097005],[6.750905,52.097038],[6.746473,52.095292],[6.744932,52.092612],[6.746336,52.090798],[6.750658,52.08895],[6.752035,52.086237],[6.747549,52.082693],[6.735662,52.075637],[6.71519,52.074072],[6.696124,52.070689],[6.697504,52.067977],[6.695967,52.065297],[6.689898,52.057273],[6.688336,52.053694],[6.688101,52.045606],[6.68797,52.041112],[6.714204,52.040819],[6.753224,52.029585],[6.764686,52.023158],[6.771686,52.018672],[6.771831,52.018579],[6.812017,51.99922],[6.808991,51.99566],[6.827888,51.994531],[6.830568,51.987306],[6.830279,51.978319],[6.833103,51.975587],[6.833016,51.972891],[6.829846,51.964839],[6.813842,51.965034],[6.813785,51.963237],[6.799124,51.959817],[6.799116,51.959756],[6.797189,51.944557],[6.798615,51.943641],[6.794027,51.936503],[6.786618,51.932096],[6.789469,51.930264],[6.770155,51.917008],[6.767248,51.917042],[6.758458,51.914451],[6.758446,51.914448],[6.754059,51.9136],[6.75543,51.910887],[6.752442,51.908224],[6.746575,51.906494],[6.73783,51.905696],[6.733283,51.899455],[6.723033,51.896875],[6.704437,51.906974],[6.69873,51.910634],[6.696007,51.916958],[6.693074,51.916091],[6.690167,51.916123],[6.68438,51.917086],[6.684432,51.918884],[6.675659,51.917182],[6.669769,51.91455],[6.65363,51.90933],[6.638974,51.904992],[6.63454,51.902342],[6.628703,51.901505],[6.625847,51.903333],[6.621439,51.901582],[6.620904,51.901478],[6.586377,51.894753],[6.570255,51.889522],[6.569975,51.889354],[6.561399,51.884217],[6.558447,51.882448],[6.552708,51.885202],[6.552754,51.887],[6.543993,51.885288],[6.540996,51.881722],[6.530716,51.877327],[6.524839,51.874687],[6.515395,51.873945],[6.514652,51.873886],[6.502902,51.868604],[6.502896,51.86839],[6.502835,51.865908],[6.501316,51.863225],[6.482312,51.85801],[6.481357,51.857629],[6.473516,51.854496],[6.46485,51.856374],[6.459109,51.859123],[6.452021,51.86638],[6.45163,51.866303],[6.447644,51.86552],[6.43887,51.862902],[6.433,51.860258],[6.431569,51.861169],[6.427339,51.866601],[6.4201,51.867564],[6.414375,51.87121],[6.407115,51.871273],[6.402738,51.870412],[6.39695,51.871361],[6.392675,51.874994],[6.391222,51.875006],[6.388861,51.868188],[6.388118,51.866043],[6.388109,51.865609],[6.388038,51.862447],[6.392394,51.86241],[6.396127,51.860034],[6.396688,51.859676],[6.400983,51.856942],[6.4082,51.855082],[6.409631,51.85417],[6.40961,51.853272],[6.405175,51.849714],[6.403622,51.845232],[6.409243,51.837093],[6.403439,51.837143],[6.407609,51.829016],[6.401786,51.828167],[6.390321,51.834559],[6.383087,51.835519],[6.374381,51.835593],[6.368539,51.833844],[6.364225,51.835678],[6.362794,51.836589],[6.364303,51.839273],[6.362949,51.843779],[6.358693,51.84831],[6.358295,51.848419],[6.349242,51.850911],[6.348591,51.85109],[6.345708,51.852012],[6.334096,51.852107],[6.318338,51.852233],[6.31813,51.852234],[6.309385,51.850505],[6.30895,51.850375],[6.306464,51.849629],[6.303653,51.854146],[6.300968,51.864955],[6.298101,51.866775],[6.299589,51.868561],[6.296704,51.869483],[6.280838,51.874999],[6.272731,51.875898],[6.272143,51.875963],[6.269221,51.875086],[6.266229,51.870614],[6.261838,51.868849],[6.253424,51.869781],[6.253143,51.869812],[6.247352,51.870754],[6.235736,51.870838],[6.235318,51.870841],[6.231379,51.870869],[6.230686,51.870758],[6.215357,51.868286],[6.203822,51.872862],[6.203696,51.872919],[6.193738,51.877427],[6.183683,51.883788],[6.182278,51.886494],[6.192479,51.888223],[6.192465,51.888269],[6.191106,51.892727],[6.182421,51.894584],[6.170924,51.901853],[6.168018,51.901873],[6.166518,51.899186],[6.157923,51.906434],[6.155016,51.906453],[6.125833,51.899448],[6.118627,51.903089],[6.112756,51.89953],[6.109807,51.896851],[6.111245,51.895943],[6.103938,51.893291],[6.106829,51.892374],[6.11556,51.89322],[6.119904,51.892294],[6.127139,51.89045],[6.137248,51.88679],[6.142733,51.879822],[6.142937,51.879562],[6.144269,51.872362],[6.144472,51.872103],[6.145691,51.870555],[6.151438,51.866922],[6.155794,51.866893],[6.167332,51.862322],[6.167316,51.861423],[6.164382,51.859645],[6.164289,51.854252],[6.165693,51.851546],[6.166974,51.841648],[6.153975,51.84533],[6.138056,51.84813],[6.107842,51.84921],[6.107591,51.849219],[6.100348,51.850162],[6.091682,51.852912],[6.074401,51.862004],[6.064305,51.866557],[6.061334,51.862079],[6.059829,51.858492],[6.052557,51.857635],[6.053201,51.856611],[6.055393,51.853124],[6.042251,51.847804],[6.033478,51.843358],[6.029163,51.846078],[6.017502,51.842546],[6.015988,51.838059],[6.010159,51.836292],[5.995588,51.831874],[5.986883,51.831918],[5.970958,51.834695],[5.968068,51.835609],[5.967643,51.835789],[5.963738,51.837428],[5.947702,51.825206],[5.946158,51.824029],[5.959134,51.817673],[5.957683,51.81768],[5.957059,51.817427],[5.953309,51.815904],[5.95187,51.81681],[5.947519,51.81683],[5.946058,51.815938],[5.947486,51.814134],[5.950375,51.813221],[5.948914,51.812329],[5.951391,51.811546],[5.951803,51.811416],[5.957604,51.811388],[5.963359,51.807764],[5.979192,51.798696],[5.977695,51.795107],[5.974772,51.793324],[5.974764,51.79331],[5.975521,51.793278],[5.97479,51.79244],[5.973747,51.79122],[5.973392,51.790823],[5.973103,51.790502],[5.973351,51.790428],[5.974679,51.786133],[5.980488,51.787003],[5.989149,51.784262],[5.983292,51.779797],[5.984694,51.776194],[5.987556,51.773482],[5.991867,51.770763],[5.99037,51.767175],[5.980146,51.760934],[5.975788,51.760057],[5.975598,51.760058],[5.97434,51.760065],[5.958303,51.752053],[5.956866,51.752959],[5.952487,51.750283],[5.953913,51.748478],[5.95242,51.74489],[5.943698,51.742235],[5.939354,51.742255],[5.93501,51.742275],[5.933573,51.743181],[5.930698,51.744992],[5.930731,51.747689],[5.933649,51.749474],[5.923533,51.751318],[5.922842,51.751493],[5.916312,51.753149],[5.915982,51.753566],[5.913457,51.756758],[5.913499,51.760353],[5.912082,51.763056],[5.906328,51.766678],[5.902033,51.771192],[5.901747,51.771481],[5.894869,51.778415],[5.887633,51.779345],[5.870214,51.776721],[5.869433,51.776724],[5.868765,51.776727],[5.867287,51.774036],[5.867235,51.769083],[5.86723,51.768642],[5.87008,51.764136],[5.867314,51.761599],[5.867153,51.761451],[5.865833,51.759045],[5.865676,51.75876],[5.854106,51.760605],[5.843193,51.759802],[5.842508,51.759751],[5.822211,51.75803],[5.821991,51.758014],[5.810614,51.757174],[5.810255,51.757127],[5.790311,51.754548],[5.780156,51.752785],[5.770018,51.752818],[5.769934,51.752834],[5.760159,51.754601],[5.759894,51.754649],[5.752674,51.757368],[5.75253,51.757422],[5.745685,51.76],[5.745452,51.760088],[5.741135,51.763697],[5.741071,51.76379],[5.736837,51.770002],[5.736758,51.770052],[5.732511,51.772712],[5.732124,51.772833],[5.72962,51.773619],[5.722388,51.775438],[5.712251,51.776365],[5.70646,51.77728],[5.702132,51.779989],[5.696378,51.786297],[5.693503,51.7899],[5.693266,51.789989],[5.686273,51.792616],[5.675561,51.793473],[5.674682,51.793543],[5.668883,51.793557],[5.663431,51.795264],[5.663095,51.795369],[5.654718,51.802349],[5.654439,51.802581],[5.650115,51.807085],[5.647338,51.814077],[5.647256,51.814283],[5.642926,51.817888],[5.642705,51.817992],[5.637139,51.820598],[5.627713,51.820617],[5.626985,51.820619],[5.618281,51.820636],[5.606703,51.826052],[5.598011,51.828765],[5.589314,51.830578],[5.577699,51.8288],[5.577217,51.8288],[5.567544,51.828816],[5.567377,51.828801],[5.557384,51.827932],[5.553025,51.82614],[5.552767,51.825822],[5.551568,51.824344],[5.55137,51.824039],[5.54865,51.819854],[5.545743,51.81806],[5.539938,51.817168],[5.536517,51.817173],[5.535587,51.817174],[5.529791,51.818979],[5.516741,51.820792],[5.515293,51.821692],[5.508054,51.827094],[5.505157,51.828895],[5.49791,51.831598],[5.490655,51.831605],[5.490627,51.831596],[5.484848,51.829812],[5.48194,51.827118],[5.47757,51.818132],[5.477225,51.817865],[5.471759,51.813641],[5.466203,51.811924],[5.465955,51.811847],[5.450361,51.810978],[5.45,51.810958],[5.439849,51.810963],[5.429698,51.811866],[5.423898,51.814565],[5.4181,51.819061],[5.417741,51.819507],[5.415201,51.822658],[5.41375,51.822658],[5.412992,51.822752],[5.406498,51.823558],[5.400815,51.820039],[5.400694,51.819963],[5.399243,51.818166],[5.399221,51.818145],[5.39344,51.812772],[5.385095,51.806737],[5.384739,51.80648],[5.369412,51.790925],[5.368794,51.790297],[5.367508,51.787903],[5.367346,51.7876],[5.363002,51.779509],[5.361558,51.76962],[5.361496,51.769314],[5.360113,51.762428],[5.357218,51.758832],[5.354323,51.756134],[5.321021,51.74713],[5.305104,51.739929],[5.304663,51.739746],[5.300763,51.738128],[5.296419,51.738124],[5.283716,51.740742],[5.283382,51.74081],[5.269007,51.740797],[5.268902,51.740797],[5.26456,51.739893],[5.255883,51.736288],[5.250097,51.734483],[5.24984,51.734536],[5.245983,51.735329],[5.24575,51.735377],[5.231554,51.742399],[5.231247,51.74255],[5.221104,51.744334],[5.212419,51.743423],[5.212371,51.743415],[5.20663,51.742515],[5.195049,51.741597],[5.186357,51.742482],[5.179598,51.743309],[5.179113,51.743368],[5.163856,51.74334],[5.163184,51.743339],[5.144504,51.741517],[5.144368,51.741503],[5.131351,51.738779],[5.13108,51.738778],[5.128455,51.738772],[5.125528,51.744159],[5.128191,51.746658],[5.128409,51.746863],[5.138522,51.751379],[5.142842,51.755883],[5.137033,51.758568],[5.135565,51.762161],[5.136918,51.764709],[5.136998,51.76486],[5.138427,51.768459],[5.138496,51.768589],[5.139861,51.771159],[5.138398,51.773853],[5.119533,51.778306],[5.118956,51.778661],[5.116932,51.779908],[5.116624,51.780097],[5.109408,51.784539],[5.10935,51.784575],[5.100631,51.78815],[5.094832,51.788135],[5.091933,51.788128],[5.091702,51.78802],[5.086153,51.785417],[5.081829,51.78181],[5.077494,51.78],[5.071977,51.779986],[5.071697,51.779985],[5.068792,51.780876],[5.065881,51.782666],[5.060051,51.787145],[5.058587,51.790707],[5.058575,51.790736],[5.052736,51.796113],[5.052716,51.796126],[5.048669,51.798612],[5.048367,51.798798],[5.039647,51.801469],[5.039027,51.801642],[5.023661,51.805915],[5.02303,51.806147],[5.016389,51.808589],[5.01226,51.811122],[5.012016,51.811272],[5.012008,51.812171],[5.011892,51.81259],[5.010513,51.81756],[5.009055,51.818454],[5.00898,51.818485],[5.005902,51.819742],[5.004688,51.820238],[5.001772,51.822026],[5.009025,51.82205],[5.009128,51.822034],[5.026453,51.819408],[5.027784,51.824512],[5.027861,51.824806],[5.032078,51.841899],[5.021912,51.842767],[5.021596,51.842787],[5.008843,51.843624],[5.003249,51.844471],[5.00303,51.844504],[5.000306,51.845335],[5.00012,51.845394],[4.998669,51.845389],[4.99876,51.845562],[5.000097,51.84809],[4.998607,51.85258],[4.998583,51.855277],[4.994173,51.861555],[4.995617,51.862459],[5.005811,51.858897],[5.015966,51.859828],[5.027581,51.859864],[5.045003,51.859916],[5.05372,51.859043],[5.060973,51.859962],[5.06358,51.861591],[5.063863,51.861768],[5.062405,51.862663],[5.052208,51.867129],[5.052195,51.868927],[5.053627,51.871627],[5.056511,51.874332],[5.062314,51.875248],[5.07242,51.875275],[5.07248,51.875275],[5.073223,51.875277],[5.073933,51.875279],[5.081182,51.877096],[5.081336,51.877192],[5.084075,51.878902],[5.084246,51.879062],[5.086507,51.88118],[5.086961,51.881606],[5.088372,51.887902],[5.091028,51.889559],[5.091266,51.889707],[5.094171,51.889715],[5.094295,51.889715],[5.105794,51.889743],[5.113063,51.888861],[5.11451,51.889764],[5.114876,51.89022],[5.115928,51.891534],[5.117394,51.893366],[5.11881,51.899662],[5.131801,51.914973],[5.132154,51.915193],[5.133249,51.915875],[5.136137,51.919477],[5.143371,51.925785],[5.149163,51.930291],[5.147695,51.932985],[5.149139,51.934786],[5.152048,51.934792],[5.163619,51.947399],[5.173698,51.960849],[5.173737,51.960902],[5.180976,51.969005],[5.191187,51.963629],[5.197015,51.961841],[5.205753,51.960057],[5.213723,51.961712],[5.214477,51.961868],[5.218832,51.964571],[5.219055,51.964709],[5.22464,51.968175],[5.23043,51.977172],[5.236243,51.979877],[5.242066,51.979884],[5.24498,51.978989],[5.256647,51.971811],[5.26976,51.966431],[5.284319,51.963748],[5.300328,51.962862],[5.311827,51.958433],[5.311977,51.958376],[5.317802,51.955682],[5.32653,51.956586],[5.333803,51.958388],[5.339619,51.961986],[5.339981,51.961986],[5.340304,51.962003],[5.340349,51.961986],[5.341074,51.961986],[5.341339,51.962248],[5.348344,51.96918],[5.355619,51.97098],[5.364351,51.971881],[5.37454,51.970085],[5.383159,51.970086],[5.383273,51.970086],[5.392005,51.971884],[5.399283,51.97458],[5.418207,51.977273],[5.424032,51.979968],[5.430906,51.984208],[5.431315,51.984461],[5.437141,51.986256],[5.442964,51.986253],[5.454609,51.98445],[5.473161,51.983556],[5.473534,51.983538],[5.477903,51.984434],[5.486638,51.984427],[5.501186,51.979919],[5.511361,51.974515],[5.518633,51.97271],[5.518725,51.97271],[5.519456,51.972709],[5.520089,51.972708],[5.52733,51.970909],[5.527361,51.970902],[5.54045,51.968189],[5.549157,51.960986],[5.559325,51.956477],[5.586949,51.951938],[5.594211,51.949229],[5.604289,51.944753],[5.604372,51.944716],[5.605823,51.943815],[5.617449,51.950062],[5.617491,51.950085],[5.620415,51.952776],[5.626234,51.952764],[5.627694,51.95366],[5.627718,51.958155],[5.623489,51.963423],[5.623381,51.963557],[5.620489,51.967159],[5.624879,51.971644],[5.626354,51.975237],[5.622001,51.977943],[5.61475,51.98335],[5.614791,51.991441],[5.610436,51.994146],[5.606072,51.995053],[5.603164,51.995957],[5.592999,52.002268],[5.591551,52.004068],[5.591571,52.008563],[5.590123,52.010363],[5.585764,52.013067],[5.585785,52.013117],[5.586515,52.0149],[5.587237,52.016661],[5.590151,52.016656],[5.590171,52.02115],[5.587257,52.021155],[5.587305,52.031942],[5.59022,52.031937],[5.590232,52.034634],[5.590233,52.03476],[5.590236,52.035342],[5.590236,52.035533],[5.568501,52.040936],[5.568395,52.040962],[5.568397,52.041464],[5.568399,52.041861],[5.569781,52.044397],[5.569868,52.044555],[5.571306,52.048933],[5.571344,52.049047],[5.558729,52.049931],[5.558226,52.049966],[5.56116,52.070212],[5.561222,52.070637],[5.561236,52.074232],[5.562716,52.079624],[5.561278,52.085019],[5.561035,52.085119],[5.556907,52.086823],[5.555454,52.088623],[5.556931,52.093116],[5.555502,52.101208],[5.551142,52.106608],[5.532153,52.103037],[5.533607,52.101237],[5.539436,52.098533],[5.539421,52.094039],[5.537946,52.089546],[5.530653,52.090454],[5.52772,52.085963],[5.532095,52.085059],[5.532089,52.083261],[5.523321,52.078777],[5.520408,52.080578],[5.510193,52.07969],[5.506337,52.078112],[5.505811,52.077897],[5.505809,52.076998],[5.505808,52.076849],[5.505802,52.074301],[5.499962,52.072509],[5.497044,52.072512],[5.494127,52.072514],[5.483912,52.070725],[5.466419,52.077031],[5.459132,52.08153],[5.460594,52.083327],[5.461877,52.083326],[5.462053,52.083326],[5.467732,52.086817],[5.467895,52.086918],[5.4752,52.091407],[5.486883,52.094993],[5.48543,52.097691],[5.485449,52.10668],[5.494221,52.112066],[5.486931,52.116567],[5.488393,52.117465],[5.500075,52.117454],[5.502991,52.115654],[5.504448,52.114753],[5.508829,52.114749],[5.507407,52.116506],[5.507373,52.116548],[5.505925,52.121044],[5.504465,52.121046],[5.503774,52.120961],[5.497161,52.120154],[5.495707,52.122852],[5.495714,52.125548],[5.498648,52.130939],[5.501569,52.130936],[5.508875,52.131828],[5.511801,52.133623],[5.512559,52.134552],[5.5126,52.134601],[5.513145,52.135269],[5.514733,52.137215],[5.511816,52.139016],[5.497216,52.142626],[5.500152,52.148017],[5.495936,52.148391],[5.489925,52.148925],[5.485544,52.149828],[5.482625,52.151628],[5.484094,52.155222],[5.484102,52.158818],[5.479725,52.162417],[5.473878,52.162421],[5.47242,52.16422],[5.473883,52.165118],[5.47973,52.165114],[5.479734,52.166911],[5.45927,52.167824],[5.458863,52.167856],[5.447576,52.16873],[5.446918,52.168933],[5.444654,52.16963],[5.440271,52.172329],[5.439018,52.173872],[5.438811,52.174127],[5.439765,52.185119],[5.440293,52.191206],[5.4403,52.197163],[5.440302,52.198184],[5.440302,52.198297],[5.440307,52.202891],[5.44031,52.205588],[5.439667,52.205687],[5.434459,52.206489],[5.409592,52.21998],[5.408126,52.214587],[5.407781,52.214746],[5.39642,52.219982],[5.393493,52.22178],[5.395472,52.225828],[5.397886,52.230768],[5.39797,52.231013],[5.403748,52.247846],[5.412535,52.246946],[5.415463,52.246046],[5.425718,52.250538],[5.435973,52.253231],[5.455016,52.255019],[5.462343,52.256813],[5.468207,52.259505],[5.471138,52.260402],[5.474064,52.258602],[5.475527,52.257702],[5.478459,52.258599],[5.488725,52.263984],[5.501915,52.26577],[5.528283,52.264842],[5.531222,52.267536],[5.531236,52.27203],[5.5371,52.272922],[5.541515,52.278309],[5.54594,52.286393],[5.548895,52.292681],[5.556275,52.306154],[5.559222,52.309746],[5.560703,52.313339],[5.56071,52.315137],[5.562191,52.31873],[5.566598,52.320521],[5.574872,52.326285],[5.576897,52.327696],[5.58572,52.332176],[5.590126,52.333067],[5.598599,52.338228],[5.598955,52.338445],[5.603254,52.341063],[5.60337,52.341134],[5.607786,52.343822],[5.607798,52.34383],[5.61214,52.346472],[5.612203,52.346511],[5.612212,52.348308],[5.612249,52.34844],[5.613707,52.353699],[5.615198,52.35819],[5.615371,52.35833],[5.619622,52.361777],[5.626943,52.358167],[5.627008,52.358206],[5.629889,52.359959],[5.632841,52.362649],[5.641039,52.36701],[5.644623,52.368916],[5.649029,52.368907],[5.653412,52.365301],[5.653941,52.365583],[5.665199,52.371566],[5.675508,52.376036],[5.676988,52.37783],[5.679937,52.379621],[5.684344,52.37961],[5.690219,52.379595],[5.70052,52.382265],[5.702001,52.384059],[5.707903,52.387638],[5.716724,52.388513],[5.723365,52.391531],[5.728519,52.393873],[5.728526,52.394772],[5.738839,52.398337],[5.740316,52.399231],[5.749169,52.403699],[5.753593,52.405483],[5.758025,52.408166],[5.781653,52.420674],[5.790506,52.424239],[5.811202,52.435852],[5.811379,52.436066],[5.815666,52.44123],[5.81586,52.441434],[5.821611,52.4475],[5.824589,52.451084],[5.824616,52.453781],[5.817294,52.457403],[5.820272,52.460988],[5.8292,52.470842],[5.829182,52.469045],[5.823242,52.463673],[5.824687,52.460972],[5.827612,52.459163],[5.832035,52.460045],[5.83209,52.460134],[5.836522,52.467219],[5.839466,52.467208],[5.840938,52.467203],[5.842455,52.471691],[5.848427,52.479758],[5.851475,52.489633],[5.851503,52.49233],[5.851538,52.49241],[5.853014,52.495919],[5.858962,52.501289],[5.861995,52.509366],[5.866511,52.518337],[5.866531,52.520134],[5.876875,52.522789],[5.879822,52.522776],[5.883857,52.520282],[5.884212,52.520062],[5.901638,52.506581],[5.901737,52.506504],[5.909017,52.499282],[5.920615,52.483949],[5.920931,52.483457]]]]}},{type:"Feature",properties:{id:16,name:"Utrecht",created_at:"2013-11-30T17:55:36+0100",updated_at:"2013-11-30T17:55:36+0100",cartodb_id:7},geometry:{type:"MultiPolygon",coordinates:[[[[5.018305,52.304416],[5.022477,52.303918],[5.02252,52.30392],[5.022522,52.303913],[5.022684,52.284138],[5.024164,52.282345],[5.029976,52.288655],[5.038799,52.285086],[5.04321,52.283301],[5.050497,52.288715],[5.059279,52.290538],[5.065175,52.286059],[5.066667,52.282468],[5.066182,52.282168],[5.065208,52.281565],[5.063735,52.28246],[5.062244,52.286051],[5.060778,52.286047],[5.050545,52.282423],[5.049122,52.277952],[5.049059,52.277933],[5.04858,52.27779],[5.048628,52.277998],[5.043245,52.278807],[5.038856,52.277895],[5.038571,52.277807],[5.033008,52.27608],[5.030099,52.273374],[5.02423,52.274255],[5.024237,52.273405],[5.024252,52.271559],[5.031687,52.258098],[5.033173,52.255406],[5.036116,52.253617],[5.040482,52.257225],[5.040845,52.257226],[5.043243,52.257233],[5.043412,52.257234],[5.046397,52.250051],[5.046438,52.244658],[5.056742,52.237496],[5.056998,52.23734],[5.058213,52.236601],[5.040952,52.231241],[5.040686,52.231158],[5.037807,52.225769],[5.0378,52.225756],[5.034965,52.214062],[5.03353,52.210462],[5.036457,52.210471],[5.037955,52.205981],[5.036514,52.20328],[5.026258,52.205047],[5.023332,52.205038],[5.023339,52.204139],[5.02334,52.204058],[5.023345,52.20346],[5.023347,52.20324],[5.03069,52.199667],[5.038012,52.19879],[5.038033,52.196093],[5.035171,52.187994],[5.03373,52.185293],[5.041281,52.184543],[5.042512,52.184421],[5.047036,52.166456],[5.077684,52.173731],[5.077811,52.173756],[5.115653,52.181016],[5.123,52.181786],[5.124421,52.181935],[5.166837,52.180224],[5.167068,52.180154],[5.169766,52.179331],[5.170086,52.179331],[5.179924,52.179349],[5.180002,52.179349],[5.192755,52.1785],[5.193166,52.178473],[5.216457,52.205476],[5.219353,52.21357],[5.22516,52.226162],[5.223697,52.22616],[5.232343,52.23773],[5.232438,52.237858],[5.238265,52.246854],[5.23832,52.246913],[5.243964,52.253005],[5.244102,52.253154],[5.244094,52.25571],[5.244094,52.25585],[5.245379,52.256642],[5.245556,52.256751],[5.265889,52.282711],[5.265991,52.282841],[5.276253,52.281952],[5.276494,52.281903],[5.280652,52.281058],[5.281299,52.280992],[5.307037,52.278382],[5.309973,52.275687],[5.31437,52.274791],[5.320233,52.273896],[5.331955,52.274801],[5.339286,52.271208],[5.350396,52.269509],[5.351009,52.269415],[5.356869,52.270315],[5.364196,52.269418],[5.374215,52.262396],[5.374454,52.262229],[5.377385,52.260431],[5.378023,52.26004],[5.384709,52.255937],[5.389104,52.25414],[5.389559,52.253944],[5.403748,52.247846],[5.39797,52.231013],[5.397886,52.230768],[5.395472,52.225828],[5.393493,52.22178],[5.39642,52.219982],[5.407781,52.214746],[5.408126,52.214587],[5.409592,52.21998],[5.434459,52.206489],[5.439667,52.205687],[5.44031,52.205588],[5.440307,52.202891],[5.440302,52.198297],[5.440302,52.198184],[5.4403,52.197163],[5.440293,52.191206],[5.439765,52.185119],[5.438811,52.174127],[5.439018,52.173872],[5.440271,52.172329],[5.444654,52.16963],[5.446918,52.168933],[5.447576,52.16873],[5.458863,52.167856],[5.45927,52.167824],[5.479734,52.166911],[5.47973,52.165114],[5.473883,52.165118],[5.47242,52.16422],[5.473878,52.162421],[5.479725,52.162417],[5.484102,52.158818],[5.484094,52.155222],[5.482625,52.151628],[5.485544,52.149828],[5.489925,52.148925],[5.495936,52.148391],[5.500152,52.148017],[5.497216,52.142626],[5.511816,52.139016],[5.514733,52.137215],[5.513145,52.135269],[5.5126,52.134601],[5.512559,52.134552],[5.511801,52.133623],[5.508875,52.131828],[5.501569,52.130936],[5.498648,52.130939],[5.495714,52.125548],[5.495707,52.122852],[5.497161,52.120154],[5.503774,52.120961],[5.504465,52.121046],[5.505925,52.121044],[5.507373,52.116548],[5.507407,52.116506],[5.508829,52.114749],[5.504448,52.114753],[5.502991,52.115654],[5.500075,52.117454],[5.488393,52.117465],[5.486931,52.116567],[5.494221,52.112066],[5.485449,52.10668],[5.48543,52.097691],[5.486883,52.094993],[5.4752,52.091407],[5.467895,52.086918],[5.467732,52.086817],[5.462053,52.083326],[5.461877,52.083326],[5.460594,52.083327],[5.459132,52.08153],[5.466419,52.077031],[5.483912,52.070725],[5.494127,52.072514],[5.497044,52.072512],[5.499962,52.072509],[5.505802,52.074301],[5.505808,52.076849],[5.505809,52.076998],[5.505811,52.077897],[5.506337,52.078112],[5.510193,52.07969],[5.520408,52.080578],[5.523321,52.078777],[5.532089,52.083261],[5.532095,52.085059],[5.52772,52.085963],[5.530653,52.090454],[5.537946,52.089546],[5.539421,52.094039],[5.539436,52.098533],[5.533607,52.101237],[5.532153,52.103037],[5.551142,52.106608],[5.555502,52.101208],[5.556931,52.093116],[5.555454,52.088623],[5.556907,52.086823],[5.561035,52.085119],[5.561278,52.085019],[5.562716,52.079624],[5.561236,52.074232],[5.561222,52.070637],[5.56116,52.070212],[5.558226,52.049966],[5.558729,52.049931],[5.571344,52.049047],[5.571306,52.048933],[5.569868,52.044555],[5.569781,52.044397],[5.568399,52.041861],[5.568397,52.041464],[5.568395,52.040962],[5.568501,52.040936],[5.590236,52.035533],[5.590236,52.035342],[5.590233,52.03476],[5.590232,52.034634],[5.59022,52.031937],[5.587305,52.031942],[5.587257,52.021155],[5.590171,52.02115],[5.590151,52.016656],[5.587237,52.016661],[5.586515,52.0149],[5.585785,52.013117],[5.585764,52.013067],[5.590123,52.010363],[5.591571,52.008563],[5.591551,52.004068],[5.592999,52.002268],[5.603164,51.995957],[5.606072,51.995053],[5.610436,51.994146],[5.614791,51.991441],[5.61475,51.98335],[5.622001,51.977943],[5.626354,51.975237],[5.624879,51.971644],[5.620489,51.967159],[5.623381,51.963557],[5.623489,51.963423],[5.627718,51.958155],[5.627694,51.95366],[5.626234,51.952764],[5.620415,51.952776],[5.617491,51.950085],[5.617449,51.950062],[5.605823,51.943815],[5.604372,51.944716],[5.604289,51.944753],[5.594211,51.949229],[5.586949,51.951938],[5.559325,51.956477],[5.549157,51.960986],[5.54045,51.968189],[5.527361,51.970902],[5.52733,51.970909],[5.520089,51.972708],[5.519456,51.972709],[5.518725,51.97271],[5.518633,51.97271],[5.511361,51.974515],[5.501186,51.979919],[5.486638,51.984427],[5.477903,51.984434],[5.473534,51.983538],[5.473161,51.983556],[5.454609,51.98445],[5.442964,51.986253],[5.437141,51.986256],[5.431315,51.984461],[5.430906,51.984208],[5.424032,51.979968],[5.418207,51.977273],[5.399283,51.97458],[5.392005,51.971884],[5.383273,51.970086],[5.383159,51.970086],[5.37454,51.970085],[5.364351,51.971881],[5.355619,51.97098],[5.348344,51.96918],[5.341339,51.962248],[5.341074,51.961986],[5.340349,51.961986],[5.340304,51.962003],[5.339981,51.961986],[5.339619,51.961986],[5.333803,51.958388],[5.32653,51.956586],[5.317802,51.955682],[5.311977,51.958376],[5.311827,51.958433],[5.300328,51.962862],[5.284319,51.963748],[5.26976,51.966431],[5.256647,51.971811],[5.24498,51.978989],[5.242066,51.979884],[5.236243,51.979877],[5.23043,51.977172],[5.22464,51.968175],[5.219055,51.964709],[5.218832,51.964571],[5.214477,51.961868],[5.213723,51.961712],[5.205753,51.960057],[5.197015,51.961841],[5.191187,51.963629],[5.180976,51.969005],[5.173737,51.960902],[5.173698,51.960849],[5.163619,51.947399],[5.152048,51.934792],[5.149139,51.934786],[5.149134,51.935685],[5.143116,51.936686],[5.133122,51.938348],[5.130229,51.935645],[5.102523,51.947267],[5.102286,51.947325],[5.087953,51.950827],[5.055817,51.955914],[5.056049,51.956355],[5.058778,51.961536],[5.064573,51.965148],[5.064377,51.965387],[5.054293,51.977704],[5.04847,51.977687],[5.03973,51.978561],[5.03686,51.973159],[5.033971,51.970453],[5.030023,51.969627],[5.029612,51.969541],[5.020872,51.970413],[5.010639,51.975774],[5.001883,51.978443],[4.993157,51.977515],[4.984471,51.972092],[4.984131,51.971665],[4.980154,51.966683],[4.979994,51.966583],[4.974366,51.963067],[4.97409,51.962952],[4.970017,51.961254],[4.961383,51.961223],[4.961287,51.961223],[4.949611,51.964776],[4.94088,51.964743],[4.935086,51.962024],[4.926457,51.952102],[4.922139,51.94759],[4.917804,51.944876],[4.912004,51.943055],[4.902005,51.941245],[4.901843,51.941215],[4.896556,51.941194],[4.896025,51.941191],[4.883391,51.9394],[4.882955,51.939338],[4.878602,51.93842],[4.875723,51.944487],[4.875622,51.9447],[4.872661,51.951804],[4.87263,51.951878],[4.872599,51.954575],[4.872322,51.954829],[4.869659,51.957259],[4.869372,51.957692],[4.866696,51.961741],[4.860792,51.968906],[4.86069,51.968968],[4.850612,51.975102],[4.850529,51.975152],[4.846152,51.976031],[4.845934,51.97623],[4.844715,51.97734],[4.834374,51.986763],[4.83583,51.98677],[4.827605,51.993434],[4.827005,51.99392],[4.818177,52.001069],[4.853076,52.005728],[4.857435,52.006646],[4.857212,52.006917],[4.848839,52.017063],[4.847235,52.019005],[4.847087,52.019184],[4.841281,52.01736],[4.833997,52.017326],[4.825244,52.018183],[4.822342,52.01727],[4.821754,52.016994],[4.816549,52.014545],[4.816072,52.014576],[4.804674,52.015301],[4.803426,52.01538],[4.800058,52.02145],[4.798893,52.023423],[4.798949,52.023448],[4.809102,52.027094],[4.809097,52.02754],[4.80906,52.030371],[4.809056,52.03069],[4.809303,52.031079],[4.811913,52.035198],[4.817708,52.037923],[4.829212,52.050564],[4.829887,52.050857],[4.848068,52.058742],[4.856807,52.05968],[4.866973,52.063322],[4.867464,52.063629],[4.868421,52.064227],[4.874192,52.069646],[4.844177,52.070392],[4.843551,52.070407],[4.830457,52.067649],[4.834755,52.073962],[4.833274,52.075753],[4.82598,52.075718],[4.825916,52.080778],[4.825913,52.08102],[4.825912,52.081111],[4.824306,52.09279],[4.822703,52.106046],[4.822676,52.106266],[4.824136,52.106273],[4.824364,52.106559],[4.825573,52.108078],[4.822816,52.109749],[4.822631,52.109861],[4.793945,52.122887],[4.791863,52.123194],[4.791793,52.123193],[4.79323,52.124999],[4.799059,52.125927],[4.80198,52.125941],[4.807775,52.129566],[4.809189,52.133168],[4.807694,52.135858],[4.810569,52.139467],[4.813467,52.141279],[4.820749,52.143112],[4.832333,52.144953],[4.832415,52.144966],[4.833876,52.144973],[4.834018,52.144857],[4.838303,52.141398],[4.842697,52.140519],[4.855808,52.137896],[4.855877,52.137883],[4.866092,52.138827],[4.873102,52.139578],[4.874847,52.139764],[4.874651,52.156843],[4.892119,52.16321],[4.867134,52.174788],[4.867023,52.174839],[4.855373,52.180129],[4.845127,52.180982],[4.843772,52.181638],[4.843349,52.181843],[4.837772,52.184543],[4.837686,52.184698],[4.836276,52.187233],[4.823023,52.194362],[4.822989,52.197058],[4.814143,52.202409],[4.803902,52.202359],[4.802439,52.202351],[4.802436,52.202618],[4.802369,52.207745],[4.802227,52.218531],[4.797801,52.221206],[4.795161,52.224383],[4.794826,52.224786],[4.79479,52.227483],[4.802109,52.227519],[4.809427,52.227555],[4.814681,52.228389],[4.815271,52.228483],[4.818626,52.229188],[4.818761,52.229395],[4.819168,52.229475],[4.819571,52.229554],[4.819665,52.229406],[4.828411,52.231242],[4.828805,52.231366],[4.831328,52.232155],[4.831451,52.232217],[4.838603,52.235785],[4.842984,52.236704],[4.847333,52.24032],[4.847996,52.240187],[4.851736,52.239441],[4.851693,52.243036],[4.854621,52.243049],[4.856043,52.246651],[4.85676,52.247548],[4.857486,52.248456],[4.869159,52.252103],[4.870603,52.253907],[4.874616,52.25229],[4.875018,52.252129],[4.877926,52.253939],[4.88231,52.254857],[4.892573,52.254001],[4.898451,52.252228],[4.902825,52.254044],[4.908684,52.254068],[4.911613,52.25408],[4.917434,52.257698],[4.918879,52.259502],[4.918851,52.262199],[4.924673,52.265817],[4.927575,52.268525],[4.927771,52.268894],[4.929004,52.271212],[4.929013,52.271227],[4.926008,52.278407],[4.92598,52.281103],[4.926245,52.281131],[4.934764,52.282036],[4.943584,52.279373],[4.955308,52.279416],[4.96117,52.279438],[4.967584,52.280248],[4.969651,52.282544],[4.969929,52.283065],[4.969965,52.283098],[4.972374,52.285342],[4.972835,52.285771],[4.983724,52.290839],[4.984512,52.291205],[4.997713,52.290351],[5.002079,52.29396],[5.002056,52.296657],[5.003498,52.299358],[5.007874,52.302069],[5.008513,52.302465],[5.01225,52.30478],[5.014594,52.304787],[5.015182,52.304789],[5.018305,52.304416]]]]}},{type:"Feature",properties:{id:17,name:"SouthHolland",created_at:"2013-11-30T17:55:36+0100",updated_at:"2013-11-30T17:55:36+0100",cartodb_id:8},geometry:{type:"MultiPolygon",coordinates:[[[[4.353794,51.738095],[4.356731,51.736322],[4.358219,51.734538],[4.356813,51.732727],[4.351043,51.731777],[4.336672,51.727154],[4.330883,51.727102],[4.317835,51.727883],[4.310577,51.728715],[4.301849,51.730433],[4.291608,51.734832],[4.291604,51.734994],[4.291564,51.73663],[4.290116,51.736617],[4.268157,51.746298],[4.26232,51.74804],[4.259401,51.748911],[4.257908,51.750695],[4.259312,51.752506],[4.263589,51.755245],[4.28246,51.753626],[4.304291,51.749335],[4.30432,51.74933],[4.314471,51.74763],[4.337806,51.74065],[4.353794,51.738095]]],[[[3.955729,51.77886],[3.963031,51.777151],[3.963059,51.776252],[3.954338,51.777045],[3.945616,51.777837],[3.929708,51.776741],[3.91247,51.77203],[3.903807,51.771022],[3.902329,51.771902],[3.906646,51.772856],[3.918001,51.780191],[3.922289,51.782043],[3.927881,51.788406],[3.93649,51.79121],[3.935098,51.789395],[3.939532,51.786753],[3.955729,51.77886]]],[[[4.015873,51.850604],[4.01883,51.848841],[4.017379,51.848824],[4.0159,51.849705],[4.008617,51.850519],[3.994188,51.847652],[3.988467,51.844886],[3.984715,51.84343],[3.98457,51.843374],[3.983224,51.842852],[3.981297,51.842104],[3.975493,51.842034],[3.971169,51.841083],[3.968295,51.840149],[3.974099,51.840219],[3.982748,51.842121],[3.983172,51.842155],[3.995778,51.843175],[4.008837,51.843329],[4.014695,51.8416],[4.014832,51.837106],[4.01486,51.836208],[4.015129,51.836047],[4.023728,51.830917],[4.028106,51.830068],[4.029584,51.829186],[4.029638,51.827389],[4.035521,51.82476],[4.038395,51.825692],[4.038368,51.826591],[4.033936,51.829237],[4.033909,51.830135],[4.041188,51.82932],[4.045513,51.830269],[4.046237,51.830969],[4.047893,51.832928],[4.054059,51.837604],[4.054646,51.837321],[4.052606,51.835744],[4.052532,51.835696],[4.048334,51.832998],[4.04554,51.82937],[4.04135,51.823928],[4.038503,51.822097],[4.042961,51.818552],[4.048655,51.822213],[4.054456,51.822279],[4.054536,51.819583],[4.063396,51.814289],[4.078001,51.810857],[4.078027,51.809958],[4.083879,51.808225],[4.094105,51.805641],[4.114656,51.796876],[4.121954,51.795157],[4.124904,51.79339],[4.129277,51.792538],[4.125004,51.789795],[4.141021,51.787269],[4.142421,51.789082],[4.157061,51.783843],[4.164404,51.780323],[4.181888,51.776908],[4.190629,51.7752],[4.193527,51.775229],[4.196544,51.770765],[4.217152,51.758386],[4.245012,51.745176],[4.245188,51.74507],[4.247953,51.743406],[4.246528,51.742493],[4.252097,51.738308],[4.252432,51.738056],[4.261298,51.730949],[4.262812,51.728266],[4.273055,51.723869],[4.278888,51.722126],[4.281542,51.721537],[4.290022,51.719652],[4.290531,51.719539],[4.299257,51.717822],[4.319277,51.706613],[4.319792,51.706324],[4.325621,51.704579],[4.329982,51.703719],[4.343002,51.703836],[4.351702,51.703015],[4.366148,51.70404],[4.370508,51.703179],[4.386421,51.703316],[4.390722,51.705151],[4.393576,51.706973],[4.397876,51.708808],[4.399402,51.705225],[4.399441,51.703427],[4.402413,51.699856],[4.403859,51.699868],[4.395299,51.694402],[4.395259,51.6962],[4.392327,51.697973],[4.382181,51.698785],[4.382241,51.696089],[4.377942,51.694254],[4.373603,51.694216],[4.369224,51.695976],[4.369204,51.696875],[4.366331,51.695951],[4.362012,51.695014],[4.360545,51.6959],[4.358976,51.701281],[4.356063,51.702154],[4.345937,51.702064],[4.356083,51.701255],[4.35755,51.700369],[4.356124,51.699458],[4.354698,51.698546],[4.356206,51.695862],[4.35916,51.693191],[4.364966,51.692343],[4.36794,51.688773],[4.369446,51.686089],[4.365271,51.67886],[4.356759,51.671594],[4.338092,51.666034],[4.319407,51.661369],[4.316517,51.661343],[4.310757,51.660391],[4.299195,51.660284],[4.280517,51.655614],[4.271847,51.655532],[4.267848,51.656113],[4.260242,51.657218],[4.250081,51.658918],[4.241387,51.659732],[4.234115,51.661459],[4.232879,51.66231],[4.223814,51.668549],[4.22083,51.672116],[4.222229,51.673928],[4.22076,51.674812],[4.210571,51.677407],[4.203295,51.679132],[4.194597,51.679943],[4.188718,51.683479],[4.18438,51.683434],[4.168451,51.684169],[4.16404,51.68682],[4.156859,51.684946],[4.162521,51.689501],[4.15507,51.697514],[4.136119,51.702707],[4.131729,51.704458],[4.121528,51.707046],[4.115716,51.707882],[4.11135,51.708733],[4.094016,51.707644],[4.093864,51.707653],[4.08097,51.708398],[4.080907,51.708403],[4.06937,51.709168],[4.060611,51.711766],[4.060282,51.711791],[4.050457,51.712549],[4.048957,51.71433],[4.050324,51.717043],[4.050271,51.718841],[4.039847,51.728611],[4.041214,51.731324],[4.038212,51.734885],[4.033735,51.739329],[4.0336,51.743823],[4.035021,51.744738],[4.03057,51.748283],[4.029122,51.748266],[4.029257,51.743773],[4.026388,51.74284],[4.023466,51.743705],[4.018823,51.753541],[4.018741,51.756237],[4.028824,51.758152],[4.027295,51.760832],[4.024425,51.759899],[4.021529,51.759866],[4.018577,51.761629],[4.021365,51.765258],[4.022624,51.771566],[4.020957,51.778739],[4.019426,51.781419],[4.004606,51.792033],[4.003074,51.794713],[4.001542,51.797392],[3.998587,51.799155],[3.988714,51.803352],[3.988301,51.803528],[3.981081,51.802542],[3.970961,51.801522],[3.968364,51.803838],[3.967977,51.804183],[3.957801,51.804958],[3.949132,51.803953],[3.94629,51.80212],[3.938402,51.799552],[3.934809,51.798382],[3.931881,51.799245],[3.928094,51.79841],[3.927561,51.798292],[3.916024,51.79635],[3.913155,51.795415],[3.907416,51.793544],[3.903098,51.792591],[3.897241,51.794314],[3.891474,51.793342],[3.890114,51.790627],[3.891653,51.78795],[3.89461,51.786189],[3.896089,51.785309],[3.893251,51.783475],[3.881779,51.779732],[3.877402,51.780574],[3.871516,51.783196],[3.870097,51.782278],[3.865963,51.775931],[3.859054,51.765951],[3.860594,51.763274],[3.86506,51.759736],[3.87387,51.756254],[3.875378,51.754475],[3.871124,51.751723],[3.869677,51.751704],[3.865333,51.751648],[3.85221,51.754174],[3.852179,51.755072],[3.847743,51.757711],[3.843398,51.757654],[3.838992,51.759394],[3.850455,51.763142],[3.856127,51.766812],[3.858963,51.768647],[3.864393,51.779507],[3.864302,51.782203],[3.865569,51.787614],[3.856416,51.800981],[3.854753,51.807253],[3.857469,51.812683],[3.865956,51.819087],[3.868826,51.820023],[3.900522,51.826723],[3.901973,51.826741],[3.904903,51.825879],[3.912096,51.827768],[3.969633,51.843761],[3.976859,51.844747],[3.982607,51.846614],[3.983131,51.846743],[3.994132,51.849449],[4.008589,51.851418],[4.015873,51.850604]]],[[[4.547209,52.314974],[4.563425,52.310593],[4.569158,52.317824],[4.569501,52.317688],[4.573591,52.316057],[4.583792,52.319722],[4.584054,52.319645],[4.586455,52.318929],[4.586742,52.318844],[4.591343,52.318562],[4.599608,52.318055],[4.599958,52.318033],[4.611755,52.314516],[4.611786,52.312718],[4.60313,52.304571],[4.603023,52.304436],[4.598827,52.299149],[4.598699,52.298863],[4.596007,52.292838],[4.594064,52.289636],[4.59234,52.286794],[4.588888,52.281104],[4.584524,52.279276],[4.584091,52.279005],[4.572932,52.272006],[4.568586,52.269279],[4.568617,52.26762],[4.568619,52.267481],[4.568653,52.265684],[4.568666,52.265645],[4.5702,52.2612],[4.568841,52.256771],[4.568818,52.256696],[4.568916,52.251397],[4.568917,52.251303],[4.566191,52.246086],[4.566088,52.24589],[4.565548,52.243366],[4.56474,52.239588],[4.564724,52.239562],[4.561895,52.235073],[4.556073,52.233235],[4.555977,52.233174],[4.554626,52.232325],[4.550319,52.2278],[4.553563,52.224565],[4.554794,52.223337],[4.557788,52.219763],[4.572239,52.218092],[4.572455,52.218067],[4.573919,52.218077],[4.57474,52.218227],[4.58413,52.219945],[4.59848,52.216531],[4.598828,52.216448],[4.603234,52.215579],[4.618536,52.215679],[4.619331,52.215685],[4.622814,52.216136],[4.626632,52.216631],[4.627202,52.216722],[4.63247,52.217567],[4.638844,52.219576],[4.647029,52.222154],[4.647464,52.222325],[4.658664,52.226721],[4.665953,52.228564],[4.666178,52.228752],[4.668525,52.230713],[4.670287,52.232186],[4.677692,52.226837],[4.683547,52.226872],[4.683861,52.226938],[4.687924,52.227797],[4.696622,52.233242],[4.703914,52.235082],[4.724437,52.233401],[4.723214,52.217214],[4.72531,52.214079],[4.726208,52.212736],[4.734701,52.207613],[4.735066,52.207392],[4.743728,52.21553],[4.753933,52.218281],[4.762701,52.219227],[4.77142,52.223768],[4.771538,52.223817],[4.775786,52.225588],[4.777213,52.228292],[4.781592,52.229214],[4.785983,52.229236],[4.79479,52.227483],[4.794826,52.224786],[4.795161,52.224383],[4.797801,52.221206],[4.802227,52.218531],[4.802369,52.207745],[4.802436,52.202618],[4.802439,52.202351],[4.803902,52.202359],[4.814143,52.202409],[4.822989,52.197058],[4.823023,52.194362],[4.836276,52.187233],[4.837686,52.184698],[4.837772,52.184543],[4.843349,52.181843],[4.843772,52.181638],[4.845127,52.180982],[4.855373,52.180129],[4.867023,52.174839],[4.867134,52.174788],[4.892119,52.16321],[4.874651,52.156843],[4.874847,52.139764],[4.873102,52.139578],[4.866092,52.138827],[4.855877,52.137883],[4.855808,52.137896],[4.842697,52.140519],[4.838303,52.141398],[4.834018,52.144857],[4.833876,52.144973],[4.832415,52.144966],[4.832333,52.144953],[4.820749,52.143112],[4.813467,52.141279],[4.810569,52.139467],[4.807694,52.135858],[4.809189,52.133168],[4.807775,52.129566],[4.80198,52.125941],[4.799059,52.125927],[4.79323,52.124999],[4.791793,52.123193],[4.791863,52.123194],[4.793945,52.122887],[4.822631,52.109861],[4.822816,52.109749],[4.825573,52.108078],[4.824364,52.106559],[4.824136,52.106273],[4.822676,52.106266],[4.822703,52.106046],[4.824306,52.09279],[4.825912,52.081111],[4.825913,52.08102],[4.825916,52.080778],[4.82598,52.075718],[4.833274,52.075753],[4.834755,52.073962],[4.830457,52.067649],[4.843551,52.070407],[4.844177,52.070392],[4.874192,52.069646],[4.868421,52.064227],[4.867464,52.063629],[4.866973,52.063322],[4.856807,52.05968],[4.848068,52.058742],[4.829887,52.050857],[4.829212,52.050564],[4.817708,52.037923],[4.811913,52.035198],[4.809303,52.031079],[4.809056,52.03069],[4.80906,52.030371],[4.809097,52.02754],[4.809102,52.027094],[4.798949,52.023448],[4.798893,52.023423],[4.800058,52.02145],[4.803426,52.01538],[4.804674,52.015301],[4.816072,52.014576],[4.816549,52.014545],[4.821754,52.016994],[4.822342,52.01727],[4.825244,52.018183],[4.833997,52.017326],[4.841281,52.01736],[4.847087,52.019184],[4.847235,52.019005],[4.848839,52.017063],[4.857212,52.006917],[4.857435,52.006646],[4.853076,52.005728],[4.818177,52.001069],[4.827005,51.99392],[4.827605,51.993434],[4.83583,51.98677],[4.834374,51.986763],[4.844715,51.97734],[4.845934,51.97623],[4.846152,51.976031],[4.850529,51.975152],[4.850612,51.975102],[4.86069,51.968968],[4.860792,51.968906],[4.866696,51.961741],[4.869372,51.957692],[4.869659,51.957259],[4.872322,51.954829],[4.872599,51.954575],[4.87263,51.951878],[4.872661,51.951804],[4.875622,51.9447],[4.875723,51.944487],[4.878602,51.93842],[4.882955,51.939338],[4.883391,51.9394],[4.896025,51.941191],[4.896556,51.941194],[4.901843,51.941215],[4.902005,51.941245],[4.912004,51.943055],[4.917804,51.944876],[4.922139,51.94759],[4.926457,51.952102],[4.935086,51.962024],[4.94088,51.964743],[4.949611,51.964776],[4.961287,51.961223],[4.961383,51.961223],[4.970017,51.961254],[4.97409,51.962952],[4.974366,51.963067],[4.979994,51.966583],[4.980154,51.966683],[4.984131,51.971665],[4.984471,51.972092],[4.993157,51.977515],[5.001883,51.978443],[5.010639,51.975774],[5.020872,51.970413],[5.029612,51.969541],[5.030023,51.969627],[5.033971,51.970453],[5.03686,51.973159],[5.03973,51.978561],[5.04847,51.977687],[5.054293,51.977704],[5.064377,51.965387],[5.064573,51.965148],[5.058778,51.961536],[5.056049,51.956355],[5.055817,51.955914],[5.087953,51.950827],[5.102286,51.947325],[5.102523,51.947267],[5.130229,51.935645],[5.133122,51.938348],[5.143116,51.936686],[5.149134,51.935685],[5.149139,51.934786],[5.147695,51.932985],[5.149163,51.930291],[5.143371,51.925785],[5.136137,51.919477],[5.133249,51.915875],[5.132154,51.915193],[5.131801,51.914973],[5.11881,51.899662],[5.117394,51.893366],[5.115928,51.891534],[5.114876,51.89022],[5.11451,51.889764],[5.113063,51.888861],[5.105794,51.889743],[5.094295,51.889715],[5.094171,51.889715],[5.091266,51.889707],[5.091028,51.889559],[5.088372,51.887902],[5.086961,51.881606],[5.086507,51.88118],[5.084246,51.879062],[5.084075,51.878902],[5.081336,51.877192],[5.081182,51.877096],[5.073933,51.875279],[5.073223,51.875277],[5.07248,51.875275],[5.07242,51.875275],[5.062314,51.875248],[5.056511,51.874332],[5.053627,51.871627],[5.052195,51.868927],[5.052208,51.867129],[5.062405,51.862663],[5.063863,51.861768],[5.06358,51.861591],[5.060973,51.859962],[5.05372,51.859043],[5.045003,51.859916],[5.027581,51.859864],[5.015966,51.859828],[5.005811,51.858897],[4.995617,51.862459],[4.994173,51.861555],[4.998583,51.855277],[4.998607,51.85258],[5.000097,51.84809],[4.99876,51.845562],[4.998669,51.845389],[5.00012,51.845394],[5.000306,51.845335],[5.00303,51.844504],[5.003249,51.844471],[5.008843,51.843624],[5.021596,51.842787],[5.021912,51.842767],[5.032078,51.841899],[5.027861,51.824806],[5.027784,51.824512],[5.026453,51.819408],[5.009128,51.822034],[5.009025,51.82205],[5.001772,51.822026],[4.988716,51.821983],[4.977655,51.823656],[4.977095,51.823741],[4.969834,51.824614],[4.960272,51.82627],[4.959662,51.826375],[4.94501,51.827832],[4.942235,51.828108],[4.936423,51.828985],[4.927718,51.828951],[4.913558,51.827138],[4.913229,51.827096],[4.904544,51.825262],[4.887684,51.819073],[4.887206,51.818897],[4.885775,51.817093],[4.868474,51.808028],[4.867873,51.807713],[4.859826,51.803495],[4.846819,51.79984],[4.836681,51.798893],[4.822171,51.799723],[4.821753,51.799773],[4.80765,51.80145],[4.797512,51.800501],[4.781612,51.796824],[4.7744,51.79409],[4.76624,51.790654],[4.765752,51.790448],[4.76535,51.790122],[4.755718,51.782304],[4.751446,51.776887],[4.745829,51.764271],[4.73724,51.757032],[4.724323,51.748868],[4.704212,51.737965],[4.694146,51.733411],[4.682621,51.729746],[4.676887,51.726116],[4.675454,51.725208],[4.645146,51.719626],[4.643699,51.719617],[4.64073,51.724093],[4.629197,51.721322],[4.626302,51.721303],[4.623392,51.722183],[4.61902,51.723953],[4.606102,51.717574],[4.597435,51.716617],[4.588816,51.712963],[4.580134,51.712903],[4.572931,51.711055],[4.567192,51.708318],[4.558561,51.70556],[4.551327,51.705509],[4.535463,51.702698],[4.529677,51.702655],[4.516622,51.704357],[4.512265,51.705224],[4.509336,51.707],[4.499156,51.70962],[4.488974,51.712239],[4.467197,51.715666],[4.458496,51.716496],[4.452707,51.71645],[4.439684,51.716346],[4.435305,51.718108],[4.423689,51.719811],[4.41352,51.721525],[4.407692,51.723275],[4.404778,51.724149],[4.384356,51.731168],[4.384337,51.732067],[4.369739,51.737335],[4.363928,51.738184],[4.349306,51.744348],[4.318708,51.752164],[4.317239,51.75305],[4.315967,51.75334],[4.298304,51.75737],[4.297939,51.757435],[4.283755,51.759931],[4.272123,51.761619],[4.267778,51.761578],[4.26049,51.763306],[4.248812,51.766789],[4.241432,51.772111],[4.231083,51.780101],[4.23106,51.781],[4.232486,51.781913],[4.239754,51.781085],[4.24118,51.781998],[4.244056,51.782925],[4.249784,51.785678],[4.246863,51.786549],[4.243965,51.786521],[4.239617,51.786478],[4.230852,51.789089],[4.226412,51.792641],[4.217575,51.797948],[4.213156,51.8006],[4.195641,51.804919],[4.194578,51.804908],[4.185493,51.804815],[4.182569,51.805684],[4.16628,51.818102],[4.160465,51.821587],[4.160381,51.821637],[4.158931,51.821622],[4.158906,51.822521],[4.155981,51.823389],[4.147303,51.822398],[4.143361,51.823967],[4.142903,51.82415],[4.140423,51.823349],[4.140027,51.82322],[4.138651,51.820509],[4.137201,51.820493],[4.132311,51.820441],[4.128966,51.820405],[4.128499,51.8204],[4.122622,51.823034],[4.121146,51.823917],[4.11817,51.826582],[4.117916,51.826657],[4.115243,51.827449],[4.112317,51.828317],[4.106515,51.828253],[4.102189,51.827307],[4.097786,51.829057],[4.094859,51.829924],[4.074158,51.843179],[4.072707,51.843163],[4.055493,51.837587],[4.054677,51.837343],[4.054675,51.837342],[4.054674,51.837342],[4.054091,51.837628],[4.054081,51.837633],[4.056826,51.840287],[4.06685,51.844896],[4.068249,51.846709],[4.06817,51.849406],[4.066613,51.852984],[4.050168,51.868981],[4.032259,51.884958],[4.030725,51.887638],[4.03059,51.892131],[4.034785,51.897574],[4.044659,51.907577],[4.046112,51.907593],[4.04334,51.903066],[4.048991,51.908525],[4.049011,51.908551],[4.05319,51.913967],[4.053244,51.91217],[4.056097,51.914],[4.058924,51.916729],[4.042695,51.924636],[4.038334,51.924586],[4.01664,51.920739],[4.002188,51.917872],[4.00515,51.916109],[3.996375,51.917803],[3.993496,51.91687],[3.987543,51.921295],[3.988912,51.924008],[3.994531,51.930368],[4.008655,51.94402],[4.015652,51.953093],[4.016996,51.956704],[4.01395,51.961164],[4.008103,51.961995],[4.00651,51.966471],[4.006371,51.970965],[4.009171,51.974594],[4.014772,51.981851],[4.020484,51.985514],[4.029136,51.988311],[4.034959,51.988379],[4.042291,51.986665],[4.047845,51.995718],[4.084231,51.98809],[4.084478,51.988039],[4.097657,51.985487],[4.127796,52.001097],[4.134926,52.006567],[4.141517,52.012473],[4.142033,52.012935],[4.154726,52.023758],[4.154845,52.023858],[4.161981,52.029327],[4.164846,52.031155],[4.170577,52.03481],[4.170617,52.034841],[4.197716,52.055765],[4.213494,52.065812],[4.213756,52.066004],[4.231829,52.079279],[4.232103,52.079481],[4.24454,52.089154],[4.244979,52.089495],[4.256424,52.098595],[4.256734,52.098504],[4.259366,52.097725],[4.265226,52.096882],[4.268122,52.097808],[4.272432,52.100546],[4.270951,52.101431],[4.26664,52.098693],[4.260757,52.100435],[4.260712,52.102232],[4.260689,52.103131],[4.266459,52.105883],[4.266509,52.105914],[4.270316,52.108332],[4.270771,52.108621],[4.280811,52.115908],[4.28104,52.116024],[4.287983,52.119551],[4.288022,52.119571],[4.303864,52.128707],[4.323946,52.144173],[4.35066,52.166455],[4.351181,52.166889],[4.37556,52.187777],[4.383892,52.197484],[4.384111,52.197738],[4.398119,52.211939],[4.398418,52.212242],[4.405556,52.220392],[4.426896,52.24474],[4.426983,52.24484],[4.432426,52.25087],[4.432705,52.251179],[4.445504,52.264666],[4.4456,52.264767],[4.494124,52.328967],[4.544259,52.315852],[4.547209,52.314974]]]]}},{type:"Feature",properties:{id:20,name:"Zeeland",created_at:"2013-11-30T17:55:36+0100",updated_at:"2013-11-30T17:55:36+0100",cartodb_id:9},geometry:{type:"MultiPolygon",coordinates:[[[[4.151622,51.346846],[4.147341,51.345901],[4.1416,51.34584],[4.138754,51.34491],[4.134449,51.344864],[4.130044,51.348413],[4.128609,51.348397],[4.128559,51.350195],[4.128535,51.351094],[4.132816,51.352039],[4.137196,51.349389],[4.135687,51.35207],[4.137073,51.353883],[4.12851,51.351993],[4.12705,51.352876],[4.129896,51.353806],[4.131307,51.35472],[4.128411,51.355588],[4.126975,51.355572],[4.131208,51.358315],[4.128361,51.357385],[4.119698,51.35909],[4.118237,51.359973],[4.119648,51.360887],[4.116777,51.360856],[4.11393,51.359926],[4.11247,51.360809],[4.11242,51.362606],[4.122395,51.365412],[4.131034,51.364607],[4.133931,51.363739],[4.138287,51.361988],[4.144177,51.356656],[4.144226,51.354859],[4.150065,51.351325],[4.148654,51.35041],[4.148703,51.348613],[4.151622,51.346846]]],[[[4.151622,51.346846],[4.150138,51.348628],[4.15009,51.350426],[4.151525,51.350441],[4.155904,51.34779],[4.16021,51.347836],[4.163128,51.346068],[4.167698,51.336226],[4.170496,51.338953],[4.167602,51.339822],[4.170424,51.341649],[4.174729,51.341694],[4.171835,51.342563],[4.168965,51.342533],[4.166071,51.343402],[4.166023,51.3452],[4.164515,51.347881],[4.173127,51.347971],[4.177433,51.348016],[4.180375,51.345349],[4.181857,51.343566],[4.183293,51.343581],[4.18181,51.345364],[4.181739,51.34806],[4.17595,51.349799],[4.163008,51.350562],[4.160137,51.350532],[4.157218,51.352299],[4.158629,51.353213],[4.161548,51.351446],[4.167266,51.352405],[4.173032,51.351566],[4.183032,51.353468],[4.188821,51.35173],[4.191715,51.350861],[4.193151,51.350875],[4.194586,51.35089],[4.191692,51.351759],[4.187315,51.354411],[4.185879,51.354397],[4.178702,51.354322],[4.175807,51.355191],[4.171692,51.356255],[4.174371,51.355176],[4.17296,51.354263],[4.167218,51.354203],[4.162887,51.355056],[4.161452,51.355041],[4.154104,51.361257],[4.15262,51.36304],[4.151111,51.365721],[4.15245,51.369331],[4.15963,51.369407],[4.163962,51.368554],[4.163889,51.37125],[4.172529,51.370441],[4.172721,51.363251],[4.171381,51.359641],[4.17564,51.361483],[4.178559,51.359715],[4.18289,51.358861],[4.194492,51.354485],[4.196058,51.35528],[4.194469,51.355384],[4.190115,51.357137],[4.192939,51.358965],[4.191504,51.35895],[4.188656,51.358022],[4.181407,51.360644],[4.177028,51.363296],[4.176957,51.365992],[4.178369,51.366906],[4.179686,51.371415],[4.181122,51.37143],[4.182558,51.371445],[4.18124,51.366936],[4.184183,51.364269],[4.185643,51.363385],[4.18416,51.365168],[4.187008,51.366096],[4.191315,51.36614],[4.182676,51.36695],[4.184017,51.370561],[4.183946,51.373257],[4.185335,51.375069],[4.189596,51.376911],[4.198213,51.377],[4.199673,51.376116],[4.205441,51.375275],[4.211278,51.371738],[4.208453,51.369911],[4.201343,51.367142],[4.20139,51.365344],[4.205651,51.367186],[4.209912,51.369027],[4.212761,51.369955],[4.214243,51.368172],[4.212853,51.36636],[4.215725,51.366388],[4.215794,51.363692],[4.215817,51.362793],[4.214382,51.362779],[4.214428,51.360981],[4.220125,51.362836],[4.221583,51.361952],[4.224524,51.359284],[4.222976,51.354981],[4.224615,51.355689],[4.229013,51.352136],[4.230448,51.352151],[4.234845,51.348598],[4.167391,51.294885],[4.167367,51.294866],[4.160295,51.291195],[4.159982,51.291057],[4.116642,51.271958],[4.116382,51.271843],[4.103662,51.26541],[4.103225,51.26522],[4.090921,51.259874],[4.090587,51.259722],[4.076776,51.253422],[4.06688,51.248815],[4.066116,51.248564],[4.064042,51.247884],[4.063954,51.247708],[4.062688,51.245171],[4.058418,51.244223],[4.041287,51.242228],[4.038317,51.24579],[4.03803,51.245963],[4.036859,51.246672],[4.032642,51.243926],[4.025536,51.242045],[4.021106,51.246488],[4.015405,51.245522],[4.005462,51.242707],[3.999816,51.239942],[3.992739,51.23716],[3.987067,51.235294],[3.9867,51.234892],[3.978754,51.226203],[3.964468,51.225129],[3.964418,51.224993],[3.963148,51.221517],[3.958994,51.21697],[3.95327,51.2169],[3.947546,51.216829],[3.944712,51.215895],[3.943337,51.21408],[3.936211,51.213092],[3.93023,51.221109],[3.929688,51.220755],[3.926022,51.218359],[3.920298,51.218287],[3.916091,51.215536],[3.919184,51.208382],[3.912087,51.206494],[3.900729,51.203652],[3.893576,51.203561],[3.893498,51.20354],[3.886481,51.201671],[3.884963,51.204349],[3.877661,51.20875],[3.881895,51.210603],[3.882126,51.210704],[3.890362,51.214309],[3.892041,51.217701],[3.893049,51.219738],[3.888608,51.224176],[3.887708,51.223847],[3.875875,51.219516],[3.864831,51.214085],[3.864605,51.213974],[3.860372,51.21212],[3.85608,51.212064],[3.853158,51.213823],[3.846003,51.213729],[3.834586,51.212678],[3.827524,51.209886],[3.824662,51.209847],[3.82037,51.209789],[3.81023,51.213249],[3.804476,51.21407],[3.804569,51.211374],[3.798846,51.211295],[3.791566,51.214792],[3.790073,51.21657],[3.789822,51.22376],[3.789808,51.224185],[3.789321,51.238139],[3.789311,51.238433],[3.789039,51.246227],[3.793147,51.251678],[3.793273,51.251934],[3.795824,51.25711],[3.785704,51.259668],[3.778416,51.263164],[3.778058,51.263306],[3.774055,51.264902],[3.772686,51.263085],[3.769916,51.260349],[3.762659,51.262945],[3.756673,51.270054],[3.752343,51.270893],[3.750943,51.269974],[3.72356,51.274081],[3.719294,51.273121],[3.719327,51.272222],[3.712131,51.273018],[3.694772,51.277262],[3.690307,51.281693],[3.678843,51.281525],[3.677377,51.282403],[3.67731,51.2842],[3.658409,51.291114],[3.644077,51.2909],[3.644111,51.290002],[3.641279,51.28906],[3.62674,51.294236],[3.618036,51.296801],[3.600589,51.302829],[3.591847,51.306291],[3.591387,51.306284],[3.590413,51.306269],[3.580661,51.298924],[3.588041,51.293644],[3.583883,51.289983],[3.58252,51.288163],[3.576753,51.288973],[3.572346,51.291602],[3.572311,51.2925],[3.563532,51.296859],[3.559268,51.295893],[3.557978,51.292276],[3.556581,51.291355],[3.556358,51.29128],[3.553751,51.290411],[3.549379,51.29214],[3.543646,51.29205],[3.542358,51.288433],[3.538204,51.28477],[3.533905,51.284701],[3.529424,51.289126],[3.51513,51.287998],[3.518253,51.281754],[3.518322,51.281519],[3.528238,51.247745],[3.526965,51.247642],[3.472549,51.243244],[3.451075,51.242888],[3.450661,51.242882],[3.44678,51.242817],[3.440977,51.244518],[3.440794,51.244553],[3.432311,51.246171],[3.428054,51.2452],[3.424922,51.251442],[3.424914,51.25163],[3.424729,51.255935],[3.415905,51.261181],[3.415871,51.261151],[3.411764,51.257514],[3.407468,51.257441],[3.402899,51.263657],[3.394188,51.266206],[3.388106,51.274194],[3.379432,51.275843],[3.376488,51.277591],[3.376369,51.280287],[3.380628,51.281259],[3.382022,51.282183],[3.380352,51.287549],[3.37884,51.289321],[3.370084,51.292767],[3.367059,51.296311],[3.365507,51.298982],[3.366861,51.300804],[3.376776,51.303673],[3.363477,51.312435],[3.363042,51.312778],[3.359016,51.315954],[3.363198,51.318724],[3.363485,51.318938],[3.385351,51.335234],[3.385433,51.335295],[3.383683,51.342458],[3.374758,51.349498],[3.374521,51.354889],[3.375758,51.359407],[3.37261,51.365647],[3.370176,51.368495],[3.368065,51.370963],[3.372009,51.374452],[3.372213,51.374632],[3.37858,51.378004],[3.379233,51.37835],[3.382065,51.379298],[3.386333,51.380271],[3.401971,51.384135],[3.411907,51.387002],[3.412259,51.38712],[3.423241,51.39079],[3.426074,51.391737],[3.430383,51.391809],[3.433092,51.391018],[3.433294,51.390959],[3.437641,51.390133],[3.440514,51.390181],[3.44849,51.391993],[3.449055,51.392121],[3.45616,51.394038],[3.457822,51.394593],[3.458995,51.394984],[3.461867,51.395031],[3.466176,51.395103],[3.472927,51.396277],[3.477592,51.397089],[3.480427,51.398034],[3.486136,51.399027],[3.488972,51.399972],[3.493244,51.400941],[3.497479,51.402808],[3.500278,51.404652],[3.500632,51.404657],[3.501715,51.404675],[3.50164,51.406472],[3.504477,51.407417],[3.517371,51.408524],[3.521682,51.408593],[3.528903,51.407809],[3.536123,51.407025],[3.54478,51.406263],[3.545836,51.40628],[3.546217,51.406286],[3.54769,51.40541],[3.546362,51.402691],[3.550708,51.401861],[3.557964,51.400176],[3.565183,51.39939],[3.568056,51.399435],[3.57829,51.395099],[3.579762,51.394222],[3.578841,51.393616],[3.578433,51.393348],[3.578361,51.393301],[3.584249,51.389796],[3.588664,51.387167],[3.589221,51.387122],[3.607405,51.385656],[3.614691,51.38307],[3.616197,51.381294],[3.623391,51.379619],[3.623446,51.379606],[3.642252,51.376293],[3.652337,51.375544],[3.652358,51.375543],[3.662423,51.374795],[3.668008,51.374008],[3.6682,51.373981],[3.686933,51.372458],[3.692876,51.367149],[3.692943,51.365352],[3.700287,51.360963],[3.701689,51.361882],[3.716308,51.3549],[3.720745,51.351367],[3.727346,51.349822],[3.727986,51.349672],[3.758188,51.3483],[3.759655,51.347422],[3.755446,51.344665],[3.755574,51.34107],[3.768647,51.336757],[3.771485,51.337696],[3.769636,51.349359],[3.771008,51.351176],[3.789697,51.350535],[3.792661,51.347878],[3.798496,51.345261],[3.799094,51.345222],[3.810007,51.344518],[3.80723,51.341783],[3.807323,51.339087],[3.81331,51.331975],[3.814776,51.331096],[3.816211,51.331115],[3.813125,51.337367],[3.814343,51.343677],[3.817244,51.342817],[3.818864,51.337445],[3.819858,51.337458],[3.820299,51.337464],[3.821579,51.341977],[3.828723,51.342972],[3.831685,51.340314],[3.83504,51.3383],[3.836081,51.337675],[3.841851,51.336853],[3.846155,51.33691],[3.846783,51.336869],[3.857224,51.336191],[3.857664,51.336163],[3.86739,51.337163],[3.867677,51.337193],[3.873238,51.34266],[3.875959,51.347191],[3.88454,51.348201],[3.891657,51.350091],[3.895845,51.353741],[3.905747,51.358363],[3.917115,51.362103],[3.937156,51.364153],[3.941407,51.366004],[3.947093,51.367872],[3.954244,51.36886],[3.955736,51.36708],[3.9572,51.366199],[3.958636,51.366216],[3.959959,51.369829],[3.959875,51.372525],[3.962634,51.376155],[3.963874,51.382464],[3.968099,51.385213],[3.968043,51.38701],[3.966495,51.390588],[3.964918,51.395064],[3.966243,51.398677],[3.973176,51.406853],[3.976022,51.407786],[3.977555,51.407805],[3.978896,51.407821],[3.993322,51.406196],[3.994814,51.404416],[4.001999,51.404502],[4.0049,51.403637],[4.017887,51.401992],[4.016504,51.400178],[4.017995,51.398397],[4.022278,51.399347],[4.025286,51.394886],[4.032496,51.394071],[4.029623,51.394038],[4.032629,51.386262],[4.032737,51.385982],[4.032815,51.383341],[4.032817,51.383286],[4.035716,51.382421],[4.040158,51.377977],[4.044651,51.371735],[4.050527,51.367307],[4.050884,51.367278],[4.079321,51.364937],[4.0865,51.365017],[4.102496,51.358002],[4.105317,51.359831],[4.106777,51.358948],[4.105367,51.358034],[4.111185,51.3554],[4.111195,51.355037],[4.111898,51.354735],[4.11216,51.354448],[4.112153,51.354316],[4.115541,51.35365],[4.122893,51.347436],[4.134496,51.337798],[4.134646,51.337674],[4.137565,51.335907],[4.140435,51.335938],[4.144788,51.334186],[4.151987,51.333364],[4.154832,51.334293],[4.15775,51.332526],[4.156243,51.335207],[4.150503,51.335146],[4.144764,51.335085],[4.137516,51.337705],[4.137467,51.339502],[4.134597,51.339471],[4.133063,51.343051],[4.151671,51.345048],[4.154614,51.342382],[4.158944,51.341529],[4.15459,51.343281],[4.151622,51.346846]]],[[[3.694419,51.525059],[3.694678,51.524472],[3.693694,51.524642],[3.692753,51.525257],[3.692321,51.525989],[3.692986,51.526166],[3.693949,51.525755],[3.694419,51.525059]]],[[[3.691411,51.528946],[3.691134,51.528072],[3.689866,51.528827],[3.689915,51.530277],[3.690669,51.531275],[3.690592,51.53151],[3.690644,51.531511],[3.691747,51.531012],[3.691786,51.529949],[3.691422,51.528975],[3.691411,51.528946]]],[[[3.694956,51.543411],[3.694989,51.542512],[3.692073,51.543369],[3.692174,51.540673],[3.690833,51.537956],[3.687951,51.537914],[3.686275,51.544184],[3.681681,51.55131],[3.683021,51.554027],[3.688855,51.552314],[3.694788,51.547904],[3.694956,51.543411]]],[[[3.68264,51.602575],[3.681197,51.602554],[3.68361,51.615177],[3.684885,51.619691],[3.68193,51.621446],[3.677531,51.62318],[3.6732,51.623117],[3.668903,51.622154],[3.667425,51.623032],[3.671722,51.623994],[3.680385,51.624121],[3.683239,51.625062],[3.687402,51.629618],[3.695797,51.636933],[3.698618,51.638772],[3.702951,51.638834],[3.714339,51.643493],[3.719885,51.649866],[3.719854,51.650693],[3.722495,51.650725],[3.720019,51.64991],[3.719472,51.649226],[3.715783,51.643514],[3.713027,51.639878],[3.714505,51.639],[3.718772,51.640859],[3.718805,51.63996],[3.717427,51.638142],[3.711749,51.635364],[3.711849,51.632668],[3.71477,51.631811],[3.725011,51.62836],[3.730589,51.633834],[3.723237,51.637326],[3.724681,51.637347],[3.732033,51.633854],[3.726455,51.628381],[3.722222,51.625623],[3.710472,51.63085],[3.704729,51.629868],[3.707784,51.625417],[3.704929,51.624476],[3.703419,51.626253],[3.697509,51.629764],[3.691969,51.62339],[3.696367,51.621656],[3.700698,51.621718],[3.699322,51.6199],[3.696434,51.619858],[3.689149,51.621551],[3.686329,51.619712],[3.685054,51.615198],[3.68264,51.602575]]],[[[3.68264,51.602575],[3.684218,51.599001],[3.691467,51.598207],[3.700091,51.599231],[3.708882,51.595761],[3.718949,51.596804],[3.723443,51.592373],[3.727738,51.593333],[3.736087,51.595199],[3.736161,51.595298],[3.736323,51.595431],[3.73687,51.595876],[3.739232,51.596455],[3.746365,51.597193],[3.752104,51.598172],[3.759319,51.598273],[3.762141,51.60011],[3.775192,51.598493],[3.780805,51.603066],[3.782248,51.603085],[3.795039,51.60326],[3.795237,51.603263],[3.79806,51.6051],[3.799503,51.605119],[3.799472,51.606018],[3.808131,51.606135],[3.812461,51.606194],[3.819771,51.603595],[3.835554,51.606502],[3.83844,51.606541],[3.839914,51.605661],[3.840369,51.60539],[3.841388,51.604782],[3.850048,51.604896],[3.851521,51.604016],[3.851552,51.603117],[3.855912,51.602275],[3.856113,51.602247],[3.861715,51.601452],[3.870524,51.597071],[3.869584,51.597059],[3.869111,51.596516],[3.869099,51.596502],[3.869111,51.596154],[3.87356,51.592615],[3.87963,51.583703],[3.888553,51.575726],[3.888613,51.573928],[3.89609,51.565932],[3.897591,51.564153],[3.899003,51.56507],[3.897679,51.561457],[3.893413,51.559604],[3.874759,51.556667],[3.873347,51.555749],[3.872001,51.554432],[3.864968,51.547549],[3.865059,51.544852],[3.867941,51.54489],[3.866699,51.542394],[3.865144,51.542297],[3.865089,51.543954],[3.862176,51.544815],[3.853498,51.5456],[3.844666,51.550879],[3.844605,51.552676],[3.837244,51.557074],[3.832919,51.557017],[3.82571,51.556921],[3.825458,51.556849],[3.815711,51.554089],[3.81148,51.551335],[3.808267,51.549764],[3.805808,51.548561],[3.802925,51.548522],[3.786974,51.551002],[3.775298,51.555331],[3.775283,51.555336],[3.760834,51.556035],[3.760617,51.55596],[3.736621,51.547604],[3.731019,51.543029],[3.715397,51.536512],[3.712582,51.534674],[3.707084,51.527402],[3.702762,51.527339],[3.701288,51.528217],[3.698139,51.535365],[3.700787,51.541697],[3.702195,51.542616],[3.699112,51.547967],[3.688686,51.556807],[3.691503,51.558646],[3.695525,51.56305],[3.695489,51.563062],[3.690061,51.558625],[3.687211,51.557684],[3.678426,51.561153],[3.672489,51.565562],[3.663915,51.568078],[3.663735,51.56813],[3.656457,51.569821],[3.652062,51.571554],[3.648868,51.579599],[3.64588,51.582252],[3.644299,51.585825],[3.64423,51.587622],[3.647081,51.588564],[3.645604,51.589441],[3.642719,51.589398],[3.635575,51.587493],[3.629839,51.586507],[3.628467,51.584688],[3.628815,51.575702],[3.630396,51.572129],[3.639257,51.566867],[3.640535,51.563977],[3.640837,51.563294],[3.651067,51.55985],[3.654019,51.558096],[3.665773,51.551985],[3.665791,51.551976],[3.670149,51.551141],[3.672578,51.548982],[3.673134,51.548487],[3.680847,51.535113],[3.686981,51.525312],[3.701296,51.514244],[3.701734,51.513906],[3.706576,51.513071],[3.717631,51.514965],[3.709022,51.513942],[3.704568,51.517475],[3.713178,51.518498],[3.720215,51.523094],[3.724603,51.521358],[3.72601,51.522278],[3.728793,51.525014],[3.725879,51.525872],[3.725846,51.526771],[3.727155,51.530386],[3.731248,51.536738],[3.732591,51.539454],[3.735408,51.541293],[3.746775,51.545948],[3.753885,51.548745],[3.764071,51.54619],[3.76705,51.543534],[3.781463,51.543733],[3.793056,51.542094],[3.801672,51.54311],[3.80446,51.545845],[3.82016,51.550552],[3.823074,51.549692],[3.834637,51.548948],[3.843408,51.545467],[3.84488,51.544588],[3.846413,51.541911],[3.849356,51.540151],[3.860916,51.539404],[3.866651,51.540378],[3.865149,51.542156],[3.86659,51.542175],[3.867792,51.541456],[3.868062,51.541295],[3.883856,51.543298],[3.886739,51.543335],[3.891092,51.542492],[3.898328,51.541685],[3.912595,51.546361],[3.918419,51.544637],[3.924184,51.544709],[3.925597,51.545626],[3.927067,51.544745],[3.930065,51.541186],[3.928739,51.537573],[3.934705,51.531354],[3.941903,51.526179],[3.942007,51.526145],[3.942006,51.526145],[3.94197,51.526131],[3.942082,51.526051],[3.944376,51.526802],[3.953494,51.529788],[3.957761,51.531638],[3.966435,51.530845],[3.970842,51.528201],[3.973695,51.529135],[3.985334,51.525679],[3.994061,51.523086],[3.994148,51.523074],[3.999852,51.522256],[4.005614,51.522325],[4.007774,51.521683],[4.008523,51.52146],[4.011459,51.519696],[4.014313,51.520629],[4.017249,51.518865],[4.021732,51.513523],[4.037791,51.506517],[4.043277,51.503218],[4.043658,51.502989],[4.047978,51.503039],[4.052272,51.503987],[4.053739,51.503104],[4.053923,51.496813],[4.054029,51.493218],[4.058506,51.487875],[4.057198,51.483364],[4.057276,51.480668],[4.058847,51.476191],[4.064683,51.47356],[4.065049,51.473229],[4.079462,51.46024],[4.080597,51.459556],[4.080927,51.459357],[4.083804,51.45939],[4.092558,51.447232],[4.092794,51.446903],[4.104352,51.445232],[4.124738,51.436464],[4.127589,51.437394],[4.129052,51.436511],[4.13349,51.432063],[4.139242,51.432125],[4.147698,51.432215],[4.150745,51.432248],[4.153572,51.434076],[4.159251,51.436833],[4.166394,51.438706],[4.173489,51.442376],[4.180632,51.444248],[4.189286,51.443439],[4.202277,51.441773],[4.206639,51.440019],[4.215314,51.438309],[4.216775,51.437424],[4.22109,51.437468],[4.22392,51.439294],[4.219145,51.457227],[4.221861,51.463548],[4.221855,51.463591],[4.218337,51.488686],[4.216828,51.491368],[4.213901,51.493137],[4.174737,51.503525],[4.173225,51.506206],[4.171689,51.509787],[4.174474,51.513412],[4.177283,51.516138],[4.168543,51.519644],[4.164629,51.523562],[4.1641,51.524092],[4.151108,51.524855],[4.146834,51.523011],[4.142537,51.522066],[4.136675,51.5256],[4.136055,51.525538],[4.126614,51.524593],[4.117969,51.524499],[4.093423,51.526028],[4.09049,51.527793],[4.083286,51.527713],[4.08043,51.526782],[4.077548,51.52675],[4.074614,51.528515],[4.068964,51.532399],[4.064318,51.535591],[4.059811,51.541834],[4.061174,51.544546],[4.061147,51.545445],[4.05677,51.547194],[4.052419,51.548043],[4.049377,51.553403],[4.034907,51.555034],[4.027617,51.557647],[4.030366,51.562174],[4.030313,51.563972],[4.027569,51.566029],[4.02441,51.568398],[4.01279,51.570959],[4.006885,51.575385],[4.00253,51.576233],[3.990963,51.576994],[3.989493,51.577876],[3.983612,51.581401],[3.98486,51.58771],[3.990465,51.593172],[3.994739,51.595021],[3.999095,51.594173],[4.007671,51.596972],[4.012028,51.596124],[4.020605,51.598922],[4.023518,51.598057],[4.037789,51.603617],[4.040649,51.604549],[4.044997,51.60528],[4.046396,51.605514],[4.05348,51.610091],[4.063506,51.612902],[4.076473,51.613947],[4.102561,51.61064],[4.10403,51.609757],[4.104081,51.60796],[4.114336,51.602678],[4.11583,51.600896],[4.12021,51.599145],[4.117248,51.60181],[4.117223,51.602709],[4.134013,51.603638],[4.136442,51.603772],[4.137405,51.603826],[4.14604,51.604817],[4.147484,51.604832],[4.151838,51.603979],[4.161894,51.605883],[4.173417,51.606902],[4.17468,51.608543],[4.174812,51.608715],[4.173345,51.609599],[4.173297,51.611396],[4.174692,51.613209],[4.177484,51.616834],[4.174548,51.618602],[4.173104,51.618587],[4.17024,51.617658],[4.169738,51.617005],[4.168845,51.615845],[4.165982,51.614916],[4.159957,51.6141],[4.158787,51.613942],[4.154456,51.613896],[4.142882,51.614673],[4.127026,51.613604],[4.118118,51.624229],[4.118062,51.624296],[4.109221,51.630493],[4.103444,51.630429],[4.100505,51.632195],[4.09883,51.640268],[4.100173,51.643879],[4.114392,51.652126],[4.120096,51.654885],[4.137485,51.653274],[4.149118,51.650701],[4.15933,51.647212],[4.168345,51.644919],[4.169516,51.644622],[4.187019,51.638509],[4.189979,51.635842],[4.192868,51.635872],[4.192844,51.636771],[4.192702,51.642164],[4.18678,51.647497],[4.178016,51.651003],[4.175198,51.648277],[4.172309,51.648247],[4.156245,51.654372],[4.156196,51.65617],[4.159013,51.658897],[4.158989,51.659795],[4.157543,51.65978],[4.151861,51.656124],[4.138781,51.658682],[4.138756,51.659581],[4.153183,51.660633],[4.157495,51.661578],[4.173392,51.661744],[4.183508,51.661848],[4.18358,51.659152],[4.176355,51.659077],[4.17344,51.659946],[4.169105,51.659901],[4.166287,51.657175],[4.169226,51.655407],[4.182255,51.654643],[4.18235,51.651048],[4.191162,51.645744],[4.194123,51.643077],[4.195452,51.638571],[4.199972,51.64044],[4.214464,51.638788],[4.217423,51.63612],[4.230469,51.634452],[4.234779,51.635393],[4.23769,51.634523],[4.21472,51.628901],[4.204728,51.624305],[4.19765,51.618839],[4.192087,51.610691],[4.191927,51.61026],[4.190739,51.607081],[4.190741,51.606997],[4.190976,51.598093],[4.194028,51.591831],[4.198498,51.586482],[4.229395,51.563417],[4.235346,51.556283],[4.236924,51.550905],[4.235642,51.544599],[4.233,51.538468],[4.232919,51.538279],[4.232762,51.537969],[4.226057,51.524725],[4.226017,51.524652],[4.220547,51.51478],[4.220535,51.514689],[4.219338,51.505778],[4.225306,51.497746],[4.225443,51.497562],[4.231272,51.489714],[4.265606,51.440601],[4.276024,51.426316],[4.266092,51.420827],[4.263306,51.417204],[4.269453,51.40108],[4.268302,51.389382],[4.26691,51.38757],[4.268435,51.383989],[4.274181,51.384044],[4.27422,51.382413],[4.274224,51.382246],[4.277207,51.377779],[4.280101,51.376908],[4.268611,51.376798],[4.267682,51.376755],[4.244218,51.375662],[4.244015,51.383752],[4.24397,51.385549],[4.232205,51.396222],[4.214848,51.400544],[4.21195,51.401414],[4.206226,51.400457],[4.204672,51.404936],[4.198854,51.407574],[4.193105,51.407515],[4.18314,51.403817],[4.174541,51.402829],[4.157491,51.395457],[4.154618,51.395427],[4.138764,51.397056],[4.13438,51.399706],[4.118711,51.402198],[4.118499,51.402232],[4.102642,51.403856],[4.092506,51.406441],[4.088169,51.407292],[4.078621,51.408883],[4.078058,51.408977],[4.073643,51.412524],[4.062066,51.41509],[4.05182,51.421267],[4.047323,51.427509],[4.051557,51.430254],[4.050661,51.43043],[4.034196,51.433651],[4.034185,51.433657],[4.029802,51.436297],[4.02692,51.437156],[4.026899,51.437162],[4.016725,51.440639],[4.013225,51.440598],[4.012411,51.440588],[4.006631,51.441419],[4.006522,51.445014],[4.003591,51.446778],[3.997755,51.449406],[3.993357,51.45205],[3.988959,51.454695],[3.981572,51.4609],[3.975734,51.463527],[3.975561,51.463448],[3.961542,51.45706],[3.950033,51.456919],[3.934438,51.449533],[3.925721,51.452121],[3.922873,51.451187],[3.924341,51.450306],[3.925894,51.446729],[3.921609,51.445776],[3.92167,51.445573],[3.92322,51.440402],[3.926154,51.43864],[3.926269,51.435046],[3.919282,51.428664],[3.918008,51.425181],[3.917961,51.425051],[3.916709,51.422535],[3.91661,51.422337],[3.913851,51.418705],[3.912472,51.41689],[3.91246,51.416868],[3.900211,51.396055],[3.893057,51.395064],[3.884407,51.395852],[3.882911,51.397631],[3.876433,51.398355],[3.875698,51.398437],[3.871388,51.398381],[3.865701,51.396508],[3.861451,51.394655],[3.861511,51.392857],[3.858668,51.391921],[3.850079,51.390909],[3.849801,51.390872],[3.82025,51.38694],[3.820037,51.386912],[3.817165,51.386873],[3.816771,51.386868],[3.812856,51.386815],[3.798179,51.395607],[3.79087,51.399104],[3.789594,51.400617],[3.789371,51.400881],[3.776249,51.406096],[3.777086,51.409048],[3.777528,51.410609],[3.776059,51.411488],[3.764562,51.411328],[3.754342,51.415681],[3.7515,51.414742],[3.742974,51.411925],[3.735788,51.411823],[3.731412,51.413559],[3.727035,51.415295],[3.725598,51.415275],[3.725565,51.416174],[3.723931,51.421545],[3.720826,51.427795],[3.716514,51.427733],[3.716396,51.427872],[3.713507,51.431286],[3.70759,51.435697],[3.685553,51.447965],[3.679733,51.449679],[3.675452,51.448717],[3.686622,51.457872],[3.690938,51.457934],[3.704117,51.451831],[3.707093,51.449177],[3.701506,51.444601],[3.704449,51.442845],[3.711474,51.447442],[3.718829,51.443051],[3.721607,51.445789],[3.712747,51.451956],[3.726933,51.457553],[3.726901,51.458452],[3.725429,51.45933],[3.71693,51.455612],[3.712648,51.454652],[3.709738,51.455509],[3.705489,51.453649],[3.692309,51.459753],[3.693714,51.460672],[3.70934,51.466293],[3.710779,51.466314],[3.715161,51.464578],[3.717841,51.470011],[3.714897,51.471767],[3.712019,51.471726],[3.706031,51.477934],[3.703253,51.475196],[3.703262,51.475185],[3.706263,51.471643],[3.706263,51.471643],[3.706261,51.47164],[3.703519,51.468007],[3.686488,51.461466],[3.683543,51.463222],[3.682105,51.4632],[3.67635,51.463116],[3.660661,51.459288],[3.660474,51.458908],[3.657989,51.453854],[3.666721,51.451286],[3.668261,51.448611],[3.665317,51.450366],[3.660968,51.451201],[3.658057,51.452057],[3.645147,51.450965],[3.642374,51.448227],[3.641074,51.444611],[3.632515,51.442684],[3.626728,51.443496],[3.619573,51.442488],[3.609542,51.441437],[3.605158,51.443168],[3.60462,51.443326],[3.602247,51.444023],[3.600456,51.452987],[3.59758,51.452943],[3.597615,51.452044],[3.597886,51.445159],[3.597933,51.443957],[3.600915,51.441305],[3.590814,51.442049],[3.580748,51.441893],[3.575068,51.440007],[3.569245,51.441715],[3.567889,51.444059],[3.567699,51.444388],[3.557381,51.450521],[3.556636,51.450509],[3.551628,51.45043],[3.548679,51.452182],[3.536917,51.45829],[3.531127,51.459097],[3.526628,51.463522],[3.526591,51.46442],[3.522128,51.467946],[3.519103,51.471494],[3.514639,51.475019],[3.513052,51.47859],[3.511665,51.480217],[3.511539,51.480364],[3.504009,51.488336],[3.499504,51.492759],[3.49799,51.494533],[3.49655,51.494509],[3.496541,51.494739],[3.496513,51.495408],[3.492119,51.497135],[3.483369,51.49969],[3.477497,51.502292],[3.462795,51.509244],[3.46044,51.510637],[3.459839,51.510993],[3.455404,51.513618],[3.452486,51.514468],[3.449529,51.516218],[3.446533,51.518866],[3.446457,51.520663],[3.444978,51.521537],[3.439062,51.525035],[3.437583,51.52591],[3.436069,51.526805],[3.434625,51.527659],[3.433107,51.529432],[3.433069,51.53033],[3.43303,51.531229],[3.43568,51.536668],[3.435762,51.537036],[3.436889,51.542084],[3.442499,51.545774],[3.448834,51.547593],[3.450079,51.54795],[3.452472,51.548637],[3.453744,51.549474],[3.453875,51.54956],[3.455278,51.550482],[3.458161,51.55053],[3.459564,51.551452],[3.459674,51.551489],[3.465253,51.553344],[3.469463,51.556111],[3.477733,51.559239],[3.479402,51.55987],[3.486117,51.563548],[3.487864,51.564504],[3.488264,51.56468],[3.496365,51.568239],[3.50292,51.569997],[3.5035,51.570152],[3.5147,51.57387],[3.514887,51.573932],[3.526239,51.578609],[3.536225,51.581465],[3.539036,51.583308],[3.540405,51.585128],[3.556091,51.589871],[3.561789,51.591758],[3.575555,51.594566],[3.576108,51.594678],[3.581843,51.595666],[3.5905,51.5958],[3.597749,51.595012],[3.615133,51.593478],[3.62393,51.590015],[3.616646,51.591703],[3.618124,51.590826],[3.623965,51.589116],[3.634063,51.589268],[3.64265,51.591195],[3.651271,51.592222],[3.667005,51.596052],[3.678413,51.599815],[3.68264,51.602575]]],[[[3.917986,51.736136],[3.913673,51.735183],[3.91069,51.737843],[3.914945,51.740594],[3.919288,51.740648],[3.922183,51.740684],[3.93388,51.737234],[3.933909,51.736335],[3.931014,51.736299],[3.917986,51.736136]]],[[[3.94245,51.740936],[3.938107,51.740882],[3.937934,51.746275],[3.943668,51.748144],[3.952355,51.74825],[3.962518,51.747475],[3.95968,51.745643],[3.951107,51.741942],[3.94245,51.740936]]],[[[4.012404,51.726494],[4.006615,51.726426],[4.002218,51.728172],[3.99771,51.733513],[3.994621,51.73977],[3.991532,51.746026],[3.982649,51.752214],[3.978249,51.753959],[3.979641,51.755774],[3.981061,51.75669],[3.982481,51.757606],[3.991115,51.759507],[3.996935,51.758677],[3.995598,51.755065],[3.997157,51.751488],[4.006285,51.737211],[4.015161,51.731021],[4.016691,51.728342],[4.015298,51.726528],[4.012404,51.726494]]],[[[3.840564,51.755819],[3.842104,51.753142],[3.837853,51.750388],[3.836405,51.750369],[3.834926,51.751249],[3.839177,51.754002],[3.837699,51.754882],[3.831937,51.753906],[3.827718,51.750254],[3.826642,51.739451],[3.831189,51.739511],[3.836775,51.739585],[3.83967,51.739623],[3.846847,51.741516],[3.854146,51.739814],[3.854973,51.73957],[3.857072,51.738953],[3.872874,51.742755],[3.873323,51.742816],[3.887291,51.744738],[3.891634,51.744794],[3.903423,51.73865],[3.906465,51.734193],[3.90939,51.733331],[3.913761,51.732487],[3.922211,51.732593],[3.926787,51.73265],[3.94407,51.735562],[3.946993,51.734698],[3.970153,51.734981],[3.973076,51.734117],[3.970378,51.727791],[3.971854,51.72691],[3.974608,51.731438],[3.977671,51.726081],[3.980537,51.727014],[3.983459,51.72615],[3.983571,51.722556],[3.983627,51.720758],[3.982236,51.718943],[3.982743,51.718691],[3.991057,51.714553],[4.007301,51.703957],[4.011805,51.698616],[4.015025,51.687865],[4.02089,51.685236],[4.029619,51.68354],[4.030828,51.684061],[4.033903,51.685387],[4.044025,51.685504],[4.054252,51.682025],[4.054444,51.68194],[4.076226,51.672383],[4.086345,51.672496],[4.093675,51.668981],[4.107875,51.678128],[4.115053,51.680004],[4.122282,51.680082],[4.120862,51.679168],[4.122332,51.678285],[4.130982,51.679277],[4.149752,51.680376],[4.155438,51.684032],[4.156908,51.683149],[4.156932,51.68225],[4.158574,51.675075],[4.161562,51.67151],[4.165972,51.668859],[4.167441,51.667975],[4.163154,51.666132],[4.160263,51.666102],[4.158818,51.666087],[4.15872,51.669682],[4.157201,51.672363],[4.154237,51.675029],[4.149777,51.679477],[4.142647,51.675806],[4.139706,51.677572],[4.133923,51.677511],[4.116625,51.675526],[4.105111,51.673602],[4.100826,51.671757],[4.093701,51.668082],[4.093867,51.667982],[4.095172,51.6672],[4.10103,51.664567],[4.102898,51.662342],[4.105519,51.659222],[4.098549,51.650155],[4.095711,51.648325],[4.082863,51.642788],[4.071568,51.633671],[4.063007,51.629978],[4.057257,51.629014],[4.050284,51.632357],[4.04993,51.632527],[4.03851,51.6279],[4.034232,51.626053],[4.024178,51.624138],[4.017039,51.621357],[4.01661,51.62119],[4.009902,51.618576],[3.992549,51.61927],[3.985442,51.615588],[3.968118,51.615379],[3.965174,51.617142],[3.962258,51.618005],[3.949008,51.625935],[3.948646,51.62593],[3.947564,51.625917],[3.94612,51.625899],[3.940057,51.634815],[3.935675,51.636556],[3.935667,51.636559],[3.928677,51.629279],[3.925789,51.629243],[3.927175,51.631059],[3.919925,51.631867],[3.917095,51.630033],[3.914207,51.629997],[3.898233,51.632492],[3.89676,51.633372],[3.895286,51.634253],[3.90805,51.640694],[3.906637,51.641603],[3.906605,51.641589],[3.89953,51.637004],[3.893842,51.634234],[3.889539,51.63328],[3.890627,51.644083],[3.886114,51.64942],[3.887499,51.651236],[3.885876,51.65661],[3.880006,51.659231],[3.875521,51.663669],[3.876706,51.667796],[3.876816,51.668181],[3.867933,51.67436],[3.857663,51.678721],[3.856218,51.678703],[3.850466,51.677728],[3.844653,51.678551],[3.82469,51.684428],[3.824197,51.684573],[3.82272,51.685452],[3.824135,51.68637],[3.825488,51.689086],[3.825395,51.691782],[3.820963,51.69442],[3.815023,51.698836],[3.799146,51.697722],[3.793513,51.696766],[3.793393,51.696745],[3.78915,51.69399],[3.790723,51.690415],[3.792137,51.691333],[3.803673,51.692389],[3.806628,51.690631],[3.803705,51.69149],[3.793646,51.689556],[3.782175,51.686702],[3.770769,51.682049],[3.755061,51.676436],[3.755126,51.674639],[3.749377,51.67366],[3.746453,51.674518],[3.724937,51.669719],[3.722698,51.665199],[3.723003,51.661108],[3.723955,51.657117],[3.728388,51.654483],[3.727075,51.650867],[3.722741,51.650806],[3.719852,51.650765],[3.715385,51.654298],[3.715352,51.655196],[3.716764,51.656115],[3.722543,51.656198],[3.72251,51.657096],[3.722245,51.664286],[3.720734,51.666062],[3.713777,51.667679],[3.713442,51.667757],[3.709073,51.668593],[3.698855,51.672031],[3.698823,51.672042],[3.689881,51.679106],[3.682281,51.688886],[3.679118,51.696033],[3.67871,51.706816],[3.682812,51.71317],[3.691154,51.722282],[3.699634,51.727799],[3.716515,51.736952],[3.716667,51.737035],[3.722424,51.738016],[3.736931,51.737322],[3.759928,51.742139],[3.760512,51.742228],[3.772892,51.744117],[3.788816,51.744335],[3.7985,51.74361],[3.798982,51.743574],[3.814968,51.741992],[3.819311,51.74205],[3.820047,51.742527],[3.823561,51.744804],[3.823467,51.7475],[3.821988,51.748379],[3.823343,51.751095],[3.833262,51.75752],[3.838992,51.759394],[3.843398,51.757654],[3.840564,51.755819]]]]}},{type:"Feature",properties:{id:19,name:"NorthBrabant",created_at:"2013-11-30T17:55:36+0100",updated_at:"2013-11-30T17:55:36+0100",cartodb_id:10},geometry:{type:"MultiPolygon",coordinates:[[[[5.566589,51.222014],[5.560866,51.222922],[5.556638,51.240908],[5.55658,51.241205],[5.555232,51.248101],[5.556691,51.255291],[5.556701,51.257988],[5.55674,51.258134],[5.558154,51.26338],[5.556737,51.267877],[5.545288,51.272388],[5.528123,51.283198],[5.519543,51.2904],[5.516691,51.295797],[5.485156,51.301221],[5.483722,51.301222],[5.477977,51.296732],[5.476534,51.292238],[5.465052,51.285055],[5.442113,51.28327],[5.439491,51.279441],[5.439505,51.279421],[5.439528,51.279353],[5.439434,51.279358],[5.43785,51.277044],[5.437805,51.276979],[5.433505,51.276981],[5.41773,51.263501],[5.396237,51.267999],[5.366897,51.273256],[5.366141,51.273392],[5.346625,51.276883],[5.346073,51.276982],[5.346076,51.273386],[5.343216,51.266193],[5.337486,51.264393],[5.315993,51.264382],[5.295935,51.26257],[5.264398,51.267934],[5.238621,51.26251],[5.237333,51.263315],[5.237185,51.263408],[5.227132,51.269687],[5.241351,51.304766],[5.24278,51.306566],[5.241346,51.306564],[5.201117,51.323587],[5.196824,51.320883],[5.191085,51.320874],[5.17389,51.316348],[5.16244,51.310933],[5.135157,51.316271],[5.132118,51.347668],[5.132112,51.347729],[5.126666,51.351115],[5.12635,51.351312],[5.120576,51.356693],[5.117672,51.36208],[5.117538,51.362174],[5.071497,51.394327],[5.095742,51.423158],[5.09593,51.423324],[5.102892,51.429468],[5.104313,51.432168],[5.081048,51.469867],[5.080867,51.470201],[5.079591,51.47256],[5.050802,51.47248],[5.04649,51.471569],[5.043577,51.476055],[5.037784,51.480533],[5.040623,51.485935],[5.040609,51.487733],[5.039169,51.487729],[5.033402,51.48861],[5.031976,51.486808],[5.023373,51.482287],[5.016225,51.475971],[5.011929,51.473261],[5.007656,51.467853],[5.007693,51.463358],[5.010601,51.459772],[5.010609,51.458873],[5.010646,51.454378],[5.007783,51.452571],[5.004966,51.44537],[4.963448,51.42365],[4.92921,51.396551],[4.927773,51.396546],[4.920606,51.394719],[4.914849,51.395595],[4.917704,51.397404],[4.923452,51.397427],[4.923434,51.399225],[4.917667,51.401],[4.910453,51.403668],[4.908997,51.40546],[4.910406,51.408163],[4.897402,51.414402],[4.885861,51.417948],[4.882996,51.417037],[4.875818,51.416107],[4.87438,51.416101],[4.86866,51.413378],[4.867233,51.412473],[4.868691,51.410681],[4.867264,51.409776],[4.860056,51.411542],[4.860024,51.414239],[4.850261,51.415065],[4.849951,51.415091],[4.848534,51.413287],[4.839877,51.415944],[4.82121,51.414056],[4.801107,51.412159],[4.78963,51.410303],[4.773758,51.414715],[4.769384,51.419187],[4.769238,51.429974],[4.770664,51.430881],[4.774954,51.432701],[4.780695,51.43363],[4.786447,51.43366],[4.787897,51.432769],[4.789371,51.430079],[4.795135,51.42921],[4.805213,51.428362],[4.813864,51.426606],[4.819638,51.424837],[4.823963,51.423959],[4.838396,51.419533],[4.838678,51.419712],[4.839823,51.420438],[4.840006,51.420791],[4.841228,51.423142],[4.834039,51.423108],[4.831152,51.423993],[4.82675,51.431164],[4.826681,51.431567],[4.823651,51.449129],[4.829373,51.451853],[4.83503,51.459971],[4.839379,51.457295],[4.842257,51.457308],[4.843664,51.460012],[4.837875,51.462682],[4.836436,51.462675],[4.837788,51.469873],[4.841966,51.48158],[4.836186,51.48335],[4.829546,51.482488],[4.828998,51.482417],[4.821777,51.48418],[4.817379,51.490452],[4.817345,51.493149],[4.815871,51.495839],[4.798519,51.501146],[4.79421,51.500225],[4.792782,51.499319],[4.791341,51.499312],[4.787009,51.500189],[4.782664,51.501964],[4.781188,51.504653],[4.780965,51.504708],[4.773961,51.506414],[4.759594,51.50364],[4.758191,51.500936],[4.752429,51.500905],[4.749599,51.497293],[4.749625,51.495495],[4.74682,51.490086],[4.729606,51.485495],[4.723965,51.477372],[4.721125,51.474659],[4.716873,51.47014],[4.703946,51.468267],[4.692665,51.452917],[4.686924,51.451984],[4.666881,51.445569],[4.666958,51.445134],[4.670042,51.427608],[4.657129,51.42573],[4.651348,51.427492],[4.645655,51.42386],[4.641356,51.422933],[4.629794,51.426455],[4.598082,51.430739],[4.597337,51.430819],[4.582232,51.432429],[4.575009,51.434177],[4.536364,51.424012],[4.530123,51.450038],[4.548378,51.474444],[4.538134,51.48336],[4.486395,51.478477],[4.4763,51.479298],[4.472018,51.477466],[4.466369,51.472027],[4.457752,51.47106],[4.443396,51.469147],[4.44266,51.46891],[4.391939,51.452537],[4.384805,51.449778],[4.383347,51.450665],[4.379091,51.447931],[4.386323,51.446195],[4.392057,51.447143],[4.396451,51.443585],[4.397928,51.441799],[4.396509,51.440888],[4.395169,51.436381],[4.399483,51.436418],[4.398554,51.433953],[4.398123,51.43281],[4.395325,51.429191],[4.389652,51.425546],[4.38398,51.421901],[4.391444,51.409379],[4.391561,51.409282],[4.391916,51.409202],[4.391901,51.409001],[4.432404,51.375558],[4.425299,51.371904],[4.429683,51.368344],[4.431194,51.36476],[4.42254,51.366487],[4.408297,51.360974],[4.395453,51.357269],[4.389399,51.35613],[4.385442,51.355385],[4.37968,51.356235],[4.366719,51.35792],[4.350886,51.359578],[4.340857,51.358589],[4.337717,51.370249],[4.337639,51.370557],[4.336136,51.376528],[4.335801,51.376931],[4.334658,51.378312],[4.280101,51.376908],[4.277207,51.377779],[4.274224,51.382246],[4.27422,51.382413],[4.274181,51.384044],[4.268435,51.383989],[4.26691,51.38757],[4.268302,51.389382],[4.269453,51.40108],[4.263306,51.417204],[4.266092,51.420827],[4.276024,51.426316],[4.265606,51.440601],[4.231272,51.489714],[4.225443,51.497562],[4.225306,51.497746],[4.219338,51.505778],[4.220535,51.514689],[4.220547,51.51478],[4.226017,51.524652],[4.226057,51.524725],[4.232762,51.537969],[4.232919,51.538279],[4.233,51.538467],[4.235642,51.544599],[4.236924,51.550905],[4.235346,51.556283],[4.229395,51.563417],[4.198498,51.586482],[4.194028,51.591831],[4.190976,51.598093],[4.190741,51.606997],[4.190739,51.607081],[4.191926,51.61026],[4.192087,51.610691],[4.19765,51.618839],[4.204728,51.624305],[4.21472,51.628901],[4.23769,51.634523],[4.240625,51.632754],[4.253624,51.632881],[4.253646,51.631982],[4.253685,51.631999],[4.263645,51.636573],[4.272267,51.638454],[4.282335,51.640348],[4.290981,51.641328],[4.29387,51.641355],[4.30105,51.64322],[4.309654,51.645997],[4.316857,51.646962],[4.318302,51.646975],[4.324081,51.647028],[4.324102,51.646129],[4.334236,51.645321],[4.339995,51.646272],[4.350047,51.649059],[4.361504,51.653655],[4.368648,51.657313],[4.375974,51.652882],[4.377419,51.652894],[4.375934,51.65468],[4.372963,51.65825],[4.377259,51.660085],[4.388603,51.670072],[4.394188,51.679109],[4.392702,51.680895],[4.399814,51.684531],[4.399854,51.684551],[4.412713,51.691851],[4.425596,51.698251],[4.436455,51.698339],[4.437168,51.698345],[4.444438,51.696606],[4.445193,51.69624],[4.451744,51.693069],[4.461942,51.689554],[4.475013,51.686959],[4.479351,51.686993],[4.489528,51.684374],[4.492078,51.682827],[4.492455,51.682599],[4.496758,51.68443],[4.504006,51.683586],[4.519895,51.684603],[4.524216,51.685534],[4.532458,51.687309],[4.532859,51.687396],[4.538627,51.688337],[4.602104,51.69777],[4.607844,51.700505],[4.61931,51.706874],[4.61964,51.707005],[4.630809,51.711443],[4.640894,51.714205],[4.648129,51.714251],[4.643699,51.719617],[4.645146,51.719626],[4.675454,51.725208],[4.676887,51.726116],[4.682621,51.729746],[4.694146,51.733411],[4.704212,51.737965],[4.724323,51.748868],[4.73724,51.757032],[4.745829,51.764271],[4.751446,51.776887],[4.755718,51.782304],[4.76535,51.790122],[4.765752,51.790448],[4.76624,51.790654],[4.7744,51.79409],[4.781612,51.796824],[4.797512,51.800501],[4.80765,51.80145],[4.821753,51.799773],[4.822171,51.799723],[4.836681,51.798893],[4.846819,51.79984],[4.859826,51.803495],[4.867873,51.807713],[4.868474,51.808028],[4.885775,51.817093],[4.887206,51.818897],[4.887685,51.819073],[4.904544,51.825262],[4.913229,51.827096],[4.913558,51.827138],[4.927718,51.828951],[4.936423,51.828985],[4.942235,51.828108],[4.94501,51.827832],[4.959662,51.826375],[4.960272,51.82627],[4.969834,51.824614],[4.977095,51.823741],[4.977655,51.823656],[4.988716,51.821983],[5.001772,51.822026],[5.004688,51.820238],[5.005902,51.819742],[5.00898,51.818485],[5.009055,51.818454],[5.010513,51.81756],[5.011892,51.81259],[5.012008,51.812171],[5.012016,51.811272],[5.01226,51.811122],[5.016389,51.808589],[5.02303,51.806147],[5.023661,51.805915],[5.039027,51.801642],[5.039647,51.801469],[5.048367,51.798798],[5.048669,51.798612],[5.052716,51.796126],[5.052736,51.796113],[5.058575,51.790736],[5.058587,51.790707],[5.060051,51.787145],[5.065881,51.782666],[5.068792,51.780876],[5.071697,51.779985],[5.071977,51.779986],[5.077494,51.78],[5.081829,51.78181],[5.086153,51.785417],[5.091702,51.78802],[5.091933,51.788128],[5.094832,51.788135],[5.100631,51.78815],[5.10935,51.784575],[5.109408,51.784539],[5.116624,51.780097],[5.116932,51.779908],[5.118956,51.778661],[5.119533,51.778306],[5.138398,51.773853],[5.139861,51.771159],[5.138496,51.768589],[5.138427,51.768459],[5.136998,51.76486],[5.136918,51.764709],[5.135565,51.762161],[5.137033,51.758568],[5.142842,51.755883],[5.138522,51.751379],[5.128409,51.746863],[5.128191,51.746658],[5.125528,51.744159],[5.128455,51.738772],[5.13108,51.738778],[5.131351,51.738779],[5.144368,51.741503],[5.144504,51.741516],[5.163184,51.743339],[5.163856,51.74334],[5.179113,51.743368],[5.179599,51.743309],[5.186357,51.742482],[5.195049,51.741597],[5.20663,51.742515],[5.212371,51.743415],[5.212419,51.743423],[5.221104,51.744334],[5.231247,51.74255],[5.231554,51.742399],[5.24575,51.735377],[5.245983,51.735329],[5.24984,51.734536],[5.250097,51.734483],[5.255883,51.736288],[5.26456,51.739893],[5.268902,51.740797],[5.269007,51.740797],[5.283382,51.74081],[5.283716,51.740742],[5.296419,51.738124],[5.300763,51.738128],[5.304663,51.739746],[5.305104,51.739929],[5.321021,51.74713],[5.354323,51.756134],[5.357218,51.758832],[5.360113,51.762428],[5.361497,51.769314],[5.361558,51.76962],[5.363002,51.779509],[5.367346,51.7876],[5.367508,51.787903],[5.368794,51.790297],[5.369412,51.790925],[5.384739,51.80648],[5.385094,51.806737],[5.39344,51.812772],[5.399221,51.818145],[5.399243,51.818166],[5.400694,51.819963],[5.400815,51.820039],[5.406498,51.823558],[5.412992,51.822752],[5.41375,51.822658],[5.415201,51.822658],[5.417741,51.819507],[5.4181,51.819061],[5.423898,51.814565],[5.429698,51.811866],[5.439849,51.810963],[5.45,51.810958],[5.450361,51.810978],[5.465955,51.811847],[5.466203,51.811924],[5.471759,51.813641],[5.477225,51.817865],[5.47757,51.818132],[5.48194,51.827118],[5.484848,51.829812],[5.490627,51.831596],[5.490655,51.831605],[5.49791,51.831598],[5.505157,51.828895],[5.508054,51.827094],[5.515293,51.821692],[5.516741,51.820792],[5.529791,51.818979],[5.535587,51.817174],[5.536517,51.817173],[5.539938,51.817168],[5.545743,51.81806],[5.54865,51.819854],[5.55137,51.824039],[5.551568,51.824344],[5.552767,51.825822],[5.553025,51.82614],[5.557384,51.827932],[5.567377,51.828801],[5.567544,51.828816],[5.577217,51.8288],[5.577699,51.8288],[5.589314,51.830578],[5.598011,51.828765],[5.606703,51.826052],[5.618281,51.820636],[5.626985,51.820619],[5.627713,51.820617],[5.637139,51.820598],[5.642705,51.817992],[5.642926,51.817888],[5.647256,51.814283],[5.647339,51.814076],[5.650115,51.807085],[5.654439,51.802581],[5.654718,51.802349],[5.663095,51.795369],[5.663431,51.795264],[5.668883,51.793557],[5.674682,51.793543],[5.675561,51.793473],[5.686273,51.792616],[5.693266,51.789989],[5.693503,51.7899],[5.696378,51.786297],[5.702132,51.779989],[5.70646,51.77728],[5.712251,51.776365],[5.722388,51.775438],[5.72962,51.773619],[5.732124,51.772833],[5.732511,51.772712],[5.736758,51.770052],[5.736837,51.770002],[5.741071,51.76379],[5.741135,51.763697],[5.745452,51.760088],[5.745685,51.76],[5.75253,51.757423],[5.752674,51.757368],[5.759894,51.754649],[5.760159,51.754601],[5.769934,51.752834],[5.770018,51.752818],[5.780156,51.752785],[5.790311,51.754548],[5.810255,51.757127],[5.810614,51.757174],[5.821991,51.758014],[5.822211,51.75803],[5.842508,51.759751],[5.843193,51.759802],[5.854106,51.760605],[5.865676,51.75876],[5.871162,51.756172],[5.873811,51.758116],[5.871556,51.755968],[5.877196,51.75242],[5.880044,51.747913],[5.880085,51.747799],[5.881004,51.745248],[5.883972,51.737009],[5.884212,51.736343],[5.88426,51.736209],[5.885629,51.729011],[5.887047,51.726308],[5.892806,51.723587],[5.892934,51.723551],[5.905792,51.719934],[5.920244,51.718071],[5.934705,51.717106],[5.947348,51.714422],[5.947697,51.714347],[5.952015,51.712529],[5.956334,51.71071],[5.95621,51.700822],[5.961837,51.688209],[5.961834,51.688019],[5.961818,51.686723],[5.961814,51.686411],[5.963214,51.682808],[5.96328,51.682506],[5.96458,51.676509],[5.964477,51.668418],[5.964476,51.668315],[5.96442,51.66398],[5.96442,51.663924],[5.965739,51.654028],[5.968583,51.650418],[5.972872,51.646801],[5.972914,51.646783],[5.977183,51.644982],[5.998435,51.636899],[5.998747,51.63678],[6.004477,51.633154],[6.005142,51.632733],[6.008804,51.630415],[6.020228,51.623181],[6.023079,51.620469],[6.024473,51.616865],[6.024422,51.61327],[6.024418,51.613014],[6.024283,51.603382],[6.026956,51.596466],[6.027069,51.596174],[6.034209,51.590741],[6.034315,51.590623],[6.039891,51.584417],[6.039818,51.579367],[6.039813,51.579023],[6.038293,51.573638],[6.039658,51.568236],[6.041049,51.564633],[6.048182,51.559199],[6.040945,51.557441],[6.033722,51.556582],[6.03294,51.554702],[6.032278,51.553112],[6.032229,51.552995],[6.017972,51.564759],[6.01224,51.567487],[6.012057,51.567578],[6.005709,51.5708],[6.005076,51.571121],[6.003634,51.571129],[6.003161,51.570948],[5.992034,51.566694],[5.991626,51.566591],[5.974667,51.562288],[5.973789,51.562111],[5.952977,51.5579],[5.952903,51.557885],[5.935628,51.554387],[5.918352,51.553569],[5.918313,51.553568],[5.906767,51.55272],[5.892437,51.560874],[5.891925,51.56094],[5.870833,51.563662],[5.839137,51.567385],[5.848744,51.526296],[5.848814,51.525994],[5.85152,51.511757],[5.85155,51.5116],[5.852926,51.505301],[5.861438,51.492681],[5.872518,51.451282],[5.875357,51.447675],[5.875867,51.447026],[5.876776,51.445871],[5.876979,51.445699],[5.88095,51.442344],[5.881053,51.442257],[5.903793,51.417886],[5.904065,51.417584],[5.920825,51.39893],[5.920839,51.398914],[5.932161,51.385393],[5.922041,51.380046],[5.921845,51.379939],[5.919818,51.378827],[5.896339,51.365951],[5.896024,51.365778],[5.895064,51.365235],[5.878759,51.356006],[5.878685,51.355964],[5.874358,51.354184],[5.871477,51.353297],[5.868992,51.352864],[5.856373,51.350662],[5.841274,51.348025],[5.77572,51.335715],[5.770821,51.334793],[5.76076,51.333028],[5.760011,51.332889],[5.746958,51.330481],[5.746389,51.330376],[5.714774,51.324176],[5.71407,51.324031],[5.702194,51.321587],[5.701843,51.321515],[5.673115,51.316195],[5.653218,51.298521],[5.652927,51.298263],[5.644283,51.29109],[5.625555,51.274049],[5.62401,51.249992],[5.623997,51.24978],[5.619599,51.230011],[5.6024,51.226448],[5.600982,51.226095],[5.595233,51.224663],[5.595242,51.226461],[5.566589,51.222014]],[[4.929275,51.406076],[4.936634,51.406332],[4.936067,51.41017],[4.933418,51.409881],[4.932079,51.408887],[4.928137,51.409081],[4.932774,51.407221],[4.929275,51.406076]],[[4.936548,51.430394],[4.936704,51.430422],[4.937983,51.430912],[4.937955,51.431014],[4.938574,51.431251],[4.93998,51.431613],[4.940054,51.431641],[4.93965,51.432324],[4.940424,51.432501],[4.940178,51.433196],[4.939683,51.43311],[4.939721,51.434134],[4.939946,51.434173],[4.940148,51.434925],[4.940185,51.435018],[4.939875,51.435033],[4.939404,51.43505],[4.939026,51.435047],[4.93775,51.434861],[4.937358,51.434819],[4.937161,51.434835],[4.937023,51.43487],[4.936803,51.434958],[4.9367,51.43506],[4.93665,51.435177],[4.936942,51.435444],[4.937296,51.435865],[4.937484,51.436001],[4.938028,51.436435],[4.938566,51.436923],[4.939171,51.436981],[4.939259,51.43695],[4.939676,51.436984],[4.939731,51.436978],[4.940334,51.437038],[4.940462,51.436444],[4.940535,51.436304],[4.940675,51.436181],[4.940813,51.436145],[4.94112,51.436086],[4.941302,51.436054],[4.941344,51.435555],[4.943065,51.436004],[4.942519,51.437349],[4.941756,51.437252],[4.941247,51.437187],[4.941163,51.437128],[4.940352,51.437053],[4.939873,51.43812],[4.940686,51.438877],[4.940243,51.440332],[4.939862,51.440279],[4.939134,51.440178],[4.939208,51.439655],[4.939264,51.439329],[4.939375,51.438867],[4.936798,51.43866],[4.936701,51.4395],[4.935047,51.43944],[4.935009,51.43974],[4.934994,51.440027],[4.9367,51.440082],[4.936761,51.440484],[4.935197,51.440445],[4.935219,51.441324],[4.934077,51.441773],[4.934588,51.443029],[4.938479,51.442788],[4.938981,51.444428],[4.935897,51.44724],[4.932413,51.44408],[4.929239,51.442508],[4.928701,51.439559],[4.92607,51.443683],[4.928087,51.444477],[4.926063,51.44535],[4.923747,51.444688],[4.922487,51.446619],[4.923974,51.447115],[4.924372,51.447247],[4.923396,51.448295],[4.923306,51.448244],[4.922924,51.447997],[4.922392,51.447624],[4.92225,51.44752],[4.922102,51.447441],[4.921907,51.447349],[4.921863,51.447331],[4.920924,51.446862],[4.921875,51.443098],[4.920582,51.442191],[4.919725,51.441589],[4.919687,51.441565],[4.921588,51.441308],[4.921395,51.44116],[4.921107,51.440919],[4.920568,51.440436],[4.920951,51.440255],[4.921052,51.440332],[4.921669,51.44002],[4.920145,51.438998],[4.92159,51.437813],[4.920931,51.43715],[4.92065,51.437208],[4.920556,51.437113],[4.920341,51.437154],[4.919869,51.43731],[4.919054,51.436716],[4.918974,51.43665],[4.918771,51.436483],[4.918587,51.436325],[4.918409,51.436235],[4.918352,51.436233],[4.918105,51.436379],[4.917446,51.436801],[4.917091,51.436701],[4.915668,51.436366],[4.915496,51.436311],[4.915306,51.436232],[4.915145,51.436129],[4.917552,51.435486],[4.918281,51.436147],[4.918388,51.436136],[4.918698,51.435994],[4.91922,51.43578],[4.919946,51.435556],[4.920718,51.435359],[4.921948,51.435123],[4.92286,51.434985],[4.922953,51.434938],[4.922959,51.43483],[4.922858,51.434543],[4.923069,51.434546],[4.923467,51.434475],[4.923886,51.43441],[4.924179,51.434371],[4.924872,51.434317],[4.925607,51.434288],[4.925406,51.434679],[4.925659,51.434821],[4.925817,51.434683],[4.925871,51.434707],[4.926378,51.434711],[4.926398,51.434586],[4.926491,51.434311],[4.926683,51.434331],[4.926898,51.434371],[4.92707,51.434415],[4.927162,51.434456],[4.927198,51.434429],[4.927173,51.434369],[4.927003,51.434142],[4.926877,51.433986],[4.927328,51.433356],[4.927555,51.433062],[4.927748,51.432773],[4.92805,51.432281],[4.928132,51.43216],[4.928243,51.432026],[4.928368,51.431893],[4.928532,51.431757],[4.928733,51.431623],[4.928932,51.431507],[4.92914,51.43138],[4.929816,51.43178],[4.930885,51.430962],[4.931085,51.431132],[4.931245,51.43133],[4.931309,51.431451],[4.93161,51.431497],[4.932913,51.431703],[4.933962,51.431887],[4.934114,51.431447],[4.934315,51.431481],[4.93464,51.431491],[4.934716,51.431496],[4.934765,51.43145],[4.935158,51.431129],[4.935778,51.430693],[4.935964,51.430568],[4.936084,51.430494],[4.936151,51.430459],[4.936229,51.430433],[4.936275,51.430421],[4.936451,51.430397],[4.936548,51.430394]],[[4.939455,51.44731],[4.943855,51.448377],[4.948278,51.448231],[4.952694,51.451038],[4.953148,51.452493],[4.951839,51.454639],[4.949728,51.454423],[4.950991,51.452589],[4.947973,51.451504],[4.942515,51.45171],[4.933391,51.450551],[4.933365,51.450548],[4.935106,51.448415],[4.93602,51.448409],[4.937005,51.448407],[4.937125,51.448405],[4.936793,51.448032],[4.936639,51.447875],[4.937171,51.447787],[4.939266,51.448071],[4.939455,51.44731]]]]}},{type:"Feature",properties:{id:21,name:"Limburg",created_at:"2013-11-30T17:55:36+0100",updated_at:"2013-11-30T17:55:36+0100",cartodb_id:11},geometry:{type:"MultiPolygon",coordinates:[[[[5.913499,51.760353],[5.913457,51.756758],[5.915982,51.753566],[5.916312,51.753149],[5.922842,51.751493],[5.923533,51.751318],[5.933649,51.749474],[5.930731,51.747689],[5.930698,51.744992],[5.933573,51.743181],[5.93501,51.742275],[5.939354,51.742255],[5.943698,51.742235],[5.95242,51.74489],[5.953913,51.748478],[5.952397,51.743092],[5.955248,51.739482],[5.975531,51.740281],[5.976248,51.740278],[5.985666,51.74023],[5.994342,51.739286],[6.007299,51.733825],[6.007473,51.733766],[6.028912,51.726517],[6.033229,51.724695],[6.033196,51.722391],[6.033191,51.721998],[6.034087,51.72086],[6.036034,51.718387],[6.038941,51.71927],[6.038967,51.721067],[6.046151,51.717431],[6.043205,51.713852],[6.037416,51.713884],[6.035969,51.713892],[6.033075,51.713908],[6.028721,51.713033],[6.027236,51.710344],[6.028556,51.701347],[6.031423,51.699534],[6.03278,51.693233],[6.031295,51.690545],[6.031283,51.690458],[6.030382,51.683932],[6.029683,51.678867],[6.032549,51.677053],[6.036836,51.673433],[6.072857,51.665137],[6.080071,51.664196],[6.085853,51.664161],[6.087271,51.662355],[6.093025,51.660522],[6.094078,51.660253],[6.100223,51.658681],[6.103156,51.66136],[6.118983,51.656767],[6.117451,51.651383],[6.110168,51.647832],[6.111584,51.646025],[6.107506,51.641074],[6.107164,51.640659],[6.102655,51.628168],[6.102631,51.628101],[6.098199,51.621835],[6.093881,51.62276],[6.095227,51.616459],[6.092185,51.606588],[6.117983,51.594743],[6.122298,51.593817],[6.125084,51.589349],[6.125111,51.589304],[6.130766,51.582077],[6.135035,51.578453],[6.147899,51.571178],[6.157936,51.567517],[6.157999,51.567427],[6.177644,51.539516],[6.191947,51.533125],[6.192244,51.532968],[6.200515,51.528571],[6.207574,51.520431],[6.213223,51.514098],[6.214566,51.508694],[6.214484,51.5042],[6.212832,51.492524],[6.218477,51.486191],[6.218765,51.486189],[6.219917,51.486181],[6.224054,51.476262],[6.223995,51.473038],[6.223988,51.472667],[6.222351,51.46189],[6.22234,51.461852],[6.220813,51.456507],[6.220649,51.447518],[6.214895,51.447559],[6.214893,51.447441],[6.214666,51.434975],[6.206958,51.406261],[6.206944,51.406202],[6.205408,51.399979],[6.212626,51.401726],[6.226981,51.400724],[6.224041,51.397149],[6.215305,51.390919],[6.216643,51.385515],[6.216769,51.385184],[6.220586,51.375146],[6.220756,51.374697],[6.226254,51.361173],[6.190414,51.340987],[6.190944,51.339527],[6.194205,51.335328],[6.18848,51.336266],[6.179839,51.334527],[6.179447,51.334495],[6.169778,51.333696],[6.169717,51.3301],[6.165351,51.326534],[6.159506,51.320279],[6.159445,51.316684],[6.159312,51.316548],[6.155066,51.312218],[6.155006,51.308622],[6.144803,51.2988],[6.130259,51.286307],[6.125828,51.278244],[6.124461,51.275756],[6.124351,51.275557],[6.095368,51.255059],[6.095232,51.254962],[6.086677,51.248819],[6.073705,51.243502],[6.086293,51.223649],[6.083416,51.222767],[6.070532,51.222843],[6.069074,51.221054],[6.068967,51.213862],[6.069135,51.213861],[6.070398,51.213854],[6.074235,51.183265],[6.078445,51.177846],[6.082653,51.172427],[6.099785,51.170525],[6.111295,51.174949],[6.115642,51.178518],[6.122851,51.182069],[6.165987,51.195273],[6.181584,51.187076],[6.139881,51.173869],[6.146529,51.171302],[6.146986,51.171125],[6.175384,51.159249],[6.171034,51.155682],[6.163857,51.153932],[6.160937,51.150356],[6.155205,51.149495],[6.149488,51.149533],[6.140869,51.146892],[6.126563,51.146085],[6.122232,51.143415],[6.122203,51.141617],[6.11503,51.139864],[6.114473,51.139763],[6.100698,51.137256],[6.097813,51.135476],[6.092098,51.135511],[6.089171,51.131033],[6.089161,51.130357],[6.08913,51.128336],[6.088111,51.126472],[6.087661,51.125648],[6.083361,51.124775],[6.080477,51.122994],[6.076152,51.120323],[6.07184,51.118551],[6.07001,51.118561],[6.068983,51.118567],[6.060387,51.116819],[6.056024,51.111451],[6.057439,51.110543],[6.046105,51.103537],[6.045912,51.103417],[6.04303,51.101636],[6.037256,51.097173],[6.021502,51.093664],[6.01434,51.091905],[6.008606,51.090138],[5.998542,51.084797],[5.992774,51.080332],[5.988434,51.07586],[5.985568,51.074976],[5.98532,51.074899],[5.982703,51.074091],[5.981264,51.0732],[5.979826,51.072308],[5.982656,51.070496],[5.979775,51.068115],[5.97833,51.066922],[5.975442,51.064239],[5.971094,51.058867],[5.969565,51.050784],[5.969562,51.050559],[5.969531,51.048087],[5.968071,51.045397],[5.967318,51.045243],[5.963781,51.04452],[5.958591,51.042105],[5.958044,51.041851],[5.959436,51.039147],[5.957966,51.035559],[5.95654,51.035566],[5.955137,51.03737],[5.952379,51.037384],[5.952285,51.037384],[5.946593,51.038311],[5.938005,51.035655],[5.935229,51.041961],[5.926757,51.049193],[5.919803,51.064508],[5.919128,51.064939],[5.915684,51.067141],[5.913573,51.06778],[5.905516,51.062775],[5.896907,51.058318],[5.892578,51.053842],[5.888289,51.052961],[5.869738,51.052141],[5.866885,51.052153],[5.866928,51.051985],[5.868255,51.046753],[5.87531,51.039532],[5.878152,51.038621],[5.878095,51.033227],[5.875205,51.029643],[5.879396,51.021534],[5.879367,51.018838],[5.882184,51.016133],[5.882188,51.016129],[5.885019,51.014318],[5.889295,51.0143],[5.89639,51.011572],[5.896323,51.005465],[5.896321,51.005279],[5.900585,51.004362],[5.901187,51.004264],[5.906275,51.003437],[5.904679,50.988161],[5.904319,50.987937],[5.893265,50.981057],[5.893205,50.98102],[5.897156,50.977646],[5.897438,50.977405],[5.897418,50.975608],[5.905962,50.97557],[5.91597,50.97912],[5.920242,50.979101],[5.928164,50.983206],[5.928839,50.983556],[5.934567,50.986226],[5.950256,50.987949],[5.955964,50.98882],[5.957355,50.986116],[5.967257,50.980673],[5.968681,50.980666],[5.971529,50.980652],[5.971786,50.980743],[5.981544,50.984197],[5.98438,50.983283],[6.018584,50.9849],[6.027116,50.983954],[6.027092,50.982156],[6.015442,50.963341],[6.013994,50.961551],[6.009712,50.960675],[6.006841,50.958892],[6.005405,50.958001],[6.005906,50.9578],[6.016731,50.953445],[6.015247,50.948958],[6.016589,50.945437],[6.016621,50.945354],[6.019332,50.935451],[6.039031,50.931776],[6.039198,50.931745],[6.044863,50.929914],[6.050565,50.930781],[6.056216,50.928051],[6.056203,50.927153],[6.056153,50.927001],[6.054716,50.922666],[6.068925,50.921684],[6.07181,50.924364],[6.075175,50.923633],[6.075789,50.923591],[6.075721,50.923514],[6.076063,50.92344],[6.083161,50.922499],[6.090231,50.919759],[6.094539,50.92243],[6.094525,50.921531],[6.093048,50.917944],[6.087319,50.915281],[6.08155,50.909922],[6.080074,50.906335],[6.080034,50.903638],[6.078655,50.901102],[6.078572,50.90095],[6.075622,50.893775],[6.075611,50.893077],[6.075582,50.891079],[6.079738,50.883862],[6.081159,50.883853],[6.088196,50.879316],[6.088101,50.873023],[6.087341,50.871626],[6.08664,50.870335],[6.085178,50.867647],[6.085175,50.867642],[6.08227,50.863169],[6.077982,50.861397],[6.077968,50.860498],[6.077952,50.860458],[6.076495,50.856911],[6.076426,50.856479],[6.074928,50.847031],[6.059374,50.851617],[6.05798,50.853424],[6.057883,50.853744],[6.056624,50.857926],[6.055204,50.857935],[6.050905,50.855262],[6.040913,50.851723],[6.03522,50.850856],[6.01955,50.847347],[6.018094,50.844658],[6.016601,50.839272],[6.01654,50.834777],[6.019318,50.830267],[6.023527,50.826648],[6.026291,50.821239],[6.024847,50.819449],[6.021984,50.817666],[6.02481,50.816752],[6.024785,50.814954],[6.016211,50.810506],[6.010463,50.805143],[6.004752,50.802477],[5.992067,50.808837],[5.985571,50.811352],[5.985008,50.81157],[5.983578,50.810679],[5.980706,50.807997],[5.980683,50.806199],[5.976404,50.804423],[5.974917,50.799036],[5.980556,50.79631],[5.983381,50.795397],[5.983448,50.795386],[5.989043,50.794468],[5.994681,50.791742],[5.996052,50.788139],[5.997459,50.787232],[6.000882,50.785655],[6.007326,50.782685],[6.024267,50.777199],[6.028483,50.774478],[6.018413,50.763746],[6.021125,50.754741],[6.014402,50.755632],[6.014052,50.755678],[5.999856,50.753957],[5.9985,50.753964],[5.991354,50.754001],[5.977194,50.754973],[5.974371,50.755887],[5.975823,50.758576],[5.973011,50.760389],[5.972954,50.760403],[5.962157,50.763033],[5.961706,50.763143],[5.958871,50.763157],[5.951762,50.761394],[5.943226,50.758738],[5.936129,50.757873],[5.931877,50.757893],[5.921895,50.752546],[5.917633,50.751666],[5.916206,50.750774],[5.91485,50.756174],[5.90493,50.756219],[5.902056,50.752636],[5.890768,50.75718],[5.889448,50.766176],[5.886692,50.770634],[5.886667,50.770674],[5.886661,50.770683],[5.87669,50.766231],[5.87102,50.766255],[5.87099,50.766247],[5.863914,50.764486],[5.861061,50.7627],[5.852512,50.75824],[5.849642,50.754655],[5.846955,50.762559],[5.846887,50.762757],[5.845505,50.766359],[5.844079,50.765465],[5.843875,50.765401],[5.838392,50.76369],[5.831262,50.759222],[5.822758,50.759255],[5.815647,50.756584],[5.809978,50.756605],[5.807152,50.757514],[5.793321,50.770834],[5.793097,50.771049],[5.784568,50.768382],[5.780368,50.774689],[5.777601,50.78279],[5.777607,50.783549],[5.777608,50.783689],[5.766264,50.783726],[5.750581,50.772989],[5.747732,50.7712],[5.744876,50.768512],[5.74481,50.768443],[5.740589,50.76403],[5.741993,50.762228],[5.739124,50.757742],[5.73062,50.757767],[5.724977,50.76138],[5.722416,50.764666],[5.722169,50.764984],[5.720758,50.765887],[5.716467,50.760505],[5.710797,50.760521],[5.703705,50.759642],[5.703278,50.759284],[5.699429,50.756058],[5.695171,50.75517],[5.689514,50.756983],[5.682433,50.7579],[5.683879,50.762391],[5.696714,50.774045],[5.701034,50.783922],[5.70099,50.783982],[5.691196,50.797433],[5.692626,50.799227],[5.699755,50.804602],[5.698354,50.807303],[5.696947,50.809104],[5.692709,50.811813],[5.692709,50.811898],[5.692714,50.812712],[5.681363,50.812741],[5.678553,50.817243],[5.672877,50.817257],[5.664368,50.818177],[5.65445,50.820897],[5.657304,50.823587],[5.657314,50.825385],[5.653072,50.828092],[5.652928,50.828556],[5.651678,50.83259],[5.650268,50.834391],[5.649909,50.834736],[5.647444,50.837095],[5.644615,50.838899],[5.64179,50.841602],[5.640898,50.843897],[5.63899,50.8488],[5.640439,50.854191],[5.641884,50.858683],[5.641889,50.859582],[5.641893,50.860252],[5.641918,50.864976],[5.649819,50.869112],[5.650467,50.869451],[5.644799,50.872161],[5.651924,50.875741],[5.653339,50.874839],[5.659033,50.876624],[5.661687,50.878012],[5.667586,50.881098],[5.670439,50.882889],[5.673276,50.881983],[5.673514,50.881952],[5.676266,50.881597],[5.680065,50.881107],[5.680375,50.881067],[5.680398,50.884662],[5.681842,50.888255],[5.693173,50.894474],[5.693254,50.894518],[5.696132,50.899904],[5.696186,50.907995],[5.699048,50.910684],[5.707592,50.912459],[5.71043,50.911552],[5.716105,50.909738],[5.718942,50.908831],[5.721793,50.909722],[5.727513,50.9142],[5.727437,50.914599],[5.726144,50.921396],[5.727593,50.924988],[5.733329,50.931264],[5.741906,50.936632],[5.74623,50.94381],[5.746251,50.946507],[5.747688,50.948301],[5.759102,50.951861],[5.759123,50.954558],[5.757939,50.956073],[5.757714,50.95636],[5.752056,50.960873],[5.74637,50.96179],[5.742092,50.960904],[5.739225,50.958216],[5.734941,50.956431],[5.729248,50.956448],[5.723561,50.957363],[5.72074,50.960967],[5.722183,50.96366],[5.729354,50.970831],[5.733639,50.972617],[5.733662,50.972667],[5.736534,50.978901],[5.739389,50.979791],[5.747954,50.982462],[5.756571,50.991425],[5.759442,50.994112],[5.759515,50.994158],[5.766539,50.998545],[5.766601,50.998584],[5.768048,51.001276],[5.766759,51.009858],[5.766697,51.010271],[5.768152,51.013862],[5.773897,51.019237],[5.776778,51.022823],[5.776801,51.02552],[5.773973,51.028227],[5.768285,51.030043],[5.767579,51.030194],[5.759746,51.031869],[5.758342,51.034571],[5.759782,51.036364],[5.765537,51.042638],[5.771316,51.051609],[5.772832,51.062392],[5.775693,51.063282],[5.778547,51.063272],[5.791355,51.059632],[5.798495,51.060506],[5.801365,51.062294],[5.801381,51.064092],[5.797181,51.073097],[5.800059,51.075783],[5.804364,51.078465],[5.804381,51.080263],[5.803053,51.083692],[5.802986,51.083864],[5.798736,51.087475],[5.795905,51.090182],[5.795921,51.09198],[5.800228,51.094662],[5.805955,51.096439],[5.810246,51.097323],[5.814521,51.096408],[5.821634,51.093685],[5.824489,51.093674],[5.830225,51.096349],[5.832996,51.098073],[5.833098,51.098136],[5.833124,51.100833],[5.833159,51.104429],[5.828909,51.108041],[5.824634,51.108956],[5.815026,51.108992],[5.814638,51.108993],[5.81037,51.110807],[5.808975,51.114408],[5.811881,51.119792],[5.819355,51.12618],[5.823402,51.129638],[5.827696,51.130521],[5.840573,51.132269],[5.84325,51.135586],[5.843466,51.135854],[5.84493,51.139444],[5.847806,51.141231],[5.85587,51.145403],[5.856363,51.14572],[5.836506,51.15476],[5.837944,51.155653],[5.838086,51.155915],[5.8394,51.158345],[5.832304,51.163766],[5.831898,51.164022],[5.82662,51.167383],[5.825198,51.168288],[5.816577,51.163825],[5.815105,51.159335],[5.809412,51.162053],[5.809386,51.162069],[5.806569,51.163861],[5.805139,51.163867],[5.800841,51.15942],[5.800809,51.159387],[5.796512,51.158503],[5.792216,51.157619],[5.786482,51.155841],[5.785037,51.154048],[5.777874,51.152275],[5.775046,51.15588],[5.779373,51.16036],[5.779403,51.163956],[5.776559,51.165764],[5.770832,51.164884],[5.769447,51.170282],[5.770885,51.171177],[5.772307,51.170273],[5.780523,51.172821],[5.78091,51.172941],[5.773767,51.173864],[5.776662,51.179227],[5.776673,51.179248],[5.766706,51.184675],[5.7567,51.185606],[5.749576,51.189225],[5.746722,51.190133],[5.739542,51.186559],[5.730952,51.185685],[5.726668,51.186597],[5.718078,51.185723],[5.712331,51.182143],[5.702325,51.183069],[5.702337,51.184867],[5.6909,51.185797],[5.676578,51.183136],[5.676595,51.185833],[5.670879,51.186746],[5.665157,51.18676],[5.657999,51.185878],[5.650898,51.194884],[5.653273,51.194879],[5.655021,51.195214],[5.655056,51.195218],[5.653781,51.198473],[5.645211,51.20119],[5.583758,51.217489],[5.583749,51.217491],[5.566589,51.222014],[5.595242,51.226461],[5.595233,51.224663],[5.600982,51.226095],[5.6024,51.226448],[5.619599,51.230011],[5.623997,51.24978],[5.62401,51.249992],[5.625555,51.274049],[5.644283,51.29109],[5.652927,51.298263],[5.653217,51.298521],[5.673115,51.316195],[5.701843,51.321515],[5.702194,51.321587],[5.71407,51.324031],[5.714774,51.324176],[5.746389,51.330376],[5.746958,51.330481],[5.760011,51.332889],[5.76076,51.333028],[5.770821,51.334793],[5.77572,51.335715],[5.841274,51.348025],[5.856373,51.350661],[5.868992,51.352864],[5.871477,51.353297],[5.874358,51.354184],[5.878685,51.355964],[5.878759,51.356006],[5.895063,51.365235],[5.896024,51.365778],[5.896339,51.365951],[5.919817,51.378827],[5.921845,51.379939],[5.922041,51.380046],[5.932161,51.385393],[5.920839,51.398914],[5.920825,51.39893],[5.904065,51.417584],[5.903793,51.417886],[5.881053,51.442257],[5.88095,51.442344],[5.876979,51.445699],[5.876776,51.445871],[5.875867,51.447026],[5.875357,51.447675],[5.872518,51.451282],[5.861438,51.492681],[5.852926,51.505301],[5.85155,51.5116],[5.85152,51.511757],[5.848814,51.525994],[5.848744,51.526296],[5.839137,51.567385],[5.870833,51.563662],[5.891925,51.56094],[5.892437,51.560874],[5.906767,51.55272],[5.918313,51.553568],[5.918352,51.553569],[5.935628,51.554387],[5.952903,51.557885],[5.952977,51.5579],[5.973789,51.56211],[5.974667,51.562288],[5.991626,51.566591],[5.992034,51.566694],[6.003161,51.570948],[6.003634,51.571129],[6.005076,51.571121],[6.005709,51.5708],[6.012057,51.567578],[6.01224,51.567487],[6.017972,51.564759],[6.032229,51.552995],[6.032278,51.553112],[6.03294,51.554702],[6.033722,51.556582],[6.040945,51.557441],[6.048182,51.559199],[6.041049,51.564633],[6.039658,51.568236],[6.038293,51.573638],[6.039813,51.579023],[6.039818,51.579367],[6.039891,51.584417],[6.034315,51.590623],[6.034209,51.590741],[6.027069,51.596174],[6.026956,51.596466],[6.024283,51.603382],[6.024418,51.613014],[6.024422,51.61327],[6.024473,51.616865],[6.023079,51.620469],[6.020228,51.623181],[6.008804,51.630415],[6.005142,51.632733],[6.004477,51.633154],[5.998747,51.63678],[5.998435,51.636899],[5.977183,51.644982],[5.972914,51.646783],[5.972872,51.646801],[5.968583,51.650418],[5.965739,51.654028],[5.96442,51.663924],[5.96442,51.66398],[5.964476,51.668315],[5.964477,51.668418],[5.96458,51.676509],[5.96328,51.682506],[5.963214,51.682808],[5.961814,51.686411],[5.961818,51.686723],[5.961834,51.68802],[5.961837,51.688209],[5.95621,51.700822],[5.956334,51.71071],[5.952015,51.712529],[5.947697,51.714347],[5.947348,51.714422],[5.934705,51.717106],[5.920244,51.718071],[5.905792,51.719934],[5.892934,51.723551],[5.892806,51.723587],[5.887047,51.726308],[5.885629,51.729011],[5.88426,51.736209],[5.884212,51.736343],[5.883972,51.737009],[5.881004,51.745248],[5.880085,51.747799],[5.880044,51.747913],[5.877196,51.75242],[5.871556,51.755968],[5.873811,51.758116],[5.871162,51.756172],[5.865676,51.75876],[5.865833,51.759045],[5.867153,51.761451],[5.867314,51.761599],[5.87008,51.764136],[5.86723,51.768642],[5.867235,51.769083],[5.867287,51.774036],[5.868765,51.776727],[5.869433,51.776724],[5.870214,51.776721],[5.887633,51.779345],[5.894869,51.778415],[5.901747,51.771481],[5.902033,51.771192],[5.906328,51.766678],[5.912082,51.763056],[5.913499,51.760353]]]]}},{type:"Feature",properties:{id:14,name:"NorthHolland",created_at:"2013-11-30T17:55:36+0100",updated_at:"2013-11-30T17:55:36+0100",cartodb_id:12},geometry:{type:"MultiPolygon",coordinates:[[[[4.987122,52.366126],[4.988522,52.365711],[4.988875,52.365592],[4.989433,52.3654],[4.99009,52.36518],[4.991147,52.364785],[4.991153,52.364783],[4.991149,52.36478],[4.991004,52.364665],[4.991001,52.364663],[4.990997,52.364664],[4.990577,52.364813],[4.990571,52.364815],[4.990571,52.364815],[4.989421,52.363997],[4.989794,52.363789],[4.989803,52.363784],[4.989795,52.363779],[4.989549,52.363608],[4.989541,52.363602],[4.988586,52.362937],[4.987001,52.36182],[4.986985,52.361828],[4.986985,52.361829],[4.986177,52.362251],[4.986177,52.362251],[4.985971,52.362094],[4.985763,52.361934],[4.986665,52.361452],[4.986667,52.361451],[4.986668,52.36145],[4.986671,52.361444],[4.986686,52.36141],[4.986687,52.3614],[4.986687,52.3614],[4.986686,52.361399],[4.986677,52.361388],[4.986677,52.361387],[4.986676,52.361387],[4.986546,52.36133],[4.986441,52.361292],[4.986434,52.36129],[4.986433,52.36129],[4.986416,52.361299],[4.986367,52.361265],[4.986327,52.361251],[4.986212,52.36121],[4.986196,52.361204],[4.986039,52.361148],[4.986007,52.361137],[4.985955,52.36112],[4.985943,52.361116],[4.985938,52.361115],[4.985868,52.361092],[4.985789,52.361066],[4.98574,52.361058],[4.985703,52.361057],[4.985703,52.361057],[4.985702,52.361057],[4.985682,52.361065],[4.985616,52.361102],[4.98515,52.361364],[4.984965,52.361287],[4.984451,52.361075],[4.980816,52.359569],[4.980811,52.359567],[4.980808,52.35957],[4.979793,52.360502],[4.97979,52.360505],[4.979794,52.360507],[4.980117,52.360644],[4.978794,52.361835],[4.977491,52.361305],[4.977486,52.361303],[4.977483,52.361306],[4.976591,52.3621],[4.976588,52.362103],[4.976588,52.362103],[4.975778,52.361786],[4.975768,52.361782],[4.975761,52.361789],[4.975708,52.361837],[4.97566,52.361881],[4.975612,52.361925],[4.975605,52.361931],[4.975602,52.361934],[4.97489,52.362585],[4.974887,52.362588],[4.974891,52.36259],[4.975184,52.362715],[4.974838,52.363017],[4.974836,52.363019],[4.974839,52.363021],[4.975149,52.363232],[4.977276,52.364764],[4.97778,52.365126],[4.977829,52.365161],[4.977856,52.365172],[4.977856,52.365172],[4.977856,52.365172],[4.977876,52.365173],[4.97793,52.365169],[4.977947,52.36518],[4.978076,52.365265],[4.978078,52.365266],[4.978075,52.365267],[4.978071,52.36527],[4.977822,52.365391],[4.977826,52.365441],[4.977841,52.365452],[4.977921,52.36551],[4.977939,52.365523],[4.978008,52.365573],[4.978017,52.365579],[4.978126,52.365659],[4.978134,52.365664],[4.978197,52.36571],[4.978245,52.365745],[4.978254,52.365751],[4.978263,52.365746],[4.978309,52.365721],[4.978505,52.365617],[4.978527,52.365605],[4.978644,52.365669],[4.97865,52.365672],[4.978658,52.365669],[4.978941,52.365565],[4.978955,52.36556],[4.97929,52.365379],[4.979868,52.365067],[4.981156,52.364377],[4.981286,52.364307],[4.981286,52.364307],[4.981293,52.36431],[4.981503,52.364397],[4.983095,52.365058],[4.984012,52.365435],[4.984022,52.365439],[4.984022,52.365439],[4.984014,52.365489],[4.983947,52.365484],[4.983947,52.365484],[4.983947,52.365484],[4.983929,52.365486],[4.983924,52.365487],[4.983922,52.36549],[4.983916,52.365497],[4.983915,52.365498],[4.983915,52.365499],[4.983916,52.365506],[4.983917,52.365508],[4.983919,52.365509],[4.983928,52.365515],[4.98393,52.365516],[4.983934,52.365517],[4.984009,52.365519],[4.983977,52.365714],[4.983922,52.365712],[4.983919,52.365712],[4.983918,52.365713],[4.983896,52.36572],[4.983894,52.365721],[4.983893,52.365722],[4.983888,52.365726],[4.983885,52.36573],[4.983888,52.365733],[4.983891,52.365737],[4.983894,52.36574],[4.9839,52.365741],[4.98407,52.365752],[4.984082,52.365753],[4.984084,52.365745],[4.984132,52.365419],[4.984137,52.365378],[4.984146,52.365321],[4.984151,52.365284],[4.984152,52.36528],[4.984153,52.365273],[4.984161,52.365216],[4.984162,52.365214],[4.984159,52.365213],[4.982328,52.364466],[4.981791,52.364244],[4.981642,52.364183],[4.981642,52.364183],[4.981648,52.36418],[4.981888,52.364091],[4.98201,52.364034],[4.983569,52.363199],[4.98487,52.362521],[4.985197,52.362333],[4.985347,52.362242],[4.985422,52.3622],[4.985502,52.362178],[4.985587,52.362191],[4.985667,52.362255],[4.985709,52.362288],[4.985883,52.362427],[4.985883,52.36244],[4.985856,52.362476],[4.985707,52.362559],[4.985702,52.362562],[4.985704,52.362566],[4.985723,52.362615],[4.985723,52.362615],[4.985725,52.362616],[4.985783,52.362657],[4.987395,52.363752],[4.985455,52.36555],[4.985354,52.365615],[4.9853,52.365634],[4.985268,52.365638],[4.985231,52.365637],[4.985167,52.365624],[4.984299,52.36527],[4.98428,52.365262],[4.984278,52.365276],[4.984269,52.365328],[4.984263,52.365369],[4.984254,52.365426],[4.984248,52.365462],[4.984247,52.365466],[4.984246,52.365473],[4.9842,52.365757],[4.9842,52.365761],[4.984206,52.365761],[4.984239,52.365764],[4.984245,52.365764],[4.984245,52.36576],[4.98428,52.365545],[4.985115,52.365887],[4.984979,52.366009],[4.984874,52.365968],[4.984869,52.365966],[4.984865,52.365969],[4.984601,52.366229],[4.984599,52.36623],[4.984601,52.366232],[4.985064,52.366683],[4.985067,52.366685],[4.985071,52.366684],[4.987122,52.366126]]],[[[5.113919,52.463259],[5.119811,52.462374],[5.133044,52.4642],[5.135988,52.464207],[5.137464,52.463311],[5.137475,52.461513],[5.133914,52.46078],[5.133065,52.460605],[5.12719,52.458795],[5.121315,52.456984],[5.111026,52.455163],[5.106635,52.451557],[5.099279,52.451539],[5.094877,52.449731],[5.093474,52.451429],[5.093394,52.451525],[5.093388,52.452424],[5.100692,52.460531],[5.102146,52.463231],[5.103589,52.467729],[5.094615,52.489279],[5.103577,52.469527],[5.112436,52.465053],[5.113919,52.463259]]],[[[4.784787,52.964478],[4.783324,52.962673],[4.780334,52.963557],[4.775238,52.961986],[4.774406,52.961729],[4.774896,52.961054],[4.778959,52.955461],[4.786461,52.951005],[4.789474,52.948324],[4.789476,52.948327],[4.790925,52.951028],[4.783423,52.955484],[4.778909,52.959056],[4.782021,52.95997],[4.783398,52.957281],[4.786387,52.956397],[4.795316,52.956442],[4.79678,52.958247],[4.798232,52.96095],[4.79822,52.961849],[4.796719,52.96274],[4.795231,52.962733],[4.790741,52.964508],[4.796682,52.965436],[4.801148,52.965458],[4.804185,52.960979],[4.801305,52.953775],[4.792499,52.944744],[4.79111,52.937547],[4.791225,52.93728],[4.792647,52.93396],[4.803251,52.919632],[4.804774,52.916943],[4.809246,52.916066],[4.812244,52.914283],[4.809282,52.91337],[4.816763,52.909811],[4.846628,52.899165],[4.866035,52.892061],[4.874983,52.889404],[4.880926,52.889429],[4.907613,52.894932],[4.919444,52.900371],[4.93427,52.904024],[4.934341,52.904053],[4.938711,52.905838],[4.954946,52.917582],[4.957867,52.922985],[4.957961,52.923219],[4.959318,52.926585],[4.968198,52.93111],[4.975627,52.932035],[4.986868,52.932923],[4.987517,52.932974],[4.997905,52.935705],[5.003847,52.936623],[5.015331,52.934927],[5.015763,52.934863],[5.021705,52.93578],[5.024665,52.937586],[5.027625,52.939393],[5.0289,52.941741],[5.033576,52.939411],[5.033591,52.937613],[5.038075,52.93493],[5.039562,52.934935],[5.036566,52.937622],[5.04105,52.934939],[5.041495,52.934739],[5.047021,52.93226],[5.047042,52.929564],[5.042552,52.933146],[5.039584,52.932238],[5.038161,52.924146],[5.038687,52.923518],[5.039663,52.922352],[5.048564,52.925074],[5.074065,52.894586],[5.077044,52.893695],[5.080035,52.891007],[5.080054,52.888311],[5.102519,52.861404],[5.105512,52.857816],[5.111502,52.849741],[5.114494,52.846153],[5.104562,52.775127],[5.107521,52.776032],[5.113455,52.775147],[5.120732,52.771644],[5.120887,52.771569],[5.122385,52.768876],[5.120903,52.768873],[5.12092,52.766176],[5.119562,52.761119],[5.119471,52.76078],[5.122445,52.75899],[5.129889,52.752714],[5.131376,52.751819],[5.132852,52.752721],[5.138808,52.747341],[5.147724,52.741966],[5.148324,52.741822],[5.155138,52.740183],[5.156619,52.740186],[5.162538,52.741096],[5.165509,52.739304],[5.1655,52.741102],[5.165495,52.742001],[5.166976,52.742003],[5.177347,52.741123],[5.180305,52.742027],[5.185881,52.747135],[5.186204,52.74743],[5.19357,52.75643],[5.20394,52.756447],[5.203986,52.756443],[5.214314,52.755564],[5.221724,52.754675],[5.226171,52.753783],[5.229926,52.753788],[5.230615,52.753789],[5.258758,52.754721],[5.270626,52.748442],[5.261742,52.747534],[5.25878,52.747531],[5.258782,52.746632],[5.270631,52.746644],[5.27211,52.747545],[5.278041,52.744854],[5.281005,52.743958],[5.281014,52.743953],[5.282489,52.74306],[5.286944,52.737671],[5.286952,52.734076],[5.283993,52.733175],[5.283995,52.732276],[5.285499,52.722391],[5.288473,52.716102],[5.295883,52.711614],[5.296506,52.711425],[5.301806,52.709821],[5.306246,52.709824],[5.307724,52.710723],[5.307729,52.708027],[5.306251,52.707127],[5.304773,52.706227],[5.294426,52.700827],[5.28999,52.699925],[5.289181,52.699713],[5.279639,52.697219],[5.279642,52.696321],[5.282605,52.694526],[5.276864,52.691027],[5.276696,52.690925],[5.270787,52.688223],[5.266347,52.689117],[5.260433,52.688212],[5.25748,52.686412],[5.254519,52.687307],[5.247126,52.6864],[5.24418,52.682801],[5.244193,52.678821],[5.244195,52.678307],[5.242731,52.673811],[5.239794,52.667516],[5.236868,52.658524],[5.230972,52.654023],[5.207357,52.6459],[5.207091,52.645696],[5.201465,52.641397],[5.198526,52.637797],[5.191139,52.637785],[5.178296,52.635156],[5.177854,52.635066],[5.171963,52.63146],[5.16165,52.626048],[5.160182,52.624248],[5.149838,52.625126],[5.142775,52.62339],[5.142463,52.623314],[5.12771,52.620586],[5.126217,52.623279],[5.12915,52.626881],[5.121726,52.633156],[5.117289,52.634045],[5.109914,52.63223],[5.106959,52.632223],[5.101033,52.634905],[5.101027,52.635804],[5.093901,52.640964],[5.093604,52.641179],[5.093218,52.641412],[5.09212,52.642074],[5.089178,52.640269],[5.084733,52.642056],[5.083249,52.642951],[5.082599,52.642949],[5.081771,52.642947],[5.078816,52.642939],[5.075867,52.642033],[5.075878,52.640563],[5.07588,52.640235],[5.068039,52.636024],[5.06822,52.636135],[5.064067,52.638464],[5.063932,52.638401],[5.063936,52.638394],[5.063467,52.63805],[5.063404,52.634562],[5.062789,52.633908],[5.062629,52.633908],[5.055236,52.634786],[5.056477,52.638655],[5.056679,52.639284],[5.052648,52.642522],[5.052219,52.642867],[5.044831,52.642846],[5.040427,52.639238],[5.040149,52.639165],[5.035136,52.63784],[5.03018,52.63653],[5.030107,52.636511],[5.024219,52.633797],[5.023623,52.63343],[5.01981,52.631087],[5.016901,52.625685],[5.016954,52.619393],[5.01996,52.613111],[5.020005,52.607718],[5.021504,52.605026],[5.024494,52.600541],[5.020095,52.596932],[5.023084,52.592447],[5.023095,52.592436],[5.029039,52.586174],[5.033555,52.574516],[5.03356,52.574502],[5.030653,52.569101],[5.033625,52.566413],[5.042511,52.561945],[5.045495,52.55746],[5.054425,52.546699],[5.054479,52.539509],[5.057434,52.538618],[5.06339,52.530545],[5.064871,52.52965],[5.066364,52.526958],[5.066384,52.524261],[5.071894,52.51982],[5.074739,52.517527],[5.075276,52.517094],[5.081189,52.514413],[5.084413,52.507318],[5.085676,52.504537],[5.079822,52.499129],[5.07979,52.49907],[5.076914,52.493729],[5.069571,52.491013],[5.063681,52.490997],[5.060749,52.489191],[5.059296,52.48649],[5.059323,52.482895],[5.060835,52.477506],[5.065265,52.47572],[5.069706,52.472137],[5.068254,52.469437],[5.062373,52.468522],[5.050586,52.470287],[5.038846,52.465758],[5.037773,52.466408],[5.033528,52.467029],[5.033505,52.466988],[5.033165,52.466384],[5.034439,52.464846],[5.041818,52.462172],[5.046233,52.462184],[5.049162,52.463991],[5.055055,52.463108],[5.055069,52.461311],[5.049231,52.455002],[5.049076,52.454417],[5.048328,52.451596],[5.047801,52.449605],[5.047803,52.4493],[5.047812,52.448192],[5.047849,52.443313],[5.049341,52.440621],[5.064069,52.437965],[5.066997,52.439771],[5.07275,52.439148],[5.083189,52.438016],[5.087613,52.43623],[5.089084,52.436233],[5.093466,52.440739],[5.09485,52.449555],[5.094879,52.44955],[5.094931,52.441641],[5.092013,52.438038],[5.089307,52.435256],[5.086142,52.436226],[5.077362,52.429911],[5.072983,52.425405],[5.073008,52.42181],[5.06863,52.417304],[5.067179,52.414604],[5.058353,52.415478],[5.05248,52.414563],[5.046648,52.408254],[5.039321,52.405536],[5.032001,52.401919],[5.029084,52.399214],[5.026218,52.390216],[5.018902,52.386598],[5.013034,52.385681],[5.014548,52.380293],[5.011656,52.37489],[5.008727,52.373982],[5.001368,52.375756],[4.998399,52.379342],[4.989594,52.378414],[4.983752,52.374798],[4.980815,52.374788],[4.97489,52.380161],[4.973413,52.381055],[4.964565,52.384619],[4.960213,52.382597],[4.960039,52.382664],[4.959815,52.382752],[4.959656,52.38278],[4.959629,52.382715],[4.95997,52.382484],[4.960037,52.382439],[4.959712,52.382364],[4.959266,52.382261],[4.958853,52.381972],[4.958844,52.381961],[4.95877,52.381868],[4.961671,52.380114],[4.979379,52.371188],[4.982319,52.369408],[4.982397,52.36939],[4.982713,52.369288],[4.982891,52.369238],[4.982927,52.369228],[4.983248,52.369139],[4.983474,52.369076],[4.983776,52.368992],[4.983835,52.368976],[4.983867,52.368967],[4.984154,52.368894],[4.984528,52.3688],[4.98497,52.368688],[4.985122,52.368652],[4.985623,52.368533],[4.98593,52.36846],[4.986121,52.368415],[4.986126,52.368414],[4.986283,52.368383],[4.98641,52.368359],[4.986487,52.368344],[4.986672,52.368308],[4.986892,52.368265],[4.986916,52.368261],[4.987084,52.368228],[4.987175,52.368211],[4.987341,52.368179],[4.987344,52.368178],[4.987464,52.368159],[4.987757,52.368111],[4.987964,52.368077],[4.988198,52.368039],[4.988463,52.367996],[4.988639,52.367967],[4.98875,52.367949],[4.988808,52.367941],[4.988851,52.367935],[4.989135,52.367895],[4.989259,52.367877],[4.989454,52.36785],[4.989667,52.36782],[4.989927,52.367783],[4.989956,52.36778],[4.990028,52.367773],[4.990125,52.367762],[4.990314,52.367742],[4.990512,52.367721],[4.990605,52.367711],[4.990709,52.367699],[4.990885,52.367681],[4.991092,52.367658],[4.991154,52.367653],[4.991338,52.367636],[4.991387,52.367632],[4.991569,52.367616],[4.991619,52.367611],[4.991795,52.367595],[4.991858,52.36759],[4.992029,52.367574],[4.992092,52.367569],[4.992202,52.367559],[4.992292,52.367554],[4.992464,52.367543],[4.992649,52.367533],[4.992814,52.367523],[4.993005,52.367512],[4.993165,52.367503],[4.993345,52.367492],[4.993364,52.367491],[4.993404,52.36749],[4.993522,52.367486],[4.994011,52.367469],[4.994454,52.367453],[4.994528,52.367452],[4.994731,52.367449],[4.994775,52.367449],[4.994955,52.367446],[4.995024,52.367445],[4.995122,52.367444],[4.995129,52.367443],[4.995162,52.367443],[4.995404,52.367445],[4.995672,52.367446],[4.995991,52.367448],[4.996261,52.367449],[4.996284,52.367449],[4.996312,52.36745],[4.99647,52.367451],[4.996692,52.367454],[4.996693,52.367454],[4.997003,52.367457],[4.997004,52.367457],[4.997465,52.367476],[4.998099,52.3675],[4.998149,52.367503],[4.998155,52.367503],[4.998259,52.367509],[4.998793,52.36754],[4.998944,52.367549],[4.998955,52.36755],[4.99918,52.367571],[4.999376,52.36759],[4.999606,52.367612],[4.999856,52.367636],[5.000032,52.367653],[5.000176,52.367667],[5.000455,52.367694],[5.000655,52.367713],[5.000876,52.367734],[5.001132,52.367759],[5.001311,52.367776],[5.001452,52.367789],[5.001734,52.367816],[5.001931,52.367835],[5.002155,52.367857],[5.002355,52.367876],[5.00241,52.367881],[5.002573,52.367897],[5.002729,52.367912],[5.003001,52.367938],[5.003042,52.367942],[5.003046,52.367942],[5.003328,52.367967],[5.00351,52.367984],[5.003668,52.367998],[5.003879,52.368017],[5.004007,52.368028],[5.004247,52.36805],[5.004347,52.368058],[5.004616,52.368083],[5.004856,52.368104],[5.004984,52.368116],[5.005196,52.368134],[5.005353,52.368148],[5.005516,52.368163],[5.005528,52.368164],[5.009197,52.368513],[5.009228,52.368516],[5.009282,52.368521],[5.009467,52.368538],[5.009835,52.368572],[5.010157,52.368602],[5.010533,52.368636],[5.010846,52.368666],[5.011231,52.368701],[5.011535,52.368729],[5.01193,52.368765],[5.012246,52.368794],[5.012626,52.36883],[5.012829,52.368848],[5.012893,52.368854],[5.012958,52.36886],[5.013074,52.36887],[5.01324,52.368885],[5.013469,52.368905],[5.01352,52.36891],[5.013674,52.368923],[5.013795,52.368934],[5.0141,52.368961],[5.014162,52.368967],[5.014271,52.368977],[5.014309,52.36898],[5.01432,52.368981],[5.01432,52.369029],[5.014324,52.369047],[5.014325,52.369049],[5.014327,52.369049],[5.014365,52.369062],[5.014366,52.369062],[5.014366,52.369062],[5.014368,52.369062],[5.014404,52.369054],[5.014406,52.369053],[5.014407,52.369053],[5.014421,52.369032],[5.014433,52.369001],[5.01445,52.369002],[5.014544,52.369012],[5.01455,52.369012],[5.014674,52.369025],[5.014827,52.36904],[5.014827,52.36904],[5.014827,52.36904],[5.014891,52.369028],[5.014894,52.369028],[5.014894,52.369026],[5.014911,52.368991],[5.014911,52.36899],[5.014911,52.368989],[5.014876,52.368949],[5.014875,52.368948],[5.014872,52.368948],[5.01474,52.368936],[5.014678,52.368931],[5.014566,52.368921],[5.014459,52.368912],[5.014453,52.368888],[5.014447,52.36886],[5.014447,52.368859],[5.014446,52.368859],[5.014415,52.368837],[5.014413,52.368835],[5.014409,52.368836],[5.014368,52.368848],[5.014366,52.368848],[5.014365,52.36885],[5.014361,52.368881],[5.014359,52.368894],[5.009168,52.368405],[5.00668,52.368165],[5.005439,52.368055],[5.002949,52.367826],[5.00245,52.367777],[5.00171,52.367704],[5.000392,52.367578],[4.998922,52.36744],[4.99801,52.367384],[4.996803,52.367338],[4.995661,52.367327],[4.995011,52.367325],[4.994424,52.367336],[4.994231,52.367344],[4.994227,52.367344],[4.993843,52.36736],[4.993498,52.367381],[4.993493,52.367381],[4.993417,52.367386],[4.993292,52.367394],[4.99325,52.367396],[4.99325,52.367396],[4.993149,52.367403],[4.993117,52.367405],[4.992898,52.367419],[4.992677,52.367434],[4.99265,52.367435],[4.992459,52.367448],[4.992398,52.367452],[4.992238,52.367462],[4.992138,52.367469],[4.991696,52.367509],[4.991673,52.367511],[4.991454,52.367531],[4.991204,52.367553],[4.990971,52.367574],[4.990939,52.367578],[4.990854,52.367588],[4.990745,52.367601],[4.99064,52.367613],[4.990486,52.367631],[4.990433,52.367637],[4.990234,52.367661],[4.990007,52.367687],[4.989982,52.36769],[4.989802,52.367711],[4.989754,52.367717],[4.989727,52.36772],[4.989478,52.367757],[4.989247,52.367791],[4.989069,52.367817],[4.989064,52.367818],[4.988926,52.367838],[4.988642,52.36788],[4.988621,52.367883],[4.9886,52.367886],[4.988241,52.367939],[4.987303,52.368098],[4.98608,52.368333],[4.985666,52.368419],[4.984948,52.36859],[4.984401,52.36872],[4.984046,52.368805],[4.983299,52.369009],[4.98253,52.369229],[4.982025,52.369399],[4.979396,52.36939],[4.973522,52.36937],[4.97353,52.368471],[4.976484,52.366683],[4.969142,52.366658],[4.969117,52.369354],[4.96618,52.369344],[4.963243,52.369333],[4.958837,52.369317],[4.958863,52.366621],[4.961817,52.364834],[4.966239,52.363052],[4.973597,52.36128],[4.975091,52.358589],[4.986582,52.358628],[4.989772,52.358639],[4.986819,52.360427],[4.992676,52.362244],[5.007206,52.356088],[5.007412,52.356],[5.010364,52.354212],[5.0133,52.354221],[5.016281,52.348838],[5.017763,52.347044],[5.019216,52.348847],[5.026548,52.349768],[5.029491,52.348878],[5.03539,52.3453],[5.033951,52.341701],[5.026628,52.339881],[5.026643,52.338083],[5.028103,52.338986],[5.031074,52.334501],[5.032541,52.334505],[5.036943,52.334519],[5.036908,52.339013],[5.044266,52.336338],[5.044975,52.336503],[5.055985,52.339068],[5.067305,52.338329],[5.068514,52.33825],[5.069199,52.338205],[5.070666,52.338209],[5.077985,52.340925],[5.094133,52.340068],[5.107386,52.332909],[5.109494,52.332055],[5.111799,52.331121],[5.12501,52.330253],[5.129432,52.326667],[5.132356,52.328471],[5.133823,52.328474],[5.136767,52.326683],[5.13824,52.325787],[5.145614,52.318611],[5.151385,52.313344],[5.15151,52.31323],[5.161808,52.306958],[5.166117,52.306086],[5.166212,52.306067],[5.173548,52.305182],[5.180876,52.306094],[5.185267,52.307899],[5.194058,52.309712],[5.229245,52.312461],[5.233644,52.312466],[5.242444,52.312478],[5.243914,52.31158],[5.245383,52.310683],[5.246943,52.312926],[5.249763,52.316981],[5.25271,52.31249],[5.254185,52.309795],[5.257085,52.308024],[5.257123,52.308],[5.264458,52.307109],[5.265011,52.306941],[5.267394,52.306213],[5.273261,52.30532],[5.278815,52.303625],[5.279131,52.303528],[5.281898,52.301837],[5.282068,52.301733],[5.287939,52.299042],[5.292342,52.297247],[5.299669,52.299051],[5.308458,52.303551],[5.308453,52.306248],[5.317258,52.301759],[5.314324,52.302656],[5.302603,52.298154],[5.298212,52.294555],[5.295287,52.290958],[5.296758,52.288262],[5.307037,52.278382],[5.281299,52.280992],[5.280652,52.281058],[5.276494,52.281903],[5.276253,52.281952],[5.265991,52.282841],[5.265889,52.282711],[5.245556,52.256751],[5.245379,52.256642],[5.244094,52.25585],[5.244094,52.25571],[5.244102,52.253154],[5.243964,52.253005],[5.23832,52.246913],[5.238265,52.246854],[5.232438,52.237858],[5.232343,52.23773],[5.223697,52.22616],[5.22516,52.226162],[5.219353,52.21357],[5.216457,52.205476],[5.193166,52.178473],[5.192755,52.1785],[5.180002,52.179349],[5.179924,52.179349],[5.170086,52.179331],[5.169766,52.179331],[5.167068,52.180154],[5.166837,52.180224],[5.124421,52.181935],[5.123,52.181786],[5.115653,52.181016],[5.077811,52.173756],[5.077684,52.173731],[5.047036,52.166456],[5.042512,52.184421],[5.041281,52.184543],[5.03373,52.185293],[5.035171,52.187994],[5.038033,52.196093],[5.038012,52.19879],[5.03069,52.199667],[5.023347,52.20324],[5.023345,52.20346],[5.02334,52.204058],[5.023339,52.204139],[5.023332,52.205038],[5.026258,52.205047],[5.036514,52.20328],[5.037955,52.205981],[5.036457,52.210471],[5.03353,52.210462],[5.034965,52.214062],[5.0378,52.225756],[5.037807,52.225769],[5.040686,52.231158],[5.040952,52.231241],[5.058213,52.236601],[5.056998,52.23734],[5.056742,52.237496],[5.046438,52.244658],[5.046397,52.250051],[5.043412,52.257234],[5.043243,52.257233],[5.040845,52.257226],[5.040482,52.257225],[5.036116,52.253617],[5.033173,52.255406],[5.031687,52.258098],[5.024252,52.271559],[5.024237,52.273405],[5.02423,52.274255],[5.030099,52.273374],[5.033008,52.27608],[5.038571,52.277807],[5.038856,52.277895],[5.043245,52.278807],[5.048628,52.277998],[5.04858,52.27779],[5.049059,52.277933],[5.049122,52.277952],[5.050545,52.282423],[5.060778,52.286047],[5.062244,52.286051],[5.063735,52.28246],[5.065208,52.281565],[5.066182,52.282168],[5.066667,52.282468],[5.065175,52.286059],[5.059279,52.290538],[5.050497,52.288715],[5.04321,52.283301],[5.038799,52.285086],[5.029976,52.288655],[5.024164,52.282345],[5.022684,52.284138],[5.022522,52.303913],[5.02252,52.30392],[5.022477,52.303918],[5.018305,52.304416],[5.015182,52.304789],[5.014594,52.304787],[5.01225,52.30478],[5.008513,52.302465],[5.007874,52.302069],[5.003498,52.299358],[5.002056,52.296657],[5.002079,52.29396],[4.997713,52.290351],[4.984512,52.291205],[4.983724,52.290839],[4.972835,52.285771],[4.972374,52.285342],[4.969965,52.283098],[4.969929,52.283065],[4.969651,52.282544],[4.967584,52.280248],[4.96117,52.279438],[4.955308,52.279416],[4.943584,52.279373],[4.934764,52.282036],[4.926245,52.281131],[4.92598,52.281103],[4.926008,52.278407],[4.929013,52.271227],[4.929004,52.271212],[4.927771,52.268894],[4.927575,52.268525],[4.924673,52.265817],[4.918851,52.262199],[4.918879,52.259502],[4.917434,52.257698],[4.911613,52.25408],[4.908684,52.254068],[4.902825,52.254044],[4.898451,52.252228],[4.892573,52.254001],[4.88231,52.254857],[4.877926,52.253939],[4.875018,52.252129],[4.874616,52.25229],[4.870603,52.253907],[4.869159,52.252103],[4.857486,52.248456],[4.85676,52.247548],[4.856043,52.246651],[4.854621,52.243049],[4.851693,52.243036],[4.851736,52.239441],[4.847996,52.240187],[4.847333,52.24032],[4.842984,52.236704],[4.838603,52.235785],[4.831451,52.232217],[4.831328,52.232155],[4.828805,52.231366],[4.828411,52.231242],[4.819665,52.229406],[4.819571,52.229554],[4.819168,52.229475],[4.818761,52.229395],[4.818626,52.229188],[4.815271,52.228483],[4.814681,52.228389],[4.809427,52.227555],[4.802109,52.227519],[4.79479,52.227483],[4.785983,52.229236],[4.781592,52.229214],[4.777213,52.228292],[4.775786,52.225588],[4.771538,52.223817],[4.77142,52.223768],[4.762701,52.219227],[4.753933,52.218281],[4.743728,52.21553],[4.735066,52.207392],[4.734701,52.207613],[4.726208,52.212736],[4.72531,52.214079],[4.723214,52.217214],[4.724437,52.233401],[4.703914,52.235082],[4.696622,52.233242],[4.687924,52.227797],[4.683861,52.226938],[4.683547,52.226872],[4.677692,52.226837],[4.670287,52.232186],[4.668525,52.230713],[4.666178,52.228752],[4.665953,52.228564],[4.658664,52.226721],[4.647464,52.222325],[4.647029,52.222154],[4.638844,52.219576],[4.63247,52.217567],[4.627202,52.216722],[4.626632,52.216631],[4.622814,52.216136],[4.619331,52.215685],[4.618536,52.215679],[4.603234,52.215579],[4.598828,52.216448],[4.59848,52.216531],[4.58413,52.219945],[4.57474,52.218227],[4.573919,52.218077],[4.572455,52.218067],[4.572239,52.218092],[4.557788,52.219763],[4.554794,52.223337],[4.553563,52.224565],[4.550319,52.2278],[4.554626,52.232325],[4.555977,52.233174],[4.556073,52.233235],[4.561895,52.235073],[4.564724,52.239562],[4.56474,52.239588],[4.565548,52.243366],[4.566088,52.24589],[4.566191,52.246086],[4.568917,52.251303],[4.568916,52.251397],[4.568818,52.256696],[4.568841,52.256771],[4.5702,52.2612],[4.568666,52.265645],[4.568653,52.265684],[4.568619,52.267481],[4.568617,52.26762],[4.568586,52.269279],[4.572932,52.272006],[4.584091,52.279005],[4.584524,52.279276],[4.588888,52.281104],[4.59234,52.286794],[4.594064,52.289636],[4.596007,52.292838],[4.598699,52.298863],[4.598827,52.299149],[4.603023,52.304436],[4.60313,52.304571],[4.611786,52.312718],[4.611755,52.314516],[4.599958,52.318033],[4.599608,52.318055],[4.591343,52.318562],[4.586742,52.318844],[4.586455,52.318929],[4.584054,52.319645],[4.583792,52.319722],[4.573591,52.316057],[4.569501,52.317688],[4.569158,52.317824],[4.563425,52.310593],[4.547209,52.314974],[4.544259,52.315852],[4.494124,52.328967],[4.518342,52.366003],[4.520036,52.368579],[4.532424,52.387403],[4.532608,52.387681],[4.542617,52.402135],[4.552598,52.418386],[4.558259,52.430111],[4.561049,52.438221],[4.562402,52.444522],[4.562271,52.444864],[4.559309,52.452591],[4.554743,52.460649],[4.553238,52.462436],[4.55471,52.462446],[4.555425,52.462451],[4.578253,52.462609],[4.579774,52.459923],[4.587179,52.457277],[4.587163,52.458176],[4.5827,52.460842],[4.582684,52.461741],[4.582667,52.462639],[4.592124,52.459514],[4.594794,52.458631],[4.595036,52.458667],[4.5959,52.458825],[4.59598,52.458875],[4.595975,52.459134],[4.593239,52.460769],[4.593,52.460911],[4.584123,52.463548],[4.587033,52.465366],[4.597318,52.466334],[4.597302,52.467232],[4.589944,52.467183],[4.584057,52.467143],[4.588456,52.468072],[4.600229,52.468151],[4.606116,52.46819],[4.605747,52.46841],[4.604628,52.469079],[4.601621,52.472654],[4.595734,52.472615],[4.598661,52.473534],[4.60898,52.472703],[4.608964,52.473602],[4.600101,52.475341],[4.586903,52.472556],[4.582504,52.471627],[4.579577,52.470708],[4.566364,52.46882],[4.559017,52.468969],[4.557641,52.468997],[4.554591,52.468738],[4.54867,52.470494],[4.556404,52.469203],[4.566555,52.469183],[4.567786,52.471526],[4.574996,52.479666],[4.58216,52.490501],[4.587871,52.500428],[4.592127,52.509445],[4.599075,52.532862],[4.606062,52.554481],[4.610137,52.574283],[4.616947,52.606686],[4.617026,52.606887],[4.618321,52.610191],[4.618361,52.61029],[4.619712,52.61749],[4.619755,52.617661],[4.62162,52.624945],[4.622361,52.62784],[4.622477,52.628294],[4.622802,52.631545],[4.623729,52.640821],[4.623736,52.640886],[4.627828,52.656855],[4.627889,52.657092],[4.629162,52.667729],[4.629181,52.667886],[4.631971,52.676853],[4.631983,52.676892],[4.634771,52.686797],[4.634632,52.694886],[4.634663,52.695039],[4.63736,52.708385],[4.637423,52.708585],[4.638764,52.712888],[4.638759,52.71314],[4.638595,52.722774],[4.638593,52.722876],[4.638487,52.729065],[4.639968,52.729075],[4.640036,52.729285],[4.647006,52.75069],[4.649862,52.757],[4.652689,52.765107],[4.651208,52.765097],[4.659933,52.775038],[4.664262,52.781336],[4.664275,52.781356],[4.66856,52.791269],[4.675797,52.802098],[4.67597,52.802558],[4.682908,52.821015],[4.685803,52.825526],[4.688655,52.832733],[4.691523,52.839041],[4.693473,52.844286],[4.697218,52.854354],[4.698689,52.855261],[4.709037,52.882202],[4.710107,52.884987],[4.711616,52.895069],[4.7128,52.902977],[4.712802,52.902992],[4.714019,52.916849],[4.714065,52.917365],[4.713818,52.933369],[4.713815,52.933541],[4.71521,52.93938],[4.71661,52.945241],[4.719489,52.951548],[4.729742,52.96239],[4.730032,52.962569],[4.731217,52.963297],[4.739943,52.965107],[4.740121,52.965143],[4.749051,52.965191],[4.759501,52.965878],[4.763923,52.966169],[4.778808,52.966245],[4.78475,52.967174],[4.784787,52.964478]]],[[[4.67432,52.983643],[4.681824,52.980092],[4.671357,52.982726],[4.66689,52.982699],[4.665416,52.981792],[4.66546,52.979096],[4.666964,52.978206],[4.67889,52.977379],[4.684831,52.978312],[4.695267,52.977474],[4.702698,52.978416],[4.710142,52.978458],[4.686493,52.967537],[4.686464,52.969334],[4.690887,52.972056],[4.68791,52.972039],[4.681955,52.972004],[4.679007,52.970189],[4.67908,52.965696],[4.673185,52.962066],[4.667247,52.961131],[4.661278,52.961994],[4.655265,52.965552],[4.655159,52.971843],[4.658001,52.979949],[4.662408,52.983571],[4.669838,52.984515],[4.67432,52.983643]]],[[[5.06032,52.943981],[5.054417,52.937673],[5.048452,52.939454],[5.049926,52.941256],[5.058825,52.944875],[5.165665,53.000843],[5.16716,52.999947],[5.06032,52.943981]]],[[[4.879281,53.158142],[4.880797,53.156351],[4.885272,53.157269],[4.889778,53.15549],[4.892799,53.152807],[4.907927,53.136692],[4.909451,53.134002],[4.907957,53.133996],[4.90199,53.133073],[4.900594,53.125966],[4.900576,53.125878],[4.899356,53.101608],[4.899401,53.101239],[4.901,53.088134],[4.898116,53.079135],[4.887731,53.0737],[4.880291,53.071871],[4.878841,53.06827],[4.872905,53.065548],[4.873012,53.056562],[4.861166,53.04932],[4.858399,53.044194],[4.858208,53.044282],[4.857211,53.044714],[4.856205,53.045152],[4.855334,53.045042],[4.854446,53.044899],[4.85394,53.044742],[4.853632,53.044646],[4.853616,53.044643],[4.849346,53.04028],[4.850848,53.039388],[4.846431,53.034875],[4.839011,53.032145],[4.831569,53.031212],[4.831047,53.031209],[4.824115,53.031177],[4.819654,53.030257],[4.819586,53.030204],[4.793104,53.009457],[4.793141,53.006761],[4.796133,53.005877],[4.793517,53.003468],[4.79319,53.003166],[4.785742,53.003129],[4.781285,53.002208],[4.773773,53.006663],[4.769303,53.00664],[4.754339,53.011056],[4.749895,53.009235],[4.754417,53.005664],[4.760416,53.002999],[4.76938,53.001248],[4.773874,52.999474],[4.773899,52.997677],[4.75903,52.995802],[4.747114,52.995739],[4.744161,52.993925],[4.745677,52.992136],[4.74569,52.991237],[4.741249,52.989416],[4.721943,52.985715],[4.718951,52.986597],[4.718758,52.999178],[4.712646,53.00903],[4.709568,53.015304],[4.709414,53.025189],[4.710765,53.034184],[4.715015,53.048588],[4.722224,53.064806],[4.736846,53.084658],[4.747005,53.096264],[4.747122,53.096397],[4.76187,53.109057],[4.762138,53.109307],[4.795789,53.140684],[4.796933,53.140347],[4.798794,53.139481],[4.798814,53.138003],[4.797332,53.137097],[4.797344,53.136198],[4.80037,53.133517],[4.806335,53.134445],[4.807805,53.136249],[4.809287,53.137155],[4.818183,53.14259],[4.822643,53.144408],[4.824149,53.143517],[4.830128,53.143545],[4.830104,53.145342],[4.825586,53.148017],[4.818065,53.151576],[4.816629,53.147076],[4.812204,53.142561],[4.803249,53.141619],[4.800297,53.138909],[4.79879,53.1398],[4.797283,53.140691],[4.817923,53.16236],[4.837155,53.178626],[4.841575,53.184039],[4.844544,53.185849],[4.849032,53.18587],[4.856513,53.185903],[4.859069,53.185149],[4.859516,53.185018],[4.859525,53.184297],[4.859527,53.184119],[4.862541,53.182335],[4.873119,53.173394],[4.874668,53.168907],[4.877682,53.162733],[4.877733,53.162629],[4.877775,53.159035],[4.879252,53.158159],[4.879281,53.158142]]]]}},{type:"Feature",properties:{id:15,name:"Flevoland",created_at:"2013-11-30T17:55:36+0100",updated_at:"2013-11-30T17:55:36+0100",cartodb_id:2},geometry:{type:"MultiPolygon",coordinates:[[[[5.443682,52.559737],[5.440728,52.556143],[5.427115,52.537295],[5.427441,52.539071],[5.439254,52.556144],[5.443682,52.559737]]],[[[5.443682,52.559737],[5.448112,52.56333],[5.465819,52.567814],[5.464343,52.566916],[5.451062,52.563329],[5.443682,52.559737]]],[[[5.468773,52.56961],[5.467296,52.568712],[5.467301,52.571408],[5.457438,52.593969],[5.468778,52.572306],[5.468773,52.56961]]],[[[5.756689,52.600523],[5.750732,52.594249],[5.747773,52.59336],[5.744836,52.595166],[5.74336,52.595171],[5.740386,52.592483],[5.737449,52.594289],[5.734511,52.596096],[5.734567,52.603286],[5.741963,52.605062],[5.746392,52.605049],[5.751043,52.604343],[5.753759,52.603228],[5.755228,52.602325],[5.756689,52.600523]]],[[[5.725692,52.587117],[5.756538,52.582547],[5.757551,52.582544],[5.760965,52.582533],[5.763916,52.582524],[5.763901,52.580726],[5.767235,52.580715],[5.768327,52.580712],[5.803739,52.580593],[5.811108,52.579668],[5.850672,52.553454],[5.853592,52.550746],[5.855019,52.546247],[5.855069,52.545777],[5.8577,52.521068],[5.854658,52.512092],[5.85461,52.507598],[5.850087,52.497728],[5.817303,52.458302],[5.815049,52.457624],[5.814351,52.457414],[5.81288,52.457419],[5.80992,52.455632],[5.803959,52.447563],[5.798008,52.440393],[5.778792,52.429672],[5.756645,52.418957],[5.746318,52.414494],[5.741908,52.414507],[5.740452,52.416309],[5.728706,52.418141],[5.722818,52.417259],[5.662429,52.398539],[5.646223,52.391384],[5.638856,52.387805],[5.632965,52.385121],[5.627074,52.382436],[5.62117,52.377055],[5.615268,52.371673],[5.615263,52.370774],[5.610839,52.367187],[5.607898,52.366294],[5.602024,52.366305],[5.588801,52.36453],[5.584392,52.363639],[5.563854,52.368165],[5.543248,52.354711],[5.542896,52.354425],[5.538832,52.351121],[5.537355,52.348427],[5.541545,52.338939],[5.541724,52.338534],[5.545671,52.336105],[5.546117,52.335831],[5.549055,52.336726],[5.55345,52.334922],[5.553443,52.333124],[5.551,52.330148],[5.550496,52.329533],[5.549025,52.328636],[5.551936,52.32234],[5.549111,52.314632],[5.548973,52.314254],[5.546027,52.310663],[5.537167,52.292697],[5.535698,52.2918],[5.529783,52.275627],[5.526849,52.274732],[5.498996,52.270267],[5.472611,52.264896],[5.453559,52.260413],[5.416933,52.254136],[5.409609,52.253239],[5.40375,52.254139],[5.394963,52.256836],[5.393498,52.258634],[5.387639,52.26223],[5.386174,52.264926],[5.317254,52.304456],[5.298695,52.313186],[5.298174,52.313432],[5.268814,52.323293],[5.240918,52.330453],[5.24055,52.330509],[5.226048,52.33271],[5.223302,52.333127],[5.220367,52.333122],[5.220374,52.331325],[5.217443,52.330422],[5.213038,52.331314],[5.207158,52.334002],[5.205824,52.336433],[5.20568,52.336696],[5.195585,52.337563],[5.195404,52.337579],[5.185136,52.336663],[5.184487,52.336529],[5.167545,52.333036],[5.157288,52.33032],[5.152891,52.329412],[5.149952,52.330305],[5.14556,52.328499],[5.144113,52.3249],[5.14135,52.32742],[5.141164,52.327591],[5.140479,52.328216],[5.139349,52.329246],[5.141154,52.329388],[5.144078,52.331192],[5.145536,52.332993],[5.135229,52.339263],[5.132299,52.338358],[5.129359,52.339251],[5.132273,52.342853],[5.133725,52.345552],[5.133653,52.358136],[5.133577,52.358547],[5.132139,52.366223],[5.123269,52.376091],[5.123243,52.380585],[5.129097,52.384194],[5.156956,52.394139],[5.158416,52.395939],[5.158457,52.396002],[5.161332,52.400439],[5.206802,52.41669],[5.206821,52.416697],[5.208514,52.417391],[5.217108,52.417611],[5.222985,52.418518],[5.228853,52.422121],[5.233251,52.425723],[5.233248,52.426622],[5.258215,52.436539],[5.384694,52.49054],[5.387639,52.491439],[5.395002,52.491439],[5.400354,52.494705],[5.400893,52.495034],[5.411205,52.501324],[5.409733,52.502223],[5.415626,52.505817],[5.420045,52.504917],[5.422992,52.506714],[5.423236,52.506826],[5.434783,52.512103],[5.439206,52.515696],[5.440683,52.518392],[5.437737,52.519292],[5.436352,52.523106],[5.434799,52.527383],[5.436277,52.530978],[5.443655,52.538165],[5.447225,52.536712],[5.448075,52.536365],[5.455462,52.547147],[5.45547,52.55254],[5.456947,52.554337],[5.464322,52.555231],[5.464319,52.553434],[5.490864,52.554312],[5.496765,52.555206],[5.501194,52.557],[5.501444,52.55716],[5.557372,52.592885],[5.564762,52.595571],[5.573626,52.597355],[5.62829,52.606245],[5.641609,52.61161],[5.64965,52.616471],[5.650919,52.615628],[5.644803,52.612989],[5.641156,52.610793],[5.640117,52.608917],[5.65188,52.600802],[5.654816,52.598099],[5.725586,52.587133],[5.725692,52.587117]]],[[[5.897141,52.618879],[5.84538,52.611899],[5.86167,52.616329],[5.867587,52.617204],[5.873503,52.618079],[5.888312,52.621613],[5.892732,52.620695],[5.897141,52.618879]]],[[[5.405589,52.645216],[5.412756,52.637945],[5.417184,52.632551],[5.456701,52.594662],[5.406847,52.641541],[5.405589,52.645216]]],[[[5.297406,52.690943],[5.300364,52.690945],[5.300368,52.689147],[5.294459,52.685547],[5.292982,52.684648],[5.295941,52.683751],[5.295943,52.682852],[5.292987,52.681951],[5.288549,52.682846],[5.285589,52.683743],[5.281147,52.685536],[5.29002,52.686443],[5.291497,52.687343],[5.294453,52.688244],[5.297406,52.690943]]],[[[5.405589,52.645216],[5.396506,52.652328],[5.361022,52.674795],[5.353626,52.678389],[5.303321,52.691846],[5.297406,52.690943],[5.295925,52.69184],[5.2974,52.693639],[5.303319,52.692744],[5.352147,52.679287],[5.359543,52.676593],[5.399462,52.651429],[5.405589,52.645216]]],[[[5.749807,52.840523],[5.785233,52.81884],[5.788028,52.810122],[5.788118,52.809842],[5.789551,52.804445],[5.795509,52.807121],[5.804322,52.798103],[5.811645,52.793612],[5.811692,52.793583],[5.819061,52.789062],[5.819026,52.785467],[5.836677,52.786293],[5.836824,52.7863],[5.850156,52.78535],[5.852864,52.784517],[5.861976,52.781709],[5.862158,52.781634],[5.879682,52.774447],[5.891109,52.768298],[5.891466,52.768106],[5.898646,52.763689],[5.898823,52.763581],[5.900294,52.762675],[5.90622,52.76265],[5.922397,52.752692],[5.922541,52.752468],[5.931118,52.73917],[5.941333,52.720901],[5.941334,52.720894],[5.941338,52.720886],[5.942683,52.71688],[5.942668,52.715748],[5.943101,52.715633],[5.952199,52.713214],[5.952994,52.713003],[5.955895,52.708495],[5.958222,52.705612],[5.958808,52.704886],[5.966135,52.699457],[5.966076,52.694964],[5.96307,52.691383],[5.952647,52.68604],[5.9497,52.686953],[5.946822,52.685231],[5.946719,52.685169],[5.940236,52.680321],[5.934775,52.676236],[5.933274,52.674446],[5.93472,52.671743],[5.934869,52.671558],[5.936176,52.669938],[5.940611,52.669918],[5.940634,52.671715],[5.942112,52.671708],[5.953906,52.668956],[5.959819,52.668928],[5.9672,52.667994],[5.967668,52.66774],[5.978942,52.661644],[5.981874,52.659832],[5.984782,52.656222],[5.968334,52.641922],[5.965355,52.640139],[5.885547,52.623458],[5.885378,52.623423],[5.833586,52.613742],[5.771613,52.613958],[5.771568,52.613958],[5.750895,52.614023],[5.750873,52.611327],[5.740559,52.614054],[5.663774,52.614257],[5.65935,52.615166],[5.653448,52.616079],[5.651972,52.616082],[5.6505,52.616984],[5.651982,52.61788],[5.629945,52.638599],[5.629717,52.638832],[5.616718,52.652108],[5.601965,52.657528],[5.596255,52.661894],[5.596074,52.662033],[5.593126,52.663835],[5.593127,52.664135],[5.593159,52.670933],[5.593159,52.671026],[5.593189,52.677317],[5.59479,52.70338],[5.59479,52.703393],[5.595006,52.749038],[5.595007,52.749218],[5.595075,52.763598],[5.596574,52.767191],[5.633821,52.803071],[5.634025,52.803268],[5.660677,52.829076],[5.665146,52.831762],[5.672578,52.833542],[5.675546,52.833535],[5.696335,52.835281],[5.703755,52.835261],[5.705239,52.835258],[5.711182,52.83614],[5.714171,52.838828],[5.726024,52.836099],[5.727515,52.836994],[5.724609,52.845091],[5.725046,52.845019],[5.746846,52.841431],[5.747359,52.841273],[5.749807,52.840523]]]]}},{type:"Feature",properties:{id:23,name:"Drenthe",created_at:"2013-11-30T17:55:36+0100",updated_at:"2013-11-30T17:55:36+0100",cartodb_id:4},geometry:{type:"MultiPolygon",coordinates:[[[[6.493662,53.199954],[6.496631,53.199028],[6.497103,53.199144],[6.507176,53.201627],[6.514427,53.19803],[6.514564,53.197962],[6.515907,53.198744],[6.516084,53.198847],[6.516085,53.198897],[6.516107,53.199745],[6.516555,53.19966],[6.531,53.196908],[6.53063,53.196693],[6.52948,53.196024],[6.535179,53.185184],[6.540647,53.181112],[6.542514,53.179722],[6.54401,53.179707],[6.548569,53.182359],[6.549312,53.182352],[6.549069,53.181306],[6.548801,53.18121],[6.558747,53.171475],[6.561427,53.167252],[6.561616,53.166953],[6.561598,53.166273],[6.561592,53.166055],[6.562916,53.159751],[6.564387,53.158837],[6.565625,53.158825],[6.565882,53.158823],[6.581943,53.164745],[6.582499,53.16495],[6.588281,53.157702],[6.585216,53.155036],[6.587098,53.149514],[6.587982,53.14692],[6.601407,53.145886],[6.603591,53.143842],[6.60432,53.14316],[6.614603,53.136764],[6.614642,53.136727],[6.617515,53.134037],[6.618958,53.132225],[6.618932,53.131326],[6.619285,53.130883],[6.62326,53.125889],[6.62769,53.124046],[6.627878,53.12381],[6.630575,53.120421],[6.628978,53.116842],[6.636394,53.114968],[6.637732,53.109561],[6.636162,53.106884],[6.636166,53.106883],[6.669301,53.116418],[6.669702,53.116557],[6.676825,53.119025],[6.676848,53.119033],[6.694878,53.122433],[6.695183,53.122418],[6.718748,53.121271],[6.719351,53.121237],[6.72173,53.1211],[6.724018,53.120968],[6.738137,53.120156],[6.743588,53.117598],[6.744026,53.117393],[6.745599,53.11641],[6.748422,53.114646],[6.749859,53.112832],[6.777683,53.095435],[6.790501,53.087414],[6.814261,53.072535],[6.815408,53.071816],[6.815723,53.071618],[6.837528,53.057035],[6.83762,53.056974],[6.843464,53.053308],[6.843539,53.053264],[6.862483,53.042289],[6.897481,53.019381],[6.897819,53.019156],[6.905125,53.01429],[6.907611,53.012634],[6.922119,53.002967],[6.92224,53.002886],[6.935312,52.995477],[6.936846,52.994608],[6.938176,52.99377],[6.938303,52.99369],[6.944007,52.988278],[6.944066,52.988222],[6.948372,52.983672],[6.948556,52.983516],[6.95309,52.979699],[6.957036,52.976374],[6.969999,52.965451],[6.970049,52.965409],[6.970814,52.964764],[6.978715,52.958103],[6.978865,52.957967],[6.980603,52.956396],[6.98588,52.951621],[6.988674,52.949093],[6.9888,52.948979],[7.001363,52.938377],[7.001788,52.938018],[7.003242,52.937099],[7.003572,52.936812],[7.004432,52.936063],[7.014348,52.927422],[7.01477,52.927055],[7.016087,52.926222],[7.016223,52.926136],[7.023061,52.921812],[7.023488,52.921542],[7.02788,52.919684],[7.029908,52.919348],[7.045615,52.916742],[7.04085,52.908718],[7.040589,52.90842],[7.036188,52.903389],[7.036069,52.903221],[7.01735,52.876681],[7.017255,52.87652],[7.015764,52.874006],[7.018734,52.873965],[7.019103,52.87396],[7.041008,52.873658],[7.043705,52.86643],[7.046709,52.867287],[7.048125,52.865469],[7.048167,52.865435],[7.063974,52.852663],[7.069772,52.848985],[7.077128,52.850647],[7.077262,52.850677],[7.077227,52.849779],[7.072636,52.846248],[7.072417,52.840549],[7.072394,52.839959],[7.093166,52.839664],[7.07277,52.811188],[7.070147,52.781559],[7.070133,52.781403],[7.065002,52.724322],[7.064982,52.724099],[7.058818,52.677858],[7.058763,52.677441],[7.0565,52.656796],[7.056495,52.656681],[7.056168,52.648057],[7.056159,52.647811],[7.056056,52.645116],[7.055431,52.644593],[7.042322,52.633621],[7.039369,52.633662],[7.036482,52.6355],[7.029098,52.635602],[7.012919,52.637623],[7.007077,52.6395],[7.005699,52.642216],[7.002778,52.643155],[6.992405,52.642396],[6.985085,52.644293],[6.982195,52.646129],[6.976319,52.647107],[6.968771,52.642713],[6.959908,52.64283],[6.953903,52.640213],[6.946518,52.64031],[6.939069,52.638609],[6.928824,52.64144],[6.91993,52.640656],[6.917038,52.642491],[6.916888,52.642785],[6.914271,52.64792],[6.903991,52.64985],[6.898174,52.65262],[6.880413,52.651946],[6.873117,52.654734],[6.865608,52.651232],[6.862623,52.65037],[6.850773,52.649617],[6.837595,52.653375],[6.831655,52.652548],[6.828611,52.649888],[6.822672,52.649061],[6.822334,52.649086],[6.807927,52.650137],[6.806507,52.651952],[6.803581,52.652886],[6.794687,52.652092],[6.790311,52.653942],[6.78758,52.653561],[6.778433,52.652284],[6.772495,52.651454],[6.767949,52.647911],[6.759141,52.649811],[6.7554,52.649288],[6.753203,52.64898],[6.742777,52.646403],[6.730711,52.63845],[6.727707,52.634958],[6.727647,52.634889],[6.723162,52.633141],[6.718704,52.632292],[6.711211,52.62878],[6.70823,52.627915],[6.70235,52.628879],[6.700873,52.628895],[6.700927,52.630692],[6.704042,52.636051],[6.704094,52.63625],[6.705707,52.642325],[6.705842,52.646818],[6.708878,52.649481],[6.708422,52.649598],[6.702019,52.651239],[6.701544,52.65136],[6.686848,52.654219],[6.686251,52.654382],[6.656049,52.662641],[6.655999,52.662657],[6.647258,52.665431],[6.647003,52.665513],[6.629674,52.67101],[6.614991,52.674758],[6.612551,52.674783],[6.612034,52.674788],[6.604617,52.673966],[6.604531,52.673953],[6.582344,52.670596],[6.581687,52.670503],[6.552659,52.666396],[6.548931,52.664937],[6.548177,52.664642],[6.530206,52.655827],[6.529865,52.655646],[6.51522,52.64788],[6.515179,52.646254],[6.515174,52.646083],[6.518936,52.619979],[6.518933,52.619856],[6.518873,52.617506],[6.518848,52.61655],[6.518821,52.615486],[6.512892,52.614644],[6.512689,52.614745],[6.505601,52.618308],[6.499718,52.619262],[6.492357,52.62023],[6.487905,52.619372],[6.480522,52.61944],[6.477591,52.620366],[6.473205,52.622204],[6.473272,52.6249],[6.470547,52.62576],[6.47034,52.625825],[6.464411,52.62498],[6.459783,52.616932],[6.453834,52.615188],[6.443542,52.617078],[6.442778,52.617398],[6.434768,52.620751],[6.434789,52.62165],[6.433398,52.625257],[6.433483,52.628852],[6.432028,52.629764],[6.429052,52.628891],[6.421541,52.623563],[6.420022,52.621779],[6.41998,52.619981],[6.417027,52.620007],[6.411688,52.62169],[6.411162,52.621855],[6.409706,52.622767],[6.406732,52.621894],[6.408146,52.619185],[6.403674,52.617425],[6.402198,52.617438],[6.396312,52.618387],[6.394836,52.618399],[6.391821,52.615728],[6.384377,52.613094],[6.377096,52.61765],[6.377177,52.621244],[6.375882,52.629345],[6.370054,52.632989],[6.36722,52.638405],[6.365842,52.642911],[6.364405,52.644721],[6.360012,52.646554],[6.357057,52.646579],[6.354122,52.647501],[6.343876,52.652078],[6.339387,52.653951],[6.335087,52.655744],[6.327774,52.659398],[6.326335,52.661207],[6.326392,52.663903],[6.32789,52.66479],[6.329426,52.667474],[6.326527,52.670194],[6.323589,52.671116],[6.316178,52.670275],[6.314681,52.669388],[6.310208,52.667625],[6.305773,52.667659],[6.302817,52.667682],[6.298382,52.667716],[6.295351,52.664144],[6.295332,52.663245],[6.289637,52.664157],[6.289438,52.664189],[6.286518,52.666009],[6.285077,52.667817],[6.284815,52.667899],[6.2792,52.669659],[6.277722,52.66967],[6.274729,52.667895],[6.273214,52.666109],[6.270258,52.666131],[6.265859,52.667961],[6.265877,52.668859],[6.26588,52.669016],[6.265913,52.670657],[6.252607,52.670754],[6.248225,52.673483],[6.249738,52.675269],[6.248295,52.677078],[6.243912,52.679806],[6.237979,52.67895],[6.224373,52.683903],[6.220354,52.685366],[6.220388,52.687164],[6.21743,52.687184],[6.214472,52.687205],[6.202607,52.685489],[6.196988,52.68215],[6.196625,52.681934],[6.195113,52.680147],[6.193585,52.677461],[6.192106,52.677471],[6.187736,52.681096],[6.186306,52.683802],[6.180374,52.682943],[6.180722,52.682582],[6.184729,52.678419],[6.183202,52.675733],[6.164059,52.680354],[6.164075,52.681253],[6.170058,52.687459],[6.170102,52.687505],[6.168655,52.689312],[6.159844,52.692965],[6.157479,52.693703],[6.156902,52.693883],[6.15405,52.698351],[6.154022,52.698396],[6.144131,52.715246],[6.14396,52.715538],[6.142567,52.719079],[6.142542,52.719142],[6.141093,52.720949],[6.140854,52.721337],[6.133891,52.732679],[6.13378,52.732841],[6.129555,52.738998],[6.129099,52.739423],[6.126835,52.74153],[6.126639,52.741712],[6.121068,52.751314],[6.120881,52.751635],[6.122423,52.755221],[6.126912,52.757889],[6.132868,52.75965],[6.137313,52.759622],[6.15665,52.763993],[6.168583,52.768409],[6.169791,52.769836],[6.173125,52.773772],[6.184882,52.781618],[6.185127,52.781782],[6.19412,52.787114],[6.201682,52.795152],[6.200232,52.79696],[6.200072,52.797072],[6.18881,52.804925],[6.188519,52.805128],[6.187757,52.805885],[6.185449,52.808179],[6.181291,52.812311],[6.181234,52.812367],[6.176833,52.815093],[6.172957,52.816696],[6.172416,52.81692],[6.172399,52.816021],[6.159224,52.825994],[6.154734,52.828772],[6.153823,52.829335],[6.15204,52.830439],[6.150998,52.831083],[6.150415,52.831443],[6.131354,52.845046],[6.129931,52.84865],[6.119645,52.855005],[6.120995,52.855806],[6.121145,52.855894],[6.141983,52.864708],[6.142086,52.864752],[6.161152,52.873434],[6.16155,52.873615],[6.191453,52.885095],[6.191471,52.885102],[6.201498,52.889409],[6.207948,52.89218],[6.228885,52.911577],[6.229132,52.911806],[6.232158,52.914481],[6.242321,52.919622],[6.24267,52.919799],[6.245661,52.920676],[6.247219,52.92426],[6.257718,52.928678],[6.283623,52.927475],[6.303781,52.926536],[6.3346,52.907421],[6.36915,52.92332],[6.394677,52.933893],[6.397603,52.937518],[6.403222,52.944476],[6.406671,52.948746],[6.406932,52.949069],[6.428341,52.973152],[6.424006,52.977658],[6.423982,52.977684],[6.413772,52.986759],[6.408266,52.99277],[6.407963,52.993101],[6.376102,53.022815],[6.375872,53.02303],[6.362721,53.034822],[6.364333,53.040201],[6.364349,53.040318],[6.366107,53.05277],[6.366194,53.053494],[6.367943,53.068034],[6.351967,53.07168],[6.351612,53.071761],[6.332313,53.076409],[6.305568,53.082009],[6.316303,53.095408],[6.338413,53.089882],[6.338577,53.089841],[6.341504,53.08893],[6.341543,53.088918],[6.344508,53.087996],[6.344705,53.088323],[6.35691,53.108567],[6.364377,53.108507],[6.364391,53.108608],[6.366089,53.120614],[6.366154,53.121075],[6.366174,53.121973],[6.366183,53.122393],[6.366215,53.12377],[6.366217,53.123774],[6.381729,53.148808],[6.381836,53.148931],[6.383265,53.150592],[6.381791,53.151503],[6.381853,53.154181],[6.381853,53.154199],[6.382294,53.154508],[6.389095,53.159278],[6.389452,53.159528],[6.398561,53.165383],[6.399259,53.165832],[6.404634,53.169286],[6.40628,53.17717],[6.40632,53.177361],[6.407858,53.179145],[6.424397,53.182598],[6.443995,53.188718],[6.447075,53.192286],[6.448704,53.197664],[6.4502,53.197651],[6.45058,53.197748],[6.463756,53.201125],[6.48482,53.205428],[6.493731,53.20265],[6.493721,53.202277],[6.493662,53.199954]]]]}},{type:"Feature",properties:{id:22,name:"Overijssel",created_at:"2013-11-30T17:55:36+0100",updated_at:"2013-11-30T17:55:36+0100",cartodb_id:5},geometry:{type:"MultiPolygon",coordinates:[[[[5.815622,52.58864],[5.815596,52.585944],[5.817071,52.585939],[5.821516,52.58772],[5.828904,52.588592],[5.833313,52.586778],[5.834788,52.586772],[5.838944,52.58421],[5.839188,52.584059],[5.806733,52.585077],[5.81563,52.589539],[5.820067,52.590422],[5.820049,52.588624],[5.815622,52.58864]]],[[[6.159224,52.825994],[6.172399,52.816021],[6.172416,52.81692],[6.172957,52.816696],[6.176833,52.815093],[6.181234,52.812367],[6.181291,52.812311],[6.185449,52.808179],[6.187757,52.805885],[6.188519,52.805128],[6.18881,52.804925],[6.200072,52.797072],[6.200232,52.79696],[6.201682,52.795152],[6.19412,52.787114],[6.185127,52.781782],[6.184882,52.781618],[6.173125,52.773772],[6.169791,52.769836],[6.168583,52.768409],[6.15665,52.763993],[6.137313,52.759622],[6.132868,52.75965],[6.126912,52.757889],[6.122423,52.755221],[6.120881,52.751635],[6.121068,52.751314],[6.126639,52.741712],[6.126835,52.74153],[6.129099,52.739423],[6.129555,52.738998],[6.13378,52.732841],[6.133891,52.732679],[6.140854,52.721337],[6.141093,52.720949],[6.142542,52.719142],[6.142567,52.719079],[6.14396,52.715538],[6.144131,52.715246],[6.154022,52.698396],[6.15405,52.698351],[6.156902,52.693883],[6.157479,52.693703],[6.159844,52.692965],[6.168655,52.689312],[6.170102,52.687505],[6.170058,52.687459],[6.164075,52.681253],[6.164059,52.680354],[6.183202,52.675733],[6.184729,52.678419],[6.180722,52.682582],[6.180374,52.682943],[6.186306,52.683802],[6.187736,52.681096],[6.192106,52.677471],[6.193585,52.677461],[6.195113,52.680147],[6.196625,52.681934],[6.196988,52.68215],[6.202607,52.685489],[6.214472,52.687205],[6.21743,52.687184],[6.220388,52.687164],[6.220354,52.685366],[6.224373,52.683903],[6.237979,52.67895],[6.243912,52.679806],[6.248295,52.677078],[6.249738,52.675269],[6.248225,52.673483],[6.252607,52.670754],[6.265913,52.670657],[6.26588,52.669016],[6.265877,52.668859],[6.265859,52.667961],[6.270258,52.666131],[6.273214,52.666109],[6.274729,52.667895],[6.277722,52.66967],[6.2792,52.669659],[6.284815,52.667899],[6.285077,52.667817],[6.286518,52.666009],[6.289438,52.664189],[6.289637,52.664157],[6.295332,52.663245],[6.295351,52.664144],[6.298382,52.667716],[6.302817,52.667682],[6.305773,52.667659],[6.310208,52.667625],[6.314681,52.669388],[6.316178,52.670275],[6.323589,52.671116],[6.326527,52.670194],[6.329426,52.667474],[6.32789,52.66479],[6.326392,52.663903],[6.326335,52.661207],[6.327774,52.659398],[6.335087,52.655744],[6.339387,52.653951],[6.343876,52.652078],[6.354122,52.647501],[6.357057,52.646579],[6.360012,52.646554],[6.364405,52.644721],[6.365842,52.642911],[6.36722,52.638405],[6.370054,52.632989],[6.375882,52.629345],[6.377177,52.621244],[6.377096,52.61765],[6.384377,52.613094],[6.391821,52.615728],[6.394836,52.618399],[6.396312,52.618387],[6.402198,52.617438],[6.403674,52.617425],[6.408146,52.619185],[6.406732,52.621894],[6.409706,52.622767],[6.411162,52.621855],[6.411688,52.62169],[6.417027,52.620007],[6.41998,52.619981],[6.420022,52.621779],[6.421541,52.623563],[6.429052,52.628891],[6.432028,52.629764],[6.433483,52.628852],[6.433398,52.625257],[6.434789,52.62165],[6.434768,52.620751],[6.442778,52.617398],[6.443542,52.617078],[6.453834,52.615188],[6.459783,52.616932],[6.464411,52.62498],[6.47034,52.625825],[6.470547,52.62576],[6.473272,52.6249],[6.473205,52.622204],[6.477591,52.620366],[6.480522,52.61944],[6.487905,52.619372],[6.492357,52.62023],[6.499718,52.619262],[6.505601,52.618308],[6.512689,52.614745],[6.512892,52.614644],[6.518821,52.615486],[6.518848,52.61655],[6.518873,52.617506],[6.518933,52.619856],[6.518936,52.619979],[6.515174,52.646083],[6.515179,52.646254],[6.51522,52.64788],[6.529865,52.655646],[6.530206,52.655827],[6.548177,52.664642],[6.548931,52.664937],[6.552659,52.666396],[6.581687,52.670503],[6.582344,52.670596],[6.604531,52.673953],[6.604617,52.673966],[6.612034,52.674788],[6.612551,52.674783],[6.614991,52.674758],[6.629674,52.67101],[6.647003,52.665513],[6.647258,52.665431],[6.655999,52.662657],[6.656049,52.662641],[6.686251,52.654382],[6.686848,52.654219],[6.701544,52.65136],[6.702019,52.651239],[6.708422,52.649598],[6.708878,52.649481],[6.705842,52.646818],[6.705707,52.642325],[6.704094,52.63625],[6.704042,52.636051],[6.700927,52.630692],[6.700873,52.628895],[6.70235,52.628879],[6.70823,52.627915],[6.711211,52.62878],[6.717037,52.626019],[6.722807,52.621459],[6.728549,52.616001],[6.722126,52.598994],[6.718907,52.590052],[6.718969,52.590005],[6.762617,52.566706],[6.76536,52.56524],[6.766806,52.564324],[6.76675,52.562527],[6.753396,52.559984],[6.740208,52.562832],[6.728438,52.563865],[6.725462,52.562999],[6.720712,52.552265],[6.716208,52.549619],[6.698598,52.552512],[6.698207,52.55254],[6.684518,52.553526],[6.683881,52.553572],[6.680959,52.554503],[6.695042,52.535606],[6.695143,52.53547],[6.70653,52.52186],[6.698123,52.486895],[6.718516,52.479476],[6.724349,52.477612],[6.753395,52.464696],[6.757809,52.464645],[6.758089,52.464584],[6.775352,52.460845],[6.822458,52.461183],[6.823146,52.461148],[6.845967,52.459997],[6.854823,52.460787],[6.853025,52.45092],[6.854495,52.450902],[6.854532,52.450911],[6.861909,52.452608],[6.889703,52.447764],[6.907197,52.443046],[6.942268,52.436298],[6.948212,52.438018],[6.952687,52.439757],[6.95289,52.439876],[6.963203,52.445911],[6.975516,52.461029],[6.978652,52.466381],[6.987642,52.470755],[6.994836,52.466163],[6.994738,52.463467],[7.000328,52.4553],[7.005882,52.446234],[7.008494,52.437209],[7.008513,52.437157],[7.011171,52.42998],[7.022732,52.424427],[7.028245,52.414461],[7.028249,52.414457],[7.03666,52.403556],[7.052719,52.400635],[7.055725,52.40239],[7.060065,52.400531],[7.059929,52.396937],[7.064079,52.391551],[7.064132,52.391483],[7.072261,52.373387],[7.072943,52.3527],[7.057796,52.33946],[7.057761,52.33943],[7.056058,52.33316],[7.048421,52.325177],[7.048253,52.320684],[7.048085,52.316191],[7.04362,52.314455],[7.042053,52.31178],[7.038417,52.307976],[7.034423,52.303795],[7.026696,52.293114],[7.02786,52.287154],[7.027929,52.286804],[7.030693,52.28227],[7.03066,52.281372],[7.027631,52.278717],[7.02893,52.274204],[7.033258,52.272345],[7.037419,52.265994],[7.037596,52.265704],[7.042943,52.256926],[7.065829,52.242219],[7.062664,52.23597],[7.04041,52.228192],[7.027174,52.226579],[7.019824,52.225781],[7.008222,52.228637],[7.008216,52.228638],[7.003859,52.229597],[6.990623,52.22798],[6.981618,52.221808],[6.979962,52.216436],[6.979951,52.216129],[6.979837,52.212948],[6.979833,52.212842],[6.975253,52.207509],[6.972216,52.203973],[6.96762,52.198621],[6.963106,52.195086],[6.963081,52.194375],[6.963074,52.194187],[6.963011,52.19239],[6.952397,52.181742],[6.934761,52.179278],[6.912772,52.177766],[6.906864,52.176044],[6.90668,52.170652],[6.8903,52.161872],[6.884335,52.158352],[6.882813,52.156573],[6.873299,52.134217],[6.874669,52.131503],[6.865789,52.128018],[6.856821,52.121837],[6.843623,52.120203],[6.823155,52.119555],[6.76473,52.119353],[6.763982,52.119362],[6.76181,52.119387],[6.716525,52.119007],[6.708211,52.121684],[6.707845,52.121802],[6.697704,52.124612],[6.678774,52.126619],[6.673236,52.128399],[6.672985,52.12848],[6.663199,52.131188],[6.66284,52.131287],[6.674834,52.141945],[6.673787,52.15634],[6.675352,52.159919],[6.674021,52.164429],[6.672717,52.166105],[6.672611,52.166242],[6.649621,52.173623],[6.64943,52.173684],[6.645095,52.175529],[6.640508,52.168385],[6.634787,52.172941],[6.630427,52.173886],[6.627478,52.173018],[6.621532,52.169484],[6.61851,52.16592],[6.618094,52.165798],[6.612614,52.164183],[6.608254,52.165128],[6.603992,52.169667],[6.604017,52.170565],[6.607038,52.17413],[6.591807,52.182932],[6.591201,52.183282],[6.58407,52.182481],[6.583867,52.182458],[6.555969,52.178243],[6.555772,52.178263],[6.518256,52.182186],[6.518049,52.182208],[6.512201,52.182264],[6.496006,52.177922],[6.493104,52.178848],[6.490225,52.180673],[6.480056,52.183465],[6.478784,52.184736],[6.470061,52.193445],[6.470203,52.199279],[6.470214,52.199737],[6.461481,52.201614],[6.457115,52.202553],[6.456872,52.202784],[6.454254,52.205276],[6.452834,52.207087],[6.452575,52.207374],[6.447132,52.213431],[6.429826,52.224372],[6.424181,52.233411],[6.416966,52.237969],[6.417025,52.240521],[6.417028,52.240665],[6.417091,52.243362],[6.40247,52.244387],[6.390736,52.243588],[6.383455,52.245448],[6.382031,52.247258],[6.377822,52.245586],[6.377599,52.245497],[6.36729,52.242886],[6.351184,52.243019],[6.342264,52.236799],[6.339336,52.236822],[6.339144,52.227834],[6.325971,52.22794],[6.321561,52.227076],[6.298124,52.22636],[6.296734,52.229966],[6.293843,52.231786],[6.293218,52.231715],[6.286506,52.230944],[6.277687,52.229213],[6.271908,52.227492],[6.271797,52.227459],[6.270333,52.22747],[6.261586,52.229333],[6.260998,52.229247],[6.255714,52.228477],[6.248395,52.228531],[6.239613,52.228594],[6.235256,52.230424],[6.229401,52.230465],[6.223529,52.229608],[6.217724,52.232346],[6.215537,52.232361],[6.21507,52.232259],[6.214983,52.232365],[6.214797,52.232367],[6.21629,52.229508],[6.217624,52.226953],[6.211802,52.228792],[6.205013,52.230234],[6.203053,52.23065],[6.189862,52.229842],[6.183451,52.234673],[6.18264,52.235284],[6.175288,52.233536],[6.174771,52.233434],[6.166989,52.231898],[6.166473,52.231796],[6.164962,52.229109],[6.163483,52.22822],[6.166348,52.224606],[6.169227,52.22189],[6.166253,52.219213],[6.164774,52.218324],[6.163326,52.219232],[6.163389,52.222827],[6.161957,52.224634],[6.156133,52.22647],[6.155866,52.226555],[6.147397,52.229224],[6.141634,52.234654],[6.143174,52.239139],[6.15191,52.243514],[6.152035,52.243576],[6.154995,52.245355],[6.153577,52.248061],[6.150679,52.249878],[6.144775,52.247219],[6.144054,52.247491],[6.137499,52.249962],[6.137233,52.250018],[6.124364,52.252741],[6.125918,52.258125],[6.12723,52.261948],[6.127395,52.262428],[6.127457,52.26261],[6.124557,52.264426],[6.123311,52.270197],[6.123196,52.270727],[6.121883,52.273227],[6.121776,52.273433],[6.113072,52.27888],[6.111651,52.281585],[6.111782,52.289675],[6.105992,52.294204],[6.104599,52.298707],[6.101724,52.30232],[6.100244,52.30143],[6.091432,52.300584],[6.088514,52.301501],[6.084268,52.302396],[6.08413,52.302425],[6.081366,52.313228],[6.079984,52.31863],[6.072636,52.317774],[6.066783,52.318707],[6.066838,52.322302],[6.069785,52.323184],[6.071252,52.323175],[6.074311,52.331248],[6.077399,52.341118],[6.076001,52.34562],[6.076099,52.351912],[6.079063,52.353692],[6.087884,52.354539],[6.095242,52.358072],[6.095281,52.358091],[6.090934,52.361712],[6.080685,52.363571],[6.077776,52.365385],[6.079329,52.37077],[6.082308,52.373449],[6.114704,52.378648],[6.121377,52.380234],[6.122077,52.3804],[6.123576,52.382189],[6.123764,52.382468],[6.126589,52.386664],[6.12649,52.38712],[6.125224,52.392965],[6.129737,52.399229],[6.130077,52.399635],[6.130515,52.399621],[6.130821,52.399611],[6.131166,52.400899],[6.13117,52.400914],[6.131174,52.400929],[6.131182,52.400945],[6.131188,52.40096],[6.131194,52.400971],[6.131205,52.400997],[6.131216,52.401023],[6.123919,52.402861],[6.119526,52.403787],[6.111465,52.408817],[6.110797,52.409234],[6.115309,52.415499],[6.113883,52.418204],[6.113928,52.4209],[6.118442,52.427165],[6.11996,52.434026],[6.120031,52.434346],[6.114223,52.438876],[6.109855,52.4416],[6.105471,52.443424],[6.102573,52.446138],[6.10419,52.455117],[6.102907,52.46681],[6.100167,52.471117],[6.100037,52.471322],[6.089834,52.477675],[6.070795,52.484078],[6.064056,52.48911],[6.063516,52.489513],[6.062082,52.491306],[6.062071,52.491319],[6.057763,52.498534],[6.054845,52.500349],[6.054792,52.500376],[6.046075,52.504892],[6.045781,52.505029],[6.040223,52.507621],[6.028478,52.510381],[6.025493,52.507701],[6.024007,52.50681],[6.019575,52.505935],[6.015169,52.506857],[6.012223,52.506873],[6.007779,52.505098],[6.001837,52.501534],[5.984006,52.48994],[5.983965,52.489912],[5.971006,52.481265],[5.970635,52.481017],[5.966172,52.477444],[5.966005,52.47761],[5.958905,52.48467],[5.951543,52.484705],[5.947104,52.482929],[5.946889,52.482799],[5.938203,52.477577],[5.926394,52.474935],[5.920931,52.483457],[5.920615,52.483949],[5.909017,52.499282],[5.901737,52.506504],[5.901638,52.506581],[5.884212,52.520062],[5.883857,52.520282],[5.879822,52.522776],[5.876875,52.522789],[5.866531,52.520134],[5.866541,52.521033],[5.863613,52.522842],[5.863671,52.528235],[5.86371,52.531831],[5.859404,52.542634],[5.858353,52.546294],[5.85656,52.552532],[5.852184,52.557044],[5.849272,52.560651],[5.84341,52.564269],[5.841954,52.566072],[5.840525,52.570571],[5.836154,52.575981],[5.831746,52.577795],[5.830271,52.577801],[5.827347,52.580508],[5.818503,52.581439],[5.814102,52.584152],[5.840645,52.582256],[5.841588,52.583943],[5.841629,52.584018],[5.842148,52.584947],[5.831882,52.591277],[5.834907,52.598456],[5.833431,52.598462],[5.831982,52.601164],[5.840941,52.611017],[5.84538,52.611899],[5.897141,52.618879],[5.900105,52.619765],[5.906013,52.619739],[5.905991,52.617942],[5.916285,52.614301],[5.917751,52.613396],[5.920704,52.613383],[5.926622,52.614255],[5.932539,52.615127],[5.939945,52.61689],[5.945886,52.619559],[5.956258,52.622206],[5.956281,52.623999],[5.956321,52.624008],[5.956321,52.624039],[5.956322,52.624052],[5.956322,52.624104],[5.956444,52.624198],[5.956506,52.624272],[5.957781,52.625794],[5.959258,52.625787],[5.969574,52.623939],[5.982878,52.624772],[5.987321,52.625649],[5.987358,52.628345],[5.990287,52.626533],[6.011131,52.63811],[6.019969,52.636266],[6.019982,52.637164],[6.020678,52.638398],[6.020846,52.638697],[6.020879,52.638755],[6.02092,52.638827],[6.021498,52.639853],[6.021537,52.642549],[6.018608,52.644362],[6.008379,52.652506],[6.005436,52.65342],[6.002493,52.654334],[5.998284,52.656072],[5.998084,52.656154],[5.986272,52.657113],[5.985757,52.657432],[5.985337,52.657691],[5.984993,52.657904],[5.984757,52.65805],[5.981874,52.659832],[5.978942,52.661644],[5.967668,52.66774],[5.9672,52.667994],[5.959819,52.668928],[5.953906,52.668956],[5.942112,52.671708],[5.940634,52.671715],[5.940611,52.669918],[5.936176,52.669938],[5.934869,52.671558],[5.93472,52.671743],[5.933274,52.674446],[5.934775,52.676236],[5.940236,52.680321],[5.946719,52.685169],[5.946822,52.685231],[5.9497,52.686953],[5.952647,52.68604],[5.96307,52.691383],[5.966076,52.694964],[5.966135,52.699457],[5.958808,52.704886],[5.958222,52.705612],[5.955895,52.708495],[5.952994,52.713003],[5.952199,52.713214],[5.943101,52.715633],[5.942668,52.715748],[5.942683,52.71688],[5.941338,52.720886],[5.941334,52.720894],[5.941333,52.720901],[5.931118,52.73917],[5.922541,52.752468],[5.922397,52.752692],[5.90622,52.76265],[5.900294,52.762675],[5.898823,52.763581],[5.898646,52.763689],[5.891466,52.768106],[5.891109,52.768298],[5.879682,52.774447],[5.862158,52.781634],[5.861976,52.781709],[5.852864,52.784517],[5.850156,52.78535],[5.836824,52.7863],[5.836677,52.786293],[5.819026,52.785467],[5.819061,52.789062],[5.811692,52.793583],[5.811645,52.793612],[5.804322,52.798103],[5.795509,52.807121],[5.810418,52.815158],[5.819628,52.818303],[5.820835,52.818445],[5.82082,52.816918],[5.824759,52.814502],[5.825243,52.814206],[5.829693,52.814189],[5.834125,52.812375],[5.837064,52.809668],[5.837036,52.806972],[5.842346,52.806307],[5.843989,52.808065],[5.844448,52.808425],[5.844851,52.808551],[5.845075,52.808573],[5.845342,52.80836],[5.843889,52.806114],[5.844442,52.806045],[5.851267,52.806844],[5.851867,52.806915],[5.860756,52.805981],[5.869635,52.804148],[5.87703,52.80232],[5.879206,52.802311],[5.879996,52.802308],[5.882992,52.804992],[5.897864,52.808524],[5.900883,52.813005],[5.908321,52.814771],[5.91272,52.81652],[5.912793,52.816548],[5.915814,52.821029],[5.924679,52.824552],[5.92476,52.824584],[5.923364,52.831781],[5.926365,52.834464],[5.932323,52.836234],[5.942567,52.837072],[5.942723,52.837085],[5.947199,52.838862],[5.956045,52.834326],[5.957541,52.835217],[5.956104,52.838819],[5.959096,52.840603],[5.97249,52.843234],[5.976834,52.835124],[5.984156,52.827897],[5.984302,52.827671],[5.986964,52.823541],[5.987062,52.823389],[5.98706,52.823236],[5.987358,52.822488],[5.990017,52.822475],[5.99443,52.819756],[5.994548,52.819684],[5.997372,52.817944],[5.998856,52.817936],[6.009291,52.821477],[6.025636,52.823188],[6.031421,52.816022],[6.031465,52.815967],[6.044883,52.820387],[6.053672,52.824568],[6.05368,52.824639],[6.053999,52.825164],[6.057277,52.827112],[6.05745,52.826817],[6.057118,52.826206],[6.059829,52.827494],[6.058442,52.829214],[6.058373,52.8293],[6.055446,52.832013],[6.052574,52.838321],[6.055101,52.838815],[6.055402,52.838874],[6.061506,52.840068],[6.061905,52.840066],[6.080801,52.839957],[6.083783,52.840839],[6.088294,52.844408],[6.09551,52.846106],[6.095744,52.846161],[6.119645,52.855005],[6.129931,52.84865],[6.131354,52.845046],[6.150415,52.831443],[6.150998,52.831083],[6.15204,52.830439],[6.153823,52.829335],[6.154734,52.828772],[6.159224,52.825994]]]]}}]}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(0)),o=i(n(1)),u=i(n(102));t.default=function(e){var t="chart-"+e.audienceCategory.category.toLowerCase();return l.useEffect((function(){$("body").popover({selector:'[data-toggle="popover"]',container:"body",html:!0,trigger:"hover"})}),[]),l.useEffect((function(){!function(e,t,n){if("bar"===n.type||"donut"===n.type){var r=u.chartColumns(n,t),a=u.createAttributeGraph(e,{property:t.label},o.assign({},{data:{columns:r,order:"desc"}},n.config));c3.generate(a)}else if("mosaic"===n.type)u.mosaicGraph(e,n,t);else if("map"===n.type){u.choroplethMap(e,n,t,{width:600,height:600,scale:7e3})}}("#"+t,e.property,e.audienceCategory)}),[JSON.stringify(e)]),l.default.createElement("div",{id:t,className:"text-center"})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=i(n(1)),d=i(n(4)),f=i(n(8)),p=i(n(40)),m=u(n(299));t.default=function(e){var t=s.useState({}),n=t[0],r=t[1];s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n,a;return o(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,d.Get({path:"/api/attributes/statistics",qs:{scope:e.options.scope,scopeId:e.options.scopeId,video:e.videoMode.toString()}})];case 1:return t=i.sent(),n=function(e){var t={};return c.forEach(e,(function(e,n){var r=e.filter((function(e){return e.chartTypes.length>0}));r.length>0&&(t[n]=r)})),t}(t),r(n),[3,3];case 2:return a=i.sent(),console.log(a),[3,3];case 3:return[2]}}))}))}()}),[e.videoMode]);var a=f.attributeIdOptions(n),i=e.rights.VIEW_FINANCIALS?[{col:"bids",label:"bids",type:"number"},{col:"impressions",label:"impressions",type:"number"},{col:"clicks",label:"clicks",type:"number"},{col:"conversions",label:"conversions",type:"number"},{col:"ctr",label:"ctr",type:"perc"},{col:"postClickConversions",label:"post click conversions",type:"number"},{col:"postViewConversions",label:"post view conversions",type:"number"},{col:"costs",label:"costs",type:"money"},{col:"cpc",label:"cpc",type:"money"},{col:"cpm",label:"cpm",type:"money"},{col:"epc",label:"epc",type:"money"},{col:"epm",label:"epm",type:"number"},{col:"expenses",label:"expenses",type:"money"},{col:"profit",label:"profit",type:"money"},{col:"profitPercentage",label:"profit %",type:"perc"},{col:"revenue",label:"revenue",type:"money"},{col:"uniqueClicks",label:"unique clicks",type:"number"}]:[{col:"bids",label:"bids",type:"number"},{col:"impressions",label:"impressions",type:"number"},{col:"clicks",label:"clicks",type:"number"},{col:"conversions",label:"conversions",type:"number"},{col:"ctr",label:"ctr",type:"perc"},{col:"postClickConversions",label:"post click conversions",type:"number"},{col:"postViewConversions",label:"post view conversions",type:"number"},{col:"costs",label:"costs",type:"money"},{col:"cpc",label:"cpc",type:"money"},{col:"cpm",label:"cpm",type:"money"},{col:"epc",label:"epc",type:"money"},{col:"epm",label:"epm",type:"number"},{col:"uniqueClicks",label:"unique clicks",type:"number"}];return s.default.createElement("div",{className:"col-sm-12 pt-3 mb-2"},s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-6 mb-2"},s.default.createElement(m.default,{id:"attribute-graph-1",attributes:a,metrics:i,settings:{attributeId:p.Attributes.DEVICE_TYPE,selectedMetric:{col:"impressions",label:"impressions",type:"number"},chartType:"donut"},options:e.options})),s.default.createElement("div",{className:"col-lg-6 mb-2"},s.default.createElement(m.default,{id:"attribute-graph-2",attributes:a,metrics:i,settings:{attributeId:p.Attributes.DEVICE_TYPE,selectedMetric:{col:"impressions",label:"impressions",type:"number"},chartType:"donut"},options:e.options})),s.default.createElement("div",{className:"col-lg-6 mb-2"},s.default.createElement(m.default,{id:"attribute-graph-3",attributes:a,metrics:i,settings:{attributeId:p.Attributes.DEVICE_TYPE,selectedMetric:{col:"cpc",label:"cpc",type:"money"},chartType:"bar"},options:e.options})),s.default.createElement("div",{className:"col-lg-6 mb-2"},s.default.createElement(m.default,{id:"attribute-graph-4",attributes:a,metrics:i,settings:{attributeId:p.Attributes.DEVICE_TYPE,selectedMetric:{col:"ctr",label:"ctr",type:"perc"},chartType:"bar"},options:e.options}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=u(n(9)),f=i(n(1)),p=u(n(25)),m=i(n(4)),h=u(n(3)),g=u(n(5)),v=u(n(10)),b=u(n(300));t.default=function(e){var t,n=s.useState(e.settings.attributeId),r=n[0],a=n[1],i=s.useState(e.settings.selectedMetric),u=i[0],y=i[1],E=s.useState(e.settings.chartType),_=E[0],w=E[1],S=s.useState(0),P=S[0],C=S[1],O=s.useState(!1),x=O[0],I=O[1],N=s.useState(!1),A=N[0],j=N[1],M=s.useState([]),k=M[0],F=M[1],D=s.useState(!1),T=D[0],R=D[1],B=s.useState(""),G=B[0],L=B[1],V=s.useRef(null),z=(t=e.attributes.concat(),f.flatMap(t,(function(e){return e.options})).find((function(e){return e.value===r}))),q=e.metrics.map((function(e){return{value:e.col,label:e.label||e.col}})),Y=q.find((function(e){return e.value===u.col})),U=function(e){return(f.get(e,"chartTypes")||[]).map((function(e){return{value:e,label:e}}))}(z);function H(){V.current&&V.current.abort()}function W(e){switch(e){case"donut":return"pie-chart";case"bar":return"bar-chart";case"table":return"list"}}s.useEffect((function(){return H}),[]),s.useEffect((function(){a(e.settings.attributeId),y(e.settings.selectedMetric)}),[JSON.stringify(e.settings)]),s.useEffect((function(){var t=U.findIndex((function(t){return t.value===e.settings.chartType}));t>-1?(w(e.settings.chartType),C(t)):(w(U.length>0?U[0].value:"donut"),C(0))}),[JSON.stringify(U)]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n,a,i;return o(this,(function(l){switch(l.label){case 0:I(!0),l.label=1;case 1:return l.trys.push([1,3,,4]),H(),V.current=new AbortController,t=function(){var t={scope:e.options.scope,attributeId:r,startDate:e.options.startDate,endDate:e.options.endDate,limit:p.default.MAX_API_LIMIT,videoMetrics:"false",simple:"false",aggregator:"name"};void 0!==e.options.scopeId&&(t.scopeId=e.options.scopeId);return t}(),[4,m.Get({path:"/api/statistics",qs:t,signal:V.current.signal})];case 2:return n=l.sent(),a=f.get(n,"statisticList")||[],F(a),I(!1),[3,4];case 3:return i=l.sent(),console.log(i),"AbortError"===i.name?(R(!1),L("")):(R(!0),L("Error loading statistics."),I(!1)),[3,4];case 4:return[2]}}))}))}()}),[r,JSON.stringify(e.options)]),s.useEffect((function(){var t,n;A&&(t=""+e.id,n=$("#"+t+"-png"),setTimeout((function(){!function(e){var t=e.find("svg");t.length>0&&(t.find(".domain").css("fill","none"),t.find(".c3-chart-arc text").css({fill:"#fff",fontSize:"30px",opacity:1}),t.find(".c3 .tick text, .c3-legend-item, .c3-legend-item text, .c3-chart-arcs-title").css({fontSize:"30px"}),function(e){if(e.length>0){var t=e[0],n=document.createElement("canvas");n.width=t.clientWidth,n.height=t.clientHeight,t.parentNode.insertBefore(n,t),t.parentNode.removeChild(t);var r=document.createElement("div");r.appendChild(t),canvg(n,r.innerHTML,{ignoreDimensions:!0,scaleWidth:n.width,scaleHeight:n.height});var a=document.createElement("img");a.src=n.toDataURL("image/png"),n.parentNode.insertBefore(a,n),n.parentNode.removeChild(n)}}(t))}(n),html2canvas(n,{allowTaint:!0,onrendered:function(e){var t=e.toDataURL("image/png");download(t,"chart.png","image/png"),j(!1)}})}),300))}),[A]);return s.default.createElement("div",{className:"card h-100"},s.default.createElement("div",{className:"attribute-graph-settings"},s.default.createElement("div",null,s.default.createElement("div",{className:"width-200 d-inline-block"},s.default.createElement(d.default,{inputId:"react-select-analysis-metric-"+e.id,className:"react-select-container",classNamePrefix:"react-select",name:"analysis-metric-select",value:Y,clearable:!1,onChange:function(t){var n=e.metrics.find((function(e){return e.col===t.value}));y(n)},options:q})),s.default.createElement("div",{style:{width:"40px"},className:"d-inline-block text-center align-top pt-1"},"by"),s.default.createElement("div",{className:"width-200 d-inline-block"},s.default.createElement(d.default,{inputId:"react-select-analysis-attribute-"+e.id,className:"react-select-container",classNamePrefix:"react-select",name:"analysis-attribute-select",value:z,clearable:!1,onChange:function(e){a(e.value)},options:e.attributes}))),s.default.createElement("div",null,s.default.createElement("button",{onClick:function(){j(!0)},type:"button",disabled:A,className:"btn btn-primary btn-sm mr-2"},s.default.createElement(h.default,{name:"download"})," PNG"),s.default.createElement(c.ButtonGroup,{size:"sm"},U.map((function(e,t){return s.default.createElement(c.Button,{className:P===t?"active":"",onClick:function(){w(e.value),C(t)},variant:"outline-secondary"},s.default.createElement(h.default,{name:W(e.value)}))}))))),s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-2"},s.default.createElement(g.default,{visible:x}),!x&&!T&&s.default.createElement(s.Fragment,null,s.default.createElement(b.default,{id:e.id,data:k,metric:u,chartType:_,attributeLabel:f.get(z,"label")||"",png:!1}),A&&s.default.createElement("div",{className:"graph-png-container"},s.default.createElement(b.default,{id:e.id+"-png",data:k,metric:u,chartType:_,attributeLabel:f.get(z,"label")||"",png:!0}))),T&&s.default.createElement(v.default,{message:G}))))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(0)),l=a(n(301)),o=a(n(302));t.default=function(e){return"table"===e.chartType?i.default.createElement(o.default,r({},e)):i.default.createElement(l.default,r({},e))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),i=r(n(56));t.default=function(e){function t(t){return"donut"==t.type?function(t){var n={data:{type:"donut"},donut:{title:e.attributeLabel},axis:{x:{show:!1}}};return $.extend(!0,{size:{height:275},padding:{top:0,right:20,bottom:0,left:40},color:{pattern:["#089bc2","#96c03d","#f58129","#a62174","#1f3364","#ccc"]},legend:{show:!0},point:{show:!1}},n,t)}(t):"bar"==t.type?function(e){return $.extend(!0,{size:{height:275},padding:{top:0,right:20,bottom:0,left:40},color:{pattern:["#089bc2","#96c03d","#f58129","#a62174","#1f3364","#ccc"]},legend:{show:!0},point:{show:!1}},{padding:{top:0,right:20,bottom:0,left:60},legend:{show:!1},data:{type:"bar",x:"x"},axis:{x:{type:"category",tick:{rotate:60,multiline:!1}}}},e)}(t):void 0}var n,r,l=(n=function(){if("donut"===e.chartType)return e.data.map((function(t){return[t.displayName,t[e.metric.col]]}));if("bar"===e.chartType){var t=[["x"],[e.metric.col]];return e.data.forEach((function(n){t[0].push(n.displayName),t[1].push(n[e.metric.col])})),t}}(),r=e.png?"donut"===e.chartType?{width:1e3,height:1e3}:{width:1e3,height:500}:{height:300},t({type:e.chartType,size:r,data:{columns:n}}));return a.default.createElement(i.default,{id:e.id,height:l.size.height+"px",options:l})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(0)),u=i(n(22));t.default=function(e){var t=e.data.sort((function(t,n){return n[e.metric.col]-t[e.metric.col]}));var n=e.png?"attribute-list png":"attribute-list";return o.default.createElement("div",{className:n,id:e.id},o.default.createElement("table",{className:"table table-striped table-borderless"},o.default.createElement("tbody",null,t.map((function(t,n){return o.default.createElement("tr",null,o.default.createElement("td",{className:"text-left"},t.displayName),o.default.createElement("td",{className:"text-right"},u.getFormat(t[e.metric.col],e.metric.type)))})))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=n(2),f=i(n(1)),p=i(n(4)),m=i(n(36)),h=u(n(10)),g=u(n(5)),v=u(n(304)),b=u(n(3)),y=u(n(12)),E=u(n(52));t.default=function(e){var t=c.useHistory(),n=s.useContext(y.default).data,r=f.get(n,"campaign"),a=[{col:"segmentName",label:"name",align:"left"},{col:"segmentType",label:"type"},{col:"countTargetedUnique",label:"visitors post targeting",type:"number",align:"right"},{col:"postViewCountUnique",label:"visited post view",type:"number",align:"right"},{col:"postClickCountUnique",label:"visited post click",type:"number",align:"right"}],i=s.useState(!0),u=i[0],_=i[1],w=s.useState([]),S=w[0],P=w[1],C=s.useState(!1),O=C[0],x=C[1],I=s.useState(!1),N=I[0],A=I[1],j=s.useState(!1),M=j[0],k=j[1],F=s.useState(""),D=F[0],T=F[1],R=s.useRef(null);function B(){R.current&&R.current.abort()}function G(t){return l(this,void 0,void 0,(function(){var n,r,a,i,l,u;return o(this,(function(o){switch(o.label){case 0:return n=t.daterange.startDate.format("YYYY-MM-DD"),r=t.daterange.endDate.format("YYYY-MM-DD"),a={startDate:n,endDate:r},[4,p.Get({path:"/api/campaigns/"+e.options.scopeId+"/segmentstats",qs:a})];case 1:return i=o.sent(),l=t.selectedMetrics.map((function(e){return m.getBoldCell(e.label||e.col)})),u=[l],i.forEach((function(e){var n=[];t.selectedMetrics.forEach((function(t){var r=m.format(t),a=m.cellFormatter(e,t),i=m.getCell(a,null,r);n.push(i)})),u.push(n)})),m.save(u,"Segment statistics","SegmentStats_"+n+"_"+r),[2]}}))}))}s.useEffect((function(){return B}),[]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:_(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),B(),R.current=new AbortController,[4,p.Get({path:"/api/campaigns/"+e.options.scopeId+"/segmentstats",qs:{startDate:e.options.startDate,endDate:e.options.endDate},signal:R.current.signal})];case 2:return t=r.sent(),P(t),_(!1),[3,4];case 3:return n=r.sent(),console.log(n),"AbortError"===n.name?(k(!1),T("")):(k(!0),T("Error loading segment insights."),_(!1)),[3,4];case 4:return[2]}}))}))}()}),[JSON.stringify(e.options)]);return M?s.default.createElement("div",{className:"col-sm-12 pt-3 mb-2"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(h.default,{message:D})))):s.default.createElement("div",{className:"col-sm-12 pt-3 mb-2"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",{className:"pull-left"},"Segment insights"),s.default.createElement("div",{className:"table-btn-container"},s.default.createElement(d.Button,{variant:"primary",size:"sm",className:"mr-2",onClick:function(){x(!0)}},s.default.createElement(b.default,{name:"download"})," REPORT"),e.rights.MANAGE_SEGMENTS&&s.default.createElement("button",{className:"btn btn-linkbutton btn-sm mr-2",onClick:function(){t.push("/segments/advertiser/"+r.advertiserId)}},s.default.createElement(b.default,{name:"plus"})," MANAGE SEGMENTS")),s.default.createElement(g.default,{visible:u}),!u&&s.default.createElement(v.default,{records:S,metrics:a,user:e.user}),s.default.createElement(E.default,{id:"segment-insights-report",show:O,downloading:N,metrics:a,onClose:function(){x(!1),A(!1)},onSubmit:function(e){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return A(!0),[4,G(e)];case 1:return t.sent(),A(!1),x(!1),[2]}}))}))}})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=l(n(1)),c=o(n(14)),d=l(n(23)),f=o(n(17)),p=l(n(15)),m=o(n(3));t.default=function(e){var t="segment-insights-table",n=u.useState(1),a=n[0],i=n[1],l=u.useState(p.getInitialSizePerPage(t,e.user)),o=l[0],h=l[1],g=u.useState({dataField:"id",order:"asc"}),v=g[0],b=g[1];function y(){var t=e.metrics.map((function(e){return e.col}));return e.records.map((function(e){return s.pick(e,t)}))}var E=function(e,t){b({dataField:e,order:t})},_=function(e,t){i(e)},w=function(n,r){p.storeSizePerPage(n,t,e.user),h(n)},S=d.Search.SearchBar,P=y(),C=e.metrics.map((function(e){return{dataField:e.col,text:e.label||e.col,align:e.align||"left",headerAlign:e.align||"left",sort:!0,onSort:E,sortCaret:p.columnSort,formatter:p.getFormatter(e.type)}})),O=p.getSizePerPage(o,P.length),x=P.length||30;return u.default.createElement(d.default,{keyField:"id",data:P,columns:C,search:!0},(function(e){return u.default.createElement("div",null,u.default.createElement("div",{className:"search-label-container"},u.default.createElement(m.default,{name:"search"}),u.default.createElement(S,r({},e.searchProps,{placeholder:"Filter records",tableId:t}))),u.default.createElement(c.default,r({},e.baseProps,{id:t,bordered:!1,hover:!0,classes:"table-borderless",striped:!0,keyField:"id",data:P,columns:C,defaultSorted:[v],pagination:f.default({page:(n=p.getLastPage(y(),o),a>n?n:a),sizePerPage:O,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:x}],onPageChange:_,onSizePerPageChange:w})})));var n}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(29)),s=l(n(30)),c=l(n(31)),d=i(n(13)),f=l(n(12)),p=l(n(10)),m=l(n(26)),h=l(n(74)),g=i(n(8)),v=l(n(16)),b=l(n(306));t.default=function(){var e=o.useContext(f.default).data,t=d.getRights(e.rights),n=o.useContext(v.default),r=g.getMainRole(n),a=g.getVideoMode(n,r),i=o.useState(a),l=i[0],y=i[1];return t.VIEW_ADS?o.default.createElement(o.Fragment,null,o.default.createElement(u.default,null,o.default.createElement("div",{className:"col-sm-9"},o.default.createElement(s.default,null),o.default.createElement(c.default,{id:"breadcrumb",minScope:"advertiser"})),o.default.createElement("div",{className:"col-sm-3"},o.default.createElement("div",{className:"pull-right"},o.default.createElement(h.default,{id:"video-mode",label:"Video mode",checked:l,onChange:function(e){y(e),g.storeVideoMode(n,r,e)}})))),o.default.createElement(m.default,{title:"Ad vault"}),o.default.createElement(b.default,{videoMode:l})):o.default.createElement(p.default,{message:"Access forbidden"})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=n(2),f=i(n(1)),p=u(n(19)),m=i(n(20)),h=i(n(4)),g=i(n(8)),v=i(n(13)),b=u(n(16)),y=u(n(12)),E=u(n(5)),_=u(n(307)),w=u(n(10)),S=u(n(27)),P=u(n(308)),C=u(n(96)),O=u(n(309)),x=u(n(314)),I=u(n(3)),N=u(n(75));t.default=function(e){var t=c.useParams(),n=t.scope,r=t.scopeId,a=g.scopedParam({scope:n,scopeId:r}),i=s.useContext(y.default).data,u=v.getRights(i.rights),A=s.useContext(b.default),j=s.useState([]),M=j[0],k=j[1],F=s.useState(null),D=F[0],T=F[1],R=s.useState([]),B=R[0],G=R[1],L=s.useState(!1),V=L[0],z=L[1],q=s.useState(!1),Y=q[0],U=q[1],H=s.useState(!1),W=H[0],J=H[1],X=s.useState(-1),K=X[0],Z=X[1],$=s.useState(-1),Q=$[0],ee=$[1],te=s.useState(-1),ne=te[0],re=te[1],ae=s.useState(null),ie=ae[0],le=ae[1],oe=s.useState("active"),ue=oe[0],se=oe[1],ce=s.useState("active"),de=ce[0],fe=ce[1],pe=s.useState(!1),me=pe[0],he=pe[1],ge=s.useState(!1),ve=ge[0],be=ge[1],ye=s.useState(!1),Ee=ye[0],_e=ye[1],we=s.useState(!1),Se=we[0],Pe=we[1],Ce=s.useState(-1),Oe=Ce[0],xe=Ce[1],Ie=s.useState(!1),Ne=Ie[0],Ae=Ie[1],je=s.useState(""),Me=je[0],ke=je[1],Fe=s.useState(!1),De=Fe[0],Te=Fe[1],Re=s.useState([]),Be=Re[0],Ge=Re[1],Le=s.useState(!1),Ve=Le[0],ze=Le[1],qe=s.useState(!1),Ye=qe[0],Ue=qe[1],He=s.useState(!1),We=He[0],Je=He[1],Xe=s.useState(""),Ke=Xe[0],Ze=Xe[1],$e=s.useState(""),Qe=$e[0],et=$e[1],tt=s.useRef(null),nt=s.useRef(null),rt=s.useRef(null),at=s.useRef(null);function it(){return l(this,void 0,void 0,(function(){var e,t,n;return o(this,(function(r){switch(r.label){case 0:z(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),ot(nt.current),nt.current=new AbortController,e=f.assign({},a,{active:"true"}),[4,h.Get({path:"/api/ads",qs:e,signal:nt.current.signal})];case 2:return t=r.sent(),k(t),Ue(!1),Ze(""),z(!1),[3,4];case 3:return n=r.sent(),console.log(n),"AbortError"===n.name?(Ue(!1),Ze("")):(Ue(!0),Ze("Error loading active ads."),z(!1)),[3,4];case 4:return[2]}}))}))}function lt(){return l(this,void 0,void 0,(function(){var e,t,n;return o(this,(function(r){switch(r.label){case 0:U(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),ot(rt.current),rt.current=new AbortController,e=f.assign({},a,{active:"false"}),[4,h.Get({path:"/api/ads",qs:e,signal:rt.current.signal})];case 2:return t=r.sent(),T(t),Je(!1),et(""),U(!1),[3,4];case 3:return n=r.sent(),console.log(n),"AbortError"===n.name?(Je(!1),et("")):(Je(!0),et("Error loading ads."),U(!1)),[3,4];case 4:return[2]}}))}))}function ot(e){e&&e.abort()}function ut(e){return"active"===e?M:D}s.useEffect((function(){return function(){ot(nt.current),ot(rt.current),ot(at.current)}}),[]),s.useEffect((function(){it(),function(){l(this,void 0,void 0,(function(){var e,t;return o(this,(function(r){switch(r.label){case 0:return"advertiser"===n?[3,2]:(ot(at.current),at.current=new AbortController,[4,h.Get({path:"/api/advertisers",qs:a,signal:at.current.signal})]);case 1:e=r.sent(),t=e.advertisers.map((function(e){return e.advertiser})),G(t),r.label=2;case 2:return[2]}}))}))}()}),[n,r]);var st=function(e,t,n){return l(void 0,void 0,void 0,(function(){var r;return o(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,h.Put({path:"/api/ads/"+e.id,body:{advertiserId:e.advertiserId,data:n}})];case 1:return a.sent(),r=ht(e,t,!0),tt.current.addNotification(m.success(r,!1)),he(!1),it(),D&&lt(),re(-1),[3,3];case 2:return a.sent(),r=ht(e,t,!1),tt.current.addNotification(m.error(r)),he(!1),re(-1),[3,3];case 3:return[2]}}))}))},ct=function(e,t){Z(e),ee(t),J(!0)},dt=function(e){xe(e),Ae(!0)},ft=function(e,t){re(e),se(t),he(!0)},pt=function(e,t){var n=(ut(t)||[]).find((function(t){return t.id===e}))||null;le(n),fe(t),_e(!0)},mt=function(e,t){Te(!0),ke("Campaigns using ad: "+t.name),Ge(e)};function ht(e,t,n){if(n)switch(t){case"activate":return s.default.createElement("span",null,"Ad ",s.default.createElement("strong",null,e.name),"  activated");case"deactivate":return s.default.createElement("span",null,"Ad ",s.default.createElement("strong",null,e.name),"  deactivated");case"approve":return s.default.createElement("span",null,"Ad ",s.default.createElement("strong",null,e.name),"  approved");case"disapprove":return s.default.createElement("span",null,"Ad ",s.default.createElement("strong",null,e.name),"  disapproved");case"request":return s.default.createElement("span",null," Approval requested for ad ",s.default.createElement("strong",null,e.name));case"withdrawrequest":return s.default.createElement("span",null," Withdrawn approval request for ad ",s.default.createElement("strong",null,e.name));case"requestrehost":return s.default.createElement("span",null," Requested rehost for ad ",s.default.createElement("strong",null,e.name));default:return s.default.createElement("span",null,"Ad ",s.default.createElement("strong",null,e.name)," saved.")}else switch(t){case"activate":return s.default.createElement("span",null,"Failed to activate ad ",s.default.createElement("strong",null,e.name));case"deactivate":return s.default.createElement("span",null,"Failed to deactivate ad ",s.default.createElement("strong",null,e.name));case"approve":return s.default.createElement("span",null,"Failed to approve ad ",s.default.createElement("strong",null,e.name));case"disapprove":return s.default.createElement("span",null,"Failed to disapprove ad ",s.default.createElement("strong",null,e.name));case"request":return s.default.createElement("span",null," Failed to request approval for ad ",s.default.createElement("strong",null,e.name));case"withdrawrequest":return s.default.createElement("span",null," Failed to withdraw approval request for ad ",s.default.createElement("strong",null,e.name));case"requestrehost":return s.default.createElement("span",null," Failed to request rehost for ad ",s.default.createElement("strong",null,e.name));default:return s.default.createElement("span",null,"Error saving ad ",s.default.createElement("strong",null,e.name))}}function gt(e){return l(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:if(!(e.length>0))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,h.Post({path:"/api/ads/delete-dirs",body:{toDelete:e}})];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),console.log("Error delete temp dirs",t),[3,4];case 4:return[2]}}))}))}var vt=ie?ie.name:"";return s.default.createElement(s.Fragment,null,s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},!Ye&&s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",{className:"pull-left"},"Ads"),s.default.createElement("div",{className:"table-btn-container"},u.MANAGE_ADS&&s.default.createElement(d.Button,{variant:"primary",size:"sm",className:"mr-2",onClick:function(){be(!0)}},s.default.createElement(I.default,{name:"plus"})," CREATE ADS")),s.default.createElement(E.default,{visible:V}),!V&&s.default.createElement(_.default,{type:"active",ads:M,advertisers:B,showAdvertiserCol:"advertiser"!==n,user:A,rights:u,update:st,editClick:function(e){ft(e,"active")},deleteClick:function(e){pt(e,"active")},previewClick:function(e,t){ct(e,t)},shareClick:dt,campaignsClick:mt})),Ye&&s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",null,s.default.createElement(w.default,{message:Ke})))),s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card h-100 mb-2"},s.default.createElement("div",null,s.default.createElement("a",{className:"table-collapse-header",href:"",onClick:function(e){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return e.preventDefault(),ze(!Ve),D?[3,2]:[4,lt()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}},s.default.createElement(I.default,{name:Ve?"chevron-up":"chevron-down"})," ",s.default.createElement("h3",null,"Inactive ads")),s.default.createElement(d.Collapse,{in:Ve},s.default.createElement("div",null,s.default.createElement(E.default,{visible:Y}),!Y&&s.default.createElement(s.Fragment,null,s.default.createElement("div",{className:"table-btn-container"},u.MANAGE_ADS&&s.default.createElement(d.Button,{variant:"danger",size:"sm",className:"mr-2",onClick:function(){Pe(!0)}},s.default.createElement(I.default,{name:"remove"})," REMOVE INACTIVE ADS")),!We&&s.default.createElement(_.default,{type:"inactive",ads:D||[],advertisers:B,showAdvertiserCol:"advertiser"!==n,user:A,rights:u,update:st,editClick:function(e){ft(e,"inactive")},deleteClick:function(e){pt(e,"inactive")},previewClick:function(e,t){ct(e,t)},shareClick:dt,campaignsClick:mt}),We&&s.default.createElement("h3",null,s.default.createElement(w.default,{message:Qe}))))))))),s.default.createElement(P.default,{show:W,advertiserId:Q,id:K,onClose:function(){Z(-1),J(!1)}}),s.default.createElement(O.default,{show:me,id:ne,writeAccess:u.MANAGE_ADS,onClose:function(){re(-1),he(!1)},onSubmit:function(e,t){return l(void 0,void 0,void 0,(function(){var n,r;return o(this,(function(a){switch(a.label){case 0:return n=ut(ue)||[],(r=n.find((function(t){return t.id===e})))?[4,st(r,null,t)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))}}),s.default.createElement(x.default,{scope:n,scopeId:r,data:i,videoMode:e.videoMode,show:ve,onClose:function(e){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return be(!1),[4,gt(e||[])];case 1:return t.sent(),[2]}}))}))},onSubmit:function(e,t,n){return l(void 0,void 0,void 0,(function(){var r,a;return o(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,h.Post({path:"/api/ads",body:{advertiserId:e,ads:t}})];case 1:return 0===(r=i.sent()).length?(a="Ads created.",tt.current.addNotification(m.success(a,!1))):(a=function(e){return s.default.createElement(s.Fragment,null,s.default.createElement("div",null,"The following ads failed to save: "),e.map((function(e,t){return s.default.createElement("div",{key:"errored-ad-"+t},"Ad ",e.key,": ",e.msg)})))}(r),tt.current.addNotification(m.error(a))),be(!1),it(),D&&lt(),[3,3];case 2:return i.sent(),a="Error creating ads.",tt.current.addNotification(m.error(a)),be(!1),[3,3];case 3:return[4,gt(n||[])];case 4:return i.sent(),[2]}}))}))}}),s.default.createElement(C.default,{show:Ne,id:Oe,onClose:function(){xe(-1),Ae(!1)}}),s.default.createElement(N.default,{title:Me,show:De,campaigns:Be,tab:"ads",onClose:function(){Te(!1),ke(""),Ge([])}}),s.default.createElement(S.default,{message:"Are you sure you want to delete ad "+vt+"?",show:Ee,onClose:function(){_e(!1),le(null)},onConfirm:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,h.Post({path:"/api/ads/"+ie.id,body:{advertiserId:ie.advertiserId}})];case 1:return e.sent(),tt.current.addNotification(m.success(s.default.createElement("span",null,"Ad ",s.default.createElement("strong",null,ie.name)," deleted."),!1)),_e(!1),"active"===de?it():lt(),le(null),[3,3];case 2:return e.sent(),tt.current.addNotification(m.error("Error deleting ad.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(S.default,{message:"Delete all inactive ads?",show:Se,onClose:function(){Pe(!1)},onConfirm:function(){return l(void 0,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=g.scopedParam({scope:n,scopeId:r}),[4,h.Delete({path:"/api/ads/delete-inactive",qs:e})];case 1:return t.sent(),tt.current.addNotification(m.success("Inactive ads successfully deleted.",!1)),Pe(!1),lt(),[3,3];case 2:return t.sent(),tt.current.addNotification(m.error("Error deleting inactive ads.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(p.default,{ref:tt}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=n(6),c=n(2),d=l(n(1)),f=o(n(14)),p=l(n(23)),m=o(n(17)),h=l(n(15)),g=l(n(8)),v=l(n(33)),b=o(n(3));t.default=function(e){var t,n,a="ads-table-"+e.type,i=u.useState(1),l=i[0],o=i[1],y=u.useState(h.getInitialSizePerPage(a,e.user)),E=y[0],_=y[1],w=u.useState({dataField:"id",order:"desc"}),S=w[0],P=w[1],C=function(e,t){P({dataField:e,order:t})},O=function(e,t){o(e)},x=function(t,n){h.storeSizePerPage(t,a,e.user),_(t)},I=function(e,t){return d.isNil(e)?"-":u.default.createElement(s.Link,{to:"/advault/advertiser/"+t.advertiserId},e)},N=function(t,n){var r=!e.rights.MANAGE_ADS;return t?u.default.createElement(c.Button,{size:"sm",variant:"warning",onClick:function(){e.update(n,"deactivate",{active:0})},disabled:r},"DEACTIVATE"):u.default.createElement(c.Button,{size:"sm",variant:"success",onClick:function(){e.update(n,"activate",{active:1})},disabled:r},"ACTIVATE")},A=function(t,n){var r=!e.rights.MANAGE_ADS;if(e.user.isRootAdmin){if(1===t)return u.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:function(){e.update(n,"disapprove",{approved:-1})},disabled:r},"APPROVED");if(-1===t)return u.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:function(){e.update(n,"approve",{approved:1})},disabled:r},"DISAPPROVED");if(-2===t)return u.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:function(){e.update(n,"approve",{approved:1})},disabled:r},"NOT REQUESTED");if(0===t)return u.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:function(){e.update(n,"approve",{approved:1})},disabled:r},"REQUESTED")}else{if(1===t)return u.default.createElement("span",{className:"text-success font-weight-bold"},"Approved");if(-1===t)return u.default.createElement("span",{className:"text-danger font-weight-bold"},"Disapproved");if(-2===t)return u.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:function(){e.update(n,"request",{approved:0})},disabled:r},"REQUEST");if(0===t)return u.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:function(){e.update(n,"withdrawrequest",{approved:-2})},disabled:r},"WITHDRAW REQUEST")}},j=function(t,n){var r=u.default.createElement(c.Tooltip,{id:"edit-tooltip-"+n.id},"edit"),a=g.getPopperConfig();return u.default.createElement(c.OverlayTrigger,{placement:"top",overlay:r,popperConfig:a},u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id)},href:"",className:"table-btn"},u.default.createElement(b.default,{name:"pencil"})))},M=function(t,n){var r=u.default.createElement(c.Tooltip,{id:"preview-tooltip-"+n.id},"preview"),a=g.getPopperConfig();return u.default.createElement(c.OverlayTrigger,{placement:"top",overlay:r,popperConfig:a},u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.previewClick(n.id,e.ads.find((function(e){return e.id==n.id})).advertiserId)},href:"",className:"table-btn"},u.default.createElement(b.default,{name:"eye"})))},k=function(t,n){if(v.isVideoAd(n.type)){var r=u.default.createElement(c.Tooltip,{id:"share-tooltip-"+n.id},"share"),a=g.getPopperConfig();return u.default.createElement(c.OverlayTrigger,{placement:"top",overlay:r,popperConfig:a},u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.shareClick(n.id)},href:"",className:"table-btn"},u.default.createElement(b.default,{name:"share-alt"})))}return null},F=function(t,n){if(e.rights.MANAGE_ADS){var r=u.default.createElement(c.Tooltip,{id:"delete-tooltip-"+n.id},"remove"),a=g.getPopperConfig();return u.default.createElement(c.OverlayTrigger,{placement:"top",overlay:r,popperConfig:a},u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.deleteClick(n.id)},href:"",className:"table-btn"},u.default.createElement(b.default,{name:"remove"})))}return null},D=function(t,n){return t&&t.length>0?u.default.createElement("a",{onClick:function(r){r.preventDefault(),e.campaignsClick(t,n)},href:""},t.length):"0"},T=function(t,n){if(t)return u.default.createElement("span",{className:"text-success"},u.default.createElement(b.default,{names:["check","lg"]}));if(!(e.user.isRootAdmin&&"Display (HTML)"==n.adType||"Display (3rd Party)"==n.adType))return u.default.createElement("span",{className:"text-danger"},u.default.createElement(b.default,{names:["remove","lg"]}));var r=!e.rights.MANAGE_ADS;switch(n.rehostStatus){case 0:return u.default.createElement(c.Button,{size:"sm",variant:"info",onClick:function(){e.update(n,"requestrehost",{requestRehost:1})},disabled:r}," ",u.default.createElement(b.default,{names:["remove","lg"]})," REHOST");case 1:return u.default.createElement("span",{className:"rehost-status"},u.default.createElement(b.default,{names:["spinner","pulse"]})," rehosting");case 2:return u.default.createElement("span",{className:"rehost-status"},u.default.createElement(b.default,{names:["remove","lg"]})," rehosted")}},R=function(){var t=h.getLastPage(e.ads,E);return l>t?t:l},B=p.Search.SearchBar,G=(t="active"===e.type?"deactivate":"activate",[{dataField:"df1",isDummyField:!0,text:"",formatter:j,headerStyle:{width:"30px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:F,headerStyle:{width:"30px"}},{dataField:"df3",isDummyField:!0,text:"",formatter:M,headerStyle:{width:"30px"}},{dataField:"df4",isDummyField:!0,text:"",formatter:k},{dataField:"id",text:"#",sort:!0,onSort:C,sortCaret:h.columnSort},{dataField:"advertiserId",hidden:!0},{dataField:"type",hidden:!0},{dataField:"name",text:"name",sort:!0,onSort:C,sortCaret:h.columnSort},{dataField:"activeCampaigns",text:"active campaigns",sort:!0,onSort:C,sortCaret:h.columnSort,formatter:D},{dataField:"advertiserName",text:"advertiser",sort:!0,hidden:!e.showAdvertiserCol,onSort:C,sortCaret:h.columnSort,formatter:I},{dataField:"status",text:"status",sort:!0,onSort:C,sortFunc:v.statusSort,sortCaret:h.columnSort,formatter:v.statusFormatter},{dataField:"cookieLess",text:"cookieless",sort:!0,onSort:C,sortCaret:h.columnSort,formatter:T},{dataField:"adType",text:"ad type",sort:!0,onSort:C,sortCaret:h.columnSort},{dataField:"dimension",text:"dimensions/duration",sort:!0,onSort:C,sortCaret:h.columnSort},{dataField:"fileSize",text:"file size",sort:!0,onSort:C,sortCaret:h.columnSort},{dataField:"active",text:t,sort:!0,onSort:C,sortCaret:h.columnSort,formatter:N},{dataField:"approved",text:"approval",sort:!0,onSort:C,sortCaret:h.columnSort,formatter:A}]),L=(n=d.keyBy(e.advertisers,"id"),e.ads.map((function(e){var t=d.pick(e,["id","name","activeCampaigns","type","adType","advertiserId","cookieLess","approved","active"]);return t.advertiserName=n[e.advertiserId]?n[e.advertiserId].name:"",t.dimension=v.dimensionDurationColumn(e),t.status=v.statusColumn(e),t.fileSize=e.bannerMemSize,t.rehostStatus=e.requestRehost,t}))),V=h.getSizePerPage(E,L.length),z=L.length||30;return u.default.createElement(p.default,{keyField:"id",data:L,columns:G,search:!0},(function(e){return u.default.createElement("div",null,u.default.createElement("div",{className:"search-label-container"},u.default.createElement(b.default,{name:"search"}),u.default.createElement(B,r({},e.searchProps,{placeholder:"Filter records",tableId:a}))),u.default.createElement(f.default,r({},e.baseProps,{id:a,bordered:!1,hover:!0,classes:"table-borderless",striped:!0,keyField:"id",data:L,columns:G,defaultSorted:[S],pagination:m.default({page:R(),sizePerPage:V,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:z}],onPageChange:O,onSizePerPageChange:x})})))}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(0)),d=n(2),f=i(n(1)),p=s(n(47)),m=s(n(46)),h=i(n(4)),g=i(n(33)),v=s(n(5)),b=s(n(10)),y=i(n(8)),E=n(6),_=s(n(9));t.default=function(e){var t=f.get(e,"id",-1),n=E.useParams(),r=n.scope,a=n.scopeId,i=c.useState(),s=i[0],w=i[1],S=c.useState(null),P=S[0],C=S[1],O=c.useState(!0),x=O[0],I=O[1],N=c.useState(!1),A=N[0],j=N[1],M=c.useState(!1),k=M[0],F=M[1],D=c.useState(""),T=D[0],R=D[1],B=c.useState(null),G=B[0],L=B[1],V=c.useState([]),z=V[0],q=V[1],Y=c.useState([]),U=Y[0],H=Y[1],W=c.useState([]),J=W[0],X=W[1];c.useEffect((function(){if(H(u([{label:"None",value:"NONE"}],z.map((function(e){return{label:e.key,value:e.key}})))),t>0){var n=K();G&&h.Get({path:"/api/ads/preview/"+e.advertiserId+"/ad/"+e.id+"/datafeed/"+G.id,qs:n}).then((function(e){C(Object.assign({},P,{previewTag:e.preview}))}))}}),[z,J]);var K=function(){return Object.assign.apply(Object,u([{}],J.map((function(e,t){var n={};return"NONE"!=e&&(n["key"+(t+1)]=e),n})).filter((function(e){return 0!=Object.keys(e).length}))))},Z=function(){j(!1),C(null),I(!1),F(!1),L(null),q([]),R(""),e.onClose()},$=!!P&&g.isVideoAd(P.type);return c.default.createElement(d.Modal,{dialogClassName:"modal-xxl",show:e.show,onEntering:function(){return l(void 0,void 0,void 0,(function(){var e,n,i,l;return o(this,(function(o){switch(o.label){case 0:if(I(!0),!(t>0))return[3,5];o.label=1;case 1:return o.trys.push([1,4,,5]),e=y.scopedParam({scope:r,scopeId:a}),[4,h.Get({path:"/api/creativefeed",qs:e})];case 2:return n=o.sent(),w(n),[4,h.Get({path:"/api/ads/"+t})];case 3:return i=o.sent(),C(i),j(!0),I(!1),F(!1),R(""),[3,5];case 4:return l=o.sent(),console.log(l),I(!1),F(!0),R("Error loading ad."),C(null),[3,5];case 5:return[2]}}))}))},onHide:Z,backdrop:"static"},c.default.createElement(d.Modal.Header,{closeButton:!0},c.default.createElement(d.Modal.Title,null,"Ad preview - id: ",t)),c.default.createElement(d.Modal.Body,null,t>0&&c.default.createElement("div",null," ",c.default.createElement("div",{className:"row"},c.default.createElement(v.default,{visible:x}),A&&$&&c.default.createElement("div",{className:"col-lg-12"},c.default.createElement(m.default,{id:"video-preview-player",ad:P})," "),A&&!$&&c.default.createElement("div",{className:"col-lg-12"},c.default.createElement(p.default,{id:"banner-preview",ad:P})," ")),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-lg-12"},c.default.createElement("div",{className:"row"},c.default.createElement("hr",null))),!x&&!k&&s.length>0&&c.default.createElement("div",{className:"col-lg-12"},A&&!$&&c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-lg-4"}," Datafeed:",c.default.createElement(_.default,{inputId:"attribute-creative-feed-"+e.id+"-banner",className:"react-select-container",classNamePrefix:"react-select",name:"data-feed-select",clearable:!1,options:u([{value:"NONE",label:"none"}],s.map((function(e){return{value:e.id.toString(),label:e.name}}))),defaultValue:{value:"NONE",label:"none"},onChange:function(e){return l(void 0,void 0,void 0,(function(){var n,r;return o(this,(function(a){switch(a.label){case 0:return"NONE"==e.value?[3,2]:(n=s.find((function(t){return t.id.toString()==e.value})),q((null==n?void 0:n.rows)?n.rows:[]),L(n),X(Array.from(Array(n.numberEventsUsed)).map((function(){return"NONE"}))),[4,h.Get({path:"/api/ads/"+t})]);case 1:return r=a.sent(),C(r),[3,3];case 2:q([]),X([]),L(null),a.label=3;case 3:return[2]}}))}))}}))),A&&!$&&G&&J.map((function(t,n){return c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-lg-4"}," key ",n+1,":",c.default.createElement(_.default,{inputId:"attribute-creative-feed-options-"+e.id+"-banner-"+n,className:"react-select-container",classNamePrefix:"react-select",name:"data-feed-key-select",clearable:!1,options:U,value:U.find((function(e){return e.value==t})),onChange:function(e){!function(e,t){t&&X((function(){var n=u([],J);return n[e]=t.value,n}))}(n,e)}})," "))}))),!x&&k&&c.default.createElement("div",{className:"col-lg-12"},c.default.createElement(b.default,{message:T}))))),c.default.createElement(d.Modal.Footer,null,c.default.createElement(d.Button,{variant:"light",size:"sm",onClick:Z},"CANCEL")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=i(n(1)),f=u(n(47)),p=u(n(46)),m=i(n(4)),h=i(n(33)),g=u(n(103)),v=u(n(5)),b=u(n(10));t.default=function(e){var t=d.get(e,"id",-1),n=s.useState(null),r=n[0],a=n[1],i=s.useState(""),u=i[0],y=i[1],E=s.useState(!0),_=E[0],w=E[1],S=s.useState(!1),P=S[0],C=S[1],O=s.useState(!1),x=O[0],I=O[1],N=s.useState(null),A=N[0],j=N[1],M=s.useState(null),k=M[0],F=M[1],D=s.useState(!1),T=D[0],R=D[1],B=s.useState(""),G=B[0],L=B[1],V=s.useState(!1),z=V[0],q=V[1];s.useEffect((function(){z||e.onSubmit(t,A)}),[z,A]);var Y=function(){I(!1),y(""),F(null),C(!1),a(null),R(!1),L(""),w(!1),e.onClose()};var U=!!r&&h.isVideoAd(r.type);return s.default.createElement(c.Modal,{dialogClassName:"modal-xxl",show:e.show,onHide:Y,onEntering:function(){return l(void 0,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:if(w(!0),!(t>0))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,m.Get({path:"/api/ads/"+t})];case 2:return e=r.sent(),a(e),n=d.get(e,"adType",""),y(n),F(e),C(!0),w(!1),R(!1),L(""),[3,4];case 3:return r.sent(),w(!1),R(!0),L("Error loading ad."),a(null),F(null),[3,4];case 4:return[2]}}))}))},backdrop:"static"},s.default.createElement(c.Modal.Header,{closeButton:!0},s.default.createElement(c.Modal.Title,null,"Ad settings - id: ",t)),s.default.createElement(c.Modal.Body,null,s.default.createElement("div",{className:"row"},s.default.createElement(v.default,{visible:_}),!_&&!T&&s.default.createElement(s.Fragment,null,s.default.createElement("div",{className:"col-lg-5"},s.default.createElement(c.Form.Group,{controlId:"ad-type"},s.default.createElement(c.Form.Label,null,"Ad Type"),s.default.createElement(c.Form.Control,{readOnly:!0,type:"text",value:u})),s.default.createElement(g.default,{ad:r,submit:x,onSubmit:function(e,t){q(e),j(t),I(!1)},onPreviewChange:function(e){F(e)}})),k&&s.default.createElement("div",{className:"col-lg-7"},P&&U&&s.default.createElement(p.default,{id:"video-preview-player",ad:k}),P&&!U&&s.default.createElement(f.default,{id:"banner-preview",ad:k}))),!_&&T&&s.default.createElement("div",{className:"col-lg-12"},s.default.createElement(b.default,{message:G})))),s.default.createElement(c.Modal.Footer,null,s.default.createElement(c.Button,{size:"sm",variant:"light",onClick:Y},"CANCEL"),s.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:function(){I(!0)},disabled:x},"SAVE")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(43),d=n(2),f=i(n(1)),p=n(44),m=i(n(7)),h=u(n(3)),g=u(n(32)),v=u(n(65)),b=i(n(4));t.default=function(e){var t=f.get(e,"ad.id",-1),n=s.useState(""),r=n[0],a=n[1],i=s.useState("0"),u=i[0],y=i[1],E=s.useState(!1),_=E[0],w=E[1],S=s.useState(!1),P=S[0],C=S[1],O=s.useState({error:!1,message:""}),x=O[0],I=O[1],N=s.useState({error:!1,message:""}),A=N[0],j=N[1],M=s.useState({error:!1,message:""}),k=M[0],F=M[1],D=s.useState({banners:[],invalid:[],zip:[],toDelete:[]}),T=D[0],R=D[1],B=s.useState(1),G=B[0],L=B[1],V=s.useState(!0),z=V[0],q=V[1],Y=s.useState(""),U=Y[0],H=Y[1],W=s.useState(1),J=W[0],X=W[1],K=s.useState({error:!1,message:""}),Z=K[0],$=K[1],Q=s.useState(!1),ee=Q[0],te=Q[1],ne=s.useRef(null);function re(){return e.localBanners.length>0?{error:!1,message:""}:{error:!0,message:"Please upload files."}}s.useEffect((function(){if(e.ad){var t=f.get(e,"ad.name",""),n=f.get(e,"ad.clickUrl",""),r=f.get(e,"ad.addClickLayer",0);X(r),a(t),H(n),I({error:!1,message:""}),$({error:!1,message:""})}}),[e.ad]),s.useEffect((function(){if(e.submit)if(t>0)x.error||Z.error?e.onSubmit(!0,null):e.onSubmit(null,{name:r,clickUrl:U});else{var n={error:!1,message:""};"file"!==U&&(n=m.url(U,!0));var a=re();if($(n),j(a),n.error||a.error||k.error)e.onCreate(!0,[]);else{var i=(l=z?0:-2,function(e){var t=f.groupBy(e,"name");return f.forEach(t,(function(e,n){t[n]=e.map((function(e,t){return 0===t||(e.name+=" ("+t+")"),e}))})),f.flatten(f.values(t))}(e.localBanners.map((function(e,t){return{id:t,name:""!==r?r+" "+e.width+"x"+e.height:e.name,width:e.width,height:e.height,clickUrl:U,submissionType:G,approved:l,type:e.type,local:!0,active:1,path:e.path,addClickLayer:J}}))));e.onCreate(!1,i)}}var l}),[e.submit]),s.useEffect((function(){if(P){var e=re();j(e)}}),[e.localBanners]);var ae=function(e){if(e.target.checked){var t="0"===e.target.value?0:1;L(t)}};function ie(e){var t=0;return f.forEach(e,(function(e){t+=e.size})),t/1048576}function le(e){return b.PostForm({path:"/api/ads/local-banners",body:e})}var oe=t>0?"Name *":"Name (file name is used if not filled)",ue=e.ad?e.ad.previewTag||e.ad.tag:"";return s.default.createElement(s.Fragment,null,t<0&&s.default.createElement(s.Fragment,null,s.default.createElement(d.Form.Group,{id:"banner-files"},s.default.createElement(d.Form.Label,null,"Files *"),s.default.createElement(d.Form.Control,{key:u,type:"file",name:"files[]",multiple:!0,accept:".zip,.png,.jpg,.jpeg,.gif",onChange:function(t){return l(void 0,void 0,void 0,(function(){var n,r;return o(this,(function(a){switch(a.label){case 0:return n=f.get(t,"target.files"),ie(n)<250?[4,le(function(e){var t=new FormData;return f.forEach(e,(function(e,n){t.append("files",e),t.append("keys",n),t.append("paths","/"+e.name)})),t}(n))]:[3,2];case 1:return r=a.sent(),e.onUploadBanners(r),R(r),F({error:!1,message:""}),C(!0),[3,3];case 2:F({error:!0,message:"Upload limit exceeded,  should be < 250 Mb"}),a.label=3;case 3:return[2]}}))}))}})),s.default.createElement(d.Form.Group,{id:"banner-droparea"},s.default.createElement(v.default,{singleUpload:!1,text:"Drag and drop files or directories",loading:_,onUpload:function(t){return l(void 0,void 0,void 0,(function(){var n,r;return o(this,(function(a){switch(a.label){case 0:return w(!0),n=Math.random().toString(36),y(n),ie(t.map((function(e){return e.file})))<250?[4,le(function(e){var t=new FormData;return e.forEach((function(e){t.append("files",e.file),t.append("keys",e.key),t.append("paths",e.path)})),t}(t))]:[3,2];case 1:return r=a.sent(),e.onUploadBanners(r),R(r),F({error:!1,message:""}),C(!0),[3,3];case 2:F({error:!0,message:"Upload limit exceeded,  should be < 250 Mb"}),a.label=3;case 3:return w(!1),[2]}}))}))}})),s.default.createElement(d.Form.Group,null,A.error&&s.default.createElement("div",{className:"text-danger"},A.message)),s.default.createElement(d.Form.Group,null,k.error&&s.default.createElement("div",{className:"text-danger"},k.message)),T.invalid.length>0&&s.default.createElement(d.Form.Group,null,s.default.createElement(d.Alert,{variant:"warning"},s.default.createElement(h.default,{name:"warning"})," The following banners could not be added:",s.default.createElement("ul",{className:"pl-3"},T.invalid.map((function(e,t){return s.default.createElement("li",{key:"invalid-banner-"+t},function(e){var t="dir"===e.type?"Directory":"File";return s.default.createElement("div",null,s.default.createElement("strong",null,t," ",e.name,": ")," ",e.msg)}(e))})))))),s.default.createElement(d.Form.Group,{controlId:"banner-name"},s.default.createElement(d.Form.Label,null,oe),s.default.createElement(d.Form.Control,{autoFocus:!0,type:"text",value:r,isInvalid:x.error,onChange:function(e){var t=e.target.value,n=m.required(t);a(t),I(n)}}),x.error&&s.default.createElement(d.Form.Control.Feedback,{type:"invalid"},x.message)),s.default.createElement(d.Form.Group,null,s.default.createElement(d.Form.Label,null,"Ad serving type:"),s.default.createElement("div",null,s.default.createElement(d.Form.Check,{id:"banner-submission-1",disabled:t>0,type:"radio",name:"banner-submission",value:"1",checked:1===G,onChange:ae,inline:!0,label:"Standard, for campaigns"}),s.default.createElement(d.Form.Check,{id:"banner-submission-0",disabled:t>0,type:"radio",name:"banner-submission",value:"0",checked:0===G,onChange:ae,inline:!0,label:"Tags, for externally managed delivery"}))),s.default.createElement(d.Form.Group,{controlId:"banner-clickurl"},s.default.createElement(d.Form.Label,null,"Landing page *"),s.default.createElement(d.Form.Control,{autoFocus:!0,type:"text",value:U,isInvalid:Z.error,onChange:function(e){var t=e.target.value,n={error:!1,message:""};"file"!==t&&(n=m.url(t,!0)),H(t),$(n)}}),Z.error&&s.default.createElement(d.Form.Control.Feedback,{type:"invalid"},Z.message)),t<0&&s.default.createElement(d.Form.Group,null,s.default.createElement(g.default,{id:"banner-approved",checked:z,onChange:function(e){q(e)}},"Request approval immediately"),s.default.createElement(g.default,{id:"add-clickLayer",checked:1==J,onChange:function(e){return X(e?1:0)}},"Add click layer, if click handling is not detected ")),t>0&&s.default.createElement(d.Form.Group,{controlId:"banner-tag"},s.default.createElement(d.Form.Label,null,"Preview code"),s.default.createElement("div",{className:ee?"gray-box mb-2 highlight-box":"gray-box mb-2"},ue),s.default.createElement(p.CopyToClipboard,{text:ue,onCopy:function(){te(!0),setTimeout((function(){te(!1)}),2e3)}},s.default.createElement("button",{ref:ne,className:"btn btn-primary btn-sm pull-right"},s.default.createElement(h.default,{name:"files-o"})," GET CODE")),s.default.createElement(d.Overlay,{target:c.findDOMNode(ne.current),show:ee,placement:"bottom"},s.default.createElement(d.Tooltip,{id:"copy-share-tag-tooltip"},"Copied!"))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=i(n(1)),c=i(n(7)),d=l(n(32));t.default=function(e){var t=s.get(e,"ad.id",-1),n=o.useState(""),r=n[0],a=n[1],i=o.useState({error:!1,message:""}),l=i[0],f=i[1],p=o.useState(1),m=p[0],h=(p[1],o.useState(!0)),g=h[0],v=h[1],b=o.useState(""),y=b[0],E=b[1],_=o.useState({error:!1,message:""}),w=_[0],S=_[1],P=o.useState(""),C=P[0],O=P[1],x=o.useState({error:!1,message:""}),I=x[0],N=x[1],A=o.useState(""),j=A[0],M=A[1],k=o.useState({error:!1,message:""}),F=k[0],D=k[1],T=o.useState(""),R=T[0],B=T[1],G=o.useState({error:!1,message:""}),L=G[0],V=G[1];o.useEffect((function(){if(e.ad){var t=s.get(e,"ad.name",""),n=s.get(e,"ad.clickUrl",""),r=s.get(e,"ad.tag",""),i=s.get(e,"ad.width",""),l=s.get(e,"ad.height","");a(t),E(n),O(r),M(i),B(l),f({error:!1,message:""}),S({error:!1,message:""}),N({error:!1,message:""}),D({error:!1,message:""}),V({error:!1,message:""})}}),[e.ad]),o.useEffect((function(){if(e.submit)if(t>0)l.error||w.error?e.onSubmit(!0,null):e.onSubmit(!1,{name:r,clickUrl:y});else{var n=c.required(r),a=c.url(y,!1),i=c.required(C),o=document.getElementById("thirdparty-width");o.value=j;var u=c.native(o),s=document.getElementById("thirdparty-height");s.value=R;var d=c.native(s),p=g?0:-2;if(f(n),S(a),N(i),D(u),V(d),n.error||a.error||i.error||u.error||d.error)e.onCreate(!0,[]);else{var h={name:r,submissionType:m,approved:p,clickUrl:y,tag:C,width:parseInt(j,10),height:parseInt(R,10),active:1,type:4,local:!1,tag_type:1};e.onCreate(!1,[h])}}}),[e.submit]);function z(e,t){var n="width"===t?/\bwidth=["']?([0-9]+)["']?/i:/\height=["']?([0-9]+)["']?/i,r=e.match(n);return r&&r.length>1?r[1]:""}return o.default.createElement(o.Fragment,null,o.default.createElement(u.Form.Group,{controlId:"thirdparty-name"},o.default.createElement(u.Form.Label,null,"Name *"),o.default.createElement(u.Form.Control,{autoFocus:!0,type:"text",value:r,isInvalid:l.error,onChange:function(e){var t=e.target.value,n=c.required(t);a(t),f(n)}}),l.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},l.message)),t<0&&o.default.createElement(u.Form.Group,null,o.default.createElement(d.default,{id:"thirdparty-approved",checked:g,onChange:function(e){v(e)}},"Request approval immediately")),o.default.createElement(u.Form.Group,{controlId:"thirdparty-clickurl"},o.default.createElement(u.Form.Label,null,"Landing page"),o.default.createElement(u.Form.Control,{type:"text",value:y,isInvalid:w.error,onChange:function(e){var t=e.target.value,n=c.url(t,!1);E(t),S(n)}}),w.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},w.message)),o.default.createElement(u.Form.Group,{controlId:"thirdparty-tag"},o.default.createElement(u.Form.Label,null,"Tag *"),o.default.createElement(u.Form.Control,{as:"textarea",disabled:t>0,type:"text",value:C,rows:6,isInvalid:I.error,onChange:function(t){var n=t.target.value,r=c.required(n);O(n),N(r);var a=z(n,"width"),i=z(n,"height"),l=document.getElementById("thirdparty-width");l.value=a;var o=c.native(l);M(a),D(o);var u=document.getElementById("thirdparty-height");u.value=i;var d=c.native(u);B(i),V(d),""!==n&&e.onPreviewChange(s.assign({},e.ad,{previewTag:null,tag:n,width:parseInt(a,10),height:parseInt(i,10)}))}}),I.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},I.message)),o.default.createElement(u.Form.Group,{controlId:"thirdparty-width"},o.default.createElement(u.Form.Label,null,"Width *"),o.default.createElement(u.Form.Control,{disabled:t>0,required:!0,type:"number",min:"0",value:j,isInvalid:F.error,onChange:function(e){var t=e.target.value,n=c.native(e.target);M(t),D(n)}}),F.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},F.message)),o.default.createElement(u.Form.Group,{controlId:"thirdparty-height"},o.default.createElement(u.Form.Label,null,"Height *"),o.default.createElement(u.Form.Control,{disabled:t>0,required:!0,type:"number",min:"0",value:R,isInvalid:L.error,onChange:function(e){var t=e.target.value,n=c.native(e.target);B(t),V(n)}}),L.error&&o.default.createElement(u.Form.Control.Feedback,{type:"invalid"},L.message)))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(0)),d=n(43),f=n(2),p=s(n(9)),m=i(n(1)),h=n(42),g=n(44),v=i(n(33)),b=i(n(7)),y=i(n(4)),E=s(n(3)),_=s(n(32)),w=s(n(104));t.default=function(e){var t=m.get(e,"ad.id",-1),n=(e.thirdPartyHosts||[]).map((function(e){return{value:e.sspName,label:e.name}})),r=n.length>0?n[0].value:"",a=c.useState(""),i=a[0],s=a[1],S=c.useState(null),P=S[0],C=S[1],O=c.useState("0"),x=O[0],I=(O[1],c.useState({error:!1,message:""})),N=I[0],A=I[1],j=c.useState({error:!1,message:""}),M=j[0],k=j[1],F=c.useState({error:!1,message:""}),D=F[0],T=F[1],R=c.useState(!0),B=R[0],G=R[1],L=c.useState(""),V=L[0],z=L[1],q=c.useState({error:!1,message:""}),Y=q[0],U=q[1],H=c.useState(e.isSter||!1),W=H[0],J=H[1],X=c.useState(r),K=X[0],Z=X[1],$=c.useState(!1),Q=$[0],ee=$[1],te=c.useState([]),ne=te[0],re=te[1],ae=c.useState([]),ie=ae[0],le=ae[1],oe=c.useState(!1),ue=oe[0],se=oe[1],ce=c.useRef(null);function de(e){return e.map((function(e){return m.omit(e,"key")}))}function fe(){return l(this,void 0,void 0,(function(){var t,n,r,a,l,u,s,c,d,f,p,h;return o(this,(function(o){switch(o.label){case 0:return t=b.url(V,!0),U(t),A(n=P?{error:!1,message:""}:{error:!0,message:"Please upload file."}),n.error||t.error||pe()?(e.onCreate(!0,[]),[3,5]):[3,1];case 1:r=B?0:-2,a=Q?1:0,l=de(ne),u=v.getThirdPartyImpressions(l),s=v.getThirdPartyClicks(l),c=v.getThirdPartyTracking(l),d=""!==i?i:P.name.split(".").slice(0,-1).join("."),f={name:d,approved:r,clickUrl:V,thirdPartyEventsServerSide:a,thirdPartyImpressions:u,thirdPartyClicks:s,thirdPartyTracking:c,width:1,height:1,submissionType:1,tag_type:1,tag:"",type:5,local:!0,active:1,file:P},W&&(f.hostAt3rdParty=K),p=function(e){var t=new FormData;return m.forEach(e,(function(e,n){t.append(n,e)})),t}(f),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,y.PostForm({path:"/api/ads/local-video",body:p})];case 3:return h=o.sent(),e.onCreate(!1,[h]),[3,5];case 4:return o.sent(),A({error:!0,message:"There was an error in temporary video save. Try again!"}),e.onCreate(!0,[]),[3,5];case 5:return[2]}}))}))}function pe(){return ie.indexOf(!1)>-1}c.useEffect((function(){if(e.ad){var t=m.get(e,"ad.name",""),n=m.get(e,"ad.clickUrl",""),r=m.get(e,"ad.thirdPartyEventsServerSide",0),a=v.getThirdPartyTrackingEvents(e.ad).map((function(e){return m.assign({},e,{key:h.v4()})})),i=a.map((function(e){return!0}));s(t),z(n),ee(1===r),re(a),T({error:!1,message:""}),U({error:!1,message:""}),le(i)}}),[e.ad]),c.useEffect((function(){!function(){l(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return e.submit?t>0?(function(){if(Y.error||pe())e.onSubmit(!0,null);else{var t=Q?1:0,n=de(ne),r=v.getThirdPartyImpressions(n),a=v.getThirdPartyClicks(n),l=v.getThirdPartyTracking(n);e.onSubmit(!1,{name:i,clickUrl:V,thirdPartyEventsServerSide:t,thirdPartyImpressions:r,thirdPartyClicks:a,thirdPartyTracking:l})}}(),[3,3]):[3,1]:[3,3];case 1:return[4,fe()];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}()}),[e.submit]);var me=function(e,t,n){var r=m.cloneDeep(ne);r[e]=t,re(r);var a=ie.concat();a[e]=n,le(a)},he=function(e){var t=m.cloneDeep(ne),n=ie.concat();t.length>0&&(t.splice(e,1),re(t),n.splice(e,1),le(n))};var ge=t>0?"Name *":"Name (file name is used if not filled)",ve=e.ad?e.ad.previewTag||e.ad.tag:"";return c.default.createElement(c.Fragment,null,t<0&&c.default.createElement(c.Fragment,null,c.default.createElement(f.Form.Group,{id:"video-files"},c.default.createElement(f.Form.Label,null,"Files *"),c.default.createElement(f.Form.Control,{key:x,type:"file",name:"files[]",multiple:!0,accept:".zip, .mp4",onChange:function(t){return l(void 0,void 0,void 0,(function(){var n,r;return o(this,(function(a){return(n=m.get(t,"target.files")).length>0&&(r=n[0],r.size/1048576<200?(C(r),k({error:!1,message:""}),A({error:!1,message:""}),e.onUploadVideo(!0)):(k({error:!0,message:"Upload limit exceeded,  should be < 200 Mb"}),A({error:!1,message:""}))),[2]}))}))}})),c.default.createElement(f.Form.Group,null,N.error&&c.default.createElement("div",{className:"text-danger"},N.message)),c.default.createElement(f.Form.Group,null,M.error&&c.default.createElement("div",{className:"text-danger"},M.message))),c.default.createElement(f.Form.Group,{controlId:"video-name"},c.default.createElement(f.Form.Label,null,ge),c.default.createElement(f.Form.Control,{autoFocus:!0,type:"text",value:i,isInvalid:D.error,onChange:function(e){var t=e.target.value,n=b.required(t);s(t),T(n)}}),D.error&&c.default.createElement(f.Form.Control.Feedback,{type:"invalid"},D.message)),t<0&&c.default.createElement(f.Form.Group,null,c.default.createElement(_.default,{id:"video-approved",checked:B,onChange:function(e){G(e)}},"Request approval immediately")),c.default.createElement(f.Form.Group,{controlId:"video-clickurl"},c.default.createElement(f.Form.Label,null,"Landing page *"),c.default.createElement(f.Form.Control,{autoFocus:!0,type:"text",value:V,isInvalid:Y.error,onChange:function(e){var t=e.target.value,n=b.url(t,!0);z(t),U(n)}}),Y.error&&c.default.createElement(f.Form.Control.Feedback,{type:"invalid"},Y.message)),t<0&&c.default.createElement(f.Form.Group,null,c.default.createElement("div",{className:"d-inline-block",style:{width:"200px"}},c.default.createElement(_.default,{id:"video-thirdpartyhost",checked:W,onChange:function(e){J(e)}},"Upload to publisher instead")),c.default.createElement("div",{className:"d-inline-block",style:{width:"150px"}},c.default.createElement(p.default,{inputId:"react-select-video-thirdpartyhost",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:n.find((function(e){return e.value===K})),onChange:function(e){var t=e.value;Z(t)},options:n}))),c.default.createElement(f.Form.Group,null,c.default.createElement(_.default,{id:"video-tracking",checked:Q,onChange:function(e){ee(e)}},"Third party tracking from server")),c.default.createElement(f.Form.Group,null,c.default.createElement("div",null,ne.map((function(e,t){return c.default.createElement(w.default,{key:e.key,index:t,item:e,onChange:me,onDelete:he})}))),c.default.createElement(f.Button,{size:"sm",variant:"primary",onClick:function(){var e={type:"impression",url:"",key:h.v4()},t=u(u([],ne),[e]),n=u(u([],ie),[!0]);re(t),le(n)}},c.default.createElement(E.default,{name:"plus"})," 3RD PARTY TRACKING")),t>0&&c.default.createElement(f.Form.Group,{controlId:"video-tag"},c.default.createElement(f.Form.Label,null,"Preview code"),c.default.createElement("div",{className:ue?"gray-box mb-2 highlight-box":"gray-box mb-2"},ve),c.default.createElement(g.CopyToClipboard,{text:ve,onCopy:function(){se(!0),setTimeout((function(){se(!1)}),2e3)}},c.default.createElement("button",{ref:ce,className:"btn btn-primary btn-sm pull-right"},c.default.createElement(E.default,{name:"files-o"})," GET CODE")),c.default.createElement(f.Overlay,{target:d.findDOMNode(ce.current),show:ue,placement:"bottom"},c.default.createElement(f.Tooltip,{id:"copy-share-tag-tooltip"},"Copied!"))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(0)),s=n(2),c=o(n(9)),d=i(n(1)),f=n(42),p=i(n(33)),m=i(n(22)),h=i(n(7)),g=o(n(3)),v=o(n(32)),b=o(n(104));t.default=function(e){var t=d.get(e,"ad.id",-1),n=(e.thirdPartyHosts||[]).map((function(e){return{value:e.sspName,label:e.name}})),r=n.length>0?n[0].value:"",a=u.useState(""),i=a[0],o=a[1],y=u.useState(!0),E=y[0],_=y[1],w=u.useState({error:!1,message:""}),S=w[0],P=w[1],C=u.useState(""),O=C[0],x=C[1],I=u.useState(""),N=I[0],A=I[1],j=u.useState({error:!1,message:""}),M=j[0],k=j[1],F=u.useState(e.isSter||!1),D=F[0],T=F[1],R=u.useState(r),B=R[0],G=R[1],L=u.useState(!1),V=L[0],z=L[1],q=u.useState([]),Y=q[0],U=q[1],H=u.useState([]),W=H[0],J=H[1];function X(e){return e.map((function(e){return d.omit(e,"key")}))}function K(){return W.indexOf(!1)>-1}u.useEffect((function(){if(e.ad){var t=d.get(e,"ad.name",""),n=d.get(e,"ad.type",0),r=d.get(e,"ad.vastURL",""),a=d.get(e,"ad.vastXML",""),i=6===n?r:a,l=d.get(e,"ad.clickUrl",""),u=d.get(e,"ad.thirdPartyEventsServerSide",0),s=p.getThirdPartyTrackingEvents(e.ad).map((function(e){return d.assign({},e,{key:f.v4()})})),c=s.map((function(e){return!0}));o(t),A(i),x(l),z(1===u),U(s),P({error:!1,message:""}),J(c)}}),[e.ad]),u.useEffect((function(){e.submit&&(t>0?function(){if(S.error||K())e.onSubmit(!0,null);else{var t=V?1:0,n=X(Y),r=p.getThirdPartyImpressions(n),a=p.getThirdPartyClicks(n),l=p.getThirdPartyTracking(n);e.onSubmit(!1,{name:i,thirdPartyEventsServerSide:t,thirdPartyImpressions:r,thirdPartyClicks:a,thirdPartyTracking:l})}}():function(){var t=h.required(i),n=h.vastTag(N);if(P(t),k(n),t.error||n.error||K())e.onCreate(!0,[]);else{var r=V?1:0,a=X(Y),l=p.getThirdPartyImpressions(a),o=p.getThirdPartyClicks(a),u=p.getThirdPartyTracking(a),s={name:i,approved:E?0:-2,tag:N,width:1,height:1,submissionType:1,local:!1,active:1,thirdPartyEventsServerSide:r,thirdPartyImpressions:l,thirdPartyClicks:o,thirdPartyTracking:u};D&&(s.hostAt3rdParty=B),m.isValidUrl(N)?(s.type=6,s.vastURL=N,s.vastXML=null):(s.type=7,s.vastURL=null,s.vastXML=N),e.onCreate(!1,[s])}}())}),[e.submit]);var Z=function(e,t,n){var r=d.cloneDeep(Y);r[e]=t,U(r);var a=W.concat();a[e]=n,J(a)},$=function(e){var t=d.cloneDeep(Y),n=W.concat();t.length>0&&(t.splice(e,1),U(t),n.splice(e,1),J(n))};return u.default.createElement(u.Fragment,null,u.default.createElement(s.Form.Group,{controlId:"vast-name"},u.default.createElement(s.Form.Label,null,"Name *"),u.default.createElement(s.Form.Control,{autoFocus:!0,type:"text",value:i,isInvalid:S.error,onChange:function(e){var t=e.target.value,n=h.required(t);o(t),P(n)}}),S.error&&u.default.createElement(s.Form.Control.Feedback,{type:"invalid"},S.message)),t<0&&u.default.createElement(s.Form.Group,null,u.default.createElement(v.default,{id:"vast-approved",checked:E,onChange:function(e){_(e)}},"Request approval immediately")),u.default.createElement(s.Form.Group,{controlId:"vast-tag"},u.default.createElement(s.Form.Label,null,"Tag *"),u.default.createElement(s.Form.Control,{as:"textarea",autoFocus:!0,readOnly:t>0,type:"text",rows:6,value:N,isInvalid:M.error,onChange:function(t){var n=t.target.value,r=h.vastTag(n);A(n),k(r);var a={previewTag:null,tag:n};m.isValidUrl(n)?(a.type=6,a.vastURL=n,a.vastXML=null):(a.type=7,a.vastURL=null,a.vastXML=n),""!==n?e.onPreviewChange(d.assign({},e.ad,a)):e.onPreviewChange(null)}}),M.error&&u.default.createElement(s.Form.Control.Feedback,{type:"invalid"},M.message)),t<0&&u.default.createElement(s.Form.Group,null,u.default.createElement("div",{className:"d-inline-block",style:{width:"200px"}},u.default.createElement(v.default,{id:"vast-thirdpartyhost",checked:D,onChange:function(e){T(e)}},"Upload to publisher instead")),u.default.createElement("div",{className:"d-inline-block",style:{width:"150px"}},u.default.createElement(c.default,{inputId:"react-select-vast-thirdpartyhost",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:n.find((function(e){return e.value===B})),onChange:function(e){var t=e.value;G(t)},options:n}))),t>0&&u.default.createElement(s.Form.Group,{controlId:"vast-clickurl"},u.default.createElement(s.Form.Label,null,"Landing page *"),u.default.createElement(s.Form.Control,{readOnly:!0,autoFocus:!0,type:"text",value:O})),u.default.createElement(s.Form.Group,null,u.default.createElement(v.default,{id:"vast-tracking",checked:V,onChange:function(e){z(e)}},"Third party tracking from server")),u.default.createElement(s.Form.Group,null,u.default.createElement("div",null,Y.map((function(e,t){return u.default.createElement(b.default,{key:e.key,index:t,item:e,onChange:Z,onDelete:$})}))),u.default.createElement(s.Button,{size:"sm",variant:"primary",onClick:function(){var e={type:"impression",url:"",key:f.v4()},t=l(l([],Y),[e]),n=l(l([],W),[!0]);U(t),J(n)}},u.default.createElement(g.default,{name:"plus"})," 3RD PARTY TRACKING")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=u(n(9)),f=i(n(1)),p=u(n(103)),m=i(n(4)),h=i(n(8)),g=u(n(315)),v=u(n(316)),b=u(n(47)),y=u(n(3)),E=u(n(46));t.default=function(e){var t=s.useState(""),n=t[0],r=t[1],a=s.useState([]),i=a[0],u=a[1],_=s.useState([]),w=_[0],S=_[1],P=s.useState(-1),C=P[0],O=P[1],x=s.useState(!1),I=x[0],N=x[1],A=s.useState([]),j=A[0],M=A[1],k=s.useState([]),F=k[0],D=k[1],T=s.useState(0),R=T[0],B=T[1],G=s.useState([]),L=G[0],V=G[1],z=s.useState(!1),q=z[0],Y=z[1],U=s.useState(!1),H=U[0],W=U[1],J=s.useState([]),X=J[0],K=J[1],Z=s.useState(null),$=Z[0],Q=Z[1],ee=s.useState(!1),te=ee[0],ne=ee[1];s.useEffect((function(){!te&&X.length>0&&e.onSubmit(C,X,L)}),[te,X]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var e,t;return o(this,(function(n){switch(n.label){case 0:if(!(C>0))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,m.Get({path:"/api/advertisers/"+C+"/banners/thirdpartyhosts"})];case 2:return e=n.sent(),M(e),[3,4];case 3:return t=n.sent(),console.log(t),M([]),[3,4];case 4:return[2]}}))}))}()}),[C]);var re=function(){ie(),e.onClose(L)};function ae(){return l(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),t=h.scopedParam({scope:e.scope,scopeId:e.scopeId}),[4,m.Get({path:"/api/advertisers",qs:t})];case 1:return n=a.sent(),[2,f.get(n,"advertisers",[])];case 2:return r=a.sent(),console.log(r),[2,[]];case 3:return[2]}}))}))}function ie(){D([]),B(0),Q(null),Y(!1)}var le=["root","organization","agency"].indexOf(e.scope)>-1,oe=F[R]||null;return s.default.createElement(c.Modal,{dialogClassName:"modal-xxl",show:e.show,onHide:re,onEntering:function(){return l(void 0,void 0,void 0,(function(){var t,n,a,i,l;return o(this,(function(o){switch(o.label){case 0:return ie(),t=e.videoMode?[{value:"vast",label:"VAST"},{value:"video",label:"Video"},{value:"banner",label:"Banner"},{value:"thirdparty",label:"3rd Party Creative"}]:[{value:"banner",label:"Banner"},{value:"thirdparty",label:"3rd Party Creative"},{value:"vast",label:"VAST"},{value:"video",label:"Video"}],u(t),r(t[0].value),"advertiser"!==e.scope?[3,1]:(O(e.scopeId),l=e.data.advertiser.agencyId,N(h.isSter(l)),[3,3]);case 1:return[4,ae()];case 2:n=o.sent(),a=n.length>0?n[0].advertiser.id:-1,i=function(e){return e.map((function(e){return{value:e.advertiser.id,label:e.advertiser.name}}))}(n),S(i),O(a),"agency"===e.scope?N(h.isSter(e.scopeId)):n.length>0?(l=n[0].advertiser.agencyId,N(h.isSter(l))):N(!1),o.label=3;case 3:return[2]}}))}))},backdrop:"static"},s.default.createElement(c.Modal.Header,{closeButton:!0},s.default.createElement(c.Modal.Title,null,"Create ads")),s.default.createElement(c.Modal.Body,null,s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-lg-5"},le&&s.default.createElement(c.Form.Group,{controlId:"ad-advertiser"},s.default.createElement(c.Form.Label,null,"Advertiser * "),s.default.createElement(d.default,{inputId:"react-select-ad-advertiser",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:w.find((function(e){return e.value===C})),onChange:function(e){var t=e.value;O(t)},options:w})),s.default.createElement(c.Form.Group,{controlId:"ad-type"},s.default.createElement(c.Form.Label,null,"Ad Type"),s.default.createElement(d.default,{inputId:"react-select-adtype",className:"react-select-container",classNamePrefix:"react-select",onChange:function(e){var t=e.value;r(t),ie()},value:i.find((function(e){return e.value===n})),options:i})),s.default.createElement(p.default,{adType:n,submit:H,localBanners:F,thirdPartyHosts:j,isSter:I,onPreviewChange:function(e){Q(e)},onCreate:function(e,t){ne(e),K(t),e&&W(!1)},onUploadBanners:function(e){B(0),D(e.banners),V(L.concat(e.toDelete))},onUploadVideo:function(e){Y(e)}})),s.default.createElement("div",{className:"col-lg-7"},"banner"===n&&s.default.createElement(s.Fragment,null,s.default.createElement(g.default,{activeIndex:R,banners:F,onTabClick:function(e){B(e)},onDelete:function(e){var t=F.concat();t.length>0&&(t.splice(e,1),D(t),R>0&&R===e&&B(R-1))}}),s.default.createElement(v.default,{id:"banner-preview-"+R,banner:oe})),$&&"thirdparty"===n&&s.default.createElement(b.default,{id:"create-banner-preview",ad:$}),$&&"vast"===n&&s.default.createElement(E.default,{id:"create-video-preview",ad:$}),q&&"video"===n&&s.default.createElement("div",null,"Preview for this video is not possible until the ad is saved.")))),s.default.createElement(c.Modal.Footer,null,s.default.createElement(c.Button,{size:"sm",variant:"light",onClick:re},"CANCEL"),s.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:function(){W(!0)},disabled:H},!H&&s.default.createElement(s.Fragment,null,"SAVE"),H&&s.default.createElement(s.Fragment,null,s.default.createElement(y.default,{names:["refresh","spin"]})," SAVING"))))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),i=r(n(3));t.default=function(e){return a.default.createElement("ul",{className:"nav nav-tabs banner-list"},e.banners.map((function(t,n){return a.default.createElement("li",{key:"banner-"+n,className:"nav-item"},a.default.createElement("div",{className:"nav-link"+(e.activeIndex===n?" active":"")},a.default.createElement("span",{onClick:function(t){return e.onTabClick(n)}},t.name)," ",a.default.createElement("span",{onClick:function(t){e.onDelete(n)}},a.default.createElement(i.default,{name:"remove"}))))})))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(0)),o=i(n(33));t.default=function(e){var t=l.useState($("#"+e.id).parent().width()),n=t[0],r=t[1];function a(){return window.removeEventListener("resize",i)}function i(){r($("#"+e.id).parent().width())}if(l.useEffect((function(){return window.addEventListener("resize",i),a}),[e.banner]),e.banner){var u=o.previewScale(e.banner.width,n),s=function(e,t,n){return{width:e+"px",height:t+"px",transform:"scale("+n+")",transformOrigin:"top left"}}(e.banner.width,e.banner.height,u);return 1===e.banner.type?l.default.createElement("div",{id:e.id},l.default.createElement("img",{style:s,src:e.banner.preview})):l.default.createElement("div",{id:e.id},l.default.createElement("iframe",{style:s,src:e.banner.preview,frameBorder:"0",scrolling:"no"}))}return null}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(29)),s=l(n(30)),c=l(n(31)),d=i(n(13)),f=l(n(12)),p=l(n(10)),m=l(n(26)),h=l(n(318));t.default=function(){var e=o.useContext(f.default).data;return d.getRights(e.rights).VIEW_FEEDS?o.default.createElement(o.Fragment,null,o.default.createElement(u.default,null,o.default.createElement("div",{className:"col-sm-12"},o.default.createElement(s.default,null),o.default.createElement(c.default,{id:"breadcrumb",minScope:"advertiser"}))),o.default.createElement(m.default,{title:"Data feeds"}),o.default.createElement(h.default,null)):o.default.createElement(p.default,{message:"Access forbidden"})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=n(2),f=i(n(1)),p=u(n(19)),m=i(n(20)),h=i(n(4)),g=i(n(8)),v=i(n(13)),b=u(n(16)),y=u(n(12)),E=u(n(3)),_=u(n(5)),w=u(n(10)),S=u(n(27)),P=u(n(319)),C=u(n(320)),O=u(n(39));t.default=function(){var e=c.useParams(),t=e.scope,n=e.scopeId,r=s.useContext(y.default).data,a=v.getRights(r.rights),i=s.useContext(b.default),u=s.useContext(O.default).items,x=s.useState(!0),I=x[0],N=x[1],A=s.useState([]),j=A[0],M=A[1],k=s.useState(0),F=k[0],D=k[1],T=s.useState(0),R=(T[0],T[1],s.useState(null)),B=R[0],G=R[1],L=s.useState(!1),V=L[0],z=L[1],q=s.useState(!1),Y=q[0],U=q[1],H=s.useState(!1),W=H[0],J=H[1],X=s.useState(!1),K=(X[0],X[1],s.useState(null)),Z=(K[0],K[1],s.useState(-1)),$=Z[0],Q=Z[1],ee=s.useState(null),te=ee[0],ne=ee[1],re=s.useState(!1),ae=re[0],ie=re[1],le=s.useState(""),oe=le[0],ue=le[1],se=s.useRef(null),ce=s.useRef(null);function de(){return l(this,void 0,void 0,(function(){var e,r;return o(this,(function(a){switch(a.label){case 0:N(!0),a.label=1;case 1:return a.trys.push([1,3,,4]),fe(),ce.current=new AbortController,e=g.scopedParam({scope:t,scopeId:n}),[4,h.Get({path:"/api/creativefeed",qs:e,signal:ce.current.signal})];case 2:return r=a.sent(),M(r),[3,4];case 3:return"AbortError"===a.sent().name?(ie(!1),ue("")):(ie(!0),ue("Error loading feeds.")),[3,4];case 4:return N(!1),[2]}}))}))}function fe(){ce.current&&ce.current.abort()}s.useEffect((function(){return fe}),[]),s.useEffect((function(){de()}),[t,n]);if(ae)return s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(w.default,{message:oe})))));var pe=f.get(te,"name",""),me=g.getMaxLevel(i,u);return s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",{className:"pull-left"},"Data feeds"),s.default.createElement("div",{className:"pull-right"},a.MANAGE_FEEDS&&s.default.createElement(d.Button,{size:"sm",variant:"primary",className:"mr-2",onClick:function(){U(!0),G(null),z(!0)}},s.default.createElement(E.default,{name:"plus"})," ADD DATA FEED"),s.default.createElement(d.Button,{size:"sm",variant:"primary",onClick:function(){D(F+1)}},s.default.createElement(E.default,{name:"remove"})," CLEAR FILTERS")),s.default.createElement(_.default,{visible:I}),!I&&s.default.createElement(P.default,{type:"current",user:i,records:j,filtersCounter:F,editClick:function(e,t){!function(e,t){l(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,h.Get({path:"/api/creativefeed/"+e,signal:ce.current.signal})];case 1:return n=r.sent(),G(n),z(t),U(!0),[2]}}))}))}(e,t)},deleteClick:function(e){!function(e){var t=j.find((function(t){return t.id===e}));Q(e),ne(t),J(!0)}(e)}}))),s.default.createElement(C.default,{creativeFeed:B,writeAccess:V,show:Y,rights:a,scope:t,scopeId:n,maxLevel:me,handleClose:function(){U(!1)},handleSubmit:function(e,t){return l(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),e>0?[4,h.Put({path:"/api/creativefeed/"+e,body:t})]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,h.Post({path:"/api/creativefeed",body:t})];case 3:n.sent(),n.label=4;case 4:return U(!1),G(null),de(),se.current.addNotification(m.success(s.default.createElement("span",null,"Creative feed ",s.default.createElement("strong",null,t.name)," saved."),!1)),[3,6];case 5:return n.sent(),U(!1),G(null),se.current.addNotification(m.error("Error saving feed.")),[3,6];case 6:return[2]}}))}))}}),s.default.createElement(S.default,{message:"Delete creative feed "+pe,show:W,onClose:function(){return J(!1)},onConfirm:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,h.Delete({path:"/api/creativefeed/"+$})];case 1:return e.sent(),se.current.addNotification(m.success(s.default.createElement("span",null,"Creative feed ",te.name," deleted."),!1)),J(!1),de(),[3,3];case 2:return e.sent(),J(!1),se.current.addNotification(m.error("Error deleting feed.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(p.default,{ref:se}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(14)),s=i(n(45)),c=l(n(17)),d=n(2),f=i(n(1)),p=(l(n(11)),i(n(15))),m=l(n(3));t.default=function(e){var t="reports-table-"+e.type,n=o.useState(1),r=n[0],a=n[1],i=o.useState(p.getInitialSizePerPage(t,e.user)),l=i[0],h=i[1],g=o.useState({dataField:"id",order:"desc"}),v=g[0],b=g[1],y=o.useState(""),E=y[0],_=y[1],w=o.useState(""),S=w[0],P=w[1],C=o.useState(""),O=C[0],x=C[1],I=o.useState(""),N=I[0],A=I[1],j=o.useRef(null),M=o.useRef(null),k=o.useRef(null),F=o.useRef(null);o.useEffect((function(){j.current(""),M.current(""),k.current(""),F.current("")}),[e.filtersCounter]);var D,T,R=function(e,t){b({dataField:e,order:t})},B=function(t,n){return n.writeAccess?o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id,n.writeAccess)},href:"",className:"table-btn"},o.default.createElement(m.default,{name:"pencil"})):o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id,n.writeAccess)},href:"",className:"table-btn"},o.default.createElement(m.default,{name:"search-plus"}))},G=function(t,n){return n.writeAccess?o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.deleteClick(n.id)},href:"",className:"table-btn"},o.default.createElement(m.default,{name:"remove"})):null},L=function(t,n,r){if(n.description){var a=o.default.createElement(d.Popover,{id:"popover-trigger-hover"+r},o.default.createElement(d.Popover.Content,null,n.description));return o.default.createElement(d.OverlayTrigger,{trigger:"hover",placement:"top",overlay:a},o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id,n.writeAccess)},href:""},t))}return o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id,n.writeAccess)},href:""},t)},V=(D={all:"root",metaAgency:"organization",agency:"agency",advertiser:"advertiser"},[{dataField:"id",text:"#",hidden:!0},{dataField:"writeAccess",text:"#",hidden:!0},{dataField:"name",text:"Name",sort:!0,onSort:R,sortCaret:p.columnSort,filter:s.textFilter({id:e.type+"-name-filter",placeholder:"Search name...",defaultValue:E,getFilter:function(e){j.current=e},onFilter:function(e){_(e)}}),formatter:L},{dataField:"numberEntries",text:"Number of entries",sort:!0,onSort:R,sortCaret:p.columnSort,filter:s.textFilter({id:e.type+"-status-filter",placeholder:"Search status...",defaultValue:S,getFilter:function(e){M.current=e},onFilter:function(e){P(e)}})},{dataField:"level",text:"Level",sort:!0,onSort:R,sortCaret:p.columnSort,formatter:function(e){return D[e]},filter:s.selectFilter({id:e.type+"-level-filter",options:D,defaultValue:O,getFilter:function(e){k.current=e},onFilter:function(e){x(e)}})},{dataField:"owner",text:"Entity",sort:!0,onSort:R,sortCaret:p.columnSort,filter:s.textFilter({id:e.type+"-owner-filter",placeholder:"Search entity...",defaultValue:N,getFilter:function(e){F.current=e},onFilter:function(e){A(e)}})},{dataField:"df2",isDummyField:!0,text:"",formatter:B,headerStyle:{width:"30px"}},{dataField:"df3",isDummyField:!0,text:"",formatter:G,headerStyle:{width:"30px"}}]),z=e.records.map((function(e){var t=f.pick(e,["id","name","description","writeAccess","rows"]),n=f.get(e,"scope.scope"),r=f.get(e,"scope.owner");return f.assign(t,{level:n,owner:r})})),q=p.getSizePerPage(l,z.length),Y=e.records.length||30;return o.default.createElement(u.default,{id:t,filter:s.default(),classes:"table-borderless",bordered:!1,hover:!0,striped:!0,keyField:"id",data:z,columns:V,defaultSorted:[v],pagination:c.default({page:(T=p.getLastPage(e.records,l),r>T?T:r),sizePerPage:q,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:Y}],onPageChange:function(e,t){a(e)},onSizePerPageChange:function(n,r){p.storeSizePerPage(n,t,e.user),h(n)}})})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=u(n(9)),f=i(n(1)),p=i(n(7)),m=i(n(8)),h=i(n(36)),g=n(321),v=u(n(322)),b=u(n(323)),y=u(n(5));t.default=function(e){var t,n,r,a,i=f.get(e,"creativeFeed.id",-1),u=f.get(e,"creativeFeed.scope.owner",""),E=f.get(e,"creativeFeed.scope.scope")||"all",_=(f.get(e,"creativeFeed.scope.scopeId"),m.getLevelOptions(e.maxLevel)),w=["retail branch","products","product category","product subcategory"].map((function(e){return{label:e,value:e}})),S=s.useState(!1),P=S[0],C=S[1],O=s.useState(!1),x=O[0],I=O[1],N=s.useState(""),A=N[0],j=N[1],M=s.useState((null===(t=e.creativeFeed)||void 0===t?void 0:t.attribute)||g.CreativeFeedType.PRODUCTS),k=M[0],F=M[1],D=s.useState((null===(n=e.creativeFeed)||void 0===n?void 0:n.numberEventsUsed)||1),T=D[0],R=D[1],B=s.useState(""),G=B[0],L=B[1],V=s.useState(e.scope),z=V[0],q=V[1],Y=s.useState(-1),U=Y[0],H=Y[1],W=s.useState(!1),J=W[0],X=W[1],K=s.useState([{value:-1,label:""}]),Z=K[0],$=K[1],Q=s.useState({error:!1,message:""}),ee=Q[0],te=Q[1],ne=s.useState({error:!1,message:""}),re=ne[0],ae=ne[1],ie=s.useState((null===(r=e.creativeFeed)||void 0===r?void 0:r.rows)||[]),le=ie[0],oe=ie[1],ue=s.useState(null===(a=e.creativeFeed)||void 0===a?void 0:a.updateSettings),se=ue[0],ce=ue[1];function de(t){return l(this,void 0,void 0,(function(){var n,r;return o(this,(function(a){switch(a.label){case 0:return I(!0),[4,m.getEntityOptions("data-feeds",e.scope,e.scopeId,t)];case 1:return n=a.sent(),r=n.length>0?n[0].value:-1,q(t),$(n),H(r),I(!1),[2]}}))}))}return s.default.createElement(c.Modal,{size:"lg",show:e.show,onHide:function(){X(!1),e.handleClose()},onEntering:function(){return l(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return C(!1),I(!1),X(!1),ae({error:!1,message:""}),ce(null===(t=e.creativeFeed)||void 0===t?void 0:t.updateSettings),[4,de(z)];case 1:return n.sent(),e.creativeFeed?(F(e.creativeFeed.attribute),R(e.creativeFeed.numberEventsUsed),j(e.creativeFeed.name),L(e.creativeFeed.description)):(F(g.CreativeFeedType.PRODUCTS),R(1),j(""),L("")),[2]}}))}))},backdrop:"static"},s.default.createElement(c.Modal.Header,{closeButton:!0},s.default.createElement(c.Modal.Title,null,"Data feed settings")),s.default.createElement(c.Modal.Body,null,s.default.createElement("div",{className:"row no-gutters"},s.default.createElement("div",{className:"col-lg-12 px-1"},s.default.createElement(c.Form.Group,{controlId:"creative-feed-name"},s.default.createElement(c.Form.Label,null,"Name *"),s.default.createElement(c.Form.Control,{autoFocus:!0,readOnly:!e.writeAccess,isInvalid:re.error,type:"text",value:A,onChange:function(e){var t=e.target.value,n=p.required(t);j(t),ae(n)}}),re.error&&s.default.createElement(c.Form.Control.Feedback,{type:"invalid"},re.message)),s.default.createElement(c.Form.Group,{controlId:"creative-feed-attribute"},s.default.createElement(c.Form.Label,null,"type:"),s.default.createElement(d.default,{inputId:"react-select-creative-type",className:"react-select-container",classNamePrefix:"react-select",readOnly:!e.writeAccess,clearable:!1,onChange:function(e){return F(e.value)},options:w,value:w.find((function(e){return e.value==k.valueOf()}))})),s.default.createElement(c.Form.Group,{controlId:"creative-feed-description"},s.default.createElement(c.Form.Label,null,"Max number of rows per impression:"),s.default.createElement(c.Form.Control,{readOnly:!e.writeAccess,isInvalid:ee.error,type:"text",value:isNaN(T)?"":T.toString(),onChange:function(e){try{var t=Number(e.target.value);te(p.numberInRange(t,1,5)),R(t)}catch(e){}}}),ee.error&&s.default.createElement(c.Form.Control.Feedback,{type:"invalid"},ee.message)),s.default.createElement(c.Form.Group,{controlId:"creative-feed-description"},s.default.createElement(c.Form.Label,null,"Description"),s.default.createElement(c.Form.Control,{as:"textarea",autoFocus:!0,disabled:!e.writeAccess,type:"text",rows:"3",value:G,onChange:function(e){L(e.target.value)}})),s.default.createElement("a",{href:"",onClick:function(e){e.preventDefault(),X(!0)}},"Set automatic update settings"))),s.default.createElement("div",null),s.default.createElement("div",{className:"row no-gutters"},-1===i&&s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Group,{controlId:"report-scope"},s.default.createElement(c.Form.Label,null,"Level:"),s.default.createElement(d.default,{inputId:"react-select-creative-feed-scope",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:_.find((function(e){return e.value===z})),onChange:function(e){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,de(e.value)];case 1:return t.sent(),[2]}}))}))},options:_}))),"root"!==z&&-1===i&&s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(y.default,{visible:x,loaderClass:"loading-input"}),!x&&s.default.createElement(c.Form.Group,{controlId:"report-entity"},s.default.createElement(c.Form.Label,null,m.getLabelByScopeType(z)),s.default.createElement(d.default,{inputId:"react-select-creative-feed-entity",className:"react-select-container",classNamePrefix:"react-select",value:Z.find((function(e){return e.value===U})),clearable:!1,onChange:function(e){return l(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){return t=e.value,H(t),[2]}))}))},options:Z}))),i>0&&s.default.createElement(s.Fragment,null,s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Group,{controlId:"report-level"},s.default.createElement(c.Form.Label,null,"Level:"),s.default.createElement(c.Form.Control,{disabled:!0,type:"text",value:m.getLabelByScope(E)}))),s.default.createElement("div",{className:"col-lg-6 px-1"},s.default.createElement(c.Form.Group,{controlId:"report-owner"},s.default.createElement(c.Form.Label,null,"Entity:"),s.default.createElement(c.Form.Control,{disabled:!0,type:"text",value:u}))))),s.default.createElement(v.default,{show:!0,creativeFeed:e.creativeFeed,rowsChanged:oe,exportData:function(t){var n,r=["id","name","landing page","custom 1","custom 2","custom 3","custom 4","custom 5","custom 6","custom 7","custom 8","custom 9"].map((function(e){return h.getBoldCell(e)})),a=t.map((function(e){return[h.getCell(e.key),h.getCell(e.name),h.getCell(e.landingPage?e.landingPage:""),h.getCell(e.custom1?e.custom1:""),h.getCell(e.custom2?e.custom2:""),h.getCell(e.custom3?e.custom3:""),h.getCell(e.custom4?e.custom4:""),h.getCell(e.custom5?e.custom5:""),h.getCell(e.custom6?e.custom6:""),h.getCell(e.custom7?e.custom7:""),h.getCell(e.custom8?e.custom8:""),h.getCell(e.custom9?e.custom9:"")]})),i=[r].concat(a),l=(null===(n=e.creativeFeed)||void 0===n?void 0:n.name)?e.creativeFeed.name:"New";h.save(i,"Data","Data_"+l)}}),J?s.default.createElement(b.default,{show:J,updateSettings:se,rights:e.rights,writeAccess:e.writeAccess,handleClose:function(){X(!1)},handleSubmit:function(e){ce(e),X(!1)}}):null),s.default.createElement(c.Modal.Footer,null,s.default.createElement(c.Button,{variant:"light",size:"sm",onClick:e.handleClose},"CANCEL"),s.default.createElement(c.Button,{variant:"primary",size:"sm",onClick:function(){!function(t){var n=p.required(A),r=p.numberInRange(T,1,5);if(n.error||r.error)ae(n);else if(C(!0),i>0){var a=m.getScopeByLevel(e.scope),l={name:A,description:G,scope:{scope:a,scopeId:e.scopeId},numberEventsUsed:T,attribute:k,rows:le,updateSettings:se};e.handleSubmit(i,l)}else{a=m.getScopeByLevel(z);var o={name:A,description:G,scope:{scope:a,scopeId:null},numberEventsUsed:T,attribute:k,rows:le,updateSettings:se};"root"!==z&&(o.scope.scopeId=U),e.handleSubmit(i,o)}}()},disabled:P||!e.writeAccess},"SAVE")))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreativeFeedType=void 0,function(e){e.RETAILBRANCH="retail branch",e.PRODUCTS="products",e.PRODUCTS_CATEGORY="product category",e.PRODUCTS_SUBCATEGORY="product subcategory"}(t.CreativeFeedType||(t.CreativeFeedType={}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=(this&&this.__awaiter,this&&this.__generator,this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}});Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=i(n(1)),c=i(n(22)),d=l(n(65)),f=l(n(3));t.default=function(e){var t,n=o.useState(null),r=(n[0],n[1]),a=o.useState("0"),i=a[0],l=a[1],p=o.useState([]),m=p[0],h=p[1],g=o.useState(""),v=g[0],b=g[1],y=o.useState(""),E=y[0],_=y[1],w=o.useState(!1),S=w[0],P=w[1],C=o.useState(x((null===(t=e.creativeFeed)||void 0===t?void 0:t.rows)||[])),O=C[0];C[1];function x(e){if(e.length>0){var t={id:"key",name:"name","landing page":"landingPage","custom 1":"custom1","custom 2":"custom2","custom 3":"custom3","custom 4":"custom4","custom 5":"custom5","custom 6":"custom6","custom 7":"custom7","custom 8":"custom8","custom 9":"custom9"},n=new Map(Object.keys(t).map((function(e){return[t[e],e]}))),r=Object.keys(t).map((function(e){return t[e]})).filter((function(e){return"keys"!=e})),a={};r.forEach((function(t){a[t]=0,e.forEach((function(e){e[t]&&(a[t]+=1)}))}));var i=r.filter((function(e){return a[e]>0})).map((function(e){return n.get(e)})),l=r.filter((function(t){return 0!=a[t]&&a[t]!=e.length})).map((function(e){return n.get(e)})),o=e.length+" entries. Used properties: "+i.reduce((function(e,t){return e+(""!=e?", ":"")+t}),"");return l.length>0&&(o+=", Not all entries have properties: "+l.reduce((function(e,t){return e+(""!=e?", ":"")+t}),"")+"!"),o}return"No data"}var I=function(t,n){var a,i,o;a=t,i=function(a,i){var o;r(t),l(n),h(a),e.rowsChanged((-1!==(o=x(i||[])).indexOf("Not all entries have")?(b(""),_(o)):"No data"==o?(b(""),_("File is empty, uploading it will clear the data feed!")):(b(o),_("")),i||[])),P(!1)},(o=new FileReader).onload=function(e){var t,n=e.target.result,r=c.fixExcelData(n),a=(t=XLSX.read(btoa(r),{type:"base64"})).SheetNames[0],l=function(e){return e.filter((function(e){return 0!==e.length&&""!==e.map((function(e){return null==e?"":e.trim()})).join("")}))}(XLSX.utils.sheet_to_json(t.Sheets[a],{header:1,blankRows:!1})),o={id:"key",name:"name","landing page":"landingPage","custom 1":"custom1","custom 2":"custom2","custom 3":"custom3","custom 4":"custom4","custom 5":"custom5","custom 6":"custom6","custom 7":"custom7","custom 8":"custom8","custom 9":"custom9"},u=l.shift().map((function(e){return e.trim()})).map((function(e){return o[e]})),d=function(e){var t=["key"],n=s.difference(t,e);return n.length>0?['Missing required columns: "'+n.join(", ")+'".']:[]}(u);if(d.length>0)i(d);else{var f=function(e,t){return e.map((function(e){var n={};return t.forEach((function(t,r){t&&(n[t]=e[r]||null)})),n}))}(l,u),p=function(e){var t=[],n=function(e){var t=s.countBy(e,"key");return Object.keys(t).filter((function(e){return t[e]>1}))}(e);n.length>10?t.push("Some ids are not unique within the update."):n.length>0&&t.push("Some ids are not unique within the update: "+n.join(", ")+".");var r=["key"],a=function(e,t){return e.filter((function(e){return s.values(s.pick(e,t)).filter((function(e){return null===e})).length>0})).map((function(e){return e.branchId}))}(e,r);return a.length>10?t.push('Some branches lack mandatory fields "id, budget".'):a.length>0&&t.push("Branches with id: "+a.join(", ")+' lack mandatory fields "id, budget".'),t}(f);p.length>0?i(p):i(p,f)}},o.readAsArrayBuffer(a)};return o.default.createElement("div",null,o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-sm-12 px-1"},o.default.createElement(u.Button,{variant:"primary",size:"sm",onClick:function(){var t;e.exportData((null===(t=e.creativeFeed)||void 0===t?void 0:t.rows)||[])}}," Export data/template"),o.default.createElement("div",null,o.default.createElement("b",null," Current data: ",O)))),o.default.createElement("br",null),o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-sm-12 px-1"},o.default.createElement(u.Form.Group,{id:"datafeed-import-file"},o.default.createElement("p",null,"Upload an excel file to import feed data; when reuploading, missing keys and rows will be removed"),o.default.createElement(u.Form.Control,{key:i,type:"file",accept:".xls,.xlsx",onChange:function(e){var t=s.get(e,"target.files[0]",null);I(t,"")}})),o.default.createElement(u.Form.Group,null,o.default.createElement(d.default,{singleUpload:!0,exts:[".xls",".xlsx"],text:"Drag and drop file",loading:S,onError:function(e){e?(h([e]),b(""),_("")):(h([]),b(""),_(""))},onUpload:function(e){P(!0);var t=s.get(e,"[0].file"),n=Math.random().toString(36);I(t,n)}}),o.default.createElement("div",{className:"pt-2"},o.default.createElement("div",{className:"text-success pb-2"},v),m.length>0&&o.default.createElement(u.Alert,{variant:"danger"},o.default.createElement("div",null,o.default.createElement(f.default,{name:"times-circle"})," ",o.default.createElement("strong",null,"Errors")),o.default.createElement("ul",{className:"pl-3"},m.map((function(e,t){return o.default.createElement("li",{key:"error-"+t},e)}))))))),o.default.createElement("div",{className:"col-sm-12"},o.default.createElement("div",{className:"text-danger"},E))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(0)),d=n(2),f=i(n(4)),p=s(n(324));t.default=function(e){var t,n,r,a=c.useState(!1),i=a[0],s=a[1],m=c.useState(!1),h=(m[0],m[1]),g=c.useState(null===(t=e.updateSettings)||void 0===t?void 0:t.itemName),v=g[0],b=g[1],y=c.useState({error:!1,message:""}),E=y[0],_=(y[1],c.useState(null===(n=e.updateSettings)||void 0===n?void 0:n.updateUrl)),w=_[0],S=_[1],P=c.useState((null===(r=e.updateSettings)||void 0===r?void 0:r.fieldOptions)||[]),C=P[0],O=P[1],x=function(){return Array.from({length:15},(function(e,t){return t+1})).map((function(e,t){return I("custom"+(t+1),"custom "+(t+1))}))},I=function(t,n){var r=e.updateSettings&&e.updateSettings[t]?e.updateSettings[t]:{externalName:"",creativeName:"",type:"text"};return{internal_name:n,field_name:r.externalName,external_name:r.creativeName,type:r.type}},N=function(e){return{externalName:e.field_name,creativeName:e.external_name,type:e.type}},A=c.useState(I("key","key")),j=A[0],M=A[1],k=c.useState(x()),F=k[0],D=k[1],T=c.useState(F.map((function(e){return""!=e.external_name})).lastIndexOf(!0)+1),R=T[0],B=T[1];c.useEffect((function(){B(F.map((function(e){return""!=e.external_name})).lastIndexOf(!0)+1)}),[F]);var G=function(e,t,n){e.childNodes.forEach((function(e){if(e.nodeType===Node.ELEMENT_NODE){var r=n+"."+e.nodeName,a=t.get(r)?t.get(r):0;t.set(r,a+1),G(e,t,r)}}))},L=function(e,t){var n=new Set;return t.forEach((function(t,r){if(r.startsWith(e)&&r!=e){var a=r.substring(e.length+1,r.length);n.add(a)}})),n},V=function(e){var t=new Map;e.forEach((function(e,n){var r=t.get(e)?t.get(e):0;t.set(e,r+1)}));var n=0,r=0;t.forEach((function(e,t){e>r&&(n=t,r=e)}));var a="";return e.forEach((function(e,t){e==n&&(""==a||a.split(".").length>t.split(".").length)&&(a=t)})),a};return c.default.createElement(d.Modal,{size:"lg",show:e.show,onHide:e.handleClose,onEntering:function(){return l(void 0,void 0,void 0,(function(){var t,n;return o(this,(function(r){return s(!1),h(!1),b(null===(t=e.updateSettings)||void 0===t?void 0:t.itemName),M(I("key","key")),D(x()),O((null===(n=e.updateSettings)||void 0===n?void 0:n.fieldOptions)||[]),B(F.map((function(e){return""!=e.external_name})).lastIndexOf(!0)+1),[2]}))}))},backdrop:"static"},c.default.createElement(d.Modal.Header,{closeButton:!0},c.default.createElement(d.Modal.Title,null,"Data feed settings")),c.default.createElement(d.Modal.Body,null,c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-12"},c.default.createElement(d.Form.Group,{controlId:"creative-feed-description"},c.default.createElement(d.Form.Label,null,"Datafeed url:"),c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-9"},c.default.createElement(d.Form.Control,{autoFocus:!0,readOnly:!1,isInvalid:E.error,type:"text",value:w,onChange:function(e){return S((function(){return e.target.value}))}})),c.default.createElement("div",{className:"col-lg-3 "},c.default.createElement(d.Button,{variant:"primary",size:"sm",onClick:function(){!function(e){l(void 0,void 0,void 0,(function(){var t,n,r,a,i,l,u;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,f.Post({path:"/xml",body:{url:e}})];case 1:return t=o.sent(),n=new DOMParser,r=n.parseFromString(t.xml,"text/xml"),a=new Map,G(r,a,""),i=V(a),b(i),l=L(i,a),O(Array.from(l)),[3,3];case 2:return u=o.sent(),console.log(u),[3,3];case 3:return[2]}}))}))}(w)}}," Get url")))))),c.default.createElement("div",null,c.default.createElement(p.default,{show:!0,data:j,name_options_method:C,writeAccess:e.writeAccess,updateAttribute:function(e){M(e)}})),c.default.createElement("div",null,F.map((function(t,n){return c.default.createElement(p.default,{show:n<=R,data:t,name_options_method:C,writeAccess:e.writeAccess,updateAttribute:function(e){var t=F;t[n]=e,D((function(){return u([],t)}))}})})))),c.default.createElement(d.Modal.Footer,null,c.default.createElement(d.Button,{variant:"light",size:"sm",onClick:e.handleClose},"CANCEL"),c.default.createElement(d.Button,{variant:"primary",size:"sm",onClick:function(){!function(){s(!0);var t={updateUrl:w,itemName:v,key:N(j),custom1:N(F[0]),custom2:N(F[1]),custom3:N(F[2]),custom4:N(F[3]),custom5:N(F[4]),custom6:N(F[5]),custom7:N(F[6]),custom8:N(F[7]),custom9:N(F[8]),custom10:N(F[9]),custom11:N(F[10]),custom12:N(F[11]),custom13:N(F[12]),custom14:N(F[13]),custom15:N(F[14]),fieldOptions:C};e.handleSubmit(t)}()},disabled:i||!e.writeAccess},"OKAY")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(9));t.default=function(e){var t=e.name_options_method.map((function(e){return{value:e,label:e}})),n=[{value:e.data.type,label:e.data.type}],r=o.useState(e.data.field_name),a=r[0],i=r[1],l=o.useState(e.data.type),c=l[0],d=l[1],f=o.useState(e.data.external_name),p=f[0],m=f[1];o.useEffect((function(){e.updateAttribute(h())}),[a,c,p]);var h=function(){return{internal_name:e.data.internal_name,field_name:a,external_name:p,type:c,writeAccess:e.writeAccess}};return e.show?o.default.createElement("div",{className:"row no-gutters"},o.default.createElement("div",{className:"col-lg-1"},o.default.createElement(u.Form.Label,null,e.data.internal_name,":")),o.default.createElement("div",{className:"col-lg-4"},o.default.createElement(s.default,{inputId:"attribute-creative-feed-"+e.data.internal_name,isDisabled:!e.writeAccess,className:"react-select-container",classNamePrefix:"react-select",name:"data-feed-select",value:t.find((function(e){return e.value===a})),clearable:!1,options:t,onChange:function(e){i((function(t){return m(e.value),e.value}))}})),o.default.createElement("div",{className:"col-lg-1"},o.default.createElement(u.Form.Label,null,"data:")),o.default.createElement("div",{className:"col-lg-2"},o.default.createElement(s.default,{inputId:"attribute-creative-feed-"+e.data.internal_name+"-type",isDisabled:!e.writeAccess,className:"react-select-container",classNamePrefix:"react-select",name:"data-feed-select",value:n.find((function(e){return e.value===c})),clearable:!1,options:n,onChange:function(e){d(e.value)}})),o.default.createElement("div",{className:"col-lg-1"},o.default.createElement(u.Form.Label,null,"name:")),o.default.createElement("div",{className:"col-lg-3"},o.default.createElement(u.Form.Control,{readOnly:!e.writeAccess,type:"text",value:p,onChange:function(e){var t=e.target.value;m(t)}}))):null}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(6),s=l(n(29)),c=l(n(30)),d=l(n(31)),f=i(n(13)),p=l(n(12)),m=l(n(10)),h=l(n(26)),g=l(n(326)),v=l(n(41)),b=l(n(28));t.default=function(){var e=o.useContext(p.default).data,t=u.useHistory(),n=u.useParams(),r=n.scope,a=n.scopeId,i=f.getRights(e.rights),l=o.useContext(b.default).daterange,y=l.startDate.format("YYYY-MM-DD"),E=l.endDate.format("YYYY-MM-DD");return o.useEffect((function(){t.push("/segments/"+r+"/"+a+"?sd="+y+"&ed="+E)}),[]),i.VIEW_SEGMENTS?o.default.createElement(o.Fragment,null,o.default.createElement(s.default,null,o.default.createElement("div",{className:"col-sm-9"},o.default.createElement(c.default,null),o.default.createElement(d.default,{id:"breadcrumb",minScope:"advertiser"})),o.default.createElement("div",{className:"col-sm-3"},o.default.createElement("div",{className:"daterange-container"},o.default.createElement(v.default,null)))),o.default.createElement(h.default,{title:"Segments"}),o.default.createElement(g.default,null)):o.default.createElement(m.default,{message:"Access forbidden"})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(43),d=n(6),f=n(2),p=n(44),m=i(n(1)),h=u(n(19)),g=i(n(20)),v=i(n(4)),b=i(n(8)),y=i(n(36)),E=i(n(13)),_=u(n(12)),w=u(n(16)),S=u(n(10)),P=u(n(3)),C=u(n(5)),O=u(n(327)),x=u(n(328)),I=u(n(329)),N=u(n(27)),A=u(n(52)),j=u(n(28));t.default=function(){var e=d.useParams(),t=e.scope,n=e.scopeId,r=s.useContext(_.default).data,a=E.getRights(r.rights),i=s.useContext(w.default),u=s.useContext(j.default).daterange,M=u.startDate.format("YYYY-MM-DD"),k=u.endDate.format("YYYY-MM-DD"),F={startDate:M,endDate:k,statistics:a.VIEW_STATISTICS},D=s.useState([]),T=D[0],R=D[1],B=s.useState([]),G=B[0],L=B[1],V=s.useState(null),z=V[0],q=V[1],Y=s.useState(null),U=Y[0],H=Y[1],W=s.useState(-1),J=W[0],X=W[1],K=s.useState(-1),Z=K[0],$=K[1],Q=s.useState(null),ee=Q[0],te=Q[1],ne=s.useState(!1),re=ne[0],ae=ne[1],ie=s.useState(!1),le=ie[0],oe=ie[1],ue=s.useState(!1),se=ue[0],ce=ue[1],de=s.useState(!1),fe=de[0],pe=de[1],me=s.useState(!1),he=me[0],ge=me[1],ve=s.useState(!1),be=ve[0],ye=ve[1],Ee=s.useState(!1),_e=Ee[0],we=Ee[1],Se=s.useState(!1),Pe=Se[0],Ce=Se[1],Oe=s.useState(!1),xe=Oe[0],Ie=Oe[1],Ne=s.useState(""),Ae=Ne[0],je=Ne[1],Me=s.useRef(null),ke=s.useRef(null),Fe=s.useRef(null);function De(){return l(this,void 0,void 0,(function(){var e,r,a,i,l,u;return o(this,(function(o){switch(o.label){case 0:ae(!0),o.label=1;case 1:return o.trys.push([1,5,,6]),Te(),ke.current=new AbortController,e=b.scopedParam({scope:t,scopeId:n}),r=m.assign({},e,F),[4,v.Get({path:"/api/segments/statistics",qs:r,signal:ke.current.signal})];case 2:return a=o.sent(),"advertiser"===t?[3,4]:[4,v.Get({path:"/api/advertisers",qs:e,signal:ke.current.signal})];case 3:i=o.sent(),l=i.advertisers.map((function(e){return e.advertiser})),L(l),o.label=4;case 4:return R(a),Ie(!1),je(""),ae(!1),[3,6];case 5:return u=o.sent(),console.log(u),"AbortError"===u.name?(Ie(!1),je("")):(Ie(!0),je("Error loading segments."),ae(!1)),[3,6];case 6:return[2]}}))}))}function Te(){ke.current&&ke.current.abort()}s.useEffect((function(){return Te}),[]),s.useEffect((function(){De()}),[n,M,k]);function Re(e){return l(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,v.Post({path:"/api/segments",body:e,qs:{advertiserId:e.advertiserId}})];case 1:return t.sent(),oe(!1),De(),Me.current.addNotification(g.success(s.default.createElement("span",null,"Segment ",s.default.createElement("strong",null,e.name)," created."),!1)),[3,3];case 2:return t.sent(),oe(!1),ae(!1),Me.current.addNotification(g.error("Error creating segment.")),[3,3];case 3:return[2]}}))}))}function Be(e,t){return l(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,v.Put({path:"/api/segments/"+e,body:t,qs:{advertiserId:t.advertiserId}})];case 1:return n.sent(),oe(!1),De(),Me.current.addNotification(g.success(s.default.createElement("span",null,"Segment ",s.default.createElement("strong",null,t.name)," saved."),!1)),[3,3];case 2:return n.sent(),oe(!1),ae(!1),Me.current.addNotification(g.error("Error saving segment.")),[3,3];case 3:return[2]}}))}))}if(xe)return s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(S.default,{message:Ae})))));var Ge='<script type="text/javascript" async="true"> (function() { setTimeout(function(){ var adscienceScript = document.createElement("script"); adscienceScript.type = "text/javascript"; adscienceScript.async = true; adscienceScript.src = "//segments.optinadserving.com/segmentpixel.php?advertiser_id='+n+'"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(adscienceScript, s); },1); })(); <\/script><noscript><img src="//segments.optinadserving.com/cgi-bin/sgmnt.fcgi?advertiser_id='+n+'"/></noscript>',Le=m.get(r,"advertiser.advertiserDomain",""),Ve=m.get(U,"segmentName",""),ze=a.VIEW_STATISTICS?[{col:"type",label:"type",align:"left"},{col:"countUnique",label:"total visitors",type:"number",align:"right"},{col:"countTargetedUnique",label:"visitors post targeting",type:"number",align:"right"},{col:"postViewCountUnique",label:"visited post view",type:"number",align:"right"},{col:"postClickCountUnique",label:"visited post click",type:"number",align:"right"},{col:"lastEvent",label:"Active",align:"center"}]:[{col:"type",label:"type",align:"left"},{col:"lastEvent",label:"Active",align:"center"}];return s.default.createElement(s.Fragment,null,s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",{className:"pull-left"},"Segments"),s.default.createElement("div",{className:"table-btn-container"},a.MANAGE_SEGMENTS&&s.default.createElement(f.Button,{variant:"primary",size:"sm",className:"mr-2",onClick:function(){oe(!0),q(null),Ce(!0)}},s.default.createElement(P.default,{name:"plus"})," CREATE SEGMENT"),a.VIEW_STATISTICS&&s.default.createElement(f.Button,{variant:"primary",size:"sm",className:"mr-2",onClick:function(){pe(!0)}},s.default.createElement(P.default,{name:"download"})," REPORT")),s.default.createElement(C.default,{visible:re}),!re&&s.default.createElement(O.default,{records:T,advertisers:G,showAdvertiserCol:"advertiser"!==t,user:i,rights:a,metrics:ze,editClick:function(e,t){var n=T.find((function(t){return t.id===e}));q(n),oe(!0),Ce(t)},deleteClick:function(e){var t=T.find((function(t){return t.id===e}));ye(!0),X(e),H(t)},codeClick:function(e){var t=T.find((function(t){return t.id===e}));$(e),te(t),ce(!0)}})))),"advertiser"===t&&s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card mb-2",style:{paddingBottom:"40px"}},s.default.createElement("div",null,s.default.createElement("strong",null,"Segment pixels only work if the segment tag is present on your domain. Copy here:")),s.default.createElement("div",{className:_e?"gray-box mb-2 highlight-box":"gray-box mb-2"},Ge),s.default.createElement(p.CopyToClipboard,{text:Ge,onCopy:function(){we(!0),setTimeout((function(){we(!1)}),2e3)}},s.default.createElement("button",{ref:Fe,className:"btn btn-primary btn-sm pull-right"},s.default.createElement(P.default,{name:"files-o"})," GET CODE")),s.default.createElement(f.Overlay,{target:c.findDOMNode(Fe.current),show:_e,placement:"bottom"},s.default.createElement(f.Tooltip,{id:"copy-segment-tag-tooltip"},"Copied!"))))),s.default.createElement(x.default,{id:Z,advertiserId:m.get(ee,"advertiserId"),show:se,handleClose:function(){ce(!1)}}),s.default.createElement(I.default,{segment:z,scope:t,scopeId:n,writeAccess:Pe,show:le,advertiserDomain:Le,onClose:function(){oe(!1)},onSubmit:function(e,t){return l(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return e>0?[4,Be(e,t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,Re(t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))}}),s.default.createElement(A.default,{id:"segments-report",show:fe,downloading:he,metrics:ze,onClose:function(){pe(!1),ge(!1)},onSubmit:function(e){return l(void 0,void 0,void 0,(function(){var r,i,l,u,s,c,d,f;return o(this,(function(o){switch(o.label){case 0:return ge(!0),r=b.scopedParam({scope:t,scopeId:n}),i=e.daterange.startDate.format("YYYY-MM-DD"),l=e.daterange.endDate.format("YYYY-MM-DD"),u={startDate:i,endDate:l,statistics:a.VIEW_STATISTICS},s=m.assign({},r,u),[4,v.Get({path:"/api/segments/statistics",qs:s})];case 1:return c=o.sent(),d=e.selectedMetrics.map((function(e){return y.getBoldCell(e.label||e.col)})),f=[d],c.forEach((function(t){var n=[];e.selectedMetrics.forEach((function(e){var r=y.format(e),a=y.cellFormatter(t,e),i=y.getCell(a,null,r);n.push(i)})),f.push(n)})),y.save(f,"Segment statistics","SegmentStats_"+i+"_"+l),ge(!1),pe(!1),[2]}}))}))}}),s.default.createElement(N.default,{message:"Delete segment "+Ve+"?",show:be,onClose:function(){ye(!1)},onConfirm:function(){return l(void 0,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,v.Delete({path:"/api/segments/"+J,qs:{advertiserId:U.advertiserId}})];case 1:return t.sent(),ye(!1),De(),e=m.get(U,"segmentName",""),Me.current.addNotification(g.success(s.default.createElement("span",null,"Segment ",s.default.createElement("strong",null,e)," deleted."),!1)),[3,3];case 2:return t.sent(),ye(!1),ae(!1),Me.current.addNotification(g.error("Error deleting segment.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(h.default,{ref:Me}))}},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},l=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&l(t,e,n);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=u(n(0)),d=n(6),f=u(n(1)),p=n(2),m=s(n(14)),h=u(n(23)),g=s(n(17)),v=s(n(3)),b=u(n(15)),y=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.tableId="segments-table",r.onSort=function(e,t){r.setState({defaultSorted:{dataField:e,order:t}})},r.onSizePerPageChange=function(e,t){b.storeSizePerPage(e,r.tableId,r.props.user),r.setState({sizePerPage:e})},r.advertiserFormatter=function(e,t){return f.isNil(e)?"-":c.default.createElement(d.Link,{to:"/segments/advertiser/"+t.advertiserId},e)},r.codeFormatter=function(e,t,n){var a=c.default.createElement(p.Tooltip,{id:"segment-code-tooltip-"+n},"Get individual segment code");return c.default.createElement(p.OverlayTrigger,{placement:"top",overlay:a},c.default.createElement("a",{onClick:function(e){e.preventDefault(),r.props.codeClick(t.id)},href:"",className:"table-btn"},c.default.createElement("span",{className:"fa fa-code segment-code-btn"})))},r.editFormatter=function(e,t){var n=r.props.rights.MANAGE_SEGMENTS;return n?c.default.createElement("a",{onClick:function(e){e.preventDefault(),r.props.editClick(t.id,n)},href:"",className:"table-btn"},c.default.createElement(v.default,{name:"pencil"})):c.default.createElement("a",{onClick:function(e){e.preventDefault(),r.props.editClick(t.id,n)},href:"",className:"table-btn"},c.default.createElement(v.default,{name:"search-plus"}))},r.deleteFormatter=function(e,t){return r.props.rights.MANAGE_SEGMENTS?c.default.createElement("a",{onClick:function(e){e.preventDefault(),r.props.deleteClick(t.id)},href:"",className:"table-btn"},c.default.createElement(v.default,{name:"remove"})):null},r.state={page:1,sizePerPage:b.getInitialSizePerPage(r.tableId,r.props.user),defaultSorted:{dataField:"segmentName",order:"asc"}},r}return a(t,e),t.prototype.getColumns=function(){var e=this,t=[{dataField:"segmentName",text:"name",sort:!0,onSort:this.onSort,sortCaret:b.columnSort},{dataField:"advertiserName",text:"advertiser",sort:!0,hidden:!this.props.showAdvertiserCol,onSort:this.onSort,sortCaret:b.columnSort,formatter:this.advertiserFormatter}],n=this.props.metrics.map((function(t){var n=b.getFormatter(t.type);return"lastEvent"===t.col&&(n=b.segmentActiveFormatter),{dataField:t.col,text:t.label||t.col,align:t.align||"left",headerAlign:t.align||"left",sort:!0,onSort:e.onSort,sortCaret:b.columnSort,formatter:n}})),r=[{dataField:"df1",isDummyField:!0,text:"",formatter:this.editFormatter,headerStyle:{width:"30px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:this.deleteFormatter,headerStyle:{width:"30px"}},{dataField:"df3",isDummyField:!0,text:"",formatter:this.codeFormatter,headerStyle:{width:"30px"}}];return[{dataField:"id",hidden:!0},{dataField:"writeAccess",hidden:!0},{dataField:"advertiserId",hidden:!0}].concat(r,t,n)},t.prototype.getRows=function(){var e=this.props.metrics.map((function(e){return e.col})),t=f.keyBy(this.props.advertisers,"id");return e.unshift("id"),this.props.records.map((function(n){var r=f.pick(n,e);return r.segmentName=n.segmentName,r.advertiserId=n.advertiserId,r.advertiserName=t[n.advertiserId]?t[n.advertiserId].name:"",r}))},t.prototype.getCurrentPage=function(){var e=b.getLastPage(this.getRows(),this.state.sizePerPage);return this.state.page>e?e:this.state.page},t.prototype.render=function(){var e=this,t=h.Search.SearchBar,n=this.getRows(),r=this.getColumns(),a=b.getSizePerPage(this.state.sizePerPage,n.length);return c.default.createElement(h.default,{keyField:"id",data:n,columns:r,search:!0},(function(l){return c.default.createElement("div",null,c.default.createElement("div",{className:"search-label-container"},c.default.createElement(v.default,{name:"search"}),c.default.createElement(t,i({},l.searchProps,{placeholder:"Filter records",tableId:e.tableId}))),c.default.createElement(m.default,i({},l.baseProps,{id:e.tableId,bordered:!1,classes:"table-borderless",striped:!0,keyField:"id",data:n,columns:r,defaultSorted:[e.state.defaultSorted],pagination:g.default({page:e.getCurrentPage(),sizePerPage:a,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:e.props.records.length}],onPageChange:function(t,n){e.setState({page:t})},onSizePerPageChange:e.onSizePerPageChange})})))}))},t}(c.Component);t.default=y},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(0)),c=n(43),d=n(2),f=n(44),p=u(n(3)),m=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleEntering=function(){var e=Math.floor(1e6*Math.random());r.setState({time:e})},r.handleImgCopy=function(){r.setState({imgCopied:!0},(function(){setTimeout((function(){r.setState({imgCopied:!1})}),2e3)}))},r.handleJsCopy=function(){r.setState({jsCopied:!0},(function(){setTimeout((function(){r.setState({jsCopied:!1})}),2e3)}))},r.imgCopyBtn=null,r.jsCopyBtn=null,r.state={time:0,imgCopied:!1,jsCopied:!1},r}return a(t,e),t.prototype.getSrc=function(){return"https://segments.optinadserving.com/cgi-bin/sgmnt.fcgi?advertiser_id="+this.props.advertiserId+"&consent=LI&segment_ids="+this.props.id},t.prototype.getImgCode=function(e){return'<img width="0" height="0" src="'+e+'" />'},t.prototype.getJsCode=function(e){return'<script>var image = new Image();image.src="'+e+"&adsciencetime="+this.state.time+'"<\/script>'},t.prototype.getClassNames=function(e){return e?"gray-box mb-2 highlight-box":"gray-box mb-2"},t.prototype.render=function(){var e=this,t=this.getSrc(),n=this.getImgCode(t),r=this.getJsCode(t),a=this.getClassNames(this.state.imgCopied),i=this.getClassNames(this.state.jsCopied);return s.default.createElement(d.Modal,{size:"lg",onEntering:this.handleEntering,show:this.props.show,onHide:this.props.handleClose,backdrop:"static"},s.default.createElement(d.Modal.Header,{closeButton:!0},s.default.createElement(d.Modal.Title,null,"Get individual segment code")),s.default.createElement(d.Modal.Body,null,s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12"},s.default.createElement(d.Form.Group,{className:"clearfix"},s.default.createElement(d.Form.Label,null,"Image pixel"),s.default.createElement("div",{className:a},n),s.default.createElement(f.CopyToClipboard,{text:n,onCopy:this.handleImgCopy},s.default.createElement("button",{ref:function(t){e.imgCopyBtn=t},className:"btn btn-primary btn-sm pull-right"},s.default.createElement(p.default,{name:"files-o"})," GET CODE")),s.default.createElement(d.Overlay,{target:c.findDOMNode(this.imgCopyBtn),show:this.state.imgCopied,placement:"bottom"},s.default.createElement(d.Tooltip,{id:"copy-image-tooltip"},"Copied!"))),s.default.createElement(d.Form.Group,null,s.default.createElement(d.Form.Label,null,"Javascript pixel"),s.default.createElement("div",{className:i},r),s.default.createElement(f.CopyToClipboard,{text:r,onCopy:this.handleJsCopy},s.default.createElement("button",{ref:function(t){e.jsCopyBtn=t},className:"btn btn-primary btn-sm pull-right"},s.default.createElement(p.default,{name:"files-o"})," GET CODE")),s.default.createElement(d.Overlay,{target:c.findDOMNode(this.jsCopyBtn),show:this.state.jsCopied,placement:"bottom"},s.default.createElement(d.Tooltip,{id:"copy-js-tooltip"},"Copied!")))))),s.default.createElement(d.Modal.Footer,null,s.default.createElement(d.Button,{size:"sm",variant:"light",onClick:this.props.handleClose},"CANCEL")))},t}(s.Component);t.default=m},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var f=o(n(0)),p=n(2),m=d(n(9)),h=o(n(1)),g=n(42),v=o(n(7)),b=o(n(4)),y=o(n(22)),E=o(n(8)),_=d(n(330)),w=d(n(331)),S=d(n(3)),P=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleEntering=function(){return u(r,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.loadData(this.props)];case 1:return e.sent(),[2]}}))}))},r.handleClose=function(){var e=r.initialState(r.props);r.setState(e,(function(){r.props.onClose()}))},r.handleAdvertiserChange=function(e){r.setState({advertiserId:e.value})},r.handleNameChange=function(e){var t=e.target.value,n=v.required(e.target.value);r.setState({name:t,nameValidation:n})},r.handleSegmentTypeChange=function(e){r.setState({type:e.value})},r.handlePostViewChange=function(e){var t=e.target.value,n=v.native(e.target);r.setState({postView:t,postViewValidation:n})},r.handlePostViewPeriodChange=function(e){r.setState({postViewPeriod:e.value})},r.handlePostClickChange=function(e){var t=e.target.value,n=v.native(e.target);r.setState({postClick:t,postClickValidation:n})},r.handlePostClickPeriodChange=function(e){r.setState({postClickPeriod:e.value})},r.handleUniqueTimeChange=function(e){var t=e.target.value,n=v.native(e.target);r.setState({uniqueTime:t,uniqueTimeValidation:n})},r.handleUniqueTimePeriodChange=function(e){var t=e.value;if("3"===t){r.setState({uniqueTime:"",uniqueTimePeriod:t,uniqueTimeValidation:{error:!1,message:""}})}else r.setState({uniqueTimePeriod:t})},r.handlePagesChange=function(e,t,n){var a=h.cloneDeep(r.state.pages);a[e]=t;var i=r.state.pagesValidation.concat();i[e]=n,r.setState({pages:a,pagesValidation:i})},r.handlePageDelete=function(e){var t=h.cloneDeep(r.state.pages),n=r.state.pagesValidation.concat();t.length>1&&(t.splice(e,1),n.splice(e,1),r.setState({pages:t,pagesValidation:n}))},r.handlePageAdd=function(){var e={constraint:"Contains",value:"/",key:g.v4()};r.setState((function(t){return{pages:c(c([],t.pages),[e]),pagesValidation:c(c([],t.pagesValidation),[!0])}}))},r.handleVarsChange=function(e,t){var n=r.state.vars.concat();n[e]=t,r.setState({vars:n})},r.handleVarDelete=function(e){var t=r.state.vars.concat();t.length>1&&(t.splice(e,1),r.setState({vars:t}))},r.handleVarAdd=function(){var e={name:"",constraint:"Contains",value:""};r.setState((function(t){return{vars:c(c([],t.vars),[e])}}))},r.handleSubmit=function(){var e=h.get(r.props,"segment.id",-1),t=v.required(r.state.name),n=r.hasInvalidPages();[t.error,r.state.postViewValidation.error,r.state.postClickValidation.error,r.state.uniqueTimeValidation.error,n].indexOf(!0)>-1?r.setState({nameValidation:t}):r.setState({saving:!0},(function(){var t=y.getValueInMinutes({value:r.state.postView,period:r.state.postViewPeriod}),n=y.getValueInMinutes({value:r.state.postClick,period:r.state.postClickPeriod}),a=y.getValueInMinutes({value:r.state.uniqueTime,period:r.state.uniqueTimePeriod}),i=r.state.vars.filter((function(e){return""!==e.name.trim()&&""!==e.value.trim()})),l={name:r.state.name,advertiserId:r.state.advertiserId,type:r.state.type,domain:r.state.domain,postView:t,postClick:n,uniqueTime:a,pages:r.removeKeys(r.state.pages),vars:i};r.props.onSubmit(e,l)}))},r.state=r.initialState(t),r}return a(t,e),t.prototype.loadData=function(e){return u(this,void 0,void 0,(function(){var t,n,r,a,i,l,o,u,c,d,f,p,m,v;return s(this,(function(s){switch(s.label){case 0:return e.segment?(t=e.segment.name,n=e.segment.type,r=y.getValuePeriod(e.segment.postView),a=y.getValuePeriod(e.segment.postClick),i=y.getValuePeriod(e.segment.uniqueTime),l=e.segment.domain,o=e.segment.pages&&e.segment.pages.length>0?this.assignKeys(e.segment.pages):[{constraint:"Contains",value:"/",key:g.v4()}],u=e.segment.vars&&e.segment.vars.length>0?e.segment.vars:[{name:"",constraint:"Contains",value:""}],c=e.segment.pages&&e.segment.pages.length>0?e.segment.pages.map((function(e){return!0})):[!0],this.setState({name:t,advertiserId:e.segment.advertiserId,typeReadonly:n,postView:r.value,postViewPeriod:r.period,postClick:a.value,postClickPeriod:a.period,uniqueTime:i.value,uniqueTimePeriod:i.period,domain:l,pages:o,vars:u,pagesValidation:c,saving:!1}),[3,4]):[3,1];case 1:return"advertiser"!==e.scope?[3,2]:(m=e.scopeId,v=h.assign({},this.initialState(e),{advertisers:[],advertiserId:m}),this.setState(v),[3,4]);case 2:return d=E.scopedParam({scope:this.props.scope,scopeId:this.props.scopeId}),[4,b.Get({path:"/api/advertisers",qs:d})];case 3:f=s.sent(),p=h.get(f,"advertisers",[]).map((function(e){return{value:e.advertiser.id,label:e.advertiser.name}})),m=p.length>0?p[0].value:-1,v=h.assign({},this.initialState(e),{advertisers:p,advertiserId:m}),this.setState(v),s.label=4;case 4:return[2]}}))}))},t.prototype.initialState=function(e){return{name:"",advertisers:[],advertiserId:-1,type:this.segmentTypes()[0].value,typeReadonly:"",postView:"30",postViewPeriod:"2",postClick:"30",postClickPeriod:"2",uniqueTime:"1",uniqueTimePeriod:"2",domain:e.advertiserDomain,pages:[{constraint:"Contains",value:"/",key:g.v4()}],vars:[{name:"",constraint:"Contains",value:""}],pagesValidation:[!0],nameValidation:{error:!1,message:""},postViewValidation:{error:!1,message:""},postClickValidation:{error:!1,message:""},uniqueTimeValidation:{error:!1,message:""},saving:!1}},t.prototype.assignKeys=function(e){return e.map((function(e){return h.assign(e,{key:g.v4()})}))},t.prototype.removeKeys=function(e){return e.map((function(e){return h.omit(e,"key")}))},t.prototype.segmentTypes=function(){return[{value:"Segment",label:"Segment"},{value:"Orderbasket",label:"Orderbasket"},{value:"Conversion",label:"Conversion"}]},t.prototype.periodOptions=function(e){return e?[{value:"0",label:"Minutes"},{value:"1",label:"Hours"},{value:"2",label:"Days"},{value:"3",label:"Never"}]:[{value:"0",label:"Minutes"},{value:"1",label:"Hours"},{value:"2",label:"Days"}]},t.prototype.hasInvalidPages=function(){return this.state.pagesValidation.indexOf(!1)>-1},t.prototype.render=function(){var e=this,t=["root","organization","agency"].indexOf(this.props.scope)>-1&&!this.props.segment,n=this.segmentTypes();return f.createElement(p.Modal,{size:"lg",onEntering:this.handleEntering,show:this.props.show,onHide:this.handleClose,backdrop:"static"},f.createElement(p.Modal.Header,{closeButton:!0},f.createElement(p.Modal.Title,null,"Segment settings")),f.createElement(p.Modal.Body,null,f.createElement(p.Form,null,t&&f.createElement("div",{className:"row no-gutters"},f.createElement("div",{className:"col-lg-6 px-1"},f.createElement(p.Form.Group,{controlId:"segment-advertiser"},f.createElement(p.Form.Label,null,"Advertiser * "),f.createElement(m.default,{inputId:"react-select-segment-advertiser",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:this.state.advertisers.find((function(t){return t.value===e.state.advertiserId})),onChange:this.handleAdvertiserChange,options:this.state.advertisers})))),f.createElement("div",{className:"row no-gutters"},f.createElement("div",{className:"col-lg-6 px-1"},f.createElement(p.Form.Group,{controlId:"segment-name"},f.createElement(p.Form.Label,null,"Name *"),f.createElement(p.Form.Control,{readOnly:!this.props.writeAccess,type:"text",isInvalid:this.state.nameValidation.error,value:this.state.name,onChange:this.handleNameChange}),this.state.nameValidation.error&&f.createElement(p.Form.Control.Feedback,{type:"invalid"},this.state.nameValidation.message))),f.createElement("div",{className:"col-lg-6 px-1"},f.createElement(p.Form.Group,{controlId:"segment-type"},f.createElement(p.Form.Label,null,"Type"),!this.props.segment&&f.createElement(m.default,{isDisabled:!this.props.writeAccess,inputId:"react-select-segment-type",className:"react-select-container",classNamePrefix:"react-select",onChange:this.handleSegmentTypeChange,value:n.find((function(t){return t.value===e.state.type})),options:n}),this.props.segment&&f.createElement(p.Form.Control,{readOnly:!0,type:"text",value:this.state.typeReadonly})))),f.createElement("div",{className:"row no-gutters"},f.createElement("div",{className:"col-lg-4"},f.createElement(p.Form.Group,null,f.createElement(p.Form.Label,{style:{height:"32px"}},"Count viewer as post view up till"),f.createElement("div",{className:"row no-gutters"},f.createElement("div",{className:"col-lg-6 px-1 pb-1"},f.createElement(p.Form.Control,{id:"segment-postview",readOnly:!this.props.writeAccess,required:!0,type:"number",min:"0",value:this.state.postView,onChange:this.handlePostViewChange})),f.createElement("div",{className:"col-lg-6 px-1 pb-1"},f.createElement(m.default,{inputId:"react-select-postview",isDisabled:!this.props.writeAccess,className:"react-select-container",classNamePrefix:"react-select",onChange:this.handlePostViewPeriodChange,isInvalid:this.state.postViewValidation.error,value:this.periodOptions(!1).find((function(t){return t.value===e.state.postViewPeriod})),options:this.periodOptions(!1)}))),this.state.postViewValidation.error&&f.createElement(p.Form.Control.Feedback,{type:"invalid"},this.state.postViewValidation.message))),f.createElement("div",{className:"col-lg-4"},f.createElement(p.Form.Group,null,f.createElement(p.Form.Label,{style:{height:"32px"}},"Count viewer as post click up till"),f.createElement("div",{className:"row no-gutters"},f.createElement("div",{className:"col-lg-6 px-1 pb-1"},f.createElement(p.Form.Control,{id:"segment-postclick",readOnly:!this.props.writeAccess,required:!0,type:"number",min:"0",value:this.state.postClick,onChange:this.handlePostClickChange})),f.createElement("div",{className:"col-lg-6 px-1 pb-1"},f.createElement(m.default,{inputId:"react-select-postclick",isDisabled:!this.props.writeAccess,className:"react-select-container",classNamePrefix:"react-select",onChange:this.handlePostClickPeriodChange,value:this.periodOptions(!1).find((function(t){return t.value===e.state.postClickPeriod})),options:this.periodOptions(!1)}))),this.state.postClickValidation.error&&f.createElement(p.Form.Control.Feedback,{type:"invalid"},this.state.postClickValidation.message))),f.createElement("div",{className:"col-lg-4"},f.createElement(p.Form.Group,null,f.createElement(p.Form.Label,{style:{height:"34px"}},"Treat repeated event by viewer as new event after"),f.createElement("div",{className:"row no-gutters"},f.createElement("div",{className:"col-lg-6 px-1 pb-1"},f.createElement(p.Form.Control,{id:"segment-uniquetime",readOnly:!this.props.writeAccess||"3"===this.state.uniqueTimePeriod,required:!0,type:"number",min:"0",value:this.state.uniqueTime,onChange:this.handleUniqueTimeChange})),f.createElement("div",{className:"col-lg-6 px-1 pb-1"},f.createElement(m.default,{inputId:"react-select-uniquetime",isDisabled:!this.props.writeAccess,className:"react-select-container",classNamePrefix:"react-select",onChange:this.handleUniqueTimePeriodChange,value:this.periodOptions(!0).find((function(t){return t.value===e.state.uniqueTimePeriod})),options:this.periodOptions(!0)}))),this.state.uniqueTimeValidation.error&&f.createElement(p.Form.Control.Feedback,{type:"invalid"},this.state.uniqueTimeValidation.message)))),f.createElement("div",{className:"row no-gutters"},f.createElement("div",{className:"col-lg-12 px-1"},f.createElement(p.Form.Group,{controlId:"segment-domain"},f.createElement(p.Form.Label,null,"Domain"),f.createElement(p.Form.Control,{readOnly:!this.props.writeAccess,type:"text",placeholder:"e.g. domain.nl (without http://, https://, www.)",value:this.state.domain,onChange:function(t){e.setState({domain:t.target.value})}})))),f.createElement("div",{className:"row no-gutters"},f.createElement("div",{className:"col-lg-12"},f.createElement(p.Form.Group,null,f.createElement(p.Form.Label,{className:"px-1"},"Pages"),f.createElement("div",null,this.state.pages.map((function(t,n){return f.createElement(_.default,{key:t.key,index:n,page:t,writeAccess:e.props.writeAccess,onChange:e.handlePagesChange,onDelete:e.handlePageDelete})}))),f.createElement(p.Button,{size:"sm",variant:"primary",onClick:this.handlePageAdd,disabled:!this.props.writeAccess},f.createElement(S.default,{name:"plus"})," ADD PAGE")))),f.createElement("div",{className:"row no-gutters"},f.createElement("div",{className:"col-lg-12"},f.createElement(p.Form.Group,null,f.createElement(p.Form.Label,{className:"px-1"},"Variables"),f.createElement("div",null,this.state.vars.map((function(t,n){return f.createElement(w.default,{index:n,var:t,writeAccess:e.props.writeAccess,onChange:e.handleVarsChange,onDelete:e.handleVarDelete})}))),f.createElement(p.Button,{size:"sm",variant:"primary",onClick:this.handleVarAdd,disabled:!this.props.writeAccess},f.createElement(S.default,{name:"plus"})," ADD VARIABLE")))))),f.createElement(p.Modal.Footer,null,f.createElement(p.Button,{size:"sm",variant:"light",onClick:this.handleClose},"CANCEL"),f.createElement(p.Button,{size:"sm",variant:"primary",onClick:this.handleSubmit,disabled:this.state.saving||!this.props.writeAccess},"SAVE")))},t}(f.Component);t.default=P},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(0)),c=n(2),d=u(n(9)),f=u(n(3)),p=o(n(7)),m=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleConstraintChange=function(e){r.setState({constraint:e.value},(function(){var e={constraint:r.state.constraint,value:r.state.value,key:r.props.page.key};r.props.onChange(r.props.index,e,!r.state.valueValidation.error)}))},r.handleValueChange=function(e){var t=e.target.value,n=p.required(e.target.value);r.setState({value:t,valueValidation:n},(function(){var e={constraint:r.state.constraint,value:r.state.value,key:r.props.page.key};r.props.onChange(r.props.index,e,!n.error)}))},r.state={constraint:"Contains",value:"/",valueValidation:{error:!1,message:""}},r}return a(t,e),t.prototype.componentDidMount=function(){this.loadData(this.props)},t.prototype.componentWillReceiveProps=function(e){this.loadData(e)},t.prototype.loadData=function(e){this.setState({constraint:e.page.constraint,value:e.page.value})},t.prototype.getOptions=function(){return[{value:"Contains",label:"Contains"},{value:"MatchExactly",label:"Match exactly"},{value:"StartsWith",label:"Starts with"},{value:"EndsWith",label:"Ends with"}]},t.prototype.render=function(){var e=this,t=this.getOptions();return s.createElement("div",null,s.createElement("div",{className:"array-row"},s.createElement("div",{className:"row no-gutters"},s.createElement("div",{className:"col-lg-4 px-1 pb-1"},s.createElement(d.default,{isDisabled:!this.props.writeAccess,inputId:"react-select-page-constraint-"+this.props.page.key,className:"react-select-container",classNamePrefix:"react-select",onChange:this.handleConstraintChange,value:t.find((function(t){return t.value===e.state.constraint})),options:t})),s.createElement("div",{className:"col-lg-8 px-1 pb-1"},s.createElement(c.Form.Control,{id:"page-value"+this.props.page.key,readOnly:!this.props.writeAccess,placeholder:"e.g. /examplePage",type:"text",isInvalid:this.state.valueValidation.error,value:this.state.value,onChange:this.handleValueChange}),this.state.valueValidation.error&&s.createElement(c.Form.Control.Feedback,{type:"invalid"},this.state.valueValidation.message)))),s.createElement("div",{className:"array-row-remove-btn"},s.createElement("a",{href:"",className:"table-btn",onClick:function(t){t.preventDefault(),e.props.onDelete(e.props.index)}},s.createElement(f.default,{name:"remove"}))))},t}(s.Component);t.default=m},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(0)),c=n(2),d=u(n(9)),f=u(n(3)),p=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleNameChange=function(e){r.setState({name:e.target.value},(function(){r.props.onChange(r.props.index,r.state)}))},r.handleConstraintChange=function(e){r.setState({constraint:e.value},(function(){r.props.onChange(r.props.index,r.state)}))},r.handleValueChange=function(e){r.setState({value:e.target.value},(function(){r.props.onChange(r.props.index,r.state)}))},r.state={name:"",constraint:"Contains",value:""},r}return a(t,e),t.prototype.componentDidMount=function(){this.loadData(this.props)},t.prototype.componentWillReceiveProps=function(e){this.loadData(e)},t.prototype.loadData=function(e){this.setState({name:e.var.name,constraint:e.var.constraint,value:e.var.value})},t.prototype.getOptions=function(){return[{value:"Contains",label:"Contains"},{value:"MatchExactly",label:"Match exactly"},{value:"StartsWith",label:"Starts with"},{value:"EndsWith",label:"Ends with"}]},t.prototype.render=function(){var e=this,t=this.getOptions();return s.createElement("div",null,s.createElement("div",{className:"array-row"},s.createElement("div",{className:"row no-gutters"},s.createElement("div",{className:"col-lg-4 px-1 pb-1"},s.createElement(c.Form.Control,{id:"var-name-"+this.props.index,readOnly:!this.props.writeAccess,type:"text",placeholder:"variable name",value:this.state.name,onChange:this.handleNameChange})),s.createElement("div",{className:"col-lg-4 px-1 pb-1"},s.createElement(d.default,{isDisabled:!this.props.writeAccess,inputId:"react-select-var-constraint-"+this.props.index,className:"react-select-container",classNamePrefix:"react-select",onChange:this.handleConstraintChange,value:t.find((function(t){return t.value===e.state.constraint})),options:t})),s.createElement("div",{className:"col-lg-4 px-1 pb-1"},s.createElement(c.Form.Control,{id:"var-value-"+this.props.index,readOnly:!this.props.writeAccess,type:"text",value:this.state.value,placeholder:"value",onChange:this.handleValueChange})))),s.createElement("div",{className:"array-row-remove-btn"},s.createElement("a",{href:"",className:"table-btn",onClick:function(t){t.preventDefault(),e.props.onDelete(e.props.index)}},s.createElement(f.default,{name:"remove"}))))},t}(s.Component);t.default=p},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(29)),s=l(n(30)),c=l(n(31)),d=i(n(13)),f=l(n(12)),p=l(n(10)),m=l(n(26)),h=l(n(333));t.default=function(){var e=o.useContext(f.default).data;return d.getRights(e.rights).VIEW_LISTS?o.default.createElement(o.Fragment,null,o.default.createElement(u.default,null,o.default.createElement("div",{className:"col-sm-9"},o.default.createElement(s.default,null),o.default.createElement(c.default,{id:"breadcrumb",minScope:"advertiser"}))),o.default.createElement(m.default,{title:"Lists"}),o.default.createElement(h.default,null)):o.default.createElement(p.default,{message:"Access forbidden"})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=n(2),f=u(n(9)),p=i(n(1)),m=u(n(19)),h=i(n(20)),g=i(n(4)),v=i(n(8)),b=i(n(13)),y=u(n(16)),E=u(n(12)),_=u(n(3)),w=u(n(5)),S=u(n(10)),P=u(n(334)),C=u(n(75)),O=u(n(27)),x=u(n(73)),I=u(n(28)),N=u(n(39));t.default=function(){var e=c.useHistory(),t=new URLSearchParams(location.search),n=c.useParams(),r=n.scope,a=n.scopeId,i=s.useContext(E.default).data,u=b.getRights(i.rights),A=s.useContext(y.default),j=s.useContext(N.default).items,M=s.useContext(I.default),k=M.listattribute,F=M.updateListattribute,D=s.useState([]),T=D[0],R=D[1],B=s.useState([]),G=B[0],L=B[1],V=s.useState(""),z=V[0],q=V[1],Y=s.useState(!1),U=Y[0],H=Y[1],W=s.useState(!1),J=W[0],X=W[1],K=s.useState(null),Z=K[0],$=K[1],Q=s.useState(!1),ee=Q[0],te=Q[1],ne=s.useState(""),re=ne[0],ae=ne[1],ie=s.useState(!1),le=ie[0],oe=ie[1],ue=s.useState([]),se=ue[0],ce=ue[1],de=s.useState(!1),fe=de[0],pe=de[1],me=s.useState(-1),he=me[0],ge=me[1],ve=s.useState(0),be=ve[0],ye=ve[1],Ee=s.useState(!1),_e=Ee[0],we=Ee[1],Se=s.useState(""),Pe=Se[0],Ce=Se[1],Oe=s.useRef(null),xe=s.useRef(null);function Ie(n){t.set("listattribute",n),F(n),e.push(location.pathname+"?"+t.toString())}s.useEffect((function(){t.get("listattribute")||e.push("/lists/"+r+"/"+a+"?listattribute="+k)}),[]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var e,t,n,r,a,i,l,u,s;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,g.Get({path:"/api/attributes/lists"})];case 1:return e=o.sent(),t=v.attributeOptions(e),""===k?(i=v.firstGroupSelectOption(t),n=i.label,r=i.value,a=i.acceptAnyValue,Ie(r),L(t),q(n),H(a)):(i=v.findGroupSelectOption(t,k),l=i.label,u=i.acceptAnyValue,L(t),q(l),H(u)),[3,3];case 2:return s=o.sent(),console.log(s),[3,3];case 3:return[2]}}))}))}()}),[]),s.useEffect((function(){te(!0)}),[r,a]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var e,t,n;return o(this,(function(i){switch(i.label){case 0:if(!ee||""===k)return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),xe.current&&xe.current.abort(),xe.current=new AbortController,e=v.scopedParam({scope:r,scopeId:a}),t=p.assign({},e,{attribute:k}),[4,g.Get({path:"/api/lists",qs:t,signal:xe.current.signal})];case 2:return n=i.sent(),R(n),we(!1),Ce(""),[3,4];case 3:return"AbortError"===i.sent().name?(we(!1),Ce("")):(we(!0),Ce("Error loading lists.")),[3,4];case 4:te(!1),i.label=5;case 5:return[2]}}))}))}()}),[ee,k]);var Ne=function(e,t){oe(!0),ae("Campaigns using list: "+t.name),ce(e)};function Ae(e){return l(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=p.pick(e,"scope","name","description","attributeValues","attribute"),[4,g.Post({path:"/api/lists",body:t})];case 1:return n.sent(),X(!1),te(!0),Oe.current.addNotification(h.success(s.default.createElement("span",null,"List ",s.default.createElement("strong",null,e.name)," created."),!1)),[3,3];case 2:return n.sent(),X(!1),Oe.current.addNotification(h.error("Error creating list.")),[3,3];case 3:return[2]}}))}))}function je(e,t){return l(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,g.Put({path:"/api/lists/"+e,body:t})];case 1:return n.sent(),X(!1),$(null),te(!0),Oe.current.addNotification(h.success(s.default.createElement("span",null,"List ",s.default.createElement("strong",null,t.name)," saved."),!1)),[3,3];case 2:return n.sent(),X(!1),$(null),Oe.current.addNotification(h.error("Error updating list.")),[3,3];case 3:return[2]}}))}))}function Me(){return T.map((function(e){var t=p.pick(e,["id","name","description","writeAccess","activeCampaignIds","inactiveCampaignIds","creationDate","lastEdit"]);return p.assign({},t,{owner:p.get(e,"scope.owner")})}))}if(_e)return s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(S.default,{message:Pe})))));var ke,Fe,De=v.findGroupSelectOption(G,k),Te=Me(),Re=v.getMaxLevel(A,j);return s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",{className:"pull-left"},"Lists"),s.default.createElement(d.Button,{size:"sm",variant:"primary",className:"pull-right",onClick:function(){ye(be+1)}},s.default.createElement(_.default,{name:"remove"})," CLEAR FILTERS"),u.MANAGE_LISTS&&s.default.createElement(d.Button,{size:"sm",variant:"primary",className:"pull-right mr-2",onClick:function(){X(!0),$(null)}},s.default.createElement(_.default,{name:"plus"})," ADD LIST"),s.default.createElement("div",{className:"pull-right width-200 mr-2",style:{marginTop:"-3px"}},s.default.createElement(f.default,{inputId:"react-select-list-attribute",className:"react-select-container",classNamePrefix:"react-select",name:"attribute-select",value:De,clearable:!1,onChange:function(e){return l(void 0,void 0,void 0,(function(){var t,n,r;return o(this,(function(a){return t=e.label,n=e.value,r=e.acceptAnyValue,Ie(n),q(t),H(r),te(!0),[2]}))}))},options:G})),s.default.createElement(w.default,{visible:ee}),!ee&&s.default.createElement(P.default,{records:Te,user:A,writeAccess:u.MANAGE_LISTS,filtersCounter:be,editClick:function(e){var t=T.find((function(t){return t.id===e}));$(t),X(!0)},deleteClick:function(e){ge(e),pe(!0)},campaignsClick:Ne}),s.default.createElement(C.default,{title:re,show:le,campaigns:se,tab:"general",onClose:function(){oe(!1),ae(""),ce([])}}),s.default.createElement(x.default,{show:J,list:Z,attribute:k,attributeDisplayName:z,acceptAnyValue:U,rights:u,scope:r,scopeId:a,maxLevel:Re,onClose:function(){X(!1)},onSubmit:function(e,t){return l(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return e>0?[4,je(e,t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,Ae(t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))}}),s.default.createElement(O.default,{message:"Are you sure you want to delete this list?",show:fe,onClose:function(){return pe(!1)},onConfirm:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,g.Delete({path:"/api/lists/"+he})];case 1:return e.sent(),pe(!1),te(!0),Oe.current.addNotification(h.success("List deleted",!1)),[3,3];case 2:return e.sent(),pe(!1),te(!1),Oe.current.addNotification(h.error("Error deleting list.")),[3,3];case 3:return[2]}}))}))}},(ke=Me().find((function(e){return e.id===he})),1===(Fe=p.get(ke,"activeCampaignIds",[])).length?s.default.createElement("div",null,"Deleting this list also removes it from ",s.default.createElement("b",null,s.default.createElement("u",null,s.default.createElement("a",{onClick:function(e){e.preventDefault(),Ne(Fe,ke)},href:""},"1 campaign "))),"."):Fe.length>1?s.default.createElement("div",null,"Deleting this list also removes it from ",s.default.createElement("b",null,s.default.createElement("u",null,s.default.createElement("a",{onClick:function(e){e.preventDefault(),Ne(Fe,ke)},href:""},Fe.length," campaigns"))),"."):null)),s.default.createElement(m.default,{ref:Oe}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,u,s,c=i(n(0)),d=l(n(11)),f=l(n(14)),p=i(n(45)),m=l(n(17)),h=i(n(15)),g=l(n(3)),v=l(n(335));t.default=function(e){var t=c.useState(1),n=t[0],r=t[1],a=c.useState(h.getInitialSizePerPage("lists-table",e.user)),i=a[0],l=a[1],b=c.useState({dataField:"id",order:"desc"}),y=b[0],E=b[1],_=c.useState(""),w=_[0],S=_[1],P=c.useState(""),C=P[0],O=P[1],x=c.useState(""),I=x[0],N=x[1];c.useEffect((function(){o(""),u(""),s("")}),[e.filtersCounter]);var A=function(e,t){E({dataField:e,order:t})},j=function(t,n){return c.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id,n.writeAccess)},href:""},t)},M=function(e,t,n){return c.default.createElement(v.default,{id:"popover-trigger-hover"+n,cellContent:e})},k=function(t,n){return t&&t.length>0?c.default.createElement("a",{onClick:function(r){r.preventDefault(),e.campaignsClick(t,n)},href:""},t.length):"0"},F=function(e){if(e){var t=d.default(e);return 23===t.hours()&&59===t.minutes()?t.format("YYYY-MM-DD"):t.format("YYYY-MM-DD HH:mm:ss")}return""};var D,T,R=(D={true:"Yes",false:"No"},[{dataField:"id",text:"#",hidden:!0},{dataField:"df1",isDummyField:!0,text:"",formatter:function(t,n){return n.writeAccess?c.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id,n.writeAccess)},href:"",className:"table-btn"},c.default.createElement(g.default,{name:"pencil"})):c.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id,n.writeAccess)},href:"",className:"table-btn"},c.default.createElement(g.default,{name:"search-plus"}))},headerStyle:{width:"30px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:function(t,n){return n.writeAccess?c.default.createElement("a",{onClick:function(t){t.preventDefault(),e.deleteClick(n.id)},href:"",className:"table-btn"},c.default.createElement(g.default,{name:"remove"})):null},headerStyle:{width:"30px"}},{dataField:"name",text:"Name",sort:!0,onSort:A,sortCaret:h.columnSort,filter:p.textFilter({placeholder:"Search name...",defaultValue:w,getFilter:function(e){o=e},onFilter:function(e){S(e)}}),formatter:j},{dataField:"description",text:"Description",sort:!0,sortCaret:h.columnSort,onSort:A,formatter:M,filter:p.textFilter({placeholder:"Search description...",defaultValue:C,getFilter:function(e){u=e},onFilter:function(e){O(e)}})},{dataField:"owner",text:"Owner",sort:!0,onSort:A,sortCaret:h.columnSort,filter:p.textFilter({placeholder:"Search owner...",defaultValue:I,getFilter:function(e){s=e},onFilter:function(e){N(e)}})},{dataField:"activeCampaignIds",text:"# active campaigns",sort:!0,onSort:A,sortCaret:h.columnSort,formatter:k},{dataField:"inactiveCampaignIds",text:"# inactive campaigns",sort:!0,onSort:A,sortCaret:h.columnSort,formatter:k},{dataField:"writeAccess",text:"Write access",sort:!0,onSort:A,sortCaret:h.columnSort,formatter:function(e){return D[e]}},{dataField:"creationDate",text:"Created",sort:!0,onSort:A,sortCaret:h.columnSort,formatter:F},{dataField:"lastEdit",text:"Last edit",sort:!0,onSort:A,sortCaret:h.columnSort,formatter:F}]),B=h.getSizePerPage(i,e.records.length),G=e.records.length||30;return c.default.createElement(f.default,{id:"lists-table",filter:p.default(),classes:"table-borderless",bordered:!1,hover:!0,striped:!0,keyField:"id",data:e.records,columns:R,defaultSorted:[y],pagination:m.default({page:(T=h.getLastPage(e.records,i),n>T?T:n),sizePerPage:B,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:G}],onPageChange:function(e,t){r(e)},onSizePerPageChange:function(t,n){h.storeSizePerPage(t,"lists-table",e.user),l(t)}})})}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),i=n(2);t.default=function(e){var t=a.default.createElement(i.Popover,{id:e.id},a.default.createElement(i.Popover.Content,null,e.cellContent));return a.default.createElement(i.OverlayTrigger,{trigger:"hover",placement:"top",overlay:t},a.default.createElement("span",{className:"text-ellipsis"},e.cellContent))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(29)),s=l(n(30)),c=l(n(31)),d=i(n(13)),f=l(n(12)),p=l(n(10)),m=l(n(26)),h=l(n(337));t.default=function(){var e=o.useContext(f.default).data;return d.getRights(e.rights).VIEW_DEALS?o.default.createElement(o.Fragment,null,o.default.createElement(u.default,null,o.default.createElement("div",{className:"col-sm-9"},o.default.createElement(s.default,null),o.default.createElement(c.default,{id:"breadcrumb",minScope:"advertiser"}))),o.default.createElement(m.default,{title:"Deals"}),o.default.createElement(h.default,null)):o.default.createElement(p.default,{message:"Access forbidden"})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=n(2),f=i(n(1)),p=u(n(19)),m=i(n(20)),h=i(n(4)),g=i(n(8)),v=i(n(13)),b=u(n(16)),y=u(n(12)),E=u(n(3)),_=u(n(5)),w=u(n(10)),S=u(n(338)),P=u(n(75)),C=u(n(27)),O=u(n(339)),x=u(n(340)),I=n(40),N=u(n(39));t.default=function(){var e=c.useParams(),t=e.scope,n=e.scopeId,r=s.useContext(y.default).data,a=v.getRights(r.rights),i=s.useContext(b.default),u=s.useContext(N.default).items,A=s.useState([]),j=A[0],M=A[1],k=s.useState(!1),F=k[0],D=k[1],T=s.useState(!1),R=T[0],B=T[1],G=s.useState([]),L=G[0],V=G[1],z=s.useState([]),q=z[0],Y=z[1],U=s.useState(null),H=U[0],W=U[1],J=s.useState(!1),X=J[0],K=J[1],Z=s.useState(""),$=Z[0],Q=Z[1],ee=s.useState(!1),te=ee[0],ne=ee[1],re=s.useState([]),ae=re[0],ie=re[1],le=s.useState(!1),oe=le[0],ue=le[1],se=s.useState(-1),ce=se[0],de=se[1],fe=s.useState(0),pe=fe[0],me=fe[1],he=s.useState(!1),ge=he[0],ve=he[1],be=s.useState(""),ye=be[0],Ee=be[1],_e=s.useRef(null),we=s.useRef(null);function Se(){we.current&&we.current.abort()}function Pe(e){return l(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=f.pick(e,"scope","externalId","name","ssp","description","expirationDate","escalationDeal"),[4,h.Post({path:"/api/deals",body:t})];case 1:return n.sent(),D(!1),K(!0),_e.current.addNotification(m.success(s.default.createElement("span",null,"Deal ",s.default.createElement("strong",null,e.name)," created."),!1)),[3,3];case 2:return n.sent(),D(!1),_e.current.addNotification(m.error("Error creating deal.")),[3,3];case 3:return[2]}}))}))}function Ce(e,t){return l(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,h.Put({path:"/api/deals/"+e,body:t})];case 1:return n.sent(),D(!1),K(!0),W(null),_e.current.addNotification(m.success(s.default.createElement("span",null,"Deal ",s.default.createElement("strong",null,t.name)," saved."),!1)),[3,3];case 2:return n.sent(),D(!1),K(!1),W(null),_e.current.addNotification(m.error("Error updating deal.")),[3,3];case 3:return[2]}}))}))}function Oe(e){return e.map((function(e){var t=f.pick(e,["id","name","status","description","writeAccess","activeCampaignIds","creationDate","expirationDate"]),n=L.find((function(t){return t.value===e.ssp})),r=f.get(n,"label",e.ssp),a=e.escalationDeal?[e.externalId,e.escalationDeal].join(" / "):e.externalId,i=f.get(e,"scope.owner");return f.assign({},t,{owner:i,externalId:a,ssp:r})}))}s.useEffect((function(){return Se}),[]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var e,t,n,r;return o(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),e={substrings:"",start:0,count:5e3},[4,h.Get({path:"/api/attributes/"+I.Attributes.SSP+"/values",qs:e})];case 1:return t=a.sent(),n=t.map((function(e){return{value:e.value,label:e.name}})),V(n),[3,3];case 2:return r=a.sent(),console.log(r),[3,3];case 3:return[2]}}))}))}(),function(){l(this,void 0,void 0,(function(){var e,t,n;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,h.Get({path:"/api/publishers/names"})];case 1:return e=r.sent(),t=e.map((function(e){return{value:e.sspName,label:e.name}})),Y(t),[3,3];case 2:return n=r.sent(),console.log(n),[3,3];case 3:return[2]}}))}))}()}),[]),s.useEffect((function(){K(!0)}),[t,n]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var e,r;return o(this,(function(a){switch(a.label){case 0:if(!X)return[3,5];a.label=1;case 1:return a.trys.push([1,3,,4]),Se(),we.current=new AbortController,e=g.scopedParam({scope:t,scopeId:n}),[4,h.Get({path:"/api/deals",qs:e,signal:we.current.signal})];case 2:return r=a.sent(),M(r),ve(!1),Ee(""),[3,4];case 3:return a.sent(),ve(!0),Ee("Error loading deals."),[3,4];case 4:K(!1),a.label=5;case 5:return[2]}}))}))}()}),[X]);var xe=function(e,t){ne(!0),Q("Campaigns using deal: "+t.name),ie(e)};if(ge)return s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(w.default,{message:ye})))));var Ie,Ne,Ae=Oe(j),je=g.getMaxLevel(i,u);return s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",{className:"pull-left"},"Deals"),s.default.createElement("div",{className:"pull-right"},a.MANAGE_DEALS&&s.default.createElement(s.Fragment,null,s.default.createElement(d.Button,{size:"sm",variant:"primary",className:"mr-2",onClick:function(){D(!0),W(null)}},s.default.createElement(E.default,{name:"plus"})," ADD DEAL"),s.default.createElement(d.Button,{size:"sm",variant:"primary",className:"mr-2",onClick:function(){B(!0)}},s.default.createElement(E.default,{name:"plus"})," REQUEST DEAL")),s.default.createElement(d.Button,{size:"sm",variant:"primary",onClick:function(){me(pe+1)}},s.default.createElement(E.default,{name:"remove"})," CLEAR FILTERS")),s.default.createElement(_.default,{visible:X}),!X&&s.default.createElement(S.default,{records:Ae,user:i,filtersCounter:pe,editClick:function(e){var t=j.find((function(t){return t.id===e}));W(t),D(!0)},deleteClick:function(e){de(e),ue(!0)},campaignsClick:xe}),s.default.createElement(P.default,{title:$,show:te,campaigns:ae,tab:"inventory",onClose:function(){ne(!1),Q(""),ie([])}}),s.default.createElement(O.default,{show:F,deal:H,sspOptions:L,rights:a,scope:t,scopeId:n,maxLevel:je,onClose:function(){D(!1)},onSubmit:function(e,t){return l(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return e>0?[4,Ce(e,t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,Pe(t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))}}),s.default.createElement(x.default,{show:R,sspOptions:q,rights:a,scope:t,scopeId:n,maxLevel:je,onClose:function(){B(!1)},onSubmit:function(e){return l(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,h.Post({path:"/api/deals/request",body:e})];case 1:return n.sent(),B(!1),K(!0),t=f.get(e,"buyerSideDeal.name",""),_e.current.addNotification(m.success(s.default.createElement("span",null,"Deal ",s.default.createElement("strong",null,t)," requested."),!1)),[3,3];case 2:return n.sent(),B(!1),K(!1),_e.current.addNotification(m.error("Error requesting deal.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(C.default,{message:"Are you sure you want to delete this deal?",show:oe,onClose:function(){return ue(!1)},onConfirm:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,h.Delete({path:"/api/deals/"+ce})];case 1:return e.sent(),ue(!1),K(!0),_e.current.addNotification(m.success("Deal deleted.",!1)),[3,3];case 2:return e.sent(),ue(!1),K(!1),_e.current.addNotification(m.error("Error deleting deal.")),[3,3];case 3:return[2]}}))}))}},(Ie=Oe(j).find((function(e){return e.id===ce})),1===(Ne=f.get(Ie,"activeCampaignIds",[])).length?s.default.createElement("div",null,"Deleting this deal also removes it from ",s.default.createElement("b",null,s.default.createElement("u",null,s.default.createElement("a",{onClick:function(e){e.preventDefault(),xe(Ne,Ie)},href:""},"1 active")))," campaign. If this campaign has no other deals linked to it then it will start bidding on the open auction."):Ne.length>1?s.default.createElement("div",null,"Deleting this deal also removes it from ",s.default.createElement("b",null,s.default.createElement("u",null,s.default.createElement("a",{onClick:function(e){e.preventDefault(),xe(Ne,Ie)},href:""},Ne.length," active")))," campaigns. If these campaigns have no other deals linked to them then they will start bidding on the open auction."):null)),s.default.createElement(p.default,{ref:_e}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,u,s,c,d,f=i(n(0)),p=n(2),m=l(n(11)),h=l(n(14)),g=i(n(45)),v=l(n(17)),b=i(n(15)),y=l(n(3));t.default=function(e){var t=f.useState(1),n=t[0],r=t[1],a=f.useState(b.getInitialSizePerPage("deals-table",e.user)),i=a[0],l=a[1],E=f.useState({dataField:"id",order:"desc"}),_=E[0],w=E[1],S=f.useState(""),P=S[0],C=S[1],O=f.useState(""),x=O[0],I=O[1],N=f.useState(""),A=N[0],j=N[1],M=f.useState(""),k=M[0],F=M[1],D=f.useState(""),T=D[0],R=D[1];f.useEffect((function(){o(""),u(""),s(""),c(""),d("")}),[e.filtersCounter]);var B=function(e,t){w({dataField:e,order:t})},G=function(t,n,r){if(n.description){var a=f.default.createElement(p.Popover,{id:"popover-trigger-hover-"+r},f.default.createElement(p.Popover.Content,null,n.description));return f.default.createElement(p.OverlayTrigger,{trigger:"hover",placement:"top",overlay:a},f.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id)},href:""},t))}return f.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id)},href:""},t)},L=function(t,n){return t&&t.length>0?f.default.createElement("a",{onClick:function(r){r.preventDefault(),e.campaignsClick(t,n)},href:""},t.length):"0"},V=function(e){if(e){var t=m.default(e);return 23===t.hours()&&59===t.minutes()?t.format("YYYY-MM-DD"):t.format("YYYY-MM-DD HH:mm:ss")}return""};var z,q,Y=(z={okay:"okay",pending:"pending",inactive:"inactive",rejected:"rejected"},[{dataField:"id",text:"#",hidden:!0},{dataField:"df1",isDummyField:!0,text:"",formatter:function(t,n){return n.writeAccess?f.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id)},href:"",className:"table-btn"},f.default.createElement(y.default,{name:"pencil"})):f.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id)},href:"",className:"table-btn"},f.default.createElement(y.default,{name:"search-plus"}))},headerStyle:{width:"30px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:function(t,n){return n.writeAccess?f.default.createElement("a",{onClick:function(t){t.preventDefault(),e.deleteClick(n.id)},href:"",className:"table-btn"},f.default.createElement(y.default,{name:"remove"})):null},headerStyle:{width:"30px"}},{dataField:"externalId",text:"Id",sort:!0,onSort:B,sortCaret:b.columnSort,filter:g.textFilter({placeholder:"Search id...",defaultValue:P,getFilter:function(e){o=e},onFilter:function(e){C(e)}})},{dataField:"ssp",text:"SSP",sort:!0,onSort:B,sortCaret:b.columnSort,filter:g.textFilter({placeholder:"Search SSP...",defaultValue:x,getFilter:function(e){u=e},onFilter:function(e){I(e)}})},{dataField:"name",text:"Name",sort:!0,onSort:B,sortCaret:b.columnSort,filter:g.textFilter({placeholder:"Search name...",defaultValue:A,getFilter:function(e){s=e},onFilter:function(e){j(e)}}),formatter:G},{dataField:"status",text:"Status",sort:!0,onSort:B,sortCaret:b.columnSort,formatter:function(e){return z[e]},filter:g.selectFilter({options:z,defaultValue:k,getFilter:function(e){c=e},onFilter:function(e){F(e)}})},{dataField:"owner",text:"Owner",sort:!0,onSort:B,sortCaret:b.columnSort,filter:g.textFilter({placeholder:"Search owner...",defaultValue:T,getFilter:function(e){d=e},onFilter:function(e){R(e)}})},{dataField:"activeCampaignIds",text:"# active campaigns",sort:!0,onSort:B,sortCaret:b.columnSort,formatter:L},{dataField:"expirationDate",text:"Expires",sort:!0,onSort:B,sortCaret:b.columnSort,formatter:V},{dataField:"creationDate",text:"Created",sort:!0,onSort:B,sortCaret:b.columnSort,formatter:V}]),U=b.getSizePerPage(i,e.records.length),H=e.records.length||30;return f.default.createElement(h.default,{id:"deals-table",filter:g.default(),classes:"table-borderless",bordered:!1,hover:!0,striped:!0,keyField:"id",data:e.records,columns:Y,defaultSorted:[_],pagination:v.default({page:(q=b.getLastPage(e.records,i),n>q?q:n),sizePerPage:U,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:H}],onPageChange:function(e,t){r(e)},onSizePerPageChange:function(t,n){b.storeSizePerPage(t,"deals-table",e.user),l(t)}})})}},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(0)),f=n(2),p=c(n(9)),m=o(n(7)),h=o(n(1)),g=c(n(11)),v=o(n(8)),b=c(n(35)),y=c(n(3)),E=c(n(5)),_=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleEntering=function(){return u(r,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.loadData(this.props)];case 1:return e.sent(),[2]}}))}))},r.handleClose=function(){var e=r.initialState();r.setState(e,(function(){r.props.onClose()}))},r.handleExternalIdChange=function(e){var t=e.target.value,n=m.required(t);r.setState({externalId:t,externalIdValidation:n})},r.handleNameChange=function(e){var t=e.target.value,n=m.required(t);r.setState({name:t,nameValidation:n})},r.handleLevelChange=function(e){return u(r,void 0,void 0,(function(){var t,n=this;return s(this,(function(r){return t=e.value,"root"===e.value?this.setState({level:t}):this.setState({showLoader:!0},(function(){return u(n,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return[4,v.getEntityOptions("deals",this.props.scope,this.props.scopeId,t)];case 1:return e=r.sent(),n=e.length>0?parseInt(e[0].value,10):-1,this.setState({level:t,entityOptions:e,entityId:n,showLoader:!1}),[2]}}))}))})),[2]}))}))},r.handleEntityChange=function(e){r.setState({entityId:parseInt(e.value,10)})},r.handleSSPChange=function(e){var t=e.value;r.setState({ssp:t})},r.handleAdvancedClick=function(e){e.preventDefault(),r.setState({showAdvanced:!r.state.showAdvanced})},r.handleBackupDealChange=function(e){var t=e.target.value;r.setState({escalationDeal:t})},r.handleSubmit=function(){var e=r.state.externalId,t=r.state.name,n=m.required(t),a=m.required(e);n.error||a.error?r.setState({nameValidation:n,externalIdValidation:a}):r.setState({saving:!0},(function(){if(r.state.id>0){var n={externalId:e,name:t,ssp:r.state.ssp,description:r.state.description,escalationDeal:r.state.escalationDeal,expirationDate:r.state.expirationDate.format("YYYY-MM-DD HH:mm:ss")};r.props.onSubmit(r.state.id,n)}else{var a=v.getScopeByLevel(r.state.level);n={name:t,externalId:e,ssp:r.state.ssp,description:r.state.description,escalationDeal:r.state.escalationDeal,scope:{scope:a,scopeId:null},expirationDate:r.state.expirationDate.format("YYYY-MM-DD HH:mm:ss")};"root"!==r.state.level&&(n.scope.scopeId=r.state.entityId),r.props.onSubmit(r.state.id,n)}}))},r.state=r.initialState(),r}return a(t,e),t.prototype.loadData=function(e){return u(this,void 0,void 0,(function(){var t,n,r,a,i,l,o;return s(this,(function(u){switch(u.label){case 0:return e.deal?(l=e.deal.expirationDate?g.default(e.deal.expirationDate):g.default().add(1,"years").endOf("day"),t=e.deal.escalationDeal,n=!!t,this.setState({id:e.deal.id,externalId:e.deal.externalId,name:e.deal.name,description:e.deal.description,escalationDeal:t,showAdvanced:n,ssp:e.deal.ssp,writeAccess:e.deal.writeAccess,saving:!1,expirationDate:l}),[3,4]):[3,1];case 1:return r=this.props.scope,a=[],"root"===r?[3,3]:[4,v.getEntityOptions("deals",e.scope,e.scopeId,r)];case 2:a=u.sent(),u.label=3;case 3:i=a.length>0?a[0].value:-1,l=g.default().add(1,"years").endOf("day"),o=e.sspOptions.length>0?e.sspOptions[0].value:"",this.setState({id:-1,externalId:"",name:"",description:"",ssp:o,escalationDeal:"",showAdvanced:!1,level:r,entityId:i,writeAccess:!0,entityOptions:a,saving:!1,expirationDate:l}),u.label=4;case 4:return[2]}}))}))},t.prototype.initialState=function(){return{id:-1,externalId:"",name:"",description:"",ssp:"",expirationDate:g.default().add(1,"years").endOf("day"),entityOptions:[{value:-1,label:""}],entityId:-1,level:this.props.scope,escalationDeal:"",writeAccess:!1,showAdvanced:!1,saving:!1,showLoader:!1,externalIdValidation:{error:!1,message:""},nameValidation:{error:!1,message:""}}},t.prototype.render=function(){var e=this,t=v.getLevelOptions(this.props.maxLevel),n=h.get(this.props,"deal.scope.owner"),r=h.get(this.props,"deal.scope.scope")||"";return d.default.createElement(f.Modal,{className:"deal-modal",show:this.props.show,onHide:this.handleClose,onEntering:this.handleEntering,backdrop:"static"},d.default.createElement(f.Modal.Header,{closeButton:!0},d.default.createElement(f.Modal.Title,null,this.state.id>0?"Edit":"Add"," deal")),d.default.createElement(f.Modal.Body,null,d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-sm-12"},d.default.createElement(f.Form.Group,{controlId:"deal-externalid"},d.default.createElement(f.Form.Label,null,"Id *"),d.default.createElement(f.Form.Control,{disabled:!this.state.writeAccess,isInvalid:this.state.externalIdValidation.error,autoFocus:!0,type:"text",value:this.state.externalId,onChange:this.handleExternalIdChange}),this.state.externalIdValidation.error&&d.default.createElement(f.Form.Control.Feedback,{type:"invalid"},this.state.externalIdValidation.message)),d.default.createElement(f.Form.Group,{controlId:"deal-name"},d.default.createElement(f.Form.Label,null,"Name *"),d.default.createElement(f.Form.Control,{autoFocus:!0,disabled:!this.state.writeAccess,isInvalid:this.state.nameValidation.error,type:"text",value:this.state.name,onChange:this.handleNameChange}),this.state.nameValidation.error&&d.default.createElement(f.Form.Control.Feedback,{type:"invalid"},this.state.nameValidation.message)),d.default.createElement(f.Form.Group,{controlId:"deal-ssp"},d.default.createElement(f.Form.Label,null,"SSP/Exchange"),d.default.createElement(p.default,{inputId:"react-select-deal-ssp",isDisabled:!this.state.writeAccess,className:"react-select-container",classNamePrefix:"react-select",onChange:this.handleSSPChange,value:this.props.sspOptions.find((function(t){return t.value===e.state.ssp})),options:this.props.sspOptions})),d.default.createElement(f.Form.Group,{controlId:"deal-description"},d.default.createElement(f.Form.Label,null,"Description"),d.default.createElement(f.Form.Control,{as:"textarea",autoFocus:!0,disabled:!this.state.writeAccess,type:"text",rows:3,value:this.state.description,onChange:function(t){e.setState({description:t.target.value})}})),d.default.createElement(f.Form.Label,null,"Expires"),d.default.createElement(f.InputGroup,null,d.default.createElement(f.InputGroup.Prepend,null,d.default.createElement(f.InputGroup.Text,null,d.default.createElement(y.default,{name:"calendar"}))),d.default.createElement(b.default,{inputProps:{disabled:!this.state.writeAccess},dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm:ss",value:this.state.expirationDate,onChange:function(t){e.setState({expirationDate:t})},isValidDate:function(e){return g.default(e).isAfter()}})),-1===this.state.id&&d.default.createElement(f.Form.Group,{controlId:"deal-scope"},d.default.createElement(f.Form.Label,null,"Level:"),d.default.createElement(p.default,{inputId:"react-select-deal-scope",className:"react-select-container",classNamePrefix:"react-select",isDisabled:-1!==this.state.id,clearable:!1,value:t.find((function(t){return t.value===e.state.level})),onChange:this.handleLevelChange,options:t})),"root"!==this.state.level&&-1===this.state.id&&d.default.createElement(d.Fragment,null,d.default.createElement(E.default,{visible:this.state.showLoader,loaderClass:"loading-input"}),!this.state.showLoader&&d.default.createElement(f.Form.Group,{controlId:"deal-entity"},d.default.createElement(f.Form.Label,null,v.getLabelByScopeType(this.state.level)),d.default.createElement(p.default,{inputId:"react-select-deal-entity",className:"react-select-container",classNamePrefix:"react-select",value:this.state.entityOptions.find((function(t){return t.value===e.state.entityId})),clearable:!1,onChange:this.handleEntityChange,options:this.state.entityOptions}))),this.state.id>0&&d.default.createElement(d.Fragment,null,d.default.createElement(f.Form.Group,{controlId:"deal-level"},d.default.createElement(f.Form.Label,null,"Level:"),d.default.createElement(f.Form.Control,{disabled:!0,type:"text",value:v.getLabelByScope(r)})),d.default.createElement(f.Form.Group,{controlId:"deal-owner"},d.default.createElement(f.Form.Label,null,"Owner:"),d.default.createElement(f.Form.Control,{disabled:!0,type:"text",value:n}))),d.default.createElement("p",null,d.default.createElement("a",{style:{textDecoration:"none"},href:"",onClick:this.handleAdvancedClick},d.default.createElement(y.default,{name:this.state.showAdvanced?"chevron-up":"chevron-down"})," Advanced settings")),this.state.showAdvanced&&d.default.createElement(d.Fragment,null,d.default.createElement(f.Form.Group,{controlId:"deal-backupdeal"},d.default.createElement(f.Form.Label,null,"Escalation deal"),d.default.createElement(f.Form.Control,{disabled:!this.state.writeAccess,type:"text",value:this.state.escalationDeal,onChange:this.handleBackupDealChange})),d.default.createElement(f.Alert,{variant:"info"},d.default.createElement("p",null,d.default.createElement(y.default,{name:"info-circle"})," ",d.default.createElement("strong",null,"Escalation deals")," are used whenever a campaign is behind schedule, but it has already reached its max bid price."),d.default.createElement("p",null,"This may help if the escalation deal has a higher priority, but in most cases a higher max bid price will be more effective.")))))),d.default.createElement(f.Modal.Footer,null,d.default.createElement(f.Button,{variant:"light",size:"sm",onClick:this.handleClose},"CANCEL"),d.default.createElement(f.Button,{variant:"primary",size:"sm",onClick:this.handleSubmit,disabled:!this.state.writeAccess||this.state.saving},"SAVE")))},t}(d.Component);t.default=_},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=u(n(11)),d=n(2),f=u(n(9)),p=u(n(35)),m=i(n(7)),h=i(n(8)),g=u(n(3));t.default=function(e){var t=h.getLevelOptions(e.maxLevel),n=c.default().add(1,"years").endOf("day"),r=s.useState(!1),a=r[0],i=r[1],u=s.useState(""),v=u[0],b=u[1],y=s.useState("display"),E=y[0],_=y[1],w=s.useState(""),S=w[0],P=w[1],C=s.useState(""),O=C[0],x=C[1],I=s.useState(""),N=I[0],A=I[1],j=s.useState(n),M=j[0],k=j[1],F=s.useState(e.scope),D=F[0],T=F[1],R=s.useState(-1),B=R[0],G=R[1],L=s.useState([]),V=L[0],z=L[1],q=s.useState({error:!1,message:""}),Y=q[0],U=q[1];s.useEffect((function(){e.sspOptions.length>0&&P(e.sspOptions[0].value)}),[e.sspOptions]);var H=function(){J(),e.onClose()},W=function(e){e.target.checked&&_(e.target.value)};function J(){i(!1),b(""),_("display"),x(""),A(""),k(n),U({error:!1,message:""}),T(e.scope),G(-1)}function X(t){return l(this,void 0,void 0,(function(){var n,r;return o(this,(function(a){switch(a.label){case 0:return[4,h.getEntityOptions("deals",e.scope,e.scopeId,t)];case 1:return n=a.sent(),r=n.length>0?n[0].value:-1,T(t),z(n),G(r),[2]}}))}))}return s.default.createElement(d.Modal,{className:"deal-request-modal",show:e.show,onHide:H,onEntering:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){return X(e.scope),[2]}))}))},backdrop:"static"},s.default.createElement(d.Modal.Header,{closeButton:!0},s.default.createElement(d.Modal.Title,null,"Request deal")),s.default.createElement(d.Modal.Body,null,s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12"},s.default.createElement(d.Form.Group,{controlId:"deal-request-ssp"},s.default.createElement(d.Form.Label,null,"Select publisher"),s.default.createElement(f.default,{inputId:"react-select-request-deal-ssp",className:"react-select-container",classNamePrefix:"react-select",onChange:function(e){P(e.value)},value:e.sspOptions.find((function(e){return e.value===S})),options:e.sspOptions})),s.default.createElement(d.Form.Group,null,s.default.createElement(d.Form.Check,{inline:!0,id:"deal-request-adtype-display",type:"radio",label:"Display",name:"deal-request-adtype",value:"display",checked:"display"===E,onChange:W}),s.default.createElement(d.Form.Check,{inline:!0,id:"deal-request-adtype-radio",type:"radio",label:"Video",name:"deal-request-adtype",value:"video",checked:"video"===E,onChange:W})),s.default.createElement(d.Form.Group,{controlId:"deal-request-publisherdescription"},s.default.createElement(d.Form.Label,null,"Message for publisher"),s.default.createElement(d.Form.Control,{as:"textarea",autoFocus:!0,type:"text",rows:3,value:N,onChange:function(e){A(e.target.value)}})),s.default.createElement("div",{className:"bb mb-15 mt-25 row"}),s.default.createElement(d.Form.Group,{controlId:"deal-request-name"},s.default.createElement(d.Form.Label,null,"Name *"),s.default.createElement(d.Form.Control,{autoFocus:!0,type:"text",isInvalid:Y.error,value:v,onChange:function(e){var t=e.target.value,n=m.required(t);b(t),U(n)}}),Y.error&&s.default.createElement(d.Form.Control.Feedback,{type:"invalid"},Y.message)),s.default.createElement(d.Form.Group,{controlId:"deal-request-description"},s.default.createElement(d.Form.Label,null,"Description"),s.default.createElement(d.Form.Control,{as:"textarea",autoFocus:!0,type:"text",rows:3,value:O,onChange:function(e){x(e.target.value)}})),s.default.createElement(d.Form.Label,null,"Expires"),s.default.createElement(d.InputGroup,null,s.default.createElement(d.InputGroup.Prepend,null,s.default.createElement(d.InputGroup.Text,null,s.default.createElement(g.default,{name:"calendar"}))),s.default.createElement(p.default,{dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm:ss",value:M,onChange:function(e){k(e)},isValidDate:function(e){return c.default(e).isAfter()}})),s.default.createElement(d.Form.Group,{controlId:"deal-request-scope"},s.default.createElement(d.Form.Label,null,"Level:"),s.default.createElement(f.default,{inputId:"react-select-deal-scope",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:t.find((function(e){return e.value===D})),onChange:function(e){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,X(e.value)];case 1:return t.sent(),[2]}}))}))},options:t})),"root"!==D&&s.default.createElement(d.Form.Group,{controlId:"deal-request-entity"},s.default.createElement(d.Form.Label,null,h.getLabelByScopeType(D)),s.default.createElement(f.default,{inputId:"react-select-deal-entity",className:"react-select-container",classNamePrefix:"react-select",value:V.find((function(e){return e.value===B})),clearable:!1,onChange:function(e){G(parseInt(e.value,10))},options:V}))))),s.default.createElement(d.Modal.Footer,null,s.default.createElement(d.Button,{variant:"light",size:"sm",onClick:H},"CANCEL"),s.default.createElement(d.Button,{variant:"primary",size:"sm",onClick:function(){var t=m.required(v);if(t.error)U(t);else{i(!0);var n=h.getScopeByLevel(D),r={sspName:S,adType:E,description:N,buyerSideDeal:{externalId:"",name:v,ssp:S,description:O,expirationDate:M.format("YYYY-MM-DD HH:mm:ss"),scope:{scope:n,scopeId:null}}};"root"!==D&&(r.buyerSideDeal.scope.scopeId=B),e.onSubmit(r),J()}},disabled:a},"SAVE")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(29)),s=l(n(30)),c=l(n(31)),d=i(n(13)),f=l(n(12)),p=l(n(10)),m=l(n(26)),h=l(n(342));t.default=function(){var e=o.useContext(f.default).data;return d.getRights(e.rights).VIEW_USERS?o.default.createElement(o.Fragment,null,o.default.createElement(u.default,null,o.default.createElement("div",{className:"col-sm-9"},o.default.createElement(s.default,null),o.default.createElement(c.default,{id:"breadcrumb",minScope:"advertiser"}))),o.default.createElement(m.default,{title:"Users"}),o.default.createElement(h.default,null)):o.default.createElement(p.default,{message:"Access forbidden"})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=n(2),f=u(n(19)),p=i(n(20)),m=i(n(1)),h=i(n(13)),g=u(n(12)),v=u(n(10)),b=u(n(343)),y=u(n(16)),E=u(n(5)),_=i(n(4)),w=i(n(8)),S=u(n(3)),P=u(n(344)),C=u(n(27)),O=u(n(39));t.default=function(){var e=c.useParams(),t=e.scope,n=e.scopeId,r=s.useContext(g.default).data,a=h.getRights(r.rights),i=s.useContext(y.default),u=s.useContext(O.default).items,x=s.useState([]),I=x[0],N=x[1],A=s.useState([]),j=A[0],M=A[1],k=s.useState(!0),F=k[0],D=k[1],T=s.useState(!1),R=T[0],B=T[1],G=s.useState(!1),L=G[0],V=G[1],z=s.useState(null),q=z[0],Y=z[1],U=s.useState(0),H=U[0],W=U[1],J=s.useState(!1),X=J[0],K=J[1],Z=s.useState(""),$=Z[0],Q=Z[1],ee=s.useRef(null),te=s.useRef(null);function ne(){return l(this,void 0,void 0,(function(){var e,r,a;return o(this,(function(i){switch(i.label){case 0:if(!F)return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),te.current&&te.current.abort(),te.current=new AbortController,e=w.scopedParam({scope:t,scopeId:n}),[4,_.Get({path:"/api/users/roles",qs:e,signal:te.current.signal})];case 2:return r=i.sent(),l=r,a=m.uniq(l.map((function(e){return e.email}))),N(r),M(a),[3,4];case 3:return"AbortError"===i.sent().name?(K(!1),Q("")):(K(!0),Q("Error loading users.")),[3,4];case 4:D(!1),i.label=5;case 5:return[2]}var l}))}))}s.useEffect((function(){ne()}),[]),s.useEffect((function(){D(!0)}),[t,n]),s.useEffect((function(){ne()}),[F]);if(X)return s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(v.default,{message:$})))));var re=w.getMaxLevel(i,u);return s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",{className:"pull-left"},"Users"),s.default.createElement("div",{className:"pull-right"},a.MANAGE_USERS&&s.default.createElement(d.Button,{size:"sm",variant:"primary",className:"mr-2",onClick:function(){V(!0)}},s.default.createElement(S.default,{name:"plus"})," INVITE USER"),s.default.createElement(d.Button,{size:"sm",variant:"primary",onClick:function(){W(H+1)}},s.default.createElement(S.default,{name:"remove"})," CLEAR FILTERS")),s.default.createElement(E.default,{visible:F}),!F&&s.default.createElement(b.default,{users:I,writeAccess:a.MANAGE_USERS,user:i,deleteClick:function(e){B(!0),Y(e)},filtersCounter:H}),s.default.createElement(P.default,{userEmails:j,data:r,rights:a,show:L,scope:t,scopeId:n,maxLevel:re,onClose:function(){V(!1)},onSubmit:function(e){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,_.Post({path:"/api/users/invite",body:e})];case 1:return t.sent(),V(!1),D(!0),ee.current.addNotification(p.success("User role added, the user will be notified by email",!1)),[3,3];case 2:return t.sent(),V(!1),ee.current.addNotification(p.error("Error adding user role.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(C.default,{message:"Are you sure you want to delete this user?",show:R,onClose:function(){B(!1),Y(null)},onConfirm:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,_.Post({path:"/api/users/ban",body:q})];case 1:return e.sent(),B(!1),D(!0),ee.current.addNotification(p.success("User role deleted",!1)),[3,3];case 2:return e.sent(),B(!1),ee.current.addNotification(p.error("Error deleting user role.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(f.default,{ref:ee}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,u,s,c,d=i(n(0)),f=l(n(14)),p=i(n(45)),m=l(n(17)),h=i(n(15)),g=l(n(3));t.default=function(e){var t=d.useState(1),n=t[0],r=t[1],a=d.useState(h.getInitialSizePerPage("users-table",e.user)),i=a[0],l=a[1],v=d.useState({dataField:"id",order:"desc"}),b=v[0],y=v[1],E=d.useState(""),_=E[0],w=E[1],S=d.useState(""),P=S[0],C=S[1],O=d.useState(""),x=O[0],I=O[1],N=d.useState(""),A=N[0],j=N[1];d.useEffect((function(){o(""),s(""),c(""),u("")}),[e.filtersCounter]);var M=function(e,t){y({dataField:e,order:t})};var k,F,D,T=(k={admin:"admin",campaignmanager:"campaign manager",campaignoptimizer:"campaign optimizer",aduploader:"ad uploader",tagmanager:"tag manager",guest:"guest"},F={root:"root",organization:"organization",agency:"agency",advertiser:"advertiser",publisher:"publisher"},[{dataField:"id",text:"#",hidden:!0},{dataField:"df1",isDummyField:!0,text:"",formatter:function(t,n){if(e.writeAccess){var r={userId:n.userId,role:{role:n.role,level:n.level,entityId:n.entityId}};return d.default.createElement("a",{onClick:function(t){t.preventDefault(),e.deleteClick(r)},href:"",className:"table-btn"},d.default.createElement(g.default,{name:"remove"}))}return null},headerStyle:{width:"30px"}},{dataField:"email",text:"Email",sort:!0,sortCaret:h.columnSort,onSort:M,filter:p.textFilter({placeholder:"Search email...",defaultValue:_,getFilter:function(e){o=e},onFilter:function(e){w(e)}})},{dataField:"role",text:"Role",sort:!0,sortCaret:h.columnSort,onSort:M,formatter:function(e){return k[e]},filter:p.selectFilter({options:k,defaultValue:x,getFilter:function(e){s=e},onFilter:function(e){I(e)}})},{dataField:"level",text:"Level",sort:!0,sortCaret:h.columnSort,onSort:M,formatter:function(e){return F[e]},filter:p.selectFilter({options:F,defaultValue:A,getFilter:function(e){c=e},onFilter:function(e){j(e)}})},{dataField:"entityName",text:"Entity",sort:!0,onSort:M,sortCaret:h.columnSort,filter:p.textFilter({placeholder:"Search entity...",defaultValue:P,getFilter:function(e){u=e},onFilter:function(e){C(e)}})}]),R=h.getSizePerPage(i,e.users.length),B=e.users.length||30;return d.default.createElement(f.default,{id:"users-table",filter:p.default(),classes:"table-borderless",bordered:!1,hover:!0,striped:!0,keyField:"id",data:e.users,columns:T,defaultSorted:[b],pagination:m.default({page:(D=h.getLastPage(e.users,i),n>D?D:n),sizePerPage:R,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:B}],onPageChange:function(e,t){r(e)},onSizePerPageChange:function(t,n){h.storeSizePerPage(t,"users-table",e.user),l(t)}})})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=u(n(9)),f=u(n(38)),p=i(n(1)),m=i(n(8)),h=i(n(7));t.default=function(e){var t=m.getLevelOptions(e.maxLevel),n=s.useState(""),r=n[0],a=n[1],i=s.useState(e.scope),u=i[0],g=i[1],v=s.useState("admin"),b=v[0],y=v[1],E=s.useState([{value:-1,label:""}]),_=E[0],w=E[1],S=s.useState(-1),P=S[0],C=S[1],O=s.useState({error:!1,message:""}),x=O[0],I=O[1];function N(t){return l(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return"root"!==t?[3,1]:[2,[]];case 1:return"publisher"!==t?[3,2]:[2,[{value:e.data.publisher.id,label:e.data.publisher.settings.name}]];case 2:return[4,m.getEntityOptions("users",e.scope,e.scopeId,t)];case 3:return[2,n.sent()]}}))}))}var A=function(){a(""),g(e.scope),y("admin"),w([{value:-1,label:""}]),C(-1),I({error:!1,message:""}),e.onClose()},j=e.userEmails.map((function(e){return{value:e,label:e}})),M=function(e){return"root"===e||"publisher"===e?[{value:"admin",label:"admin"}]:[{value:"admin",label:"admin"},{value:"campaignmanager",label:"campaign manager"},{value:"campaignoptimizer",label:"campaign optimizer"},{value:"aduploader",label:"ad uploader"},{value:"tagmanager",label:"tag manager"},{value:"guest",label:"guest"}]}(u);return s.default.createElement(c.Modal,{show:e.show,onHide:A,backdrop:"static",onEntering:function(){return l(void 0,void 0,void 0,(function(){var t,n,r;return o(this,(function(a){switch(a.label){case 0:return[4,N(t=e.scope)];case 1:return n=a.sent(),r=n.length>0?parseInt(n[0].value,10):-1,w(n),C(r),g(t),[2]}}))}))}},s.default.createElement(c.Modal.Header,{closeButton:!0},s.default.createElement(c.Modal.Title,null,"Invite user")),s.default.createElement(c.Modal.Body,null,s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12"},s.default.createElement(c.Form.Group,{controlId:"user-email"},s.default.createElement(c.Form.Label,null,"Search for an email or add a new one:"),s.default.createElement(f.default,{className:"react-select-container",classNamePrefix:"react-select",isClearable:!0,onChange:function(e,t){var n=p.get(e,"value",""),r=h.email(n);a(n),I(r)},options:j}),x.error&&s.default.createElement(c.Form.Control.Feedback,{style:{display:"block"},type:"invalid"},x.message)),s.default.createElement(c.Form.Group,{controlId:"user-role"},s.default.createElement(c.Form.Label,null,"Role:"),s.default.createElement(d.default,{inputId:"react-select-user-role",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:M.find((function(e){return e.value===b})),onChange:function(e){y(e.value)},options:M})),s.default.createElement(c.Form.Group,{controlId:"user-level"},s.default.createElement(c.Form.Label,null,"Level:"),s.default.createElement(d.default,{inputId:"react-select-user-level",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:t.find((function(e){return e.value===u})),onChange:function(e){return l(void 0,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return"root"!==e.value?[3,1]:(g(e.value),y("admin"),[3,3]);case 1:return[4,N(e.value)];case 2:t=r.sent(),n=t.length>0?parseInt(t[0].value,10):-1,g(e.value),w(t),C(n),r.label=3;case 3:return[2]}}))}))},options:t})),"root"!==u&&s.default.createElement(c.Form.Group,{controlId:"user-entity"},s.default.createElement(c.Form.Label,null,m.getLabelByScopeType(u),":"),s.default.createElement(d.default,{inputId:"react-select-user-entity",className:"react-select-container",classNamePrefix:"react-select",value:_.find((function(e){return e.value===P})),clearable:!1,onChange:function(e){C(parseInt(e.value,10))},options:_}))))),s.default.createElement(c.Modal.Footer,null,s.default.createElement(c.Button,{size:"sm",variant:"light",onClick:A},"CANCEL"),s.default.createElement(c.Button,{size:"sm",variant:"primary",onClick:function(){var t=h.email(r.trim());if(t.error)I(t);else{var n={email:r,role:{level:u,role:b}};"root"!==u&&(n.role.entityId=P),e.onSubmit(n)}}},"SAVE")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(29)),s=l(n(30)),c=l(n(31)),d=i(n(13)),f=l(n(12)),p=l(n(10)),m=l(n(26)),h=l(n(346));t.default=function(){var e=o.useContext(f.default).data;return d.getRights(e.rights).VIEW_PUBLISHER_AD_SLOTS?o.default.createElement(o.Fragment,null,o.default.createElement(u.default,null,o.default.createElement("div",{className:"col-sm-12"},o.default.createElement(s.default,null),o.default.createElement(c.default,{id:"breadcrumb",minScope:"advertiser"}))),o.default.createElement(m.default,{title:"Ad slots"}),o.default.createElement(h.default,null)):o.default.createElement(p.default,{message:"Access forbidden"})}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=l(n(0)),f=n(0),p=l(n(1)),m=n(6),h=n(2),g=n(51),v=l(n(4)),b=c(n(12)),y=c(n(5)),E=l(n(36)),_=c(n(3)),w=l(n(13)),S=c(n(347)),P=c(n(14)),C=c(n(23)),O=c(n(106)),x=c(n(353));t.default=function(e){var t=f.useContext(b.default).data,n=m.useParams(),a=n.scope,i=parseInt(n.scopeId),l=w.getRights(t.rights),c=d.useState(null),I=c[0],N=c[1],A=d.useState([]),j=A[0],M=A[1],k=d.useState(0),F=k[0],D=k[1],T=d.useState(0),R=T[0],B=T[1],G=d.useState(new Map),L=G[0],V=G[1],z=d.useState(new Map),q=z[0],Y=z[1],U=d.useState(!0),H=U[0],W=U[1],J=d.useState(new Set),X=J[0],K=(J[1],d.useState(!1)),Z=K[0],$=K[1],Q=d.useState(!1),ee=Q[0],te=Q[1],ne=d.useState([]),re=ne[0],ae=ne[1];d.useEffect((function(){W(!0)}),[a,i]),d.useEffect((function(){!function(){o(this,void 0,void 0,(function(){var e,t,n,r,a,l,o,c;return u(this,(function(u){switch(u.label){case 0:if(!H)return[3,8];u.label=1;case 1:return u.trys.push([1,7,,8]),[4,v.Get({path:"/api/attributes/customs",qs:{scope:"publisher",video:!1,scopeId:i}})];case 2:return e=u.sent(),[4,v.Get({path:"/api/adslots/publishers/"+i+"/adslotSettings"})];case 3:return t=u.sent(),[4,v.Get({path:"/api/adslots/publishers/"+i+"/sites"})];case 4:return n=u.sent(),[4,v.Get({path:"/api/adslots/publishers/"+i+"/categories"})];case 5:return r=u.sent(),[4,v.Get({path:"/api/adslots/publishers/"+i+"/adslots"})];case 6:return a=u.sent(),l=function(e,t){var n=new Map;return t.forEach((function(e){return n.set(e.id,[])})),e.forEach((function(e){n.has(null==e?void 0:e.categoryId)&&n.set(e.categorySettings.id,s(s([],n.get(e.categoryId)),[e]))})),t.map((function(e){return e.adslots=n.get(e.id),e}))}(a,r),o=function(e,t){var n=new Map;return t.forEach((function(e){return n.set(e.id,[])})),e.forEach((function(e){n.has(e.siteId)&&n.set(e.siteSettings.id,s(s([],n.get(e.siteId)),[e]))})),t.map((function(e){return e.adCategories=n.get(e.id),e}))}(l,n),a.forEach((function(e){return X.add(e.name)})),ae(e.map((function(e){return{propertyName:e.displayName}}))),N((function(){return t})),M((function(){return o})),D((function(){return r.length})),B((function(){return a.length})),W((function(){return!1})),[3,8];case 7:return c=u.sent(),console.log(c),[3,8];case 8:return[2]}}))}))}()}),[H]);var ie=function(e){var t=0;return e.forEach((function(e,n){t+=e.valueOf()})),t};d.useEffect((function(){D((function(){return ie(L)}))}),[L]),d.useEffect((function(){B((function(){return ie(q)}))}),[q]);var le=function(e,t,n,r){return d.createElement("span",null,r)},oe=function(e){return void 0!==e&&null!=e?d.createElement("p",null,function(e){if(void 0!==e&&null!=e){var t="Allowed";return 24==e?t="Truncated":0==e&&(t="Not allowed"),d.createElement("div",null,d.createElement("b",null,"IP: "),t)}}(e.truncateIpTo),function(e){if(e)return d.createElement("div",null,d.createElement("b",null,"Max ip2geo accuracy: "),e)}(e.maxAccuracy),function(e){if(e)return d.createElement("div",null,d.createElement("b",null,"Fixed country: "),e)}(e.fixedCountry)):null},ue=function(e,t){return d.createElement("p",null,g.flattenAdslotPublisher("publisher",t,re).map((function(e){return""!=e.current?d.createElement("p",null,d.createElement("b",null,e.propertyName,": "),""!=e.overwritten?d.createElement(d.Fragment,null,d.createElement("s",null,e.overwritten),", "):"",""!=e.original?d.createElement("i",null,e.original):"",e.current):null})))},se=function(e,t){return d.createElement("a",{onClick:function(e){e.preventDefault(),te(!0)},href:"",className:"table-btn mr-10"},d.createElement(_.default,{name:"pencil"}))},ce=function(e,t){V((function(){return new Map(L.set(e,t))}))},de=function(e,t){Y((function(){return new Map(L.set(e,t))}))};function fe(e,t){return e.siteId<t.siteId?-1:e.siteId>t.siteId?1:e.categoryId<t.categoryId?-1:e.categoryId>t.categoryId?1:e.id<t.id?-1:e.id>t.id?1:0}function pe(e){var t;return(null===(t=e.placementProperties)||void 0===t?void 0:t.divId)?'<script type="text/javascript">ootag.queue.push(function () {ootag.defineSlot({adSlot: "'+e.name+'",targetId: "'+e.placementProperties.divId+'"});});<\/script>':"Fill div id in the dashboard!"}function me(e){return e.replace(/\W/g,"")+"_sizes"}function he(e){var t,n,r;return(null===(t=e.placementProperties)||void 0===t?void 0:t.divId)?'<script type="text/javascript">var '+me(e.placementProperties.divId)+" = "+(((r=null===(n=null==e?void 0:e.placementProperties)||void 0===n?void 0:n.anyDeviceSizes)?"["+r.map((function(e){return"["+e.width+","+e.height+"]"})).join(",")+"]":"[]")+';var adUnits = [{code: "')+e.placementProperties.divId+'",mediaTypes: {banner: {sizes: '+me(e.placementProperties.divId)+"}},bids: [  "+ge(e)+",]}];<\/script>":"Fill div id in the dashboard!"}function ge(e){return'{bidder: "optout",params: {publisher: "'+i+'",adslot: "'+e.name+'"}}'}var ve=I?[I]:[],be=[{dataField:"siteCount",isDummyField:!0,text:"sites",headerStyle:{width:"10%"},formatter:le,formatExtraData:j.length},{dataField:"categoryCount",isDummyField:!0,text:"ad groups",headerStyle:{width:"10%"},formatter:le,formatExtraData:F},{dataField:"adslotCount",isDummyField:!0,text:"adslots",headerStyle:{width:"10%"},formatter:le,formatExtraData:R},{dataField:"",isDummyField:!0,headerStyle:{width:"15%"},text:""},{dataField:"consentSettings.geoFromIpAllowed",headerStyle:{width:"25%"},text:"ip to geo",formatter:oe},{dataField:"customProperties",text:"custom data",formatter:ue},{dataField:"df1",isDummyField:!0,text:"",formatter:se,headerStyle:{width:"40px"}}];return d.createElement(d.Fragment,null,d.createElement("div",{className:"row mb-10",style:{fontSize:"12px"}},d.createElement("div",{className:"col-sm-12 pt-3"},d.createElement("div",{className:"card"},d.createElement("h3",{className:"pull-left"},"Display slot settings"),d.createElement("div",null,d.createElement("div",{style:{margin:"2px"}},d.createElement(h.Button,{variant:"secondary",className:"pull-right mr-3 mt-3 mb-3",onClick:function(){!function(){o(this,void 0,void 0,(function(){var e,t,n,r;return u(this,(function(a){switch(a.label){case 0:return[4,v.Get({path:"/api/adslots/publishers/"+i+"/adslots"})];case 1:return e=a.sent(),e.sort(fe),t=["site","group","ad slot","example url","div id","div code","prebid bidder","header code","prebid page"].map((function(e){return E.getBoldCell(e)})),n=e.map((function(e){var t,n,r,a,l;return[E.getCell((null===(r=null===(n=null===(t=e.categorySettings)||void 0===t?void 0:t.siteSettings)||void 0===n?void 0:n.siteProperties)||void 0===r?void 0:r.domain)?e.categorySettings.siteSettings.siteProperties.domain:""),E.getCell((null===(a=e.categorySettings)||void 0===a?void 0:a.name)?e.categorySettings.name:""),E.getCell(e.name?e.name:""),E.getCell(e.exampleUrl?e.exampleUrl:""),E.getCell((null===(l=e.placementProperties)||void 0===l?void 0:l.divId)?e.placementProperties.divId:""),E.getCell(pe(e)),E.getCell(ge(e)),E.getCell('<script src="https://cdn.optoutadvertising.com/script/ootag.min.js"><\/script><script>var ootag = ootag || {}; ootag.queue = ootag.queue || [];ootag.queue.push(function () { ootag.initializeOo({ publisher:  '+i+" });});<\/script>"),E.getCell(he(e))]})),r=[t].concat(n),E.save(r,"Adslots","Adslots_"+name),[2]}}))}))}()}},d.createElement(_.default,{name:"download"})," Download ad tags")),d.createElement("div",{style:{margin:"2px"}},d.createElement(h.Button,{variant:"primary",className:"pull-right mr-3 mt-3 mb-3",onClick:function(){$(!0)}},d.createElement(_.default,{name:"plus"})," Site")),d.createElement(C.default,{keyField:"id",data:ve,columns:be},(function(e){return d.createElement(P.default,r({},e.baseProps,{keyField:"id",rows:ve,columns:be}))})))),d.createElement(y.default,{visible:H}),H?null:j.map((function(e){return d.createElement(S.default,{rights:l,publisherSettings:I,adsite:e,allowedCustoms:re,checkUniqueName:function(e){return!X.has(e)},setAdSlotNames:function(e){e.forEach((function(e){return X.add(e)}))},adType:"DISPLAY",publisherId:i,siteId:e.id,reloadSites:W,setCategoriesPerSite:ce,setAdslotsPerSite:de})})),d.createElement(x.default,{publisherSettings:I,allowedCustoms:re,show:ee,writeAccess:!0,handleClose:function(){return te(!1)},handleSubmit:function(e){return o(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t={adType:"DISPLAY"},[4,v.Put({path:"/api/adslots/publishers/"+i+"/adslotsettings",body:p.assign(t,e)})];case 1:return n.sent(),W(!0),[2]}}))}))}}),d.createElement(O.default,{site:null,publisherSettings:I,allowedCustoms:re,show:Z,writeAccess:!0,handleClose:function(){return $(!1)},handleSubmit:function(e,t){return o(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return n={adType:"DISPLAY"},null!=e?[3,2]:[4,v.Post({path:"/api/adslots/publishers/"+i+"/sites",body:p.assign(n,t)})];case 1:return r.sent(),[3,4];case 2:return[4,v.Put({path:"/api/adslots/publishers/"+i+"/sites/"+e,body:p.assign(n,t)})];case 3:r.sent(),r.label=4;case 4:return W(!0),[2]}}))}))}}))))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=l(n(0)),d=l(n(1)),f=s(n(14)),p=s(n(348)),m=s(n(105)),h=s(n(23)),g=s(n(106)),v=n(51),b=s(n(3)),y=l(n(4));t.default=function(e){var t,n=c.useState(e.adsite),a=n[0],i=n[1],l=c.useState(e.adsite.adCategories),s=l[0],E=(l[1],c.useState(e.adsite.adCategories.length)),_=E[0],w=E[1],S=c.useState(e.adsite.adCategories.reduce((function(e,t){return e+t.adslots.length}),0)),P=S[0],C=S[1],O=c.useState(!1),x=O[0],I=O[1],N=c.useState(!1),A=N[0],j=N[1],M=c.useState(!1),k=M[0],F=M[1],D=c.useState(!1),T=D[0],R=D[1],B=c.useState(!1),G=B[0];B[1];c.useEffect((function(){return e.setCategoriesPerSite(e.siteId,_)}),[_]),c.useEffect((function(){e.setAdslotsPerSite(e.siteId,P)}),[P]),c.useEffect((function(){T&&function(){o(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return[4,y.Get({path:"/api/adslots/publishers/"+e.publisherId+"/sites"})];case 1:return t=n.sent(),[4,y.Get({path:"/api/adslots/publishers/"+e.publisherId+"/categories",qs:{siteId:e.siteId}})];case 2:return n.sent(),i(t.find((function(t){return t.id==e.siteId}))),R((function(){return!1})),[2]}}))}))}()}),[T]);var L=function(t,n,r,i){return c.createElement(m.default,{id:"button-site-"+(null==a?void 0:a.id),numberItems:i[0],labelName:i[1],buttonStyle:i[2],collapseState:i[3],setCollapseState:i[4],divId:"site-collapse-"+e.siteId})};var V=function(e){j((function(){return e})),I((function(){return e}))},z=[a],q=[{dataField:"id",hidden:!0,text:"id",headerStyle:{width:"0%"}},{dataField:"category",isDummyField:!0,text:"ad groups",headerStyle:{width:"10%"},formatter:L,formatExtraData:[_,"groups","primary",x,I]},{dataField:"adslots",isDummyField:!0,text:"ad slots",headerStyle:{width:"20%"},formatter:L,formatExtraData:[P,"ad slots","secondary",x,V]},{dataField:"exampleUrl",text:"example url",headerStyle:{width:"15%"},formatter:function(e,t){var n,r,a=null,i=null;return t.exampleUrl?i=t.exampleUrl:(null===(n=null==t?void 0:t.siteProperties)||void 0===n?void 0:n.domain)&&(i=null===(r=null==t?void 0:t.siteProperties)||void 0===r?void 0:r.domain,a="From site domain:"),i&&(i.startsWith("http")||(i="https://"+i)),c.createElement("div",null,a?c.createElement("div",null,c.createElement("i",null,a)):null,i?c.createElement("a",{href:i,target:"_blank"},i):null)}},{dataField:"consentSettings.geoFromIpAllowed",headerStyle:{width:"25%"},text:"ip to geo",formatter:function(e,t){var n,r,a=null===(r=null===(n=null==t?void 0:t.publisherSettings)||void 0===n?void 0:n.consentSettings)||void 0===r?void 0:r.geoFromIpAllowed;return void 0!==e&&null!=e&&Object.values(e).filter((function(e){return null!=e})).length>0?c.createElement("p",null,function(e){if(void 0!==e&&null!=e){var t="Allowed";return 24==e?t="Truncated":0==e&&(t="Not allowed"),c.createElement("div",null,c.createElement("b",null,"IP: "),t)}}(e.truncateIpTo),function(e){if(e)return c.createElement("div",null,c.createElement("b",null,"Max ip2geo accuracy: "),e)}(e.maxAccuracy),function(e){if(e)return c.createElement("div",null,c.createElement("b",null,"Fixed country: "),e)}(e.fixedCountry)):a&&Object.values(a).filter((function(e){return null!=e})).length>0?c.createElement("p",null,c.createElement("i",null,"from publisher")):null}},{dataField:"customFormat",text:"custom data",formatter:function(t,n){return c.createElement("p",null,v.flattenAdslotSites("site",n,e.allowedCustoms).map((function(e){return""!=e.current||G?c.createElement("p",null,c.createElement("b",null,e.propertyName,": "),""!=e.overwritten?c.createElement(c.Fragment,null,c.createElement("s",null,e.overwritten),", "):"",G&&""!=e.original?c.createElement("i",null,e.original):"",e.current):null})))}},{dataField:"df1",isDummyField:!0,text:"",formatter:function(e,t){return c.createElement("a",{onClick:function(e){e.preventDefault(),F(!0)},href:"",className:"table-btn mr-10"},c.createElement(b.default,{name:"pencil"}))},headerStyle:{width:"40px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:function(t,n){return c.createElement("a",{onClick:function(t){t.preventDefault(),function(t){o(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,y.Delete({path:"/api/adslots/publishers/"+e.publisherId+"/sites/"+t.id})];case 1:return n.sent(),R(!0),[2]}}))}))}(n)},href:"",className:"table-btn mr-10"},c.createElement(b.default,{name:"remove"}))},headerStyle:{width:"40px"}}];return a?c.createElement(c.Fragment,null,c.createElement("div",{className:"row mb-10",style:{fontSize:"12px"}},c.createElement("div",{className:"col-sm-12 pt-3"},c.createElement("div",{className:"card"},c.createElement("h3",{className:"pull-left"}," Site ",null===(t=null==a?void 0:a.siteProperties)||void 0===t?void 0:t.domain),c.createElement("div",null,c.createElement("div",null,c.createElement(h.default,{keyField:"id",data:z,columns:q},(function(e){return c.createElement(f.default,r({},e.baseProps,{keyField:"id",rows:z,columns:q,bordered:!1,striped:!0,hover:!0}))}))),c.createElement("div",{id:"site-collapse-"+e.siteId,className:"collapse"},c.createElement(p.default,{adCategories:s,site:a,setReload:T,setNumberCategories:w,setNumberAdslots:C,checkUniqueName:e.checkUniqueName,setAdSlotNames:e.setAdSlotNames,allowedCustoms:e.allowedCustoms,adType:e.adType,publisherId:e.publisherId,siteId:e.siteId,adslotsCollapsed:A})))))),c.createElement(g.default,{site:a,publisherSettings:e.publisherSettings,allowedCustoms:e.allowedCustoms,show:k,writeAccess:!0,handleClose:function(){return F(!1)},handleSubmit:function(t,n){return o(this,void 0,void 0,(function(){var r;return u(this,(function(a){switch(a.label){case 0:return r={adType:e.adType,siteId:e.siteId},null!=t?[3,2]:[4,y.Post({path:"/api/adslots/publishers/"+e.publisherId+"/sites",body:d.assign(r,n)})];case 1:return a.sent(),[3,4];case 2:return[4,y.Put({path:"/api/adslots/publishers/"+e.publisherId+"/sites/"+t,body:d.assign(r,n)})];case 3:a.sent(),a.label=4;case 4:return R(!0),[2]}}))}))}})):null}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=l(n(0)),f=l(n(1)),p=n(2),m=c(n(14)),h=c(n(5)),g=c(n(23)),v=l(n(15)),b=c(n(105)),y=n(51),E=c(n(349)),_=c(n(352)),w=l(n(4)),S=c(n(3));t.default=function(e){var t=d.useState(e.adCategories),n=t[0],a=t[1],i=d.useState(e.adCategories.flatMap((function(e){return e.adslots}))),l=i[0],c=i[1],P=d.useState([]),C=P[0],O=P[1],x=d.useState({dataField:"id",order:"desc"}),I=x[0],N=x[1],A=d.useState(!1),j=A[0],M=A[1],k=d.useState([]),F=k[0],D=k[1],T=d.useState([]),R=T[0],B=T[1],G=d.useState(),L=G[0],V=G[1],z=d.useState(!1),q=z[0],Y=z[1],U=d.useState(),H=U[0],W=U[1],J=d.useState(!1),X=J[0],K=J[1],Z=d.useState(!1),$=Z[0];Z[1];d.useEffect((function(){Q(C,[],(function(){return e.adslotsCollapsed}))}),[e.adslotsCollapsed]),d.useEffect((function(){e.setReload&&M(!0)}),[e.setReload]),d.useEffect((function(){j&&function(){o(this,void 0,void 0,(function(){var t,n,r;return u(this,(function(i){switch(i.label){case 0:return[4,w.Get({path:"/api/adslots/publishers/"+e.publisherId+"/categories",qs:{siteId:e.siteId}})];case 1:return t=i.sent(),[4,w.Get({path:"/api/adslots/publishers/"+e.publisherId+"/adslots",qs:{siteId:e.siteId}})];case 2:return n=i.sent(),r=function(e,t){var n=new Map;return t.forEach((function(e){return n.set(e.id,[])})),e.forEach((function(e){n.has(null==e?void 0:e.categoryId)&&n.set(e.categorySettings.id,s(s([],n.get(e.categoryId)),[e]))})),t.map((function(e){return e.adslots=n.get(e.id),e}))}(n,t),a((function(){return e.setNumberCategories(r.length),r})),c((function(){return e.setNumberAdslots(n.length),e.setAdSlotNames(n.map((function(e){return e.name}))),n})),M((function(){return!1})),[2]}}))}))}()}),[j]);var Q=function(e,t,n){var r=new Set(t.map((function(e){return e.rowId}))),a=F.filter((function(e){return r.has(e)})),i=e.filter((function(e){return!r.has(e.rowId)})).filter((function(e){return ee(e)})).filter((function(e){return n(e)})).map((function(e){return null==e?void 0:e.rowId})).concat(a);D((function(){var t=new Set(i),n=e.filter((function(e){return!ee(e)})).filter((function(e){return!t.has(te(e).toString())})).map((function(e){return e.rowId}));return B(n),i}))};d.useEffect((function(){O((function(){var t=C,n=ne();return Q(n,t,(function(){return e.adslotsCollapsed})),n}))}),[n]);var ee=function(e){return void 0!==e.numChildren},te=function(e){return null==e?void 0:e.categorySettings.id},ne=function(){return n.flatMap((function(t){var n=function(e,t){var n;return{name:e.name,custom:e.customProperties,rowId:e.id.toString(),exampleUrl:e.exampleUrl,siteSettings:e.siteSettings,numChildren:null===(n=e.adslots)||void 0===n?void 0:n.length,customFormat:y.flattenAdslotCategories("category",e,t),originalId:e.id}}(t,e.allowedCustoms),r=0;return s([n],t.adslots.map((function(n){return r+=1,function(e,t,n,r,a){var i;return{name:e.name,custom:e.customProperties,rowId:r+"."+a,exampleUrl:e.exampleUrl,divId:null===(i=null==e?void 0:e.placementProperties)||void 0===i?void 0:i.divId,categorySettings:n,siteSettings:null==n?void 0:n.siteSettings,customFormat:y.flattenAdslotCustoms(e,t),placementData:null==e?void 0:e.placementProperties,originalId:e.id}}(n,e.allowedCustoms,t,t.id,r)})))}))},re=function(e){var t,n,r,a;return e?d.createElement("p",null,(null==e?void 0:e.anyDeviceSizes)?d.createElement("p",null,d.createElement("b",null,"All devices: "),null===(t=null==e?void 0:e.anyDeviceSizes)||void 0===t?void 0:t.map((function(e){return e.width+"x"+e.height})).join(", ")):null,(null==e?void 0:e.desktopSizes)?d.createElement("p",null,d.createElement("b",null,"Desktop: "),null===(n=null==e?void 0:e.desktopSizes)||void 0===n?void 0:n.map((function(e){return e.width+"x"+e.height})).join(", ")):null,(null==e?void 0:e.tabletSizes)?d.createElement("p",null,d.createElement("b",null,"Tablet: "),null===(r=null==e?void 0:e.tabletSizes)||void 0===r?void 0:r.map((function(e){return e.width+"x"+e.height})).join(", ")):null,(null==e?void 0:e.phoneSizes)?d.createElement("p",null,d.createElement("b",null,"Phone: "),null===(a=null==e?void 0:e.phoneSizes)||void 0===a?void 0:a.map((function(e){return e.width+"x"+e.height})).join(", ")):null):null},ae=function(e){return d.createElement("p",null,e.map((function(e){return""!=e.current||$?d.createElement("p",null,d.createElement("b",null,e.propertyName,": "),""!=e.overwritten?d.createElement(d.Fragment,null,d.createElement("s",null,e.overwritten),", "):"",$&&""!=e.original?d.createElement("i",null,e.original):"",e.current):null})))},ie=function(e,t){var n,r,a,i=null,l=null;return t.exampleUrl?l=t.exampleUrl:(null===(n=null==t?void 0:t.categorySettings)||void 0===n?void 0:n.exampleUrl)?(l=t.categorySettings.exampleUrl,i="From group:"):(null===(r=null==t?void 0:t.siteSettings)||void 0===r?void 0:r.exampleUrl)?(l=t.siteSettings.exampleUrl,i="From site:"):(null===(a=null==t?void 0:t.siteSettings)||void 0===a?void 0:a.siteProperties.domain)&&(l=t.siteSettings.siteProperties.domain,i="From site domain:"),l&&(l.startsWith("http")||(l="https://"+l)),d.createElement("div",null,i?d.createElement("div",null,d.createElement("i",null,i)):null,l?d.createElement("a",{href:l+(t.divId?"#"+t.divId:""),target:"_blank"},l):null)},le=function(e,t){N({dataField:e,order:t})};var oe=function(e,t){var n=ee(t)?function(){de(t.originalId)}:function(){ce(t.originalId)};return d.createElement("a",{onClick:function(e){e.preventDefault(),n()},href:"",className:"table-btn mr-10"},d.createElement(S.default,{name:"pencil"}))};function ue(t){return o(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,w.Delete({path:"/api/adslots/publishers/"+e.publisherId+"/categories/"+t})];case 1:return n.sent(),M(!0),[2]}}))}))}function se(t){return o(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,w.Delete({path:"/api/adslots/publishers/"+e.publisherId+"/adslots/"+t})];case 1:return n.sent(),M(!0),[2]}}))}))}var ce=function(e){var t=l.find((function(t){return t.id==e}));void 0!==t&&(W(t),K(!0))},de=function(e){var t=n.find((function(t){return t.id==e}));void 0!==t&&(V(t),Y(!0))};var fe=function(e,t){return d.createElement("a",{onClick:function(e){e.preventDefault(),function(e){o(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return ee(e)?[4,ue(e.originalId)]:[3,2];case 1:return t.sent(),[3,4];case 2:return[4,se(e.originalId)];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))}(t)},href:"",className:"table-btn mr-10"},d.createElement(S.default,{name:"remove"}))},pe=function(e,t,n,r,a,i){var l=a.categorySettings?a.categorySettings[r]:a[r],o=i.categorySettings?i.categorySettings[r]:i[r];return l==o?0:l>o?1:-1},me=function(e,t,n,r,a,i){return"asc"==n?pe(0,0,0,r,a,i):-1*pe(0,0,0,r,a,i)},he=function(e,t){return void 0!==t.numChildren?d.createElement("div",null,d.createElement("b",null,e)):d.createElement("div",null,e)},ge=[{dataField:"expand",isDummyField:!0,text:"",formatter:function(t,n,r,a){return void 0!==n.numChildren?d.createElement(b.default,{id:"button-site-"+e.siteId+"-slot-"+n.rowId,numberItems:n.numChildren,labelName:a[0],buttonStyle:a[1],collapseState:void 0!==a[2].find((function(e){return e==n.rowId})),setCollapseState:function(){!function(e){D((function(t){if(-1===t.findIndex((function(t){return t==(null==e?void 0:e.rowId)}))){var n=f.range(e.numChildren).map((function(t){return e.rowId+"."+(t+1)}));return B((function(e){return e.filter((function(e){return-1===n.findIndex((function(t){return t===e}))}))})),s(s([],t),[e.rowId])}var r=f.range(e.numChildren).map((function(t){return e.rowId+"."+(t+1)}));return B((function(e){return e.concat(r)})),t.filter((function(t){return t!==(null==e?void 0:e.rowId)}))}))}(n)},divId:null}):null},formatExtraData:["ad slots","secondary",F],headerStyle:{width:"10%"}},{dataField:"rowId",text:"#",sort:!0,hidden:!0,onSort:le,sortFunc:me,sortCaret:v.columnSort},{dataField:"publisherId",text:"#",hidden:!0},{dataField:"name",headerStyle:{width:"20%"},text:"Name",sortFunc:me,sort:!0,onSort:le,sortCaret:v.columnSort,formatter:he},{dataField:"exampleUrl",headerStyle:{width:"15%"},text:"example url",sort:!0,onSort:le,sortCaret:v.columnSort,formatter:ie},{dataField:"placementData",text:"Allowed sizes",headerStyle:{width:"25%"},sortFunc:me,sort:!0,onSort:le,sortCaret:v.columnSort,formatter:re},{dataField:"customFormat",text:"custom data",sortFunc:me,sort:!0,onSort:le,sortCaret:v.columnSort,formatter:ae},{dataField:"floorPrice",text:"Floor price",sort:!0,hidden:!0,onSort:le,sortCaret:v.columnSort,formatter:v.currencyFormatter},{dataField:"df1",isDummyField:!0,text:"",formatter:oe,headerStyle:{width:"40px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:fe,headerStyle:{width:"40px"}}];return d.createElement(d.Fragment,null,d.createElement(h.default,{visible:j}),!j&&d.createElement(g.default,{keyField:"rowId",data:C,columns:ge},(function(e){return d.createElement("div",null,d.createElement("div",{style:{margin:"2px"}},d.createElement(p.Button,{variant:"secondary",className:"pull-right mr-3 mt-3 mb-3",disabled:!n||0==n.length,onClick:function(){W(null),K((function(){return!0}))}},d.createElement(S.default,{name:"plus"})," Ad Slot")),d.createElement("div",{style:{margin:"2px"}},d.createElement(p.Button,{variant:"primary",className:"pull-right mr-3 mt-3 mb-3",onClick:function(){V(null),Y((function(){return!0}))}},d.createElement(S.default,{name:"plus"})," Group")),d.createElement(m.default,r({},e.baseProps,{id:"publisher-adslots-table",bordered:!1,striped:!0,hover:!0,hiddenRows:R,classes:"table-fixed",keyField:"rowId",data:C,columns:ge,defaultSorted:[I]})))})),d.createElement(_.default,{category:L,site:e.site,allowedCustoms:e.allowedCustoms,show:q,writeAccess:!0,handleClose:function(){return Y(!1)},handleSubmit:function(t,n){return o(this,void 0,void 0,(function(){var r;return u(this,(function(a){switch(a.label){case 0:return r={adType:e.adType,siteId:e.siteId},null!=t?[3,2]:[4,w.Post({path:"/api/adslots/publishers/"+e.publisherId+"/categories",body:f.assign(r,n)})];case 1:return a.sent(),[3,4];case 2:return[4,w.Put({path:"/api/adslots/publishers/"+e.publisherId+"/categories/"+t,body:f.assign(r,n)})];case 3:a.sent(),a.label=4;case 4:return M(!0),[2]}}))}))}}),d.createElement(E.default,{adslot:H,adslotCategories:n,allowedCustoms:e.allowedCustoms,show:X,checkUniqueName:e.checkUniqueName,writeAccess:!0,handleClose:function(){return K(!1)},handleSubmit:function(t,n){return o(this,void 0,void 0,(function(){var r;return u(this,(function(a){switch(a.label){case 0:return r={adType:e.adType,siteId:e.siteId},null!=t?[3,2]:[4,w.Post({path:"/api/adslots/publishers/"+e.publisherId+"/adslots",body:f.assign(r,n)})];case 1:return a.sent(),[3,4];case 2:return[4,w.Put({path:"/api/adslots/publishers/"+e.publisherId+"/adslots/"+t,body:f.assign(r,n)})];case 3:a.sent(),a.label=4;case 4:return M(!0),[2]}}))}))}}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=i(n(1)),c=i(n(7)),d=l(n(66)),f=n(51),p=l(n(351)),m=l(n(9));t.default=function(e){var t,n,r,a=o.useState(null===(t=null==e?void 0:e.adslot)||void 0===t?void 0:t.categoryId),i=a[0],l=a[1],h=o.useState(!1),g=h[0],v=h[1],b=o.useState(""),y=b[0],E=b[1],_=o.useState(""),w=_[0],S=_[1],P=o.useState(""),C=P[0],O=P[1],x=o.useState(""),I=(x[0],x[1]),N=o.useState({error:!1,message:""}),A=N[0],j=N[1],M=o.useState(V(i)),k=M[0],F=M[1],D=o.useState(k),T=D[0],R=D[1],B=o.useState((null===(n=null==e?void 0:e.adslot)||void 0===n?void 0:n.placementProperties)||{}),G=B[0],L=B[1];function V(t){return e.adslot?f.flattenAdslotCustoms(e.adslot,e.allowedCustoms):t&&e.adslotCategories.find((function(e){return e.id==t}))?f.flattenAdslotCategories("adslot",e.adslotCategories.find((function(e){return e.id==t})),e.allowedCustoms):[]}o.useEffect((function(){var t;l(null===(t=null==e?void 0:e.adslot)||void 0===t?void 0:t.categoryId)}),[e.adslot]);Object.entries||(Object.entries=function(e){return Object.keys(e).reduce((function(t,n){return t.push([n,e[n]]),t}),[])});function z(){E(""),S(""),I(""),F([]),O(""),j({error:!1,message:""}),v(!1),L({}),l(null),F([])}return o.createElement(u.Modal,{show:e.show,onHide:function(){e.handleClose(),z()},onEntering:function(){var t,n,r,a=s.get(e,"adslot.name")||"",i=(null===(n=null===(t=null==e?void 0:e.adslot)||void 0===t?void 0:t.placementProperties)||void 0===n?void 0:n.divId)||"",l=s.get(e,"adslot.exampleUrl")||"",o=s.get(e,"adslot.comments")||"";E(a),O(i),F(V(null===(r=null==e?void 0:e.adslot)||void 0===r?void 0:r.categoryId)),S(l),I(o),v(!1)},backdrop:"static"},o.createElement(u.Modal.Header,{closeButton:!0},o.createElement(u.Modal.Title,null,"Adslot settings")),o.createElement(u.Modal.Body,null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-12"},o.createElement(u.FormGroup,{controlId:"adslot-name",className:A.error?"has-error":""},o.createElement(u.FormLabel,null,"Name"),o.createElement(u.FormControl,{autoFocus:!0,readOnly:!e.writeAccess,type:"text",value:y,onChange:function(e){var t=e.target.value,n=c.required(t);E(t),j(n)}}),A.error&&o.createElement(u.Alert,null,A.message)),o.createElement(u.FormGroup,{controlId:"adslot-name",className:A.error?"has-error":""},o.createElement(u.FormLabel,null,"Adslot group"),o.createElement(m.default,{options:e.adslotCategories.map((function(e){return{label:e.name,value:e.id}})),defaultValue:(null===(r=null==e?void 0:e.adslot)||void 0===r?void 0:r.categorySettings)?{label:e.adslot.categorySettings.name,value:e.adslot.categorySettings.id}:null,onChange:function(e){return l(e.value)}})),o.createElement(u.FormGroup,{controlId:"exampleUrl"},o.createElement(u.FormLabel,null,"example url"),o.createElement(u.FormControl,{readOnly:!e.writeAccess,type:"text",value:w,onChange:function(e){return S(e.target.value)}})),o.createElement(u.FormGroup,{controlId:"divId"},o.createElement(u.FormLabel,null,"Ad div id"),o.createElement(u.FormControl,{readOnly:!e.writeAccess,type:"text",value:C,onChange:function(e){return O(e.target.value)}})),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-12"},o.createElement(p.default,{adslot:e.adslot,writeAccess:!0,handleSizesChange:function(e){L(e)}}))),e.allowedCustoms&&e.allowedCustoms.length>0?o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-12"},o.createElement(d.default,{name:"Customs",options:V(i),writeAccess:!0,handleCustomAttributeUpdate:function(e){R(e)}}))):null))),o.createElement(u.Modal.Footer,null,o.createElement(u.Button,{onClick:e.handleClose},"CANCEL"),o.createElement(u.Button,{variant:"primary",onClick:function(){var t,n=c.required(y);if(n.error)j(n);else if(y==(null===(t=null==e?void 0:e.adslot)||void 0===t?void 0:t.name)||e.checkUniqueName(y))if(i){v(!0);var r=f.overwritablePropertiesToMap(T),a=s.get(e,"adslot.id"),l=s.assign({},G,{divId:C});e.handleSubmit(a,{name:y,exampleUrl:w,categoryId:i,customProperties:Object.fromEntries(r),placementProperties:l}),z(),e.handleClose()}else j({error:!0,message:"category id"});else j({error:!0,message:"Adslot name must be unique!"})},disabled:g||!e.writeAccess},"SAVE")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=l(n(9)),c=l(n(3));t.default=function(e){var t;return o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-5"},o.createElement(s.default,{isDisabled:!e.writeAccess,inputId:e.property.propertyName+"-attributeName",className:"react-select-container",classNamePrefix:"react-select",onChange:function(t){e.handleOptionChange(e.property.propertyName,t.label,t.value)},value:{label:e.property.propertyName,value:e.property.propertyName},options:e.getOptions()})),o.createElement("div",{className:"col-sm-6"},o.createElement(u.FormControl,{required:!0,disabled:!e.writeAccess,id:""+e.property.propertyName,value:e.value,placeholder:(null===(t=null==e?void 0:e.property)||void 0===t?void 0:t.level)?"Set at "+e.property.level+": "+e.property.original:"",onChange:function(t){e.handleTextChange(e.property.propertyName,t.target.value)}})),o.createElement("div",{className:"col-sm-1  align-self-end"},o.createElement("a",{href:"",className:"table-btn",onClick:function(t){t.preventDefault(),e.writeAccess&&e.handleDelete(e.property.propertyName)}},o.createElement(c.default,{name:"remove"}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),s=i(n(0)),c=o(n(38));t.default=function(e){var t,n,r,a,i,o,d,f,p,m,h,g,v=[{width:300,height:250},{width:336,height:280},{width:728,height:90},{width:970,height:250},{width:300,height:600},{width:160,height:600},{width:120,height:600},{width:320,height:240},{width:320,height:480},{width:300,height:50},{width:300,height:100},{width:320,height:100}],b=s.useState((null===(r=null===(n=null===(t=null==e?void 0:e.adslot)||void 0===t?void 0:t.placementProperties)||void 0===n?void 0:n.anyDeviceSizes)||void 0===r?void 0:r.map((function(e){return k(e)})))||[]),y=b[0],E=b[1],_=s.useState((null===(o=null===(i=null===(a=null==e?void 0:e.adslot)||void 0===a?void 0:a.placementProperties)||void 0===i?void 0:i.desktopSizes)||void 0===o?void 0:o.map((function(e){return k(e)})))||[]),w=_[0],S=_[1],P=s.useState((null===(p=null===(f=null===(d=null==e?void 0:e.adslot)||void 0===d?void 0:d.placementProperties)||void 0===f?void 0:f.tabletSizes)||void 0===p?void 0:p.map((function(e){return k(e)})))||[]),C=P[0],O=P[1],x=s.useState((null===(g=null===(h=null===(m=null==e?void 0:e.adslot)||void 0===m?void 0:m.placementProperties)||void 0===h?void 0:h.phoneSizes)||void 0===g?void 0:g.map((function(e){return k(e)})))||[]),I=x[0],N=x[1],A=s.useState(function(){var t,n,r,a,i,o,u,s,c,d,f,p,m=new Set,h=new Set;return v.forEach((function(e){return h.add(JSON.stringify(e))})),null===(r=null===(n=null===(t=null==e?void 0:e.adslot)||void 0===t?void 0:t.placementProperties)||void 0===n?void 0:n.anyDeviceSizes)||void 0===r||r.forEach((function(e){return m.add(JSON.stringify(e))})),null===(o=null===(i=null===(a=null==e?void 0:e.adslot)||void 0===a?void 0:a.placementProperties)||void 0===i?void 0:i.desktopSizes)||void 0===o||o.forEach((function(e){return m.add(JSON.stringify(e))})),null===(c=null===(s=null===(u=null==e?void 0:e.adslot)||void 0===u?void 0:u.placementProperties)||void 0===s?void 0:s.phoneSizes)||void 0===c||c.forEach((function(e){return m.add(JSON.stringify(e))})),null===(p=null===(f=null===(d=null==e?void 0:e.adslot)||void 0===d?void 0:d.placementProperties)||void 0===f?void 0:f.tabletSizes)||void 0===p||p.forEach((function(e){return m.add(JSON.stringify(e))})),l(l([],v),Array.from(m).filter((function(e){return!h.has(e)})).map((function(e){return JSON.parse(e)})))}()),j=A[0],M=A[1];function k(e){var t=function(e){return e.width+"x"+e.height}(e);return{label:t,value:t}}s.useEffect((function(){var t=function(e){var t=e.value.split("x");return{width:Number(t[0]),height:Number(t[1])}},n={anyDeviceSizes:y.map((function(e){return t(e)})),desktopSizes:w.map((function(e){return t(e)})),tabletSizes:C.map((function(e){return t(e)})),phoneSizes:I.map((function(e){return t(e)}))};e.handleSizesChange(n)}),[y,w,C,I]);var F=function(e,t,n){var r=e.split("x");if(2==r.length){var a=Number(r[0]),i=Number(r[1]);isNaN(a)||isNaN(i)||(M(l(l([],j),[{width:a,height:i}])),t(l(l([],n),[{label:e,value:e}])))}};return s.createElement(u.FormGroup,{className:"row"},s.createElement(u.FormLabel,{className:"col-sm-12"},"Allowed ad sizes"),s.createElement("div",{className:"col-sm-11 col-sm-mr-auto"},s.createElement(u.FormGroup,{className:"row"},s.createElement("div",{className:"col-sm-12 "},s.createElement(u.FormLabel,null,"  all devices:   "),s.createElement(c.default,{options:j.map((function(e){return{value:e.width+"x"+e.height,label:e.width+"x"+e.height}})),isClearable:!0,isMulti:!0,closeMenuOnSelect:!1,onCreateOption:function(e){return F(e,E,y)},onChange:function(e){E(e||[])},value:y})),s.createElement("div",{className:"col-sm-12 "},s.createElement(u.FormLabel,null," desktop only:"),s.createElement(c.default,{options:j.map((function(e){return{value:e.width+"x"+e.height,label:e.width+"x"+e.height}})),isClearable:!0,closeMenuOnSelect:!1,isMulti:!0,onCreateOption:function(e){return F(e,S,w)},onChange:function(e){S(e||[])},value:w})),s.createElement("div",{className:"col-sm-12 "},s.createElement(u.FormLabel,null," tablet only:"),s.createElement(c.default,{options:j.map((function(e){return{value:e.width+"x"+e.height,label:e.width+"x"+e.height}})),isClearable:!0,closeMenuOnSelect:!1,isMulti:!0,onCreateOption:function(e){return F(e,O,C)},onChange:function(e){O(e||[])},value:C})),s.createElement("div",{className:"col-sm-12 "},s.createElement(u.FormLabel,null," mobile only:"),s.createElement(c.default,{options:j.map((function(e){return{value:e.width+"x"+e.height,label:e.width+"x"+e.height}})),isClearable:!0,closeMenuOnSelect:!1,isMulti:!0,onCreateOption:function(e){return F(e,N,I)},onChange:function(e){N(e||[])},value:I})))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=i(n(1)),c=i(n(7)),d=n(51),f=l(n(66));t.default=function(e){var t=o.useState(!1),n=t[0],r=t[1],a=o.useState(""),i=a[0],l=a[1],p=o.useState(e.site),m=(p[0],p[1],o.useState("")),h=m[0],g=m[1],v=o.useState(""),b=(v[0],v[1]),y=o.useState({error:!1,message:""}),E=y[0],_=y[1],w=o.useState(I()),S=w[0],P=w[1],C=o.useState(S),O=C[0],x=C[1];function I(){return e.category?d.flattenAdslotCategories("category",e.category,e.allowedCustoms):e.site?d.flattenAdslotSites("category",e.site,e.allowedCustoms):[]}function N(){l(""),g(""),b(""),P([]),_({error:!1,message:""}),r(!1),P([])}return o.createElement(u.Modal,{show:e.show,onHide:function(){e.handleClose(),N()},onEntering:function(){var t=s.get(e,"category.name")||"",n=s.get(e,"category.exampleUrl")||"",a=s.get(e,"category.comments")||"";l(t),P(I()),g(n),b(a),r(!1)},backdrop:"static"},o.createElement(u.Modal.Header,{closeButton:!0},o.createElement(u.Modal.Title,null,"Adslot settings")),o.createElement(u.Modal.Body,null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-12"},o.createElement(u.FormGroup,{controlId:"adslot-name",className:E.error?"has-error":""},o.createElement(u.FormLabel,null,"Name"),o.createElement(u.FormControl,{autoFocus:!0,readOnly:!e.writeAccess,type:"text",value:i,onChange:function(e){var t=e.target.value,n=c.required(t);l(t),_(n)}}),E.error&&o.createElement(u.Alert,null,E.message)),o.createElement(u.FormGroup,{controlId:"exampleUrl"},o.createElement(u.FormLabel,null,"example url"),o.createElement(u.FormControl,{readOnly:!e.writeAccess,type:"text",value:h,onChange:function(e){return g(e.target.value)}})),e.allowedCustoms&&e.allowedCustoms.length>0?o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-12"},o.createElement(f.default,{name:"Customs",options:I(),writeAccess:!0,handleCustomAttributeUpdate:function(e){x(e)}}))):null))),o.createElement(u.Modal.Footer,null,o.createElement(u.Button,{onClick:e.handleClose},"CANCEL"),o.createElement(u.Button,{variant:"primary",onClick:function(){var t=c.required(i);if(t.error)_(t);else{r(!0);var n=d.overwritablePropertiesToMap(O),a=s.get(e,"category.id"),l={name:i,exampleUrl:h,customProperties:Object.fromEntries(n)};e.handleSubmit(a,l),N(),e.handleClose()}},disabled:n||!e.writeAccess},"SAVE")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=i(n(1)),c=n(51),d=l(n(66)),f=l(n(107));t.default=function(e){var t,n,r,a=o.useState(!1),i=a[0],l=a[1],p=o.useState(""),m=p[0],h=p[1],g=o.useState({error:!1,message:""}),v=(g[0],g[1]),b=o.useState(x()),y=b[0],E=b[1],_=o.useState(y),w=_[0],S=_[1],P=o.useState(null===(n=null===(t=null==e?void 0:e.publisherSettings)||void 0===t?void 0:t.consentSettings)||void 0===n?void 0:n.geoFromIpAllowed),C=P[0],O=P[1];function x(){return e.publisherSettings?c.flattenAdslotPublisher("publisher",e.publisherSettings,e.allowedCustoms):[]}function I(){h(""),E([]),v({error:!1,message:""}),l(!1),E([])}return o.createElement(u.Modal,{show:e.show,onHide:function(){e.handleClose(),I()},onEntering:function(){E(x()),h(m),l(!1)},backdrop:"static"},o.createElement(u.Modal.Header,{closeButton:!0},o.createElement(u.Modal.Title,null,"Publisher settings")),o.createElement(u.Modal.Body,null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-12"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-12"},o.createElement(f.default,{publisherSettings:null===(r=null==e?void 0:e.publisherSettings)||void 0===r?void 0:r.consentSettings,siteSettings:null,handleConsentChange:O,level:"site"}))),e.allowedCustoms&&e.allowedCustoms.length>0?o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-12"},o.createElement(d.default,{name:"Customs",options:x(),writeAccess:!0,handleCustomAttributeUpdate:function(e){S(e)}}))):null))),o.createElement(u.Modal.Footer,null,o.createElement(u.Button,{onClick:e.handleClose},"CANCEL"),o.createElement(u.Button,{variant:"primary",onClick:function(){var t,n;l(!0);var r=c.overwritablePropertiesToMap(w),a=null===(n=null===(t=null==e?void 0:e.publisherSettings)||void 0===t?void 0:t.consentSettings)||void 0===n?void 0:n.geoFromIpAllowed,i=s.assign({},a,C),o=(s.get(e,"publisherSettings.id"),{customProperties:Object.fromEntries(r),consentSettings:{geoFromIpAllowed:i}});e.handleSubmit(o),I(),e.handleClose()},disabled:i||!e.writeAccess},"SAVE")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(29)),s=l(n(30)),c=l(n(31)),d=l(n(16)),f=l(n(10)),p=l(n(26)),m=l(n(355));t.default=function(){return o.useContext(d.default).isRootAdmin?o.default.createElement(o.Fragment,null,o.default.createElement(u.default,null,o.default.createElement("div",{className:"col-sm-9"},o.default.createElement(s.default,null),o.default.createElement(c.default,{id:"breadcrumb",minScope:"campaign"}))),o.default.createElement(p.default,{title:"Ad queue"}),o.default.createElement(m.default,null)):o.default.createElement(f.default,{message:"Access forbidden"})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=u(n(19)),d=i(n(20)),f=u(n(16)),p=i(n(4)),m=u(n(5)),h=u(n(356)),g=u(n(10)),v=u(n(69)),b=u(n(357));t.default=function(){var e=s.useContext(v.default).updateAdqueueCount,t=s.useContext(f.default),n=s.useState([]),r=n[0],a=n[1],i=s.useState(!0),u=i[0],y=i[1],E=s.useState(!1),_=E[0],w=E[1],S=s.useState(null),P=S[0],C=S[1],O=s.useState(!1),x=O[0],I=O[1],N=s.useState(""),A=N[0],j=N[1],M=s.useRef(null);function k(){return l(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:if(!u)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,p.Get({path:"/api/ads/adqueue"})];case 2:return t=r.sent(),a(t),e(t.length),[3,4];case 3:return n=r.sent(),console.log(n),I(!0),j("Error loading ads."),[3,4];case 4:y(!1),r.label=5;case 5:return[2]}}))}))}s.useEffect((function(){k()}),[]),s.useEffect((function(){k()}),[u]);var F=function(e,t,n){return l(void 0,void 0,void 0,(function(){var r;return o(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,p.Put({path:"/api/ads/"+e.id,body:{advertiserId:e.advertiserId,data:n}})];case 1:return a.sent(),r=D(e,t,!0),M.current.addNotification(d.success(r,!1)),_&&w(!1),y(!0),[3,3];case 2:return a.sent(),r=D(e,t,!1),M.current.addNotification(d.error(r)),[3,3];case 3:return[2]}}))}))};function D(e,t,n){if(n)switch(t){case"approve":return s.default.createElement("span",null,"Ad ",s.default.createElement("strong",null,e.name),"  approved");case"disapprove":return s.default.createElement("span",null,"Ad ",s.default.createElement("strong",null,e.name),"  disapproved");case"enablecookieless":return s.default.createElement("span",null,'Enabled "Uses no data" for ad ',s.default.createElement("strong",null,e.name));case"disablecookieless":return s.default.createElement("span",null,'Disabled "Uses no data" for ad ',s.default.createElement("strong",null,e.name))}else switch(t){case"approve":return s.default.createElement("span",null,"Failed to approve ad ",s.default.createElement("strong",null,e.name));case"disapprove":return s.default.createElement("span",null,"Failed to disapprove ad ",s.default.createElement("strong",null,e.name));case"enablecookieless":return s.default.createElement("span",null,'Failed to enable "Uses no data" for ad ',s.default.createElement("strong",null,e.name));case"disablecookieless":return s.default.createElement("span",null,'Failed to disable "Uses no data" for ad ',s.default.createElement("strong",null,e.name))}}return x?s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(g.default,{message:A}))))):s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",{className:"pull-left"},"Ad queue"),s.default.createElement(m.default,{visible:u}),!u&&s.default.createElement(h.default,{ads:r,user:t,update:F,previewClick:function(e){var t=r.find((function(t){return t.id===e}))||null;C(t),w(!0)}}),s.default.createElement(b.default,{show:_,ad:P,onClose:function(){C(null),w(!1)},update:F}),s.default.createElement(c.default,{ref:M}))))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=n(6),c=l(n(1)),d=o(n(14)),f=l(n(23)),p=o(n(17)),m=n(2),h=l(n(15)),g=l(n(33)),v=o(n(3));t.default=function(e){var t="adqueue-table",n=u.useState(1),a=n[0],i=n[1],l=u.useState(h.getInitialSizePerPage(t,e.user)),o=l[0],b=l[1],y=u.useState({dataField:"id",order:"asc"}),E=y[0],_=y[1],w=function(e,t){_({dataField:e,order:t})},S=function(e,t){i(e)},P=function(n,r){h.storeSizePerPage(n,t,e.user),b(n)},C=function(t,n){var r=1===t?"DISABLE":"ENABLE",a=1===t?0:1,i=1===t?"disablecookieless":"enablecookieless";return u.default.createElement(m.Button,{size:"sm",variant:"primary",onClick:function(){e.update(n,i,{cookieLess:a})}},r)},O=function(t,n){return u.default.createElement(m.Button,{size:"sm",variant:"primary",onClick:function(){e.update(n,"approve",{approved:1})}},"APPROVE")},x=function(t,n){return u.default.createElement(m.Button,{size:"sm",variant:"primary",onClick:function(){e.update(n,"disapprove",{approved:-1})}},"DISAPPROVE")},I=function(e,t){return t.agencyId?u.default.createElement(s.Link,{to:"/settings/agency/"+t.agencyId},e):e},N=function(e,t){return t.advertiserId?u.default.createElement(s.Link,{to:"/settings/advertiser/"+t.advertiserId},e):e},A=function(t,n){return u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.previewClick(n.id)},href:"",className:"table-btn"},u.default.createElement(v.default,{name:"eye"}))},j=function(){var t=h.getLastPage(e.ads,o);return a>t?t:a},M=f.Search.SearchBar,k=[{dataField:"id",text:"#",sort:!0,onSort:w,sortCaret:h.columnSort},{dataField:"advertiserId",hidden:!0},{dataField:"agencyId",hidden:!0},{dataField:"name",text:"Name",sort:!0,onSort:w,sortCaret:h.columnSort},{dataField:"adType",text:"Ad Type",sort:!0,onSort:w,sortCaret:h.columnSort},{dataField:"dimension",text:"Dimensions/Duration",sort:!0,onSort:w,sortCaret:h.columnSort},{dataField:"fileSize",text:"File Size",sort:!0,onSort:w,sortCaret:h.columnSort},{dataField:"cookieLess",text:"Uses no data",formatter:C,sort:!0,onSort:w,sortCaret:h.columnSort},{dataField:"df1",isDummyField:!0,text:"Approve",formatter:O,sort:!0,onSort:w,sortCaret:h.columnSort},{dataField:"df2",isDummyField:!0,text:"Disapprove",formatter:x,sort:!0,onSort:w,sortCaret:h.columnSort},{dataField:"df3",isDummyField:!0,text:"Preview",formatter:A},{dataField:"agencyName",text:"Agency",formatter:I,sort:!0,onSort:w,sortCaret:h.columnSort},{dataField:"advertiserName",text:"Advertiser",formatter:N,sort:!0,onSort:w,sortCaret:h.columnSort}],F=e.ads.map((function(e){var t=c.pick(e,["id","advertiserId","agencyId","name","adType","cookieLess","agencyName","advertiserName"]);return t.dimension=g.dimensionDurationColumn(e),t.fileSize=e.bannerMemSize,t})),D=h.getSizePerPage(o,F.length),T=F.length||30;return u.default.createElement(f.default,{keyField:"id",data:F,columns:k,search:!0},(function(e){return u.default.createElement("div",null,u.default.createElement("div",{className:"search-label-container"},u.default.createElement(v.default,{name:"search"}),u.default.createElement(M,r({},e.searchProps,{placeholder:"Filter records",tableId:t}))),u.default.createElement(d.default,r({},e.baseProps,{id:t,bordered:!1,hover:!0,classes:"table-borderless",striped:!0,keyField:"id",data:F,columns:k,defaultSorted:[E],pagination:p.default({page:j(),sizePerPage:D,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:T}],onPageChange:S,onSizePerPageChange:P})})))}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(2),s=i(n(1)),c=l(n(47)),d=l(n(46)),f=i(n(33));t.default=function(e){var t=o.useState(!1),n=t[0],r=t[1],a=function(){r(!1),e.onClose()},i=e.ad?e.ad.vastURL||e.ad.vastXML||e.ad.previewTag||e.ad.tag:"",l=!!e.ad&&f.isVideoAd(e.ad.type),p=s.get(e,"ad.id","");return o.default.createElement(u.Modal,{dialogClassName:"modal-xxl",show:e.show,onEntering:function(){r(!0)},onHide:a,backdrop:"static"},o.default.createElement(u.Modal.Header,{closeButton:!0},o.default.createElement(u.Modal.Title,null,"Ad preview - id: ",p)),o.default.createElement(u.Modal.Body,null,e.ad&&o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-lg-6"},o.default.createElement(u.Form.Group,{controlId:"ad-name"},o.default.createElement(u.Form.Label,null,"Name"),o.default.createElement(u.Form.Control,{readOnly:!0,autoFocus:!0,type:"text",value:e.ad.name})),o.default.createElement(u.Form.Group,{controlId:"ad-url"},o.default.createElement(u.Form.Label,null,"Landing page"),o.default.createElement(u.Form.Control,{readOnly:!0,autoFocus:!0,type:"text",value:e.ad.clickUrl})),o.default.createElement(u.Form.Group,{controlId:"ad-tag"},o.default.createElement(u.Form.Label,null,"Tag"),o.default.createElement(u.Form.Control,{as:"textarea",autoFocus:!0,readOnly:!0,type:"text",rows:6,value:i}))),o.default.createElement("div",{className:"col-lg-6"},n&&l&&o.default.createElement(d.default,{id:"video-preview-player",ad:e.ad}),n&&!l&&o.default.createElement(c.default,{id:"banner-preview",ad:e.ad})))),o.default.createElement(u.Modal.Footer,null,o.default.createElement(u.Button,{variant:"light",size:"sm",onClick:a},"CANCEL"),o.default.createElement(u.Button,{variant:"primary",size:"sm",onClick:function(){e.update(e.ad,"approve",{approved:1})}},"APPROVE"),o.default.createElement(u.Button,{variant:"primary",size:"sm",onClick:function(){e.update(e.ad,"disapprove",{approved:-1})}},"DISAPPROVE")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(29)),s=l(n(30)),c=l(n(31)),d=l(n(359)),f=l(n(26));t.default=function(){return o.default.createElement(o.Fragment,null,o.default.createElement(u.default,null,o.default.createElement("div",{className:"col-sm-9"},o.default.createElement(s.default,null),o.default.createElement(c.default,{id:"breadcrumb",minScope:"campaign"}))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-sm-12 pt-3"},o.default.createElement(d.default,null))),o.default.createElement(f.default,{title:"Alerts"}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=i(n(4)),d=n(82),f=u(n(10)),p=u(n(5));t.default=function(){var e=s.useState([]),t=e[0],n=e[1],r=s.useState(!0),a=r[0],i=r[1],u=s.useState(!1),m=u[0],h=u[1],g=s.useState(""),v=g[0],b=g[1];return s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,c.Get({path:"/api/alerts/campaigns"})];case 1:return e=t.sent(),n(e),[3,3];case 2:return t.sent(),h(!0),b("Error loading alerts."),[3,3];case 3:return i(!1),[2]}}))}))}()}),[]),m?s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",null,s.default.createElement(f.default,{message:v}))):s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",null,"Alerts"),s.default.createElement(p.default,{visible:a}),!a&&s.default.createElement("div",{className:"border rounded-sm"},s.default.createElement(d.AlertsList,{alerts:t})))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(29)),s=l(n(30)),c=l(n(31)),d=i(n(13)),f=l(n(12)),p=l(n(10)),m=l(n(26)),h=l(n(361));t.default=function(){var e=o.useContext(f.default).data;return d.getRights(e.rights).VIEW_REPORTS?o.default.createElement(o.Fragment,null,o.default.createElement(u.default,null,o.default.createElement("div",{className:"col-sm-12"},o.default.createElement(s.default,null),o.default.createElement(c.default,{id:"breadcrumb",minScope:"campaign"}))),o.default.createElement(m.default,{title:"Reports"}),o.default.createElement(h.default,null)):o.default.createElement(p.default,{message:"Access forbidden"})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=n(2),f=i(n(1)),p=u(n(11)),m=u(n(19)),h=i(n(20)),g=i(n(4)),v=i(n(8)),b=i(n(13)),y=u(n(16)),E=u(n(12)),_=u(n(3)),w=u(n(5)),S=u(n(10)),P=u(n(27)),C=u(n(362)),O=u(n(363)),x=u(n(364)),I=u(n(365)),N=u(n(39));t.default=function(){var e=c.useParams(),t=e.scope,n=e.scopeId,r=s.useContext(E.default).data,a=b.getRights(r.rights),i=s.useContext(y.default),u=s.useContext(N.default).items,A=s.useState(!0),j=A[0],M=A[1],k=s.useState({current:[],past:[]}),F=k[0],D=k[1],T=s.useState(0),R=T[0],B=T[1],G=s.useState(0),L=G[0],V=G[1],z=s.useState(null),q=z[0],Y=z[1],U=s.useState(null),H=U[0],W=U[1],J=s.useState(!1),X=J[0],K=J[1],Z=s.useState(!1),$=Z[0],Q=Z[1],ee=s.useState(!1),te=ee[0],ne=ee[1],re=s.useState(!1),ae=re[0],ie=re[1],le=s.useState(!1),oe=le[0],ue=le[1],se=s.useState(null),ce=se[0],de=se[1],fe=s.useState(-1),pe=fe[0],me=fe[1],he=s.useState(null),ge=he[0],ve=he[1],be=s.useState(!1),ye=be[0],Ee=be[1],_e=s.useState(""),we=_e[0],Se=_e[1],Pe=s.useRef(null),Ce=s.useRef(null);function Oe(){return l(this,void 0,void 0,(function(){var e,r,a,i,l;return o(this,(function(o){switch(o.label){case 0:M(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),xe(),Ce.current=new AbortController,e=v.scopedParam({scope:t,scopeId:n}),[4,g.Get({path:"/api/reports",qs:e,signal:Ce.current.signal})];case 2:return r=o.sent(),a=f.partition(r,(function(e){return p.default(e.scheduleEnd).diff(p.default())>0})),i=a[0],l=a[1],D({current:i,past:l}),[3,4];case 3:return"AbortError"===o.sent().name?(Ee(!1),Se("")):(Ee(!0),Se("Error loading reports.")),[3,4];case 4:return M(!1),[2]}}))}))}function xe(){Ce.current&&Ce.current.abort()}function Ie(e,t,n){var r=F[n].find((function(t){return t.id===e}));Y(r),K(t),Q(!0)}function Ne(e,t){var n=F[t].find((function(t){return t.id===e}));me(e),ve(n),ne(!0)}function Ae(e,t){return l(this,void 0,void 0,(function(){var n;return o(this,(function(r){try{n=F[t].find((function(t){return t.id===e})),de(n),ie(!0)}catch(e){console.log(e)}return[2]}))}))}s.useEffect((function(){return xe}),[]),s.useEffect((function(){Oe()}),[t,n]);function je(e,t){var n=F[t].find((function(t){return t.id===e}));W(n),ue(!0)}if(ye)return s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(S.default,{message:we})))));var Me=f.get(ge,"name",""),ke=v.getMaxLevel(i,u);return s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",{className:"pull-left"},"Current reports"),s.default.createElement("div",{className:"pull-right"},a.MANAGE_REPORTS&&s.default.createElement(d.Button,{size:"sm",variant:"primary",className:"mr-2",onClick:function(){Q(!0),Y(null),K(!0)}},s.default.createElement(_.default,{name:"plus"})," ADD REPORT"),s.default.createElement(d.Button,{size:"sm",variant:"primary",onClick:function(){B(R+1)}},s.default.createElement(_.default,{name:"remove"})," CLEAR FILTERS")),s.default.createElement(w.default,{visible:j}),!j&&s.default.createElement(C.default,{type:"current",user:i,records:F.current,filtersCounter:R,shareClick:function(e){je(e,"current")},editClick:function(e,t){Ie(e,t,"current")},deleteClick:function(e){Ne(e,"current")},downloadClick:function(e){Ae(e,"current")}})),s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",{className:"pull-left"},"Past reports"),s.default.createElement("div",{className:"pull-right"},s.default.createElement(d.Button,{size:"sm",variant:"primary",onClick:function(){V(L+1)}},s.default.createElement(_.default,{name:"remove"})," CLEAR FILTERS")),s.default.createElement(w.default,{visible:j}),!j&&s.default.createElement(C.default,{type:"past",user:i,records:F.past,filtersCounter:L,shareClick:function(e){je(e,"past")},editClick:function(e,t){Ie(e,t,"past")},deleteClick:function(e){Ne(e,"past")},downloadClick:function(e){Ae(e,"past")}}))),s.default.createElement(x.default,{report:q,writeAccess:X,show:$,rights:a,scope:t,scopeId:n,maxLevel:ke,handleClose:function(){Q(!1)},handleSubmit:function(e,t){return l(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),e>0?[4,g.Put({path:"/api/reports/"+e,body:t})]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,g.Post({path:"/api/reports",body:t})];case 3:n.sent(),n.label=4;case 4:return Q(!1),Y(null),Oe(),Pe.current.addNotification(h.success(s.default.createElement("span",null,"Report ",s.default.createElement("strong",null,t.name)," saved."),!1)),[3,6];case 5:return n.sent(),Q(!1),Y(null),Pe.current.addNotification(h.error("Error saving report.")),[3,6];case 6:return[2]}}))}))}}),s.default.createElement(O.default,{report:ce,show:ae,handleClose:function(){ie(!1)}}),s.default.createElement(I.default,{report:H,show:oe,shareBaseUrl:"https://api.optoutadvertising.com/noax2",handleClose:function(){ue(!1)}}),s.default.createElement(P.default,{message:"Delete report "+Me,show:te,onClose:function(){return ne(!1)},onConfirm:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,g.Delete({path:"/api/reports/"+pe})];case 1:return e.sent(),Pe.current.addNotification(h.success(s.default.createElement("span",null,"Report ",ge.name," deleted."),!1)),ne(!1),Oe(),[3,3];case 2:return e.sent(),ne(!1),Pe.current.addNotification(h.error("Error deleting report.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(m.default,{ref:Pe}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(14)),s=i(n(45)),c=l(n(17)),d=n(2),f=i(n(1)),p=l(n(11)),m=i(n(15)),h=l(n(3));t.default=function(e){var t="reports-table-"+e.type,n=o.useState(1),r=n[0],a=n[1],i=o.useState(m.getInitialSizePerPage(t,e.user)),l=i[0],g=i[1],v=o.useState({dataField:"id",order:"desc"}),b=v[0],y=v[1],E=o.useState(""),_=E[0],w=E[1],S=o.useState(""),P=S[0],C=S[1],O=o.useState(""),x=O[0],I=O[1],N=o.useState(""),A=N[0],j=N[1],M=o.useRef(null),k=o.useRef(null),F=o.useRef(null),D=o.useRef(null);o.useEffect((function(){M.current(""),k.current(""),F.current(""),D.current("")}),[e.filtersCounter]);var T,R,B=function(e,t){y({dataField:e,order:t})},G=function(t,n){return n.writeAccess?o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id,n.writeAccess)},href:"",className:"table-btn"},o.default.createElement(h.default,{name:"pencil"})):o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id,n.writeAccess)},href:"",className:"table-btn"},o.default.createElement(h.default,{name:"search-plus"}))},L=function(t,n){return n.writeAccess?o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.deleteClick(n.id)},href:"",className:"table-btn"},o.default.createElement(h.default,{name:"remove"})):null},V=function(t,n,r){if(n.description){var a=o.default.createElement(d.Popover,{id:"popover-trigger-hover"+r},o.default.createElement(d.Popover.Content,null,n.description));return o.default.createElement(d.OverlayTrigger,{trigger:"hover",placement:"top",overlay:a},o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id,n.writeAccess)},href:""},t))}return o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id,n.writeAccess)},href:""},t)},z=function(e){return e?p.default(e).format("YYYY-MM-DD HH:mm:ss"):""},q=function(t,n){if(n.lastRun)return o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.downloadClick(n.id)},href:"",className:"table-btn mr-10"},o.default.createElement(h.default,{name:"download"}))},Y=function(t,n){return o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.shareClick(n.id)},href:"",className:"table-btn mr-10"},o.default.createElement(h.default,{name:"share"}))},U=(T={all:"root",metaAgency:"organization",agency:"agency",advertiser:"advertiser",cluster:"campaign group",campaign:"campaign"},[{dataField:"id",text:"#",hidden:!0},{dataField:"writeAccess",text:"#",hidden:!0},{dataField:"name",text:"Name",sort:!0,onSort:B,sortCaret:m.columnSort,filter:s.textFilter({id:e.type+"-name-filter",placeholder:"Search name...",defaultValue:_,getFilter:function(e){M.current=e},onFilter:function(e){w(e)}}),formatter:V},{dataField:"status",text:"Status",sort:!0,onSort:B,sortCaret:m.columnSort,filter:s.textFilter({id:e.type+"-status-filter",placeholder:"Search status...",defaultValue:P,getFilter:function(e){k.current=e},onFilter:function(e){C(e)}})},{dataField:"level",text:"Level",sort:!0,onSort:B,sortCaret:m.columnSort,formatter:function(e){return T[e]},filter:s.selectFilter({id:e.type+"-level-filter",options:T,defaultValue:x,getFilter:function(e){F.current=e},onFilter:function(e){I(e)}})},{dataField:"owner",text:"Entity",sort:!0,onSort:B,sortCaret:m.columnSort,filter:s.textFilter({id:e.type+"-owner-filter",placeholder:"Search entity...",defaultValue:A,getFilter:function(e){D.current=e},onFilter:function(e){j(e)}})},{dataField:"lastRun",text:"Latest run",sort:!0,onSort:B,sortCaret:m.columnSort,formatter:z},{dataField:"df1",isDummyField:!0,text:"",formatter:q,headerStyle:{width:"30px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:Y,headerStyle:{width:"30px"}},{dataField:"df3",isDummyField:!0,text:"",formatter:G,headerStyle:{width:"30px"}},{dataField:"df4",isDummyField:!0,text:"",formatter:L,headerStyle:{width:"30px"}}]),H=e.records.map((function(e){var t=f.pick(e,["id","name","status","description","writeAccess","lastRun"]),n=f.get(e,"scope.scope"),r=f.get(e,"scope.owner");return f.assign(t,{level:n,owner:r})})),W=m.getSizePerPage(l,H.length),J=e.records.length||30;return o.default.createElement(u.default,{id:t,filter:s.default(),classes:"table-borderless",bordered:!1,hover:!0,striped:!0,keyField:"id",data:H,columns:U,defaultSorted:[b],pagination:c.default({page:(R=m.getLastPage(e.records,l),r>R?R:r),sizePerPage:W,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:J}],onPageChange:function(e,t){a(e)},onSizePerPageChange:function(n,r){m.storeSizePerPage(n,t,e.user),g(n)}})})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=u(n(11)),f=i(n(4)),p=u(n(10)),m=u(n(5));t.default=function(e){var t=s.useState([]),n=t[0],r=t[1],a=s.useState(!0),i=a[0],u=a[1],h=s.useState(!1),g=h[0],v=h[1],b=s.useState(""),y=b[0],E=b[1];return e.report?s.createElement(c.Modal,{size:"lg",show:e.show,onHide:e.handleClose,onEntering:function(){return l(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:u(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,f.Get({path:"/api/reports/"+e.report.id+"/instances"})];case 2:return t=n.sent(),r(t),v(!1),E(""),[3,4];case 3:return n.sent(),v(!0),E("Error loading report versions."),[3,4];case 4:return u(!1),[2]}}))}))},backdrop:"static"},s.createElement(c.Modal.Header,{closeButton:!0},s.createElement(c.Modal.Title,null,"Report versions: ",e.report.name)),s.createElement(c.Modal.Body,null,s.createElement(m.default,{visible:i}),0===n.length&&!i&&s.createElement("div",null,"There are no versions of this report to download."),n.length>0&&!i&&s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-12"},s.createElement("div",{style:{overflowX:"auto"}},s.createElement("table",{className:"table table-striped"},s.createElement("thead",null,s.createElement("th",null,"Created"),s.createElement("th",null,"Status")),s.createElement("tbody",null,n.map((function(t,n){return s.createElement("tr",{key:"item-"+n},s.createElement("td",null,s.createElement("a",{href:"/api/reports/"+e.report.id+"/instances/"+t.id+"/download"},d.default(t.created).format("YYYY-MM-DD HH:mm:ss"))),s.createElement("td",null,t.status))}))))))),g&&s.createElement(p.default,{message:y})),s.createElement(c.Modal.Footer,null,s.createElement(c.Button,{onClick:e.handleClose},"CANCEL"))):null}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(0)),d=n(2),f=s(n(9)),p=s(n(38)),m=s(n(35)),h=i(n(1)),g=s(n(61)),v=s(n(11)),b=i(n(7)),y=i(n(4)),E=i(n(8)),_=i(n(49)),w=s(n(5)),S=s(n(50)),P=s(n(3)),C=s(n(32)),O=s(n(16));t.default=function(e){var t=c.useContext(O.default),n=h.get(e,"report.id",-1),r=h.get(e,"report.scope.owner",""),a=h.get(e,"report.scope.scope")||"all",i=h.get(e,"report.scope.scopeId")||-1,s=E.getLevelOptionsUptoCampaign(e.maxLevel),x=[{value:"xlsx",label:"Excel"},{value:"pdf",label:"PDF"},{value:"csv",label:"CSV"}],I=[{value:"P1D",label:"One day"},{value:"P1W",label:"One week"},{value:"P2W",label:"Two weeks"},{value:"this month",label:"This month"},{value:"P1M",label:"One month"},{value:"period",label:"Custom period"},{value:"range",label:"Custom date range"}],N=[{value:"D",label:"Days"},{value:"W",label:"Weeks"},{value:"M",label:"Months"}],A=[{value:"P1D",label:"Day"},{value:"P1W",label:"Week"},{value:"P2W",label:"Two weeks"},{value:"P1M",label:"Month"}],j=c.useState(!1),M=j[0],k=j[1],F=c.useState(!1),D=F[0],T=F[1],R=c.useState(""),B=R[0],G=R[1],L=c.useState(""),V=L[0],z=L[1],q=c.useState(-1),Y=q[0],U=q[1],H=c.useState(e.scope),W=H[0],J=H[1],X=c.useState(-1),K=X[0],Z=X[1],$=c.useState([{value:-1,label:""}]),Q=$[0],ee=$[1],te=c.useState([{value:-1,label:""}]),ne=te[0],re=te[1],ae=c.useState(x[0].value),ie=ae[0],le=ae[1],oe=c.useState(I[0].value),ue=oe[0],se=oe[1],ce=c.useState(N[0].value),de=ce[0],fe=ce[1],pe=c.useState(""),me=pe[0],he=pe[1],ge=c.useState(null),ve=ge[0],be=ge[1],ye=c.useState(null),Ee=ye[0],_e=ye[1],we=c.useState(!1),Se=we[0],Pe=we[1],Ce=c.useState([]),Oe=Ce[0],xe=Ce[1],Ie=c.useState({}),Ne=Ie[0],Ae=Ie[1],je=c.useState(!1),Me=je[0],ke=je[1],Fe=c.useState(A[0].value),De=Fe[0],Te=Fe[1],Re=c.useState(null),Be=Re[0],Ge=Re[1],Le=c.useState(null),Ve=Le[0],ze=Le[1],qe=c.useState([{value:t.email,label:t.email}]),Ye=qe[0],Ue=qe[1],He=c.useState({error:!1,message:""}),We=He[0],Je=He[1],Xe=c.useState({error:!1,message:""}),Ke=Xe[0],Ze=Xe[1],$e=c.useState({error:!1,message:""}),Qe=$e[0],et=$e[1],tt=c.useState({error:!1,message:""}),nt=tt[0],rt=tt[1],at=c.useState({error:!1,message:""}),it=at[0],lt=at[1];function ot(e,t){return l(this,void 0,void 0,(function(){var n,r;return o(this,(function(a){switch(a.label){case 0:return n={scope:e},"all"!==e&&(n.scopeId=t),[4,_.getFilterAttributes(n)];case 1:return r=a.sent(),Ae(r),[2]}}))}))}function ut(){return l(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(a){switch(a.label){case 0:return[4,y.Get({path:"/api/reportTemplates"})];case 1:return t=a.sent(),n=t.map((function(e){return{value:e.id,label:e.name}})),re(n),t.length>0&&(r=h.get(e,"report.templateId",t[0].id),U(r)),[2]}}))}))}function st(t){return l(this,void 0,void 0,(function(){var n,r;return o(this,(function(a){switch(a.label){case 0:return T(!0),[4,E.getEntityOptions("reports",e.scope,e.scopeId,t)];case 1:return n=a.sent(),r=n.length>0?n[0].value:-1,J(t),ee(n),Z(r),[4,ot(E.getScopeByLevel(t),r)];case 2:return a.sent(),T(!1),[2]}}))}))}function ct(t){var r=b.required(B),a={error:!1,message:""},i={error:!1,message:""};"period"===ue&&(a=b.required(me)),"range"!==ue||ve||(i={error:!0,message:"Start date is required"});var l=function(){var e={error:!1,message:""};return Be&&Ve?Be.isAfter(Ve)&&(e={error:!0,message:"End date should be same or after start date."}):e={error:!0,message:"Please fill out start/end date"},e}();if(r.error||a.error||i.error||l.error)Je(r),Ze(a),et(i),lt(l);else{k(!0);var o=Ye?Ye.map((function(e){return e.value})):[],u="period"===ue?"P"+me+de:"range"===ue?v.default(ve).format("YYYY-MM-DD")+"/"+(Ee?v.default(Ee).format("YYYY-MM-DD"):""):ue,s=_.getFilters(Oe);if(n>0){var c={templateId:Y,name:B,description:V,output:ie,dateRange:u,includeCurrentDay:Se,filters:s,scheduleEvery:De,emailTo:o,scheduled:Me,emailAttachments:!0,needsRun:t};Be&&(c.scheduleStart=Be.utc().format()),Ve&&(c.scheduleEnd=Ve.utc().format()),e.handleSubmit(n,c)}else{var d=E.getScopeByLevel(W);c={templateId:Y,name:B,description:V,scope:{scope:d,scopeId:null},output:ie,dateRange:u,includeCurrentDay:Se,filters:s,scheduleEvery:De,emailTo:o,scheduled:Me,emailAttachments:!0,needsRun:t};"root"!==W&&(c.scope.scopeId=K),Be&&(c.scheduleStart=Be.utc().format()),Ve&&(c.scheduleEnd=Ve.utc().format()),e.handleSubmit(n,c)}}}var dt=function(e){var t=Oe.concat();t.length>0&&(t.splice(e,1),xe(t))},ft=function(e,t){var n=Oe.concat();n[e]=t,xe(n)},pt=[{value:-1,label:"Select dimension"}].concat(E.attributeIdOptions(Ne));return c.default.createElement(d.Modal,{size:"lg",show:e.show,onHide:e.handleClose,onEntering:function(){return l(void 0,void 0,void 0,(function(){var n,r,l,u,s;return o(this,(function(o){switch(o.label){case 0:return k(!1),T(!1),Je({error:!1,message:""}),Ze({error:!1,message:""}),rt({error:!1,message:""}),lt({error:!1,message:""}),e.report?[4,ot(a,i)]:[3,3];case 1:return o.sent(),G(e.report.name),z(e.report.description),le(e.report.output),[4,ut()];case 2:return o.sent(),function(){var t=h.get(e,"report.dateRange");if(void 0!==t){if(I.map((function(e){return e.value})).indexOf(t)>-1)se(t);else{var n=t.split("/");if(2===n.length)se("range"),be(v.default(n[0])),""!==n[1]?_e(v.default(n[1])):_e(null);else{var r=v.default.duration(t);if(v.default.isDuration(r)){se("period");var a=r.days(),i=r.weeks(),l=r.months();a>0?(fe("D"),he(a.toString())):i>0?(fe("W"),he(i.toString())):l>0&&(fe("M"),he(l.toString()))}}}}}(),Pe(e.report.includeCurrentDay),n=_.getStatisticFilters(e.report.filters||[]),xe(n),ke(e.report.scheduled),Te(e.report.scheduleEvery),r=h.get(e,"report.scheduleStart"),l=h.get(e,"report.scheduleEnd"),Ge(r?v.default(r):null),ze(l?v.default(l):null),u=h.get(e,"report.emailTo",[]).map((function(e){return{value:e,label:e}})),Ue(u),[3,6];case 3:return G(""),z(""),[4,st(e.scope)];case 4:return o.sent(),[4,ut()];case 5:o.sent(),le(x[0].value),se(I[0].value),fe(N[0].value),he(""),be(null),_e(null),Pe(!1),xe([]),ke(!1),Te(A[0].value),s=v.default().hour()<9?v.default().hour(9).minute(0).second(0):v.default().add(1,"day").hour(9).minute(0).second(0),Ge(s),ze(s),Ue([{value:t.email,label:t.email}]),o.label=6;case 6:return[2]}}))}))},backdrop:"static"},c.default.createElement(d.Modal.Header,{closeButton:!0},c.default.createElement(d.Modal.Title,null,"Report settings")),c.default.createElement(d.Modal.Body,null,c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Form.Group,{controlId:"report-name"},c.default.createElement(d.Form.Label,null,"Name *"),c.default.createElement(d.Form.Control,{autoFocus:!0,readOnly:!e.writeAccess,isInvalid:We.error,type:"text",value:B,onChange:function(e){var t=e.target.value,n=b.required(t);G(t),Je(n)}}),We.error&&c.default.createElement(d.Form.Control.Feedback,{type:"invalid"},We.message)),c.default.createElement(d.Form.Group,{controlId:"report-description"},c.default.createElement(d.Form.Label,null,"Description"),c.default.createElement(d.Form.Control,{as:"textarea",autoFocus:!0,disabled:!e.writeAccess,type:"text",rows:"3",value:V,onChange:function(e){z(e.target.value)}})))),c.default.createElement("div",{className:"row no-gutters"},-1===n&&c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(d.Form.Group,{controlId:"report-scope"},c.default.createElement(d.Form.Label,null,"Level:"),c.default.createElement(f.default,{inputId:"react-select-report-scope",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:s.find((function(e){return e.value===W})),onChange:function(e){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,st(e.value)];case 1:return t.sent(),[2]}}))}))},options:s}))),"root"!==W&&-1===n&&c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(w.default,{visible:D,loaderClass:"loading-input"}),!D&&c.default.createElement(d.Form.Group,{controlId:"report-entity"},c.default.createElement(d.Form.Label,null,E.getLabelByScopeType(W)),c.default.createElement(f.default,{inputId:"react-select-report-entity",className:"react-select-container",classNamePrefix:"react-select",value:Q.find((function(e){return e.value===K})),clearable:!1,onChange:function(e){return l(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=e.value,[4,ot(E.getScopeByLevel(W),t)];case 1:return n.sent(),Z(t),[2]}}))}))},options:Q}))),n>0&&c.default.createElement(c.Fragment,null,c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(d.Form.Group,{controlId:"report-level"},c.default.createElement(d.Form.Label,null,"Level:"),c.default.createElement(d.Form.Control,{disabled:!0,type:"text",value:E.getLabelByScope(a)}))),c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(d.Form.Group,{controlId:"report-owner"},c.default.createElement(d.Form.Label,null,"Entity:"),c.default.createElement(d.Form.Control,{disabled:!0,type:"text",value:r}))))),c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(d.Form.Group,{controlId:"report-template"},c.default.createElement(d.Form.Label,null,"Template:"),c.default.createElement(f.default,{inputId:"react-select-report-template",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isDisabled:!e.writeAccess,value:ne.find((function(e){return e.value===Y})),onChange:function(e){U(e.value)},options:ne}))),c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(d.Form.Group,{controlId:"report-output"},c.default.createElement(d.Form.Label,null,"Output:"),c.default.createElement(f.default,{inputId:"react-select-report-output",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isDisabled:!e.writeAccess,value:x.find((function(e){return e.value===ie})),onChange:function(e){le(e.value)},options:x}))),"csv"===ie&&c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Alert,{variant:"info"},c.default.createElement(P.default,{name:"info-circle"})," ",c.default.createElement("strong",null,"Note: ")," only the first table of a template is outputted as CSV."))),c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Form.Group,{controlId:"report-range"},c.default.createElement(d.Form.Label,null,"Range:"),c.default.createElement(f.default,{inputId:"react-select-report-range",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isDisabled:!e.writeAccess,value:I.find((function(e){return e.value===ue})),onChange:function(e){se(e.value)},options:I})))),"period"===ue&&c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(d.Form.Group,null,c.default.createElement(d.Form.Control,{id:"range-unit-count",readOnly:!e.writeAccess,required:!0,type:"number",min:"0",isInvalid:Ke.error,value:me,onChange:function(e){var t=e.target.value;if(he(t),"period"===ue){var n=b.required(t);Ze(n)}else Ze({error:!1,message:""})}}),Ke.error&&c.default.createElement(d.Form.Control.Feedback,{type:"invalid"},Ke.message))),c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(f.default,{inputId:"react-select-unit",isDisabled:!e.writeAccess,className:"react-select-container",classNamePrefix:"react-select",onChange:function(e){fe(e.value)},value:N.find((function(e){return e.value===de})),options:N}))),"range"===ue&&c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-6 px-1 pb-2"},c.default.createElement(d.Form.Label,null,"Start date"),c.default.createElement(d.InputGroup,null,c.default.createElement(d.InputGroup.Prepend,null,c.default.createElement(d.InputGroup.Text,null,c.default.createElement(P.default,{name:"calendar"}))),c.default.createElement(m.default,{inputProps:{disabled:!e.writeAccess},dateFormat:"YYYY-MM-DD",timeFormat:!1,onChange:function(e){be(e),et(e?{error:!1,message:""}:{error:!0,message:"Start date is required"})},value:ve}),Qe.error&&c.default.createElement(d.Form.Control.Feedback,{type:"invalid"},Qe.message))),c.default.createElement("div",{className:"col-lg-6 px-1 pb-2"},c.default.createElement(d.Form.Label,null,"End date"),c.default.createElement(d.InputGroup,null,c.default.createElement(d.InputGroup.Prepend,null,c.default.createElement(d.InputGroup.Text,null,c.default.createElement(P.default,{name:"calendar"}))),c.default.createElement(m.default,{inputProps:{disabled:!e.writeAccess},dateFormat:"YYYY-MM-DD",timeFormat:!1,onChange:function(e){_e(e)},value:Ee})))),c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Form.Group,null,c.default.createElement(C.default,{id:"report-include-current",disabled:!e.writeAccess,checked:Se,onChange:function(e){Pe(e)}},"Include current day")),c.default.createElement(d.Form.Group,null,c.default.createElement(d.Form.Label,null,"Filters:"),c.default.createElement("div",null,Oe.map((function(t,n){return c.default.createElement(S.default,{key:"filter-"+n,index:n,filter:t,writeAccess:e.writeAccess,attributes:pt,onChange:ft,onDelete:dt})}))),c.default.createElement("button",{className:"mr-2 btn btn-primary btn-xs",disabled:!e.writeAccess,onClick:function(){xe(u(u([],Oe),[{attributeId:-1,condition:"in",values:[]}]))}},c.default.createElement(P.default,{name:"plus"})," ADD FILTER"),Oe.length>0&&c.default.createElement("button",{className:"btn btn-primary btn-xs",disabled:!e.writeAccess,onClick:function(){xe([])}},c.default.createElement(P.default,{name:"remove"})," CLEAR FILTERS"))),c.default.createElement("div",{className:"col-lg-12 pb-2 px-1"},c.default.createElement("div",{className:"font-weight-bold"},"Scheduling")),c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Form.Group,null,c.default.createElement(C.default,{id:"report-scheduled",disabled:!e.writeAccess,checked:Me,onChange:function(e){ke(e)}},"Active")),c.default.createElement(d.Form.Group,{controlId:"report-schedule-every"},c.default.createElement(d.Form.Label,null,"Run every:"),c.default.createElement(f.default,{inputId:"react-select-report-schedule-every",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isDisabled:!e.writeAccess,value:A.find((function(e){return e.value===De})),onChange:function(e){Te(e.value)},options:A})))),c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(d.Form.Label,null,"Start date"),c.default.createElement(d.InputGroup,null,c.default.createElement(d.InputGroup.Prepend,null,c.default.createElement(d.InputGroup.Text,null,c.default.createElement(P.default,{name:"calendar"}))),c.default.createElement(m.default,{inputProps:{disabled:!e.writeAccess},dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm",onChange:function(e){Ge(e)},value:Be}),it.error&&c.default.createElement(d.Form.Control.Feedback,{type:"invalid"},it.message))),c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(d.Form.Label,null,"End date"),c.default.createElement(d.InputGroup,null,c.default.createElement(d.InputGroup.Prepend,null,c.default.createElement(d.InputGroup.Text,null,c.default.createElement(P.default,{name:"calendar"}))),c.default.createElement(m.default,{inputProps:{disabled:!e.writeAccess},dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm",onChange:function(e){ze(e)},value:Ve})))),c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-12 pb-2 px-1"},c.default.createElement("div",{className:"font-weight-bold"},"Email")),c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Form.Group,{controlId:"report-emailto"},c.default.createElement(d.Form.Label,null,"To:"),c.default.createElement(p.default,{className:"react-select-container multiple",classNamePrefix:"react-select",isClearable:!0,isDisabled:!e.writeAccess,isMulti:!0,onChange:function(e,t){if("create-option"===t.action){if(e.length>0){var n=e[e.length-1].value.split(/[\s,]+/),r=h.partition(n,(function(e){return g.default.isEmail(e)})),a=r[0],i=r[1];if(a.length>0){var l=a.map((function(e){return{value:e,label:e}})),o=e.slice(0,e.length-1).concat(l);Ue(o)}i.length>0?rt({error:!0,message:'Incorrect email format for "'+i.join(",")+'"'}):rt({error:!1,message:""})}}else Ue(e),rt({error:!1,message:""})},value:Ye}),nt.error&&c.default.createElement(d.Form.Control.Feedback,{type:"invalid"},nt.message)),c.default.createElement("button",{className:"mr-2 btn btn-primary btn-xs",disabled:!e.writeAccess,onClick:function(){Ye?Ye.find((function(e){return e.value==t.email}))||Ue(u(u([],Ye),[{value:t.email,label:t.email}])):Ue([{value:t.email,label:t.email}])}},c.default.createElement(P.default,{name:"plus"})," ADD ME")))),c.default.createElement(d.Modal.Footer,null,c.default.createElement(d.Button,{variant:"light",size:"sm",onClick:e.handleClose},"CANCEL"),c.default.createElement(d.Button,{variant:"primary",size:"sm",onClick:function(){ct(!1)},disabled:M||!e.writeAccess},"SAVE"),c.default.createElement(d.Button,{variant:"primary",size:"sm",onClick:function(){ct(!0)},disabled:M||!e.writeAccess},"SAVE AND RUN NOW")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(43),d=n(2),f=n(44),p=i(n(1)),m=i(n(4)),h=u(n(10)),g=u(n(5));t.default=function(e){var t=s.useState(!0),n=t[0],r=t[1],a=s.useState(null),i=a[0],u=a[1],v=s.useState(!1),b=v[0],y=v[1],E=s.useState(!1),_=E[0],w=E[1],S=s.useState(""),P=S[0],C=S[1],O=s.useRef(null);function x(){return l(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:r(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,m.Get({path:"/api/reports/"+e.report.id+"/token"})];case 2:return t=n.sent().token,u(t),w(!1),C(""),[3,4];case 3:return n.sent(),w(!0),C("Error loading report token."),[3,4];case 4:return r(!1),[2]}}))}))}if(e.report){var I=p.isNull(i)?"":e.shareBaseUrl+"/reports/"+e.report.id+"/token/"+i;return s.createElement(d.Modal,{size:"lg",show:e.show,onHide:e.handleClose,onEntering:function(){x()},backdrop:"static"},s.createElement(d.Modal.Header,{closeButton:!0},s.createElement(d.Modal.Title,null,"Share report: ",e.report.name)),s.createElement(d.Modal.Body,null,s.createElement(g.default,{visible:n}),!n&&""!==I&&s.createElement(d.FormGroup,null,s.createElement(d.FormLabel,null,"Share report link"),s.createElement("div",{className:b?"gray-box mb-10 highlight-box":"gray-box mb-10"},I),e.report.writeAccess&&s.createElement(d.Button,{onClick:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:r(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,m.Delete({path:"/api/reports/"+e.report.id+"/token"})];case 2:return t.sent(),w(!1),C(""),[3,4];case 3:return t.sent(),w(!0),C("Error deleting report token."),[3,4];case 4:return x(),[2]}}))}))},variant:"primary",size:"sm",className:"pull-right"},"DELETE LINK"),s.createElement(f.CopyToClipboard,{text:I,onCopy:function(){y(!0),setTimeout((function(){y(!1)}),2e3)}},s.createElement("button",{ref:O,className:"btn btn-primary btn-xs pull-right mr-5"},s.createElement("i",{className:"fa fa-files-o","aria-hidden":"true"})," GET LINK")),s.createElement(d.Overlay,{target:c.findDOMNode(O.current),show:b,placement:"bottom"},s.createElement(d.Tooltip,{id:"copy-share-tooltip"},"Copied!"))),!n&&""===I&&s.createElement(s.Fragment,null,s.createElement("p",null,"No share link has been created for this report yet."),e.report.writeAccess&&s.createElement(d.Button,{onClick:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:r(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,m.Post({path:"/api/reports/"+e.report.id+"/token"})];case 2:return t.sent(),w(!1),C(""),[3,4];case 3:return t.sent(),w(!0),C("Error creating report token."),[3,4];case 4:return x(),[2]}}))}))},variant:"primary",size:"sm"},"CREATE LINK")),_&&s.createElement(h.default,{message:P})),s.createElement(d.Modal.Footer,null,s.createElement(d.Button,{onClick:e.handleClose},"CANCEL")))}return null}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(29)),s=l(n(30)),c=l(n(31)),d=i(n(13)),f=l(n(12)),p=l(n(10)),m=l(n(26)),h=l(n(367));t.default=function(){var e=o.useContext(f.default).data;return d.getRights(e.rights).VIEW_REPORT_TEMPLATES?o.default.createElement(o.Fragment,null,o.default.createElement(u.default,null,o.default.createElement("div",{className:"col-sm-12"},o.default.createElement(s.default,null),o.default.createElement(c.default,{id:"breadcrumb",minScope:"advertiser"}))),o.default.createElement(m.default,{title:"Report templates"}),o.default.createElement(h.default,null)):o.default.createElement(p.default,{message:"Access forbidden"})}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=l(n(0)),d=n(6),f=n(2),p=l(n(1)),m=s(n(19)),h=l(n(20)),g=l(n(4)),v=l(n(8)),b=l(n(13)),y=s(n(5)),E=s(n(10)),_=s(n(27)),w=s(n(3)),S=s(n(368)),P=s(n(12)),C=s(n(16)),O=s(n(369)),x=s(n(39));t.default=function(){var e=d.useHistory(),t=d.useRouteMatch(),n=d.useParams(),a=n.scope,i=n.scopeId,l=c.useContext(P.default).data,s=b.getRights(l.rights),I=c.useContext(C.default),N=c.useContext(x.default).items,A=c.useState(!0),j=A[0],M=A[1],k=c.useState([]),F=k[0],D=k[1],T=c.useState(0),R=T[0],B=T[1],G=c.useState(-1),L=G[0],V=G[1],z=c.useState(null),q=z[0],Y=z[1],U=c.useState(!1),H=U[0],W=U[1],J=c.useState(!1),X=J[0],K=J[1],Z=c.useState(""),$=Z[0],Q=Z[1],ee=c.useRef(null),te=c.useRef(null);function ne(){return o(this,void 0,void 0,(function(){var e,t;return u(this,(function(n){switch(n.label){case 0:M(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),te.current&&te.current.abort(),te.current=new AbortController,e=v.scopedParam({scope:a,scopeId:i}),[4,g.Get({path:"/api/reportTemplates",qs:e,signal:te.current.signal})];case 2:return t=n.sent(),D(t),[3,4];case 3:return"AbortError"===n.sent().name?(K(!1),Q("")):(K(!0),Q("Error loading report templates.")),[3,4];case 4:return M(!1),[2]}}))}))}c.useEffect((function(){ne()}),[a,i]);if(X)return c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-sm-12 pt-3"},c.default.createElement("div",{className:"card"},c.default.createElement("h3",null,c.default.createElement(E.default,{message:$})))));var re=p.get(q,"name",""),ae=v.getMaxLevel(I,N),ie={rights:s,scope:a,scopeId:i,maxLevel:ae};return c.default.createElement(d.Switch,null,c.default.createElement(d.Route,{path:t.path+"/:templateId"},c.default.createElement(O.default,r({},ie))),c.default.createElement(d.Route,{path:t.path},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-sm-12 pt-3"},c.default.createElement("div",{className:"card mb-2"},c.default.createElement("h3",{className:"pull-left"},"Report templates"),c.default.createElement("div",{className:"pull-right"},s.MANAGE_REPORT_TEMPLATES&&c.default.createElement(f.Button,{variant:"primary",size:"sm",className:"mr-2",onClick:function(){e.push("/report-templates/"+a+"/"+i+"/-1")}},c.default.createElement(w.default,{name:"plus"})," ADD TEMPLATE"),c.default.createElement(f.Button,{variant:"primary",size:"sm",onClick:function(){B(R+1)}},c.default.createElement(w.default,{name:"remove"})," CLEAR FILTERS")),c.default.createElement(y.default,{visible:j}),!j&&c.default.createElement(S.default,{records:F,filtersCounter:R,user:I,scope:a,scopeId:i,deleteClick:function(e){var t=F.find((function(t){return t.id===e}));V(e),Y(t),W(!0)}}))),c.default.createElement(_.default,{message:"Delete template "+re,show:H,onClose:function(){return W(!1)},onConfirm:function(){return o(void 0,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,g.Delete({path:"/api/reportTemplates/"+L})];case 1:return e.sent(),ee.current.addNotification(h.success(c.default.createElement("span",null,"Template ",q.name," deleted."),!1)),W(!1),ne(),[3,3];case 2:return e.sent(),W(!1),ee.current.addNotification(h.error("Error deleting template.")),[3,3];case 3:return[2]}}))}))}}),c.default.createElement(m.default,{ref:ee}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(6),s=l(n(14)),c=i(n(45)),d=l(n(17)),f=n(2),p=i(n(1)),m=l(n(11)),h=i(n(15)),g=l(n(3));t.default=function(e){var t="report-templates-table",n=o.useState(1),r=n[0],a=n[1],i=o.useState(h.getInitialSizePerPage(t,e.user)),l=i[0],v=i[1],b=o.useState({dataField:"id",order:"desc"}),y=b[0],E=b[1],_=o.useState(""),w=_[0],S=_[1],P=o.useState(""),C=P[0],O=P[1],x=o.useState(""),I=x[0],N=x[1],A=o.useRef(null),j=o.useRef(null),M=o.useRef(null);o.useEffect((function(){A.current(""),j.current(""),M.current("")}),[e.filtersCounter]);var k,F,D=function(e,t){E({dataField:e,order:t})},T=function(t,n){return n.writeAccess?o.default.createElement(u.Link,{to:"/report-templates/"+e.scope+"/"+e.scopeId+"/"+n.id},o.default.createElement(g.default,{name:"pencil"})):o.default.createElement(u.Link,{to:"/report-templates/"+e.scope+"/"+e.scopeId+"/"+n.id},o.default.createElement(g.default,{name:"search-plus"}))},R=function(t,n){return n.writeAccess?o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.deleteClick(n.id)},href:"",className:"table-btn"},o.default.createElement(g.default,{name:"remove"})):null},B=function(t,n,r){if(n.description){var a=o.default.createElement(f.Popover,{id:"popover-trigger-hover"+r},o.default.createElement(f.Popover.Content,null,n.description));return o.default.createElement(f.OverlayTrigger,{trigger:"hover",placement:"top",overlay:a},o.default.createElement(u.Link,{to:"/report-templates/"+e.scope+"/"+e.scopeId+"/"+n.id},t))}return o.default.createElement(u.Link,{to:"/report-templates/"+e.scope+"/"+e.scopeId+"/"+n.id},t)},G=function(e){return e?m.default(e).format("YYYY-MM-DD HH:mm:ss"):""},L=(k={all:"root",metaAgency:"organization",agency:"agency",advertiser:"advertiser",cluster:"campaign group",campaign:"campaign"},[{dataField:"id",text:"#",hidden:!0},{dataField:"writeAccess",text:"#",hidden:!0},{dataField:"name",text:"Name",sort:!0,onSort:D,sortCaret:h.columnSort,filter:c.textFilter({id:"name-filter",placeholder:"Search name...",defaultValue:w,getFilter:function(e){A.current=e},onFilter:function(e){S(e)}}),formatter:B},{dataField:"level",text:"Level",sort:!0,onSort:D,sortCaret:h.columnSort,formatter:function(e){return k[e]},filter:c.selectFilter({id:"level-filter",options:k,defaultValue:C,getFilter:function(e){j.current=e},onFilter:function(e){O(e)}})},{dataField:"owner",text:"Entity",sort:!0,onSort:D,sortCaret:h.columnSort,filter:c.textFilter({id:"owner-filter",placeholder:"Search entity...",defaultValue:I,getFilter:function(e){M.current=e},onFilter:function(e){N(e)}})},{dataField:"creationDate",text:"Created",sort:!0,onSort:D,sortCaret:h.columnSort,formatter:G},{dataField:"df1",isDummyField:!0,text:"",formatter:T,headerStyle:{width:"30px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:R,headerStyle:{width:"30px"}}]),V=e.records.map((function(e){var t=p.pick(e,["id","name","description","writeAccess","creationDate"]),n=p.get(e,"scope.scope"),r=p.get(e,"scope.owner");return p.assign(t,{level:n,owner:r})})),z=h.getSizePerPage(l,V.length),q=e.records.length||30;return o.default.createElement(s.default,{id:t,filter:c.default(),classes:"table-borderless",bordered:!1,hover:!0,striped:!0,keyField:"id",data:V,columns:L,defaultSorted:[y],pagination:d.default({page:(F=h.getLastPage(e.records,l),r>F?F:r),sizePerPage:z,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:q}],onPageChange:function(e,t){a(e)},onSizePerPageChange:function(n,r){h.storeSizePerPage(n,t,e.user),v(n)}})})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=u(n(19)),f=i(n(20)),p=i(n(4)),m=u(n(370));t.default=function(e){var t=c.useParams(),n=c.useHistory(),r=parseInt(t.templateId,10),a=s.useState(!1),i=a[0],u=a[1],h=s.useRef(null);return s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card mb-2"},s.default.createElement(m.default,{id:r,rights:e.rights,scope:e.scope,scopeId:e.scopeId,maxLevel:e.maxLevel,saving:i,onClose:function(){n.push("/report-templates/"+e.scope+"/"+e.scopeId)},onSubmit:function(t,r){return l(void 0,void 0,void 0,(function(){var a;return o(this,(function(i){switch(i.label){case 0:u(!0),i.label=1;case 1:return i.trys.push([1,6,,7]),t>0?[4,p.Put({path:"/api/reportTemplates/"+t,body:r})]:[3,3];case 2:return i.sent(),h.current.addNotification(f.success(s.default.createElement("span",null,"Template ",s.default.createElement("strong",null,r.name)," saved."),!1)),[3,5];case 3:return[4,p.Post({path:"/api/reportTemplates",body:r})];case 4:a=i.sent(),h.current.addNotification(f.success(s.default.createElement("span",null,"Template ",s.default.createElement("strong",null,r.name)," saved."),!1,(function(){n.push("/reports/"+e.scope+"/"+e.scopeId+"/templates/"+a.id)}))),i.label=5;case 5:return[3,7];case 6:return i.sent(),h.current.addNotification(f.error("Error saving template.")),[3,7];case 7:return u(!1),[2]}}))}))}}),s.default.createElement(d.default,{ref:h}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(0)),d=n(2),f=n(67),p=n(108),m=i(n(371)),h=s(n(9)),g=i(n(1)),v=n(42),b=i(n(4)),y=i(n(7)),E=i(n(8)),_=i(n(49)),w=i(n(372)),S=s(n(373)),P=s(n(5)),C=s(n(50)),O=s(n(32)),x=s(n(3)),I=s(n(10));t.default=function(e){var t=E.getLevelOptions(e.maxLevel),n=c.useState(!0),r=n[0],a=n[1],i=c.useState(!1),s=i[0],N=i[1],A=c.useState(""),j=A[0],M=A[1],k=c.useState(""),F=k[0],D=k[1],T=c.useState(!1),R=T[0],B=T[1],G=c.useState(e.scope),L=G[0],V=G[1],z=c.useState(-1),q=z[0],Y=z[1],U=c.useState("all"),H=U[0],W=U[1],J=c.useState(-1),X=(J[0],J[1]),K=c.useState(""),Z=K[0],$=K[1],Q=c.useState(!0),ee=Q[0],te=Q[1],ne=c.useState([]),re=ne[0],ae=ne[1],ie=c.useState({}),le=ie[0],oe=ie[1],ue=c.useState([]),se=ue[0],ce=ue[1],de=c.useState({}),fe=de[0],pe=de[1],me=c.useState([]),he=me[0],ge=me[1],ve=c.useState([{value:-1,label:""}]),be=ve[0],ye=ve[1],Ee=c.useState({error:!1,message:""}),_e=Ee[0],we=Ee[1],Se=c.useState([]),Pe=Se[0],Ce=Se[1],Oe=c.useState(0),xe=Oe[0],Ie=Oe[1],Ne=c.useState(!1),Ae=Ne[0],je=Ne[1],Me=c.useState(""),ke=Me[0],Fe=Me[1];function De(e,t){return l(this,void 0,void 0,(function(){var n,r,a;return o(this,(function(i){switch(i.label){case 0:return n=Le(e,t),[4,_.getFilterAttributes(n)];case 1:return r=i.sent(),oe(r),[4,w.getStatisticAttributes(n)];case 2:return a=i.sent(),pe(a),[2]}}))}))}function Te(e,t,n){return l(this,void 0,void 0,(function(){var r;return o(this,(function(a){switch(a.label){case 0:return e?[4,Ge(t,n)]:[3,2];case 1:r=a.sent(),ce(r),a.label=2;case 2:return[2]}}))}))}function Re(e){return e.map((function(e){return g.omit(e,"key")}))}function Be(){return l(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,b.Get({path:"/api/reportTemplates/"+e.id})];case 1:return[2,t.sent()];case 2:return t.sent(),[2,null];case 3:return[2]}}))}))}function Ge(e,t){return l(this,void 0,void 0,(function(){var n,r,a,i,l;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=Le(e,t),[4,b.Get({path:"/api/presets",qs:n})];case 1:return r=o.sent(),a=(r||[]).filter((function(e){return"VideoStatistics"===e.groupName||"DisplayStatistics"===e.groupName})),i=g.flatMap(a,(function(e){return e.metrics})),[2,g.uniqBy(i,"fieldName").map((function(e){return{value:e.fieldName,label:e.displayName}}))];case 2:return l=o.sent(),console.log(l),[2,[]];case 3:return[2]}}))}))}function Le(e,t){var n={scope:e};return"all"!==e&&(n.scopeId=t),n}function Ve(t,n){return l(this,void 0,void 0,(function(){var r,a,i;return o(this,(function(l){switch(l.label){case 0:return N(!0),[4,E.getEntityOptions("report-templates",e.scope,e.scopeId,n)];case 1:return r=l.sent(),a=r.length>0?r[0].value:-1,[4,De(i=E.getScopeByLevel(n),a)];case 2:return l.sent(),[4,Te(t,i,a)];case 3:return l.sent(),V(n),ye(r),Y(a),N(!1),[2]}}))}))}c.useEffect((function(){e.saving||function(){l(this,void 0,void 0,(function(){var t,n,r,i,l,u,s,c,d;return o(this,(function(o){switch(o.label){case 0:return a(!0),N(!1),we({error:!1,message:""}),e.id>0?[4,Be()]:[3,6];case 1:return(t=o.sent())?(B(t.writeAccess),M(t.name),D(t.description),n=g.get(t,"scope.owner",""),$(n),r=g.get(t,"scope.scope","all"),i=g.get(t,"scope.scopeId",-1),[4,De(r,i)]):[3,4];case 2:return o.sent(),[4,Te(t.writeAccess,r,i)];case 3:return o.sent(),W(r),X(i),l=g.get(t,"template.frontPage",!1),te(l),u=g.get(t,"template.filters",[]),s=_.getStatisticFilters(u||[]),ae(s),f=g.get(t,"template.tabs")||[],c=f.map((function(e){return g.assign(e,{key:v.v4()})})),ge(c),Ie(0),d=c.map((function(e){return!0})),Ce(d),[3,5];case 4:je(!0),Fe("Error loading template."),o.label=5;case 5:return a(!1),[3,8];case 6:return je(!1),Fe(""),a(!1),B(!0),M(""),D(""),te(!0),ae([]),ge([]),Ce([]),[4,Ve(!0,e.scope)];case 7:o.sent(),o.label=8;case 8:return[2]}var f}))}))}()}),[e.id,e.saving]);var ze=function(e){var t=re.concat();t.length>0&&(t.splice(e,1),ae(t))},qe=function(e,t){var n=re.concat();n[e]=t,ae(n)},Ye=function(e,t,n){var r=g.cloneDeep(he);r[e]=t,ge(r);var a=Pe.concat();a[e]=n,Ce(a)},Ue=function(e){var t=g.cloneDeep(he);if(t.length>0){Ie(xe>=1?xe-1:0),t.splice(e,1),ge(t);var n=Pe.concat();n.splice(e,1),Ce(n)}},He=function(e){Ie(e)},We=[{value:-1,label:"Select dimension"}].concat(E.attributeIdOptions(le)),Je=w.statisticAttributeOptions(fe);return Ae?c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-lg-12"},c.default.createElement(I.default,{message:ke})),c.default.createElement("div",{className:"col-lg-12"},c.default.createElement("div",{className:"pull-right"},c.default.createElement(d.Button,{variant:"light",size:"sm",className:"mr-2",onClick:e.onClose},"CANCEL")))):c.default.createElement(c.Fragment,null,c.default.createElement(P.default,{visible:r}),!r&&c.default.createElement(c.Fragment,null,c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement("div",{className:"pull-left"},c.default.createElement("h3",null,"Template settings: ",j)),c.default.createElement("div",{className:"pull-right"},c.default.createElement(d.Button,{variant:"light",size:"sm",className:"mr-2",onClick:e.onClose},"CANCEL"),c.default.createElement(d.Button,{variant:"primary",size:"sm",className:"mr-3",onClick:function(){var t=y.required(j),n=Pe.indexOf(!1)>-1,r=_.getFilters(re);if(t.error||n)we(t);else if(e.id>0){var a={id:e.id,name:j,description:F,template:{title:j,frontPage:ee,filters:r,tabs:Re(he)}};e.onSubmit(e.id,a)}else{var i=E.getScopeByLevel(L);a={name:j,description:F,scope:{scope:i,scopeId:null},template:{title:j,frontPage:ee,filters:r,tabs:Re(he)}};"root"!==L&&(a.scope.scopeId=q),e.onSubmit(e.id,a)}},disabled:e.saving||!R},"SAVE")))),c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Form.Group,{controlId:"template-name"},c.default.createElement(d.Form.Label,null,"Name *"),c.default.createElement(d.Form.Control,{autoFocus:!0,readOnly:!R,isInvalid:_e.error,type:"text",value:j,onChange:function(e){var t=e.target.value,n=y.required(t);M(t),we(n)}}),_e.error&&c.default.createElement(d.Form.Control.Feedback,{type:"invalid"},_e.message)),c.default.createElement(d.Form.Group,{controlId:"template-description"},c.default.createElement(d.Form.Label,null,"Description"),c.default.createElement(d.Form.Control,{as:"textarea",disabled:!R,type:"text",rows:"3",value:F,onChange:function(e){D(e.target.value)}})))),c.default.createElement("div",{className:"row no-gutters"},-1===e.id&&c.default.createElement("div",{className:"col-lg-6 no-gutters"},c.default.createElement(d.Form.Group,{controlId:"template-scope"},c.default.createElement(d.Form.Label,null,"Level:"),c.default.createElement(h.default,{inputId:"react-select-template-scope",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,value:t.find((function(e){return e.value===L})),onChange:function(e){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,Ve(R,e.value)];case 1:return t.sent(),[2]}}))}))},options:t}))),"root"!==L&&-1===e.id&&c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(P.default,{visible:s,loaderClass:"loading-input"}),!s&&c.default.createElement(d.Form.Group,{controlId:"template-entity"},c.default.createElement(d.Form.Label,null,E.getLabelByScopeType(L)),c.default.createElement(h.default,{inputId:"react-select-template-entity",className:"react-select-container",classNamePrefix:"react-select",value:be.find((function(e){return e.value===q})),clearable:!1,onChange:function(e){return l(void 0,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return t=e.value,[4,De(n=E.getScopeByLevel(L),t)];case 1:return r.sent(),[4,Te(R,n,t)];case 2:return r.sent(),Y(t),[2]}}))}))},options:be}))),e.id>0&&c.default.createElement(c.Fragment,null,c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(d.Form.Group,{controlId:"template-level"},c.default.createElement(d.Form.Label,null,"Level:"),c.default.createElement(d.Form.Control,{disabled:!0,type:"text",value:E.getLabelByScope(H)}))),c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(d.Form.Group,{controlId:"template-owner"},c.default.createElement(d.Form.Label,null,"Entity:"),c.default.createElement(d.Form.Control,{disabled:!0,type:"text",value:Z}))))),c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Form.Group,null,c.default.createElement(O.default,{id:"template-frontpage",disabled:!R,checked:ee,onChange:function(e){te(e)}},"Add front tab with settings")),c.default.createElement(d.Form.Group,null,c.default.createElement(d.Form.Label,null,"Filters:"),c.default.createElement("div",null,re.map((function(e,t){return c.default.createElement(C.default,{key:"filter-"+t,index:t,filter:e,writeAccess:R,attributes:We,onChange:qe,onDelete:ze})}))),c.default.createElement("button",{className:"mr-2 btn btn-primary btn-xs",onClick:function(){ae(u(u([],re),[{attributeId:-1,condition:"in",values:[]}]))},disabled:!R},c.default.createElement(x.default,{name:"plus"})," ADD FILTER"),re.length>0&&c.default.createElement("button",{className:"btn btn-primary btn-xs",disabled:!R,onClick:function(){ae([])}},c.default.createElement(x.default,{name:"remove"})," CLEAR FILTERS"))),c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Form.Group,null,c.default.createElement("button",{className:"mr-2 mb-2 btn btn-primary btn-xs",disabled:!R,onClick:function(){var e={name:"New tab",figures:[],key:v.v4()};Ie(he.length),ge(u(u([],he),[e]))}},c.default.createElement(x.default,{name:"plus"})," ADD TAB"),he.length>0&&R&&c.default.createElement("div",{className:"draggable-tabs"},c.default.createElement(f.Tabs,{onTabChange:He,activeIndex:xe,customStyle:m,onTabSequenceChange:function(e){var t=e.oldIndex,n=e.newIndex,r=p.simpleSwitch(he,t,n);ge(r),Ie(n)},showModalButton:!1,showArrowButton:"auto"},c.default.createElement(f.DragTabList,null,he.map((function(e,t){return c.default.createElement(f.DragTab,{key:e.key},e.name)}))),c.default.createElement(f.PanelList,null,he.map((function(e,t){return c.default.createElement(f.Panel,{key:e.key},c.default.createElement(S.default,{index:t,tab:e,writeAccess:R,metricOptions:se,dimensionOptions:Je,onChange:Ye,onDelete:Ue}))}))))),he.length>0&&!R&&c.default.createElement("div",{className:"draggable-tabs readonly"},c.default.createElement(f.Tabs,{onTabChange:He,activeIndex:xe,customStyle:m,showModalButton:!1,showArrowButton:"auto"},c.default.createElement(f.TabList,null,he.map((function(e,t){return c.default.createElement(f.Tab,{key:e.key},e.name)}))),c.default.createElement(f.PanelList,null,he.map((function(e,t){return c.default.createElement(f.Panel,{key:e.key},c.default.createElement(S.default,{index:t,tab:e,writeAccess:R,metricOptions:se,dimensionOptions:Je,onChange:Ye,onDelete:Ue}))}))))))))))}},function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i,l=a(n(109)),o=n(67),u=o.styled.TabListStyle,s=o.styled.ActionButtonStyle,c=o.styled.TabStyle,d=o.styled.PanelStyle;s=l.default(s)(i||(i=r(["\n  height: 100%;\n  text-align: center;\n  border-radius: 0;\n  background: #f9f9f9;\n  border: solid 1px #eee;\n  > svg {\n    padding-top: 10px;\n    width: 25px;\n    height: auto;\n  }\n"],["\n  height: 100%;\n  text-align: center;\n  border-radius: 0;\n  background: #f9f9f9;\n  border: solid 1px #eee;\n  > svg {\n    padding-top: 10px;\n    width: 25px;\n    height: auto;\n  }\n"]))),e.exports={TabList:u,ActionButton:s,Tab:c,Panel:d}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.statisticAttributeOptions=t.getStatisticAttributes=void 0;var u=i(n(4));t.getStatisticAttributes=function(e){return l(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,u.Get({path:"/api/attributes/statistics",qs:e})];case 1:return[2,n.sent()];case 2:return t=n.sent(),console.log(t),[2,{}];case 3:return[2]}}))}))};t.statisticAttributeOptions=function(e){var t=[];for(var n in e){var r={label:n,options:e[n].map((function(e){return{value:e.name,label:e.displayName}}))};t.push(r)}return[{value:"date",label:"Per day"}].concat(t)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(0)),s=n(2),c=i(n(1)),d=i(n(7)),f=o(n(110)),p=o(n(3));t.default=function(e){var t=u.useState(e.tab.name),n=t[0],r=t[1],a=u.useState({error:!1,message:""}),i=a[0],o=a[1],m=u.useState(e.tab.figures),h=m[0],g=m[1],v=u.useState((e.tab.figures||[]).map((function(e){return!0}))),b=v[0],y=v[1];u.useEffect((function(){var t=b.indexOf(!1)>-1;e.onChange(e.index,{name:n,figures:h,key:e.tab.key},!i.error&&!t)}),[n,h]),u.useEffect((function(){r(e.tab.name),g(e.tab.figures)}),[JSON.stringify(e.tab)]);var E=function(e,t,n){var r=c.cloneDeep(h);r[e]=t,g(r);var a=b.concat();a[e]=n,y(a)},_=function(e){var t=c.cloneDeep(h);if(t.length>0){t.splice(e,1),g(t);var n=b.concat();n.splice(e,1),y(n)}};return u.default.createElement("div",{className:"card mb-3 mt-3"},u.default.createElement("div",{className:"row template-tab-row"},u.default.createElement("div",{className:"col-sm-12"},u.default.createElement(s.Form.Group,{controlId:"tab-name-"+e.index},u.default.createElement(s.Form.Label,null,"Name *"),u.default.createElement(s.Form.Control,{readOnly:!e.writeAccess,type:"text",isInvalid:i.error,value:n,onChange:function(e){var t=e.target.value,n=d.required(t);r(t),o(n)}}),i.error&&u.default.createElement(s.Form.Control.Feedback,{type:"invalid"},i.message)))),h.map((function(t,n){return u.default.createElement(f.default,{tabIndex:e.index,index:n,type:"table"===t.type?"table":"chart",figure:t,metricOptions:e.metricOptions,dimensionOptions:e.dimensionOptions,writeAccess:e.writeAccess,onChange:E,onDelete:_})})),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-12 mt-2"},u.default.createElement("div",{className:"pull-left"},u.default.createElement("button",{className:"btn btn-secondary btn-xs",disabled:!e.writeAccess,onClick:function(){e.onDelete(e.index)}},u.default.createElement(p.default,{name:"remove"})," DELETE TAB")),u.default.createElement("div",{className:"pull-right"},u.default.createElement("button",{className:"mr-2 btn btn-primary btn-xs",disabled:!e.writeAccess,onClick:function(){g(l(l([],h),[{title:"",type:"table",dimensions:["date"],metrics:[],limit:50,includeTotal:!0}]))}},u.default.createElement(p.default,{name:"plus"})," ADD TABLE"),u.default.createElement("button",{className:"btn btn-primary btn-xs",disabled:!e.writeAccess,onClick:function(){g(l(l([],h),[{title:"",type:"barchart",dimensions:["date"],metrics:[],secondaryMetrics:[],limit:50,figureWidth:17,figureHeight:17}]))}},u.default.createElement(p.default,{name:"plus"})," ADD CHART")))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(0)),s=n(2),c=o(n(9)),d=i(n(1)),f=i(n(8)),p=i(n(7)),m=o(n(32)),h=o(n(3));t.default=function(e){var t={value:"none",label:"none"},n=u.useState(e.figure.title),r=n[0],a=n[1],i=u.useState(e.figure.dimensions&&e.figure.dimensions.length>0?e.figure.dimensions[0]:"date"),o=i[0],g=i[1],v=u.useState(e.figure.dimensions&&e.figure.dimensions.length>1?e.figure.dimensions[1]:t.value),b=v[0],y=v[1],E=u.useState(e.figure.dimensions&&e.figure.dimensions.length>2?e.figure.dimensions[2]:t.value),_=E[0],w=E[1],S=u.useState(e.figure.metrics||[]),P=S[0],C=S[1],O=u.useState(e.figure.limit||50),x=O[0],I=O[1],N=u.useState(e.figure.includeTotal),A=N[0],j=N[1],M=u.useState({error:!1,message:""}),k=M[0],F=M[1];function D(n){return d.flatMap(l([t],e.dimensionOptions),(function(e){return e.options||e})).find((function(e){return e.value===n}))}u.useEffect((function(){var n=!k.error;e.onChange(e.index,{title:r,type:e.figure.type,dimensions:[o,b,_].filter((function(e){return e!=t.value})),metrics:P,limit:x,includeTotal:A},n)}),[r,o,b,_,P,x,A]),u.useEffect((function(){a(e.figure.title),g(e.figure.dimensions&&e.figure.dimensions.length>0?e.figure.dimensions[0]:"date"),y(e.figure.dimensions&&e.figure.dimensions.length>1?e.figure.dimensions[1]:t.value),w(e.figure.dimensions&&e.figure.dimensions.length>2?e.figure.dimensions[2]:t.value),C(e.figure.metrics||[]),I(e.figure.limit),j(e.figure.includeTotal)}),[JSON.stringify(e.figure)]);var T=D(o),R=D(b),B=D(_),G=u.default.createElement(s.Tooltip,{id:"tab-table-delete-tooltip-"+e.tabIndex+"-"+e.index},"delete table"),L=f.getPopperConfig();return u.default.createElement("div",{className:"row template-figure-row"},u.default.createElement("div",{className:"col-lg-12"},u.default.createElement(s.OverlayTrigger,{placement:"top",overlay:G,popperConfig:L},u.default.createElement("a",{href:"",className:"table-btn-lg pull-right",onClick:function(t){t.preventDefault(),e.writeAccess&&e.onDelete(e.index)}},u.default.createElement(h.default,{name:"remove"})))),u.default.createElement("div",{className:"col-lg-12"},u.default.createElement(s.Form.Group,{controlId:"tab-table-name-"+e.tabIndex+"-"+e.index},u.default.createElement(s.Form.Label,null,"Table name *"),u.default.createElement(s.Form.Control,{readOnly:!e.writeAccess,type:"text",value:r,onChange:function(e){var t=e.target.value;a(t)}})),u.default.createElement(s.Form.Group,{controlId:"tab-table-dimension-1-"+e.tabIndex+"-"+e.index},u.default.createElement(s.Form.Label,null,"Dimension:"),u.default.createElement(c.default,{inputId:"tab-table-select-dimension-1-"+e.tabIndex+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",isDisabled:!e.writeAccess,value:T,onChange:function(e){g(e.value)},options:e.dimensionOptions})),u.default.createElement(s.Form.Group,{controlId:"tab-table-dimension-2-"+e.tabIndex+"-"+e.index},u.default.createElement(s.Form.Label,null,"Dimension 2:"),u.default.createElement(c.default,{inputId:"tab-table-select-dimension-2-"+e.tabIndex+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",isDisabled:!e.writeAccess,value:R,onChange:function(e){y(e.value)},options:l([t],e.dimensionOptions)})),b!=t.value?u.default.createElement(s.Form.Group,{controlId:"tab-table-dimension-3-"+e.tabIndex+"-"+e.index},u.default.createElement(s.Form.Label,null,"Dimension 3:"),u.default.createElement(c.default,{inputId:"tab-table-select-dimension-3-"+e.tabIndex+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",isDisabled:!e.writeAccess,value:B,onChange:function(e){w(e.value)},options:l([t],e.dimensionOptions)})):null,e.writeAccess&&u.default.createElement(s.Form.Group,{controlId:"tab-table-metrics-"+e.tabIndex+"-"+e.index},u.default.createElement(s.Form.Label,null,"Metrics:"),u.default.createElement(c.default,{inputId:"tab-table-select-metrics-"+e.tabIndex+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",isMulti:!0,closeMenuOnSelect:!1,value:(P||[]).map((function(t){return e.metricOptions.find((function(e){return e.value===t}))})),onChange:function(e){var t=(e||[]).map((function(e){return e.value}));C(t)},options:e.metricOptions})),!e.writeAccess&&u.default.createElement(s.Form.Group,{controlId:"tab-table-metrics-"+e.tabIndex+"-"+e.index},u.default.createElement(s.Form.Label,null,"Metrics:"),u.default.createElement(c.default,{inputId:"tab-table-select-metrics-"+e.tabIndex+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",isMulti:!0,isDisabled:!0,closeMenuOnSelect:!1,value:P.map((function(e){return{value:e,label:e}})),options:P.map((function(e){return{value:e,label:e}}))})),u.default.createElement(s.Form.Group,{controlId:"tab-table-limit-"+e.tabIndex+"-"+e.index},u.default.createElement(s.Form.Label,null,"Maximum results"),u.default.createElement(s.Form.Control,{readOnly:!e.writeAccess,required:!0,type:"number",min:"1",isInvalid:k.error,value:d.isNil(x)?"":x.toString(),onChange:function(e){var t=parseInt(e.target.value,10),n=p.native(e.target);I(t),F(n)}}),k.error&&u.default.createElement(s.Form.Control.Feedback,{type:"invalid"},k.message)),u.default.createElement(s.Form.Group,null,u.default.createElement(m.default,{id:"tab-table-includetotal-"+e.tabIndex+"-"+e.index,checked:A,disabled:!e.writeAccess,onChange:function(e){j(e)}},"Add total row"))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(9)),s=n(2),c=i(n(1)),d=i(n(8)),f=i(n(7)),p=l(n(3));t.default=function(e){var t=e.figure.figureWidth||17,n=e.figure.figureHeight||17,r=V(t,n),a=o.useState(e.figure.title),i=a[0],l=a[1],m=o.useState(e.figure.type),h=m[0],g=m[1],v=o.useState(e.figure.dimensions&&e.figure.dimensions.length>0?e.figure.dimensions[0]:"date"),b=v[0],y=v[1],E=o.useState(e.figure.metrics||[]),_=E[0],w=E[1],S=o.useState(e.figure.secondaryMetrics||[]),P=S[0],C=S[1],O=o.useState(e.figure.limit||50),x=O[0],I=O[1],N=o.useState(t),A=N[0],j=N[1],M=o.useState(n),k=M[0],F=M[1],D=o.useState(r),T=D[0],R=D[1],B=o.useState({error:!1,message:""}),G=B[0],L=B[1];function V(e,t){return 17===e&&17===t?"large":8===e&&17===t?"small":"custom"}function z(t){return(t||[]).map((function(t){return e.metricOptions.find((function(e){return e.value===t}))}))}o.useEffect((function(){var t=!G.error;e.onChange(e.index,{title:i,type:h,dimensions:[b],metrics:_,secondaryMetrics:P,limit:x,figureWidth:A,figureHeight:k},t)}),[i,h,b,_,P,x,A,k]),o.useEffect((function(){l(e.figure.title),y(e.figure.dimensions&&e.figure.dimensions.length>0?e.figure.dimensions[0]:"date"),w(e.figure.metrics||[]),C(e.figure.secondaryMetrics||[]),I(e.figure.limit),j(e.figure.figureWidth),F(e.figure.figureHeight);var t=V(e.figure.figureWidth,e.figure.figureHeight);R(t)}),[JSON.stringify(e.figure)]);var q=[{value:"barchart",label:"bar chart"},{value:"columnchart",label:"column chart"},{value:"linechart",label:"line chart"},{value:"piechart",label:"pie chart"}],Y=c.flatMap(e.dimensionOptions,(function(e){return e.options||e})).find((function(e){return e.value===b})),U=[{value:"large",label:"large (17x17)"},{value:"small",label:"small (8x17)"},{value:"custom",label:"custom"}],H=o.default.createElement(s.Tooltip,{id:"tab-chart-delete-tooltip-"+e.tabIndex+"-"+e.index},"delete chart"),W=d.getPopperConfig();return o.default.createElement("div",{className:"row template-figure-row"},o.default.createElement("div",{className:"col-lg-12"},o.default.createElement(s.OverlayTrigger,{placement:"top",overlay:H,popperConfig:W},o.default.createElement("a",{href:"",className:"table-btn-lg pull-right",onClick:function(t){t.preventDefault(),e.writeAccess&&e.onDelete(e.index)}},o.default.createElement(p.default,{name:"remove"})))),o.default.createElement("div",{className:"col-lg-12"},o.default.createElement(s.Form.Group,{controlId:"tab-chart-name-"+e.tabIndex+"-"+e.index},o.default.createElement(s.Form.Label,null,"Chart name *"),o.default.createElement(s.Form.Control,{readOnly:!e.writeAccess,type:"text",value:i,onChange:function(e){var t=e.target.value;l(t)}})),o.default.createElement(s.Form.Group,{controlId:"tab-chart-type-"+e.tabIndex+"-"+e.index},o.default.createElement(s.Form.Label,null,"Chart type:"),o.default.createElement(u.default,{inputId:"tab-chart-select-type-"+e.tabIndex+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isDisabled:!e.writeAccess,value:q.find((function(e){return e.value===h})),onChange:function(e){g(e.value),"piechart"===e.value&&C([])},options:q})),o.default.createElement(s.Form.Group,{controlId:"tab-chart-dimensions-"+e.tabIndex+"-"+e.index},o.default.createElement(s.Form.Label,null,"Dimension:"),o.default.createElement(u.default,{inputId:"tab-chart-select-dimensions-"+e.tabIndex+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",isDisabled:!e.writeAccess,value:Y,onChange:function(e){y(e.value)},options:e.dimensionOptions})),e.writeAccess&&o.default.createElement(s.Form.Group,{controlId:"tab-chart-metrics-"+e.tabIndex+"-"+e.index},o.default.createElement(s.Form.Label,null,"Metrics left side:"),o.default.createElement(u.default,{inputId:"tab-chart-select-metrics-"+e.tabIndex+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",isMulti:!0,closeMenuOnSelect:!1,value:z(_),onChange:function(e){var t=(e||[]).map((function(e){return e.value}));w(t)},options:e.metricOptions})),!e.writeAccess&&o.default.createElement(s.Form.Group,{controlId:"tab-chart-metrics-"+e.tabIndex+"-"+e.index},o.default.createElement(s.Form.Label,null,"Metrics:"),o.default.createElement(u.default,{inputId:"tab-chart-select-metrics-"+e.tabIndex+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",isMulti:!0,isDisabled:!0,closeMenuOnSelect:!1,value:_.map((function(e){return{value:e,label:e}})),options:_.map((function(e){return{value:e,label:e}}))})),"piechart"!==h&&e.writeAccess&&o.default.createElement(s.Form.Group,{controlId:"tab-chart-sec-metrics-"+e.tabIndex+"-"+e.index},o.default.createElement(s.Form.Label,null,"Metrics right side:"),o.default.createElement(u.default,{inputId:"tab-chart-select-sec-metrics-"+e.tabIndex+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",isMulti:!0,closeMenuOnSelect:!1,value:z(P),onChange:function(e){var t=e.map((function(e){return e.value}));C(t)},options:e.metricOptions})),"piechart"!==h&&!e.writeAccess&&o.default.createElement(s.Form.Group,{controlId:"tab-chart-sec-metrics-"+e.tabIndex+"-"+e.index},o.default.createElement(s.Form.Label,null,"Metrics right side:"),o.default.createElement(u.default,{inputId:"tab-chart-select-sec-metrics-"+e.tabIndex+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",isMulti:!0,isDisabled:!0,closeMenuOnSelect:!1,value:P.map((function(e){return{value:e,label:e}})),options:P.map((function(e){return{value:e,label:e}}))})),o.default.createElement(s.Form.Group,{controlId:"tab-chart-limit-"+e.tabIndex+"-"+e.index},o.default.createElement(s.Form.Label,null,"Maximum results"),o.default.createElement(s.Form.Control,{readOnly:!e.writeAccess,required:!0,type:"number",min:"1",isInvalid:G.error,value:c.isNil(x)?"":x.toString(),onChange:function(e){var t=parseInt(e.target.value,10),n=f.native(e.target);I(t),L(n)}}),G.error&&o.default.createElement(s.Form.Control.Feedback,{type:"invalid"},G.message)),o.default.createElement(s.Form.Group,{controlId:"tab-chart-size-"+e.tabIndex+"-"+e.index},o.default.createElement(s.Form.Label,null,"Size:"),o.default.createElement(u.default,{inputId:"tab-chart-select-size-"+e.tabIndex+"-"+e.index,className:"react-select-container",classNamePrefix:"react-select",isDisabled:!e.writeAccess,value:U.find((function(e){return e.value===T})),onChange:function(e){R(e.value),"large"===e.value?(j(17),F(17)):"small"===e.value?(j(8),F(17)):(j(null),F(null))},options:U})),"custom"===T&&o.default.createElement(o.Fragment,null,o.default.createElement(s.Form.Group,{controlId:"tab-chart-width-"+e.tabIndex+"-"+e.index},o.default.createElement(s.Form.Label,null,"Width"),o.default.createElement(s.Form.Control,{readOnly:!e.writeAccess,required:!0,type:"number",min:"1",value:c.isNil(A)?"":A.toString(),onChange:function(e){var t=parseInt(e.target.value,10);isNaN(t)?j(null):j(t)}})),o.default.createElement(s.Form.Group,{controlId:"tab-chart-height-"+e.tabIndex+"-"+e.index},o.default.createElement(s.Form.Label,null,"Height"),o.default.createElement(s.Form.Control,{readOnly:!e.writeAccess,required:!0,type:"number",min:"1",value:c.isNil(k)?"":k.toString(),onChange:function(e){var t=parseInt(e.target.value,10);isNaN(t)?F(null):F(t)}})))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(29)),s=l(n(30)),c=l(n(31)),d=i(n(13)),f=l(n(12)),p=l(n(10)),m=l(n(26)),h=l(n(377));t.default=function(){var e=o.useContext(f.default).data;return d.getRights(e.rights).VIEW_PUBLISHER_DEALS?o.default.createElement(o.Fragment,null,o.default.createElement(u.default,null,o.default.createElement("div",{className:"col-sm-9"},o.default.createElement(s.default,null),o.default.createElement(c.default,{id:"breadcrumb",minScope:"advertiser"}))),o.default.createElement(m.default,{title:"Publisher deals"}),o.default.createElement(h.default,null)):o.default.createElement(p.default,{message:"Access forbidden"})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=i(n(1)),f=u(n(19)),p=i(n(20)),m=i(n(4)),h=i(n(13)),g=u(n(16)),v=u(n(12)),b=u(n(5)),y=u(n(10)),E=u(n(27)),_=u(n(378)),w=u(n(379)),S=u(n(380)),P=u(n(381));t.default=function(){var e=c.useParams(),t=e.scope,n=parseInt(e.scopeId),r=s.useContext(v.default).data,a=h.getRights(r.rights),i=s.useContext(g.default),u=s.useState(!0),C=u[0],O=u[1],x=s.useState(!0),I=x[0],N=x[1],A=s.useState(!1),j=A[0],M=A[1],k=s.useState(!1),F=k[0],D=k[1],T=s.useState([]),R=T[0],B=T[1],G=s.useState([]),L=G[0],V=G[1],z=s.useState(!1),q=z[0],Y=z[1],U=s.useState(!1),H=U[0],W=U[1],J=s.useState(null),X=J[0],K=J[1],Z=s.useState(-1),$=Z[0],Q=Z[1],ee=s.useState(-1),te=ee[0],ne=ee[1],re=s.useState(null),ae=re[0],ie=re[1],le=s.useState(null),oe=le[0],ue=le[1],se=s.useState(!1),ce=se[0],de=se[1],fe=s.useState(""),pe=fe[0],me=fe[1],he=s.useRef(null);function ge(){return l(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:if(!C)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,m.Get({path:"/api/publishers/"+n+"/dealrequests"})];case 2:return e=t.sent(),B(e),O(!1),[3,4];case 3:return t.sent(),de(!0),me("Error loading deal requests."),[3,4];case 4:return[2]}}))}))}function ve(){return l(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:if(!I)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,m.Get({path:"/api/publishers/"+n+"/deals"})];case 2:return e=t.sent(),V(e),N(!1),[3,4];case 3:return t.sent(),de(!0),me("Error loading deals."),[3,4];case 4:return[2]}}))}))}s.useEffect((function(){ge(),ve()}),[]),s.useEffect((function(){ge()}),[C]),s.useEffect((function(){ve()}),[I]),s.useEffect((function(){O(!0),N(!0)}),[t,n]);if(ce)return s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(y.default,{message:pe})))));var be=d.get(oe,"name")||"",ye=d.get(r,"publisher.settings.defaultDealFloorPrice",0);return s.default.createElement(s.Fragment,null,s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",{className:"pull-left"},"Deal requests"),s.default.createElement(b.default,{visible:C}),!C&&s.default.createElement(_.default,{deals:R,user:i,writeAccess:a.MANAGE_PUBLISHER_DEALS,approveClick:function(e){var t=R.find((function(t){return t.id===e}));K(t),Y(!0)},rejectClick:function(e){Q(e),M(!0)}})))),s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",{className:"pull-left"},"Deals"),s.default.createElement(b.default,{visible:I}),!I&&s.default.createElement(S.default,{deals:L,user:i,writeAccess:a.MANAGE_PUBLISHER_DEALS,approvalStatusClick:function(e,t){return l(void 0,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,m.Put({path:"/api/publishers/"+n+"/deals/"+e,body:t})];case 1:return r.sent(),N(!0),he.current.addNotification(p.success(s.default.createElement("span",null,"Deal ",s.default.createElement("strong",null,t.name)," ",t.approvalStatus,"."),!1)),[3,3];case 2:return r.sent(),he.current.addNotification(p.error("Error updating deal.")),[3,3];case 3:return[2]}}))}))},editClick:function(e){var t=L.find((function(t){return t.id===e}));ie(t),W(!0)},deleteClick:function(e){ne(e);var t=L.find((function(t){return t.id===e}));ue(t),D(!0)}})))),s.default.createElement(w.default,{deal:X,defaultFloorPrice:ye,show:q,onClose:function(){return Y(!1)},onSubmit:function(e,t){return l(void 0,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,m.Post({path:"/api/publishers/"+n+"/dealrequests/"+e+"/approve",body:t})];case 1:return r.sent(),Y(!1),O(!0),N(!0),he.current.addNotification(p.success(s.default.createElement("span",null,"Deal ",s.default.createElement("strong",null,t.name)," approved."),!1)),[3,3];case 2:return r.sent(),he.current.addNotification(p.error("Error approving deal.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(P.default,{deal:ae,show:H,writeAccess:a.MANAGE_PUBLISHER_DEALS,handleClose:function(){return W(!1)},handleSubmit:function(e,t,n){return l(void 0,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,m.Put({path:"/api/publishers/"+t+"/deals/"+e,body:n})];case 1:return r.sent(),W(!1),N(!0),he.current.addNotification(p.success(s.default.createElement("span",null,"Deal ",s.default.createElement("strong",null,n.name)," saved."),!1)),[3,3];case 2:return r.sent(),he.current.addNotification(p.error("Error saving deal.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(E.default,{message:"Reject deal request?",show:j,onClose:function(){return M(!1)},onConfirm:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,m.Post({path:"/api/publishers/"+n+"/dealrequests/"+$+"/reject"})];case 1:return e.sent(),he.current.addNotification(p.success(s.default.createElement("span",null,"Deal rejected."),!1)),M(!1),O(!0),N(!0),[3,3];case 2:return e.sent(),he.current.addNotification(p.error("Error rejecting deal.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(E.default,{message:"Delete deal "+be,show:F,onClose:function(){return D(!1)},onConfirm:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,m.Delete({path:"/api/publishers/"+n+"/deals/"+te})];case 1:return e.sent(),he.current.addNotification(p.success(s.default.createElement("span",null,"Deal ",oe.name," deleted."),!1)),D(!1),N(!0),[3,3];case 2:return e.sent(),D(!1),he.current.addNotification(p.error("Error deleting deal.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(f.default,{ref:he}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=l(n(0)),d=l(n(1)),f=n(2),p=s(n(14)),m=l(n(23)),h=s(n(17)),g=l(n(15)),v=s(n(3));t.default=function(e){var t="publisher-deal-requests-table",n=c.useState(1),a=n[0],i=n[1],l=c.useState(g.getInitialSizePerPage(t,e.user)),s=l[0],b=l[1],y=c.useState({dataField:"id",order:"desc"}),E=y[0],_=y[1],w=function(e,t){_({dataField:e,order:t})},S=function(e,t){i(e)},P=function(n,r){g.storeSizePerPage(n,t,e.user),b(n)},C=function(t,n){return n.writeAccess?c.default.createElement(f.Button,{size:"sm",variant:"primary",onClick:function(){!function(t,n){o(void 0,void 0,void 0,(function(){return u(this,(function(t){return e.approveClick(n.id,n.publisherId),[2]}))}))}(0,n)}},"APPROVE"):null},O=function(t,n){return n.writeAccess?c.default.createElement(f.Button,{size:"sm",variant:"primary",onClick:function(){!function(t,n){o(void 0,void 0,void 0,(function(){return u(this,(function(t){return e.rejectClick(n.id,n.publisherId),[2]}))}))}(0,n)}},"REJECT"):null},x=function(){return e.deals.map((function(t){return d.assign({writeAccess:e.writeAccess},t)}))},I=m.Search.SearchBar,N=x(),A=[{dataField:"id",text:"#",sort:!0,onSort:w,sortCaret:g.columnSort},{dataField:"publisherId",text:"#",hidden:!0},{dataField:"adType",text:"Ad type",sort:!0,onSort:w,sortCaret:g.columnSort,formatter:g.undefinedFormatter},{dataField:"organizationName",text:"Organization",sort:!0,onSort:w,sortCaret:g.columnSort,formatter:g.undefinedFormatter},{dataField:"agencyName",text:"Agency",sort:!0,onSort:w,sortCaret:g.columnSort,formatter:g.undefinedFormatter},{dataField:"advertiserName",text:"Advertiser",sort:!0,onSort:w,sortCaret:g.columnSort,formatter:g.undefinedFormatter},{dataField:"df1",isDummyField:!0,text:"",formatter:C,sort:!1,sortCaret:g.columnSort},{dataField:"df2",isDummyField:!0,text:"",formatter:O,sort:!1,sortCaret:g.columnSort}],j=g.getSizePerPage(s,N.length),M=N.length||30;return c.default.createElement(m.default,{keyField:"id",data:N,columns:A,search:!0},(function(e){return c.default.createElement("div",null,c.default.createElement("div",{className:"search-label-container"},c.default.createElement(v.default,{name:"search"}),c.default.createElement(I,r({},e.searchProps,{tableId:t,placeholder:"Filter records"}))),c.default.createElement(p.default,r({},e.baseProps,{id:t,classes:"table-borderless",bordered:!1,striped:!0,keyField:"id",data:N,columns:A,defaultSorted:[E],pagination:h.default({page:(n=g.getLastPage(x(),s),a>n?n:a),sizePerPage:j,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:M}],onPageChange:S,onSizePerPageChange:P})})));var n}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=u(n(11)),d=n(2),f=i(n(1)),p=u(n(35)),m=i(n(7)),h=u(n(3));t.default=function(e){var t=c.default().add(1,"years").endOf("day"),n=s.useState(!1),r=n[0],a=n[1],i=s.useState(""),u=i[0],g=i[1],v=s.useState(e.defaultFloorPrice),b=v[0],y=v[1],E=s.useState(t),_=E[0],w=E[1],S=s.useState({error:!1,message:""}),P=S[0],C=S[1];s.useEffect((function(){y(e.defaultFloorPrice)}),[e.defaultFloorPrice]);var O=function(){x(),e.onClose()};function x(){g(""),w(t),y(e.defaultFloorPrice),C({error:!1,message:""}),a(!1)}var I=f.get(e,"deal.description","");return s.default.createElement(d.Modal,{show:e.show,onHide:O,onEntering:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(e){return x(),[2]}))}))},backdrop:"static"},s.default.createElement(d.Modal.Header,{closeButton:!0},s.default.createElement(d.Modal.Title,null,"Approve deal")),s.default.createElement(d.Modal.Body,null,s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12"},s.default.createElement(d.Form.Group,{controlId:"dealrequest-name"},s.default.createElement(d.Form.Label,null,"Message from buyer"),s.default.createElement(d.Form.Control,{as:"textarea",readOnly:!0,type:"text",rows:3,value:I})),s.default.createElement(d.Form.Group,{controlId:"dealrequest-name"},s.default.createElement(d.Form.Label,null,"Name *"),s.default.createElement(d.Form.Control,{autoFocus:!0,type:"text",isInvalid:P.error,value:u,onChange:function(e){var t=e.target.value,n=m.required(t);g(t),C(n)}}),P.error&&s.default.createElement(d.Form.Control.Feedback,{type:"invalid"},P.message)),s.default.createElement(d.Form.Group,{controlId:"dealrequest-floorprice"},s.default.createElement(d.Form.Label,null,"Deal floor price *"),s.default.createElement(d.Form.Control,{required:!0,type:"number",step:"0.01",min:"0",value:b.toString(),onChange:function(e){return y(parseFloat(e.target.value))}})),s.default.createElement(d.Form.Label,null,"Expires"),s.default.createElement(d.InputGroup,null,s.default.createElement(d.InputGroup.Prepend,null,s.default.createElement(d.InputGroup.Text,null,s.default.createElement(h.default,{name:"calendar"}))),s.default.createElement(p.default,{dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm:ss",value:_,onChange:function(e){w(e)},isValidDate:function(e){return c.default(e).isAfter()}}))))),s.default.createElement(d.Modal.Footer,null,s.default.createElement(d.Button,{variant:"light",size:"sm",onClick:O},"CANCEL"),s.default.createElement(d.Button,{variant:"primary",size:"sm",onClick:function(){var t=m.required(u);if(t.error)C(t);else{a(!0);var n=f.get(e,"deal.id");e.onSubmit(n,{name:u,floorPrice:b,expirationDate:_.format("YYYY-MM-DD HH:mm:ss")})}},disabled:r},"SAVE")))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(0)),s=l(n(1)),c=o(n(11)),d=n(2),f=o(n(14)),p=l(n(23)),m=o(n(17)),h=o(n(3)),g=l(n(15));t.default=function(e){var t="publisher-deals-table",n=u.useState(1),a=n[0],i=n[1],l=u.useState(g.getInitialSizePerPage(t,e.user)),o=l[0],v=l[1],b=u.useState({dataField:"id",order:"desc"}),y=b[0],E=b[1],_=function(e,t){E({dataField:e,order:t})},w=function(e,t){i(e)},S=function(n,r){g.storeSizePerPage(n,t,e.user),v(n)},P=function(e){if(e){var t=c.default(e);return 23===t.hours()&&59===t.minutes()?t.format("YYYY-MM-DD"):t.format("YYYY-MM-DD HH:mm:ss")}return""},C=function(t,n){if(n.writeAccess){var r="approved"===t?"SUSPEND":"APPROVE";return u.default.createElement(d.Button,{size:"sm",variant:"primary",onClick:function(){!function(t,n){var r="approved"===t?"suspended":"approved";e.approvalStatusClick(n.id,{name:n.name,approvalStatus:r,expirationDate:n.expirationDate,floorPrice:n.floorPrice})}(t,n)}},r)}return t},O=function(t,n){return n.writeAccess?u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id)},href:"",className:"table-btn"},u.default.createElement(h.default,{name:"pencil"})):u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id)},href:"",className:"table-btn"},u.default.createElement(h.default,{name:"search-plus"}))},x=function(t,n){return n.writeAccess?u.default.createElement("a",{onClick:function(t){t.preventDefault(),e.deleteClick(n.id)},href:"",className:"table-btn"},u.default.createElement(h.default,{name:"remove"})):null},I=function(){return e.deals.map((function(t){return s.assign({writeAccess:e.writeAccess},t)}))},N=p.Search.SearchBar,A=I(),j=[{dataField:"df1",isDummyField:!0,text:"",formatter:O,headerStyle:{width:"30px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:x,headerStyle:{width:"30px"}},{dataField:"id",text:"#",sort:!0,onSort:_,sortCaret:g.columnSort},{dataField:"publisherId",text:"#",hidden:!0},{dataField:"name",text:"Name",sort:!0,onSort:_,sortCaret:g.columnSort,formatter:g.undefinedFormatter},{dataField:"adType",text:"Ad type",sort:!0,onSort:_,sortCaret:g.columnSort,formatter:g.undefinedFormatter},{dataField:"organizationName",text:"Organization",sort:!0,onSort:_,sortCaret:g.columnSort,formatter:g.undefinedFormatter},{dataField:"agencyName",text:"Agency",sort:!0,onSort:_,sortCaret:g.columnSort,formatter:g.undefinedFormatter},{dataField:"advertiserName",text:"Advertiser",sort:!0,onSort:_,sortCaret:g.columnSort,formatter:g.undefinedFormatter},{dataField:"floorPrice",text:"Floor price",sort:!0,onSort:_,sortCaret:g.columnSort,formatter:g.currencyFormatter},{dataField:"expirationDate",text:"Expires",sort:!0,onSort:_,sortCaret:g.columnSort,formatter:P},{dataField:"approvalStatus",text:"Approval status",sort:!0,onSort:_,sortCaret:g.columnSort,formatter:C}],M=g.getSizePerPage(o,A.length),k=A.length||30;return u.default.createElement(p.default,{keyField:"id",data:A,columns:j,search:!0},(function(e){return u.default.createElement("div",null,u.default.createElement("div",{className:"search-label-container"},u.default.createElement(h.default,{name:"search"}),u.default.createElement(N,r({},e.searchProps,{tableId:t,placeholder:"Filter records"}))),u.default.createElement(f.default,r({},e.baseProps,{id:t,classes:"table-borderless",bordered:!1,striped:!0,keyField:"id",data:A,columns:j,defaultSorted:[y],pagination:m.default({page:(n=g.getLastPage(I(),o),a>n?n:a),sizePerPage:M,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:k}],onPageChange:w,onSizePerPageChange:S})})));var n}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(11)),s=n(2),c=i(n(1)),d=l(n(35)),f=i(n(7)),p=l(n(3));t.default=function(e){var t=u.default().add(1,"years").endOf("day"),n=o.useState(!1),r=n[0],a=n[1],i=o.useState(""),l=i[0],m=i[1],h=o.useState(0),g=h[0],v=h[1],b=o.useState(t),y=b[0],E=b[1],_=o.useState({error:!1,message:""}),w=_[0],S=_[1],P=function(){m(""),E(t),v(0),S({error:!1,message:""}),a(!1),e.handleClose()};return o.default.createElement(s.Modal,{show:e.show,onHide:P,onEntering:function(){var n=c.get(e,"deal.name")||"",r=c.get(e,"deal.expirationDate");m(n),E(r?u.default(r):t),v(c.get(e,"deal.floorPrice",0)),a(!1)},backdrop:"static"},o.default.createElement(s.Modal.Header,{closeButton:!0},o.default.createElement(s.Modal.Title,null,"Deal settings")),o.default.createElement(s.Modal.Body,null,o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-sm-12"},o.default.createElement(s.Form.Group,{controlId:"deal-name"},o.default.createElement(s.Form.Label,null,"Name *"),o.default.createElement(s.Form.Control,{autoFocus:!0,readOnly:!e.writeAccess,type:"text",isInvalid:w.error,value:l,onChange:function(e){var t=e.target.value,n=f.required(t);m(t),S(n)}}),w.error&&o.default.createElement(s.Form.Control.Feedback,{type:"invalid"},w.message)),o.default.createElement(s.Form.Group,{controlId:"deal-floorprice"},o.default.createElement(s.Form.Label,null,"Deal floor price *"),o.default.createElement(s.Form.Control,{required:!0,readOnly:!e.writeAccess,type:"number",step:"0.01",min:"0",value:g.toString(),onChange:function(e){return v(parseFloat(e.target.value))}})),o.default.createElement(s.Form.Label,null,"Expires"),o.default.createElement(s.InputGroup,null,o.default.createElement(s.InputGroup.Prepend,null,o.default.createElement(s.InputGroup.Text,null,o.default.createElement(p.default,{name:"calendar"}))),o.default.createElement(d.default,{dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm:ss",inputProps:{disabled:!e.writeAccess},value:y,onChange:function(e){E(e)},isValidDate:function(e){return u.default(e).isAfter()}}))))),o.default.createElement(s.Modal.Footer,null,o.default.createElement(s.Button,{variant:"light",size:"sm",onClick:P},"CANCEL"),o.default.createElement(s.Button,{variant:"primary",size:"sm",onClick:function(){var t=f.required(l);if(t.error)S(t);else{a(!0);var n=c.get(e,"deal.id"),r=c.get(e,"deal.publisherId"),i=c.get(e,"deal.approvalStatus");e.handleSubmit(n,r,{name:l,floorPrice:g,approvalStatus:i,expirationDate:y.format("YYYY-MM-DD HH:mm:ss")})}},disabled:r||!e.writeAccess},"SAVE")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(29)),s=l(n(30)),c=l(n(31)),d=i(n(13)),f=l(n(12)),p=l(n(10)),m=l(n(26)),h=l(n(383));t.default=function(){var e=o.useContext(f.default).data;return d.getRights(e.rights).VIEW_REPORTS?o.default.createElement(o.Fragment,null,o.default.createElement(u.default,null,o.default.createElement("div",{className:"col-sm-12"},o.default.createElement(s.default,null),o.default.createElement(c.default,{id:"breadcrumb",minScope:"publisher"}))),o.default.createElement(m.default,{title:"Reports"}),o.default.createElement(h.default,null)):o.default.createElement(p.default,{message:"Access forbidden"})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=n(2),f=i(n(1)),p=u(n(11)),m=u(n(19)),h=i(n(20)),g=i(n(4)),v=i(n(8)),b=i(n(13)),y=u(n(16)),E=u(n(12)),_=u(n(3)),w=u(n(5)),S=u(n(10)),P=u(n(27)),C=u(n(384)),O=u(n(385)),x=u(n(386)),I=u(n(387)),N=u(n(39));t.default=function(){var e=c.useParams(),t=e.scope,n=e.scopeId,r=s.useContext(E.default).data,a=b.getRights(r.rights),i=s.useContext(y.default),u=s.useContext(N.default).items,A=s.useState(!0),j=A[0],M=A[1],k=s.useState({current:[],past:[]}),F=k[0],D=k[1],T=s.useState(0),R=T[0],B=T[1],G=s.useState(0),L=G[0],V=G[1],z=s.useState(null),q=z[0],Y=z[1],U=s.useState(null),H=U[0],W=U[1],J=s.useState(!1),X=J[0],K=J[1],Z=s.useState(!1),$=Z[0],Q=Z[1],ee=s.useState(!1),te=ee[0],ne=ee[1],re=s.useState(!1),ae=re[0],ie=re[1],le=s.useState(!1),oe=le[0],ue=le[1],se=s.useState(null),ce=se[0],de=se[1],fe=s.useState(-1),pe=fe[0],me=fe[1],he=s.useState(null),ge=he[0],ve=he[1],be=s.useState(!1),ye=be[0],Ee=be[1],_e=s.useState(""),we=_e[0],Se=_e[1],Pe=s.useRef(null),Ce=s.useRef(null);function Oe(){return l(this,void 0,void 0,(function(){var e,r,a,i,l;return o(this,(function(o){switch(o.label){case 0:M(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),xe(),Ce.current=new AbortController,e=v.scopedParam({scope:t,scopeId:n}),[4,g.Get({path:"/api/publisherreports/"+n,qs:e,signal:Ce.current.signal})];case 2:return r=o.sent(),a=f.partition(r,(function(e){return p.default(e.scheduleEnd).diff(p.default())>0})),i=a[0],l=a[1],D({current:i,past:l}),[3,4];case 3:return"AbortError"===o.sent().name?(Ee(!1),Se("")):(Ee(!0),Se("Error loading reports.")),[3,4];case 4:return M(!1),[2]}}))}))}function xe(){Ce.current&&Ce.current.abort()}function Ie(e,t,n){var r=F[n].find((function(t){return t.id===e}));Y(r),K(t),Q(!0)}function Ne(e,t){var n=F[t].find((function(t){return t.id===e}));me(e),ve(n),ne(!0)}function Ae(e,t){return l(this,void 0,void 0,(function(){var n;return o(this,(function(r){try{n=F[t].find((function(t){return t.id===e})),de(n),ie(!0)}catch(e){console.log(e)}return[2]}))}))}s.useEffect((function(){return xe}),[]),s.useEffect((function(){Oe()}),[t,n]);function je(e,t){var n=F[t].find((function(t){return t.id===e}));W(n),ue(!0)}if(ye)return s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(S.default,{message:we})))));var Me=f.get(ge,"name",""),ke=v.getMaxLevel(i,u);return s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",{className:"pull-left"},"Current reports"),s.default.createElement("div",{className:"pull-right"},a.MANAGE_REPORTS&&s.default.createElement(d.Button,{size:"sm",variant:"primary",className:"mr-2",onClick:function(){Q(!0),Y(null),K(!0)}},s.default.createElement(_.default,{name:"plus"})," ADD REPORT"),s.default.createElement(d.Button,{size:"sm",variant:"primary",onClick:function(){B(R+1)}},s.default.createElement(_.default,{name:"remove"})," CLEAR FILTERS")),s.default.createElement(w.default,{visible:j}),!j&&s.default.createElement(C.default,{type:"current",user:i,records:F.current,filtersCounter:R,shareClick:function(e){je(e,"current")},editClick:function(e,t){Ie(e,t,"current")},deleteClick:function(e){Ne(e,"current")},downloadClick:function(e){Ae(e,"current")}})),s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",{className:"pull-left"},"Past reports"),s.default.createElement("div",{className:"pull-right"},s.default.createElement(d.Button,{size:"sm",variant:"primary",onClick:function(){V(L+1)}},s.default.createElement(_.default,{name:"remove"})," CLEAR FILTERS")),s.default.createElement(w.default,{visible:j}),!j&&s.default.createElement(C.default,{type:"past",user:i,records:F.past,filtersCounter:L,shareClick:function(e){je(e,"past")},editClick:function(e,t){Ie(e,t,"past")},deleteClick:function(e){Ne(e,"past")},downloadClick:function(e){Ae(e,"past")}}))),s.default.createElement(x.default,{report:q,writeAccess:X,show:$,rights:a,scope:t,scopeId:n,maxLevel:ke,handleClose:function(){Q(!1)},handleSubmit:function(e,t){return l(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),e>0?[4,g.Put({path:"/api/reports/"+e,body:t})]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,g.Post({path:"/api/reports",body:t})];case 3:n.sent(),n.label=4;case 4:return Q(!1),Y(null),Oe(),Pe.current.addNotification(h.success(s.default.createElement("span",null,"Report ",s.default.createElement("strong",null,t.name)," saved."),!1)),[3,6];case 5:return n.sent(),Q(!1),Y(null),Pe.current.addNotification(h.error("Error saving report.")),[3,6];case 6:return[2]}}))}))}}),s.default.createElement(O.default,{report:ce,show:ae,handleClose:function(){ie(!1)}}),s.default.createElement(I.default,{report:H,show:oe,shareBaseUrl:"https://api.optoutadvertising.com/noax2",handleClose:function(){ue(!1)}}),s.default.createElement(P.default,{message:"Delete report "+Me,show:te,onClose:function(){return ne(!1)},onConfirm:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,g.Delete({path:"/api/reports/"+pe})];case 1:return e.sent(),Pe.current.addNotification(h.success(s.default.createElement("span",null,"Report ",ge.name," deleted."),!1)),ne(!1),Oe(),[3,3];case 2:return e.sent(),ne(!1),Pe.current.addNotification(h.error("Error deleting report.")),[3,3];case 3:return[2]}}))}))}}),s.default.createElement(m.default,{ref:Pe}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(14)),s=i(n(45)),c=l(n(17)),d=n(2),f=i(n(1)),p=l(n(11)),m=i(n(15)),h=l(n(3));t.default=function(e){var t="reports-table-"+e.type,n=o.useState(1),r=n[0],a=n[1],i=o.useState(m.getInitialSizePerPage(t,e.user)),l=i[0],g=i[1],v=o.useState({dataField:"id",order:"desc"}),b=v[0],y=v[1],E=o.useState(""),_=E[0],w=E[1],S=o.useState(""),P=S[0],C=S[1],O=o.useState(""),x=O[0],I=O[1],N=o.useState(""),A=N[0],j=N[1],M=o.useRef(null),k=o.useRef(null),F=o.useRef(null),D=o.useRef(null);o.useEffect((function(){M.current(""),k.current(""),F.current(""),D.current("")}),[e.filtersCounter]);var T,R,B=function(e,t){y({dataField:e,order:t})},G=function(t,n){return n.writeAccess?o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id,n.writeAccess)},href:"",className:"table-btn"},o.default.createElement(h.default,{name:"pencil"})):o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id,n.writeAccess)},href:"",className:"table-btn"},o.default.createElement(h.default,{name:"search-plus"}))},L=function(t,n){return n.writeAccess?o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.deleteClick(n.id)},href:"",className:"table-btn"},o.default.createElement(h.default,{name:"remove"})):null},V=function(t,n,r){if(n.description){var a=o.default.createElement(d.Popover,{id:"popover-trigger-hover"+r},o.default.createElement(d.Popover.Content,null,n.description));return o.default.createElement(d.OverlayTrigger,{trigger:"hover",placement:"top",overlay:a},o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id,n.writeAccess)},href:""},t))}return o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.editClick(n.id,n.writeAccess)},href:""},t)},z=function(e){return e?p.default(e).format("YYYY-MM-DD HH:mm:ss"):""},q=function(t,n){if(n.lastRun)return o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.downloadClick(n.id)},href:"",className:"table-btn mr-10"},o.default.createElement(h.default,{name:"download"}))},Y=function(t,n){return o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.shareClick(n.id)},href:"",className:"table-btn mr-10"},o.default.createElement(h.default,{name:"share"}))},U=(T={all:"root",metaAgency:"organization",agency:"agency",advertiser:"advertiser",cluster:"campaign group",campaign:"campaign"},[{dataField:"id",text:"#",hidden:!0},{dataField:"writeAccess",text:"#",hidden:!0},{dataField:"name",text:"Name",sort:!0,onSort:B,sortCaret:m.columnSort,filter:s.textFilter({id:e.type+"-name-filter",placeholder:"Search name...",defaultValue:_,getFilter:function(e){M.current=e},onFilter:function(e){w(e)}}),formatter:V},{dataField:"status",text:"Status",sort:!0,onSort:B,sortCaret:m.columnSort,filter:s.textFilter({id:e.type+"-status-filter",placeholder:"Search status...",defaultValue:P,getFilter:function(e){k.current=e},onFilter:function(e){C(e)}})},{dataField:"level",text:"Level",sort:!0,onSort:B,sortCaret:m.columnSort,formatter:function(e){return T[e]},filter:s.selectFilter({id:e.type+"-level-filter",options:T,defaultValue:x,getFilter:function(e){F.current=e},onFilter:function(e){I(e)}})},{dataField:"owner",text:"Entity",sort:!0,onSort:B,sortCaret:m.columnSort,filter:s.textFilter({id:e.type+"-owner-filter",placeholder:"Search entity...",defaultValue:A,getFilter:function(e){D.current=e},onFilter:function(e){j(e)}})},{dataField:"lastRun",text:"Latest run",sort:!0,onSort:B,sortCaret:m.columnSort,formatter:z},{dataField:"df1",isDummyField:!0,text:"",formatter:q,headerStyle:{width:"30px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:Y,headerStyle:{width:"30px"}},{dataField:"df3",isDummyField:!0,text:"",formatter:G,headerStyle:{width:"30px"}},{dataField:"df4",isDummyField:!0,text:"",formatter:L,headerStyle:{width:"30px"}}]),H=e.records.map((function(e){var t=f.pick(e,["id","name","status","description","writeAccess","lastRun"]),n=f.get(e,"scope.scope"),r=f.get(e,"scope.owner");return f.assign(t,{level:n,owner:r})})),W=m.getSizePerPage(l,H.length),J=e.records.length||30;return o.default.createElement(u.default,{id:t,filter:s.default(),classes:"table-borderless",bordered:!1,hover:!0,striped:!0,keyField:"id",data:H,columns:U,defaultSorted:[b],pagination:c.default({page:(R=m.getLastPage(e.records,l),r>R?R:r),sizePerPage:W,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:J}],onPageChange:function(e,t){a(e)},onSizePerPageChange:function(n,r){m.storeSizePerPage(n,t,e.user),g(n)}})})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(2),d=u(n(11)),f=i(n(4)),p=u(n(10)),m=u(n(5));t.default=function(e){var t=s.useState([]),n=t[0],r=t[1],a=s.useState(!0),i=a[0],u=a[1],h=s.useState(!1),g=h[0],v=h[1],b=s.useState(""),y=b[0],E=b[1];return e.report?s.createElement(c.Modal,{size:"lg",show:e.show,onHide:e.handleClose,onEntering:function(){return l(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:u(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,f.Get({path:"/api/reports/"+e.report.id+"/instances"})];case 2:return t=n.sent(),r(t),v(!1),E(""),[3,4];case 3:return n.sent(),v(!0),E("Error loading report versions."),[3,4];case 4:return u(!1),[2]}}))}))},backdrop:"static"},s.createElement(c.Modal.Header,{closeButton:!0},s.createElement(c.Modal.Title,null,"Report versions: ",e.report.name)),s.createElement(c.Modal.Body,null,s.createElement(m.default,{visible:i}),0===n.length&&!i&&s.createElement("div",null,"There are no versions of this report to download."),n.length>0&&!i&&s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-12"},s.createElement("div",{style:{overflowX:"auto"}},s.createElement("table",{className:"table table-striped"},s.createElement("thead",null,s.createElement("th",null,"Created"),s.createElement("th",null,"Status")),s.createElement("tbody",null,n.map((function(t,n){return s.createElement("tr",{key:"item-"+n},s.createElement("td",null,s.createElement("a",{href:"/api/reports/"+e.report.id+"/instances/"+t.id+"/download"},d.default(t.created).format("YYYY-MM-DD HH:mm:ss"))),s.createElement("td",null,t.status))}))))))),g&&s.createElement(p.default,{message:y})),s.createElement(c.Modal.Footer,null,s.createElement(c.Button,{onClick:e.handleClose},"CANCEL"))):null}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(0)),d=n(2),f=s(n(9)),p=s(n(38)),m=s(n(35)),h=i(n(1)),g=s(n(61)),v=s(n(11)),b=i(n(7)),y=i(n(4)),E=i(n(8)),_=i(n(49)),w=s(n(50)),S=s(n(3)),P=s(n(32));t.default=function(e){var t=h.get(e,"report.id",-1),n=(h.get(e,"report.scope.owner",""),h.get(e,"report.scope.scopeId")||-1),r=[{value:"xlsx",label:"Excel"},{value:"pdf",label:"PDF"},{value:"csv",label:"CSV"}],a=[{value:"P1D",label:"One day"},{value:"P1W",label:"One week"},{value:"P2W",label:"Two weeks"},{value:"this month",label:"This month"},{value:"P1M",label:"One month"},{value:"period",label:"Custom period"},{value:"range",label:"Custom date range"}],i=[{value:"D",label:"Days"},{value:"W",label:"Weeks"},{value:"M",label:"Months"}],s=[{value:"P1D",label:"Day"},{value:"P1W",label:"Week"},{value:"P2W",label:"Two weeks"},{value:"P1M",label:"Month"}],C=c.useState(!1),O=C[0],x=C[1],I=c.useState(!1),N=(I[0],I[1]),A=c.useState(""),j=A[0],M=A[1],k=c.useState(""),F=k[0],D=k[1],T=c.useState(-1),R=T[0],B=T[1],G=c.useState([{value:-1,label:""}]),L=G[0],V=G[1],z=c.useState(r[0].value),q=z[0],Y=z[1],U=c.useState(a[0].value),H=U[0],W=U[1],J=c.useState(i[0].value),X=J[0],K=J[1],Z=c.useState(""),$=Z[0],Q=Z[1],ee=c.useState(null),te=ee[0],ne=ee[1],re=c.useState(null),ae=re[0],ie=re[1],le=c.useState(!1),oe=le[0],ue=le[1],se=c.useState([]),ce=se[0],de=se[1],fe=c.useState({}),pe=fe[0],me=fe[1],he=c.useState(!1),ge=he[0],ve=he[1],be=c.useState(s[0].value),ye=be[0],Ee=be[1],_e=c.useState(null),we=_e[0],Se=_e[1],Pe=c.useState(null),Ce=Pe[0],Oe=Pe[1],xe=c.useState([]),Ie=xe[0],Ne=xe[1],Ae=c.useState({error:!1,message:""}),je=Ae[0],Me=Ae[1],ke=c.useState({error:!1,message:""}),Fe=ke[0],De=ke[1],Te=c.useState({error:!1,message:""}),Re=Te[0],Be=Te[1],Ge=c.useState({error:!1,message:""}),Le=Ge[0],Ve=Ge[1],ze=c.useState({error:!1,message:""}),qe=ze[0],Ye=ze[1];function Ue(e,t){return l(this,void 0,void 0,(function(){var n,r;return o(this,(function(a){switch(a.label){case 0:return n={scope:e},"all"!==e&&(n.scopeId=t),[4,_.getFilterAttributes(n)];case 1:return r=a.sent(),me(r),[2]}}))}))}function He(){return l(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(a){switch(a.label){case 0:return[4,y.Get({path:"/api/publisherReportTemplates/"+e.scopeId})];case 1:return t=a.sent(),n=t.map((function(e){return{value:e.id,label:e.name}})),V(n),t.length>0&&(r=h.get(e,"report.templateId",t[0].id),B(r)),[2]}}))}))}function We(n){var r=b.required(j),a={error:!1,message:""},i={error:!1,message:""};"period"===H&&(a=b.required($)),"range"!==H||te||(i={error:!0,message:"Start date is required"});var l=function(){var e={error:!1,message:""};return we&&Ce?we.isAfter(Ce)&&(e={error:!0,message:"End date should be same or after start date."}):e={error:!0,message:"Please fill out start/end date"},e}();if(r.error||a.error||i.error||l.error)Me(r),De(a),Be(i),Ye(l);else{x(!0);var o=Ie.map((function(e){return e.value})),u="period"===H?"P"+$+X:"range"===H?v.default(te).format("YYYY-MM-DD")+"/"+(ae?v.default(ae).format("YYYY-MM-DD"):""):H,s=_.getFilters(ce);if(t>0){var c={templateId:R,name:j,description:F,output:q,dateRange:u,includeCurrentDay:oe,filters:s,scheduleEvery:ye,emailTo:o,scheduled:ge,emailAttachments:!0,needsRun:n};we&&(c.scheduleStart=we.utc().format()),Ce&&(c.scheduleEnd=Ce.utc().format()),e.handleSubmit(t,c)}else{c={templateId:R,name:j,description:F,scope:{scope:"publisher",scopeId:e.scopeId},output:q,dateRange:u,includeCurrentDay:oe,filters:s,scheduleEvery:ye,emailTo:o,scheduled:ge,emailAttachments:!0,needsRun:n};we&&(c.scheduleStart=we.utc().format()),Ce&&(c.scheduleEnd=Ce.utc().format()),e.handleSubmit(t,c)}}}var Je=function(e){var t=ce.concat();t.length>0&&(t.splice(e,1),de(t))},Xe=function(e,t){var n=ce.concat();n[e]=t,de(n)},Ke=[{value:-1,label:"Select dimension"}].concat(E.attributeIdOptions(pe));return c.default.createElement(d.Modal,{size:"lg",show:e.show,onHide:e.handleClose,onEntering:function(){return l(void 0,void 0,void 0,(function(){var t,l,u,c,d;return o(this,(function(o){switch(o.label){case 0:return x(!1),N(!1),Me({error:!1,message:""}),De({error:!1,message:""}),Ve({error:!1,message:""}),Ye({error:!1,message:""}),e.report?[4,Ue("publisher",n)]:[3,3];case 1:return o.sent(),M(e.report.name),D(e.report.description),Y(e.report.output),[4,He()];case 2:return o.sent(),function(){var t=h.get(e,"report.dateRange");if(void 0!==t){if(a.map((function(e){return e.value})).indexOf(t)>-1)W(t);else{var n=t.split("/");if(2===n.length)W("range"),ne(v.default(n[0])),""!==n[1]?ie(v.default(n[1])):ie(null);else{var r=v.default.duration(t);if(v.default.isDuration(r)){W("period");var i=r.days(),l=r.weeks(),o=r.months();i>0?(K("D"),Q(i.toString())):l>0?(K("W"),Q(l.toString())):o>0&&(K("M"),Q(o.toString()))}}}}}(),ue(e.report.includeCurrentDay),t=_.getStatisticFilters(e.report.filters||[]),de(t),ve(e.report.scheduled),Ee(e.report.scheduleEvery),l=h.get(e,"report.scheduleStart"),u=h.get(e,"report.scheduleEnd"),Se(l?v.default(l):null),Oe(u?v.default(u):null),c=h.get(e,"report.emailTo",[]).map((function(e){return{value:e,label:e}})),Ne(c),[3,5];case 3:return M(""),D(""),[4,He()];case 4:o.sent(),Y(r[0].value),W(a[0].value),K(i[0].value),Q(""),ne(null),ie(null),ue(!1),de([]),ve(!1),Ee(s[0].value),d=v.default().hour()<9?v.default().hour(9).minute(0).second(0):v.default().add(1,"day").hour(9).minute(0).second(0),Se(d),Oe(d),Ne([]),o.label=5;case 5:return[2]}}))}))},backdrop:"static"},c.default.createElement(d.Modal.Header,{closeButton:!0},c.default.createElement(d.Modal.Title,null,"Report settings")),c.default.createElement(d.Modal.Body,null,c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Form.Group,{controlId:"report-name"},c.default.createElement(d.Form.Label,null,"Name *"),c.default.createElement(d.Form.Control,{autoFocus:!0,readOnly:!e.writeAccess,isInvalid:je.error,type:"text",value:j,onChange:function(e){var t=e.target.value,n=b.required(t);M(t),Me(n)}}),je.error&&c.default.createElement(d.Form.Control.Feedback,{type:"invalid"},je.message)),c.default.createElement(d.Form.Group,{controlId:"report-description"},c.default.createElement(d.Form.Label,null,"Description"),c.default.createElement(d.Form.Control,{as:"textarea",autoFocus:!0,disabled:!e.writeAccess,type:"text",rows:"3",value:F,onChange:function(e){D(e.target.value)}})))),c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(d.Form.Group,{controlId:"report-template"},c.default.createElement(d.Form.Label,null,"Template:"),c.default.createElement(f.default,{inputId:"react-select-report-template",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isDisabled:!e.writeAccess,value:L.find((function(e){return e.value===R})),onChange:function(e){B(e.value)},options:L}))),c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(d.Form.Group,{controlId:"report-output"},c.default.createElement(d.Form.Label,null,"Output:"),c.default.createElement(f.default,{inputId:"react-select-report-output",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isDisabled:!e.writeAccess,value:r.find((function(e){return e.value===q})),onChange:function(e){Y(e.value)},options:r}))),"csv"===q&&c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Alert,{variant:"info"},c.default.createElement(S.default,{name:"info-circle"})," ",c.default.createElement("strong",null,"Note: ")," only the first table of a template is outputted as CSV."))),c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Form.Group,{controlId:"report-range"},c.default.createElement(d.Form.Label,null,"Range:"),c.default.createElement(f.default,{inputId:"react-select-report-range",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isDisabled:!e.writeAccess,value:a.find((function(e){return e.value===H})),onChange:function(e){W(e.value)},options:a})))),"period"===H&&c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(d.Form.Group,null,c.default.createElement(d.Form.Control,{id:"range-unit-count",readOnly:!e.writeAccess,required:!0,type:"number",min:"0",isInvalid:Fe.error,value:$,onChange:function(e){var t=e.target.value;if(Q(t),"period"===H){var n=b.required(t);De(n)}else De({error:!1,message:""})}}),Fe.error&&c.default.createElement(d.Form.Control.Feedback,{type:"invalid"},Fe.message))),c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(f.default,{inputId:"react-select-unit",isDisabled:!e.writeAccess,className:"react-select-container",classNamePrefix:"react-select",onChange:function(e){K(e.value)},value:i.find((function(e){return e.value===X})),options:i}))),"range"===H&&c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-6 px-1 pb-2"},c.default.createElement(d.Form.Label,null,"Start date"),c.default.createElement(d.InputGroup,null,c.default.createElement(d.InputGroup.Prepend,null,c.default.createElement(d.InputGroup.Text,null,c.default.createElement(S.default,{name:"calendar"}))),c.default.createElement(m.default,{inputProps:{disabled:!e.writeAccess},dateFormat:"YYYY-MM-DD",timeFormat:!1,onChange:function(e){ne(e),Be(e?{error:!1,message:""}:{error:!0,message:"Start date is required"})},value:te}),Re.error&&c.default.createElement(d.Form.Control.Feedback,{type:"invalid"},Re.message))),c.default.createElement("div",{className:"col-lg-6 px-1 pb-2"},c.default.createElement(d.Form.Label,null,"End date"),c.default.createElement(d.InputGroup,null,c.default.createElement(d.InputGroup.Prepend,null,c.default.createElement(d.InputGroup.Text,null,c.default.createElement(S.default,{name:"calendar"}))),c.default.createElement(m.default,{inputProps:{disabled:!e.writeAccess},dateFormat:"YYYY-MM-DD",timeFormat:!1,onChange:function(e){ie(e)},value:ae})))),c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Form.Group,null,c.default.createElement(P.default,{id:"report-include-current",disabled:!e.writeAccess,checked:oe,onChange:function(e){ue(e)}},"Include current day")),c.default.createElement(d.Form.Group,null,c.default.createElement(d.Form.Label,null,"Filters:"),c.default.createElement("div",null,ce.map((function(t,n){return c.default.createElement(w.default,{key:"filter-"+n,index:n,filter:t,writeAccess:e.writeAccess,attributes:Ke,onChange:Xe,onDelete:Je})}))),c.default.createElement("button",{className:"mr-2 btn btn-primary btn-xs",disabled:!e.writeAccess,onClick:function(){de(u(u([],ce),[{attributeId:-1,condition:"in",values:[]}]))}},c.default.createElement(S.default,{name:"plus"})," ADD FILTER"),ce.length>0&&c.default.createElement("button",{className:"btn btn-primary btn-xs",disabled:!e.writeAccess,onClick:function(){de([])}},c.default.createElement(S.default,{name:"remove"})," CLEAR FILTERS"))),c.default.createElement("div",{className:"col-lg-12 pb-2 px-1"},c.default.createElement("div",{className:"font-weight-bold"},"Scheduling")),c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Form.Group,null,c.default.createElement(P.default,{id:"report-scheduled",disabled:!e.writeAccess,checked:ge,onChange:function(e){ve(e)}},"Active")),c.default.createElement(d.Form.Group,{controlId:"report-schedule-every"},c.default.createElement(d.Form.Label,null,"Run every:"),c.default.createElement(f.default,{inputId:"react-select-report-schedule-every",className:"react-select-container",classNamePrefix:"react-select",clearable:!1,isDisabled:!e.writeAccess,value:s.find((function(e){return e.value===ye})),onChange:function(e){Ee(e.value)},options:s})))),c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(d.Form.Label,null,"Start date"),c.default.createElement(d.InputGroup,null,c.default.createElement(d.InputGroup.Prepend,null,c.default.createElement(d.InputGroup.Text,null,c.default.createElement(S.default,{name:"calendar"}))),c.default.createElement(m.default,{inputProps:{disabled:!e.writeAccess},dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm",onChange:function(e){Se(e)},value:we}),qe.error&&c.default.createElement(d.Form.Control.Feedback,{type:"invalid"},qe.message))),c.default.createElement("div",{className:"col-lg-6 px-1"},c.default.createElement(d.Form.Label,null,"End date"),c.default.createElement(d.InputGroup,null,c.default.createElement(d.InputGroup.Prepend,null,c.default.createElement(d.InputGroup.Text,null,c.default.createElement(S.default,{name:"calendar"}))),c.default.createElement(m.default,{inputProps:{disabled:!e.writeAccess},dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm",onChange:function(e){Oe(e)},value:Ce})))),c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-12 pb-2 px-1"},c.default.createElement("div",{className:"font-weight-bold"},"Email")),c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Form.Group,{controlId:"report-emailto"},c.default.createElement(d.Form.Label,null,"To:"),c.default.createElement(p.default,{className:"react-select-container multiple",classNamePrefix:"react-select",isClearable:!0,isDisabled:!e.writeAccess,isMulti:!0,onChange:function(e,t){if("create-option"===t.action){if(e.length>0){var n=e[e.length-1].value.split(/[\s,]+/),r=h.partition(n,(function(e){return g.default.isEmail(e)})),a=r[0],i=r[1];if(a.length>0){var l=a.map((function(e){return{value:e,label:e}})),o=e.slice(0,e.length-1).concat(l);Ne(o)}i.length>0?Ve({error:!0,message:'Incorrect email format for "'+i.join(",")+'"'}):Ve({error:!1,message:""})}}else Ne(e),Ve({error:!1,message:""})},value:Ie}),Le.error&&c.default.createElement(d.Form.Control.Feedback,{type:"invalid"},Le.message))))),c.default.createElement(d.Modal.Footer,null,c.default.createElement(d.Button,{variant:"light",size:"sm",onClick:e.handleClose},"CANCEL"),c.default.createElement(d.Button,{variant:"primary",size:"sm",onClick:function(){We(!1)},disabled:O||!e.writeAccess},"SAVE"),c.default.createElement(d.Button,{variant:"primary",size:"sm",onClick:function(){We(!0)},disabled:O||!e.writeAccess},"SAVE AND RUN NOW")))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(43),d=n(2),f=n(44),p=i(n(1)),m=i(n(4)),h=u(n(10)),g=u(n(5));t.default=function(e){var t=s.useState(!0),n=t[0],r=t[1],a=s.useState(null),i=a[0],u=a[1],v=s.useState(!1),b=v[0],y=v[1],E=s.useState(!1),_=E[0],w=E[1],S=s.useState(""),P=S[0],C=S[1],O=s.useRef(null);function x(){return l(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:r(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,m.Get({path:"/api/reports/"+e.report.id+"/token"})];case 2:return t=n.sent().token,u(t),w(!1),C(""),[3,4];case 3:return n.sent(),w(!0),C("Error loading report token."),[3,4];case 4:return r(!1),[2]}}))}))}if(e.report){var I=p.isNull(i)?"":e.shareBaseUrl+"/reports/"+e.report.id+"/token/"+i;return s.createElement(d.Modal,{size:"lg",show:e.show,onHide:e.handleClose,onEntering:function(){x()},backdrop:"static"},s.createElement(d.Modal.Header,{closeButton:!0},s.createElement(d.Modal.Title,null,"Share report: ",e.report.name)),s.createElement(d.Modal.Body,null,s.createElement(g.default,{visible:n}),!n&&""!==I&&s.createElement(d.FormGroup,null,s.createElement(d.FormLabel,null,"Share report link"),s.createElement("div",{className:b?"gray-box mb-10 highlight-box":"gray-box mb-10"},I),e.report.writeAccess&&s.createElement(d.Button,{onClick:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:r(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,m.Delete({path:"/api/reports/"+e.report.id+"/token"})];case 2:return t.sent(),w(!1),C(""),[3,4];case 3:return t.sent(),w(!0),C("Error deleting report token."),[3,4];case 4:return x(),[2]}}))}))},variant:"primary",size:"sm",className:"pull-right"},"DELETE LINK"),s.createElement(f.CopyToClipboard,{text:I,onCopy:function(){y(!0),setTimeout((function(){y(!1)}),2e3)}},s.createElement("button",{ref:O,className:"btn btn-primary btn-xs pull-right mr-5"},s.createElement("i",{className:"fa fa-files-o","aria-hidden":"true"})," GET LINK")),s.createElement(d.Overlay,{target:c.findDOMNode(O.current),show:b,placement:"bottom"},s.createElement(d.Tooltip,{id:"copy-share-tooltip"},"Copied!"))),!n&&""===I&&s.createElement(s.Fragment,null,s.createElement("p",null,"No share link has been created for this report yet."),e.report.writeAccess&&s.createElement(d.Button,{onClick:function(){return l(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:r(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,m.Post({path:"/api/reports/"+e.report.id+"/token"})];case 2:return t.sent(),w(!1),C(""),[3,4];case 3:return t.sent(),w(!0),C("Error creating report token."),[3,4];case 4:return x(),[2]}}))}))},variant:"primary",size:"sm"},"CREATE LINK")),_&&s.createElement(h.default,{message:P})),s.createElement(d.Modal.Footer,null,s.createElement(d.Button,{onClick:e.handleClose},"CANCEL")))}return null}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(29)),s=l(n(30)),c=l(n(31)),d=i(n(13)),f=l(n(12)),p=l(n(10)),m=l(n(26)),h=l(n(389));t.default=function(){var e=o.useContext(f.default).data;return d.getRights(e.rights).VIEW_REPORT_TEMPLATES?o.default.createElement(o.Fragment,null,o.default.createElement(u.default,null,o.default.createElement("div",{className:"col-sm-12"},o.default.createElement(s.default,null),o.default.createElement(c.default,{id:"breadcrumb",minScope:"advertiser"}))),o.default.createElement(m.default,{title:"Report templates"}),o.default.createElement(h.default,null)):o.default.createElement(p.default,{message:"Access forbidden"})}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=l(n(0)),d=n(6),f=n(2),p=l(n(1)),m=s(n(19)),h=l(n(20)),g=l(n(4)),v=l(n(8)),b=l(n(13)),y=s(n(5)),E=s(n(10)),_=s(n(27)),w=s(n(3)),S=s(n(390)),P=s(n(12)),C=s(n(16)),O=s(n(391)),x=s(n(39));t.default=function(){var e=d.useHistory(),t=d.useRouteMatch(),n=d.useParams(),a=n.scope,i=n.scopeId,l=c.useContext(P.default).data,s=b.getRights(l.rights),I=c.useContext(C.default),N=c.useContext(x.default).items,A=c.useState(!0),j=A[0],M=A[1],k=c.useState([]),F=k[0],D=k[1],T=c.useState(0),R=T[0],B=T[1],G=c.useState(-1),L=G[0],V=G[1],z=c.useState(null),q=z[0],Y=z[1],U=c.useState(!1),H=U[0],W=U[1],J=c.useState(!1),X=J[0],K=J[1],Z=c.useState(""),$=Z[0],Q=Z[1],ee=c.useRef(null),te=c.useRef(null);function ne(){return o(this,void 0,void 0,(function(){var e,t;return u(this,(function(n){switch(n.label){case 0:M(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),te.current&&te.current.abort(),te.current=new AbortController,e=v.scopedParam({scope:a,scopeId:i}),[4,g.Get({path:"/api/publisherReportTemplates/"+i,qs:e,signal:te.current.signal})];case 2:return t=n.sent(),D(t),[3,4];case 3:return"AbortError"===n.sent().name?(K(!1),Q("")):(K(!0),Q("Error loading report templates.")),[3,4];case 4:return M(!1),[2]}}))}))}c.useEffect((function(){ne()}),[a,i]);if(X)return c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-sm-12 pt-3"},c.default.createElement("div",{className:"card"},c.default.createElement("h3",null,c.default.createElement(E.default,{message:$})))));var re=p.get(q,"name",""),ae=v.getMaxLevel(I,N),ie={rights:s,scope:a,scopeId:i,maxLevel:ae};return c.default.createElement(d.Switch,null,c.default.createElement(d.Route,{path:t.path+"/:templateId"},c.default.createElement(O.default,r({},ie))),c.default.createElement(d.Route,{path:t.path},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-sm-12 pt-3"},c.default.createElement("div",{className:"card mb-2"},c.default.createElement("h3",{className:"pull-left"},"Report templates"),c.default.createElement("div",{className:"pull-right"},s.MANAGE_REPORT_TEMPLATES&&c.default.createElement(f.Button,{variant:"primary",size:"sm",className:"mr-2",onClick:function(){e.push("/publisherreporttemplates/"+a+"/"+i+"/-1")}},c.default.createElement(w.default,{name:"plus"})," ADD TEMPLATE"),c.default.createElement(f.Button,{variant:"primary",size:"sm",onClick:function(){B(R+1)}},c.default.createElement(w.default,{name:"remove"})," CLEAR FILTERS")),c.default.createElement(y.default,{visible:j}),!j&&c.default.createElement(S.default,{records:F,filtersCounter:R,user:I,scope:a,scopeId:i,deleteClick:function(e){var t=F.find((function(t){return t.id===e}));V(e),Y(t),W(!0)}}))),c.default.createElement(_.default,{message:"Delete template "+re,show:H,onClose:function(){return W(!1)},onConfirm:function(){return o(void 0,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,g.Delete({path:"/api/reportTemplates/"+L})];case 1:return e.sent(),ee.current.addNotification(h.success(c.default.createElement("span",null,"Template ",q.name," deleted."),!1)),W(!1),ne(),[3,3];case 2:return e.sent(),W(!1),ee.current.addNotification(h.error("Error deleting template.")),[3,3];case 3:return[2]}}))}))}}),c.default.createElement(m.default,{ref:ee}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(6),s=l(n(14)),c=i(n(45)),d=l(n(17)),f=n(2),p=i(n(1)),m=l(n(11)),h=i(n(15)),g=l(n(3));t.default=function(e){var t="report-templates-table",n=o.useState(1),r=n[0],a=n[1],i=o.useState(h.getInitialSizePerPage(t,e.user)),l=i[0],v=i[1],b=o.useState({dataField:"id",order:"desc"}),y=b[0],E=b[1],_=o.useState(""),w=_[0],S=_[1],P=o.useState(""),C=P[0],O=P[1],x=o.useState(""),I=x[0],N=x[1],A=o.useRef(null),j=o.useRef(null),M=o.useRef(null);o.useEffect((function(){A.current(""),j.current(""),M.current("")}),[e.filtersCounter]);var k,F,D=function(e,t){E({dataField:e,order:t})},T=function(t,n){return n.writeAccess?o.default.createElement(u.Link,{to:"/publisherreporttemplates/"+e.scope+"/"+e.scopeId+"/"+n.id},o.default.createElement(g.default,{name:"pencil"})):o.default.createElement(u.Link,{to:"/publisherreporttemplates/"+e.scope+"/"+e.scopeId+"/"+n.id},o.default.createElement(g.default,{name:"search-plus"}))},R=function(t,n){return n.writeAccess?o.default.createElement("a",{onClick:function(t){t.preventDefault(),e.deleteClick(n.id)},href:"",className:"table-btn"},o.default.createElement(g.default,{name:"remove"})):null},B=function(t,n,r){if(n.description){var a=o.default.createElement(f.Popover,{id:"popover-trigger-hover"+r},o.default.createElement(f.Popover.Content,null,n.description));return o.default.createElement(f.OverlayTrigger,{trigger:"hover",placement:"top",overlay:a},o.default.createElement(u.Link,{to:"/publisherreporttemplates/"+e.scope+"/"+e.scopeId+"/"+n.id},t))}return o.default.createElement(u.Link,{to:"/publisherreporttemplates/"+e.scope+"/"+e.scopeId+"/"+n.id},t)},G=function(e){return e?m.default(e).format("YYYY-MM-DD HH:mm:ss"):""},L=(k={publisher:"publisher"},[{dataField:"id",text:"#",hidden:!0},{dataField:"writeAccess",text:"#",hidden:!0},{dataField:"name",text:"Name",sort:!0,onSort:D,sortCaret:h.columnSort,filter:c.textFilter({id:"name-filter",placeholder:"Search name...",defaultValue:w,getFilter:function(e){A.current=e},onFilter:function(e){S(e)}}),formatter:B},{dataField:"level",text:"Level",sort:!0,onSort:D,sortCaret:h.columnSort,formatter:function(e){return k[e]},filter:c.selectFilter({id:"level-filter",options:k,defaultValue:C,getFilter:function(e){j.current=e},onFilter:function(e){O(e)}})},{dataField:"owner",text:"Entity",sort:!0,onSort:D,sortCaret:h.columnSort,filter:c.textFilter({id:"owner-filter",placeholder:"Search entity...",defaultValue:I,getFilter:function(e){M.current=e},onFilter:function(e){N(e)}})},{dataField:"creationDate",text:"Created",sort:!0,onSort:D,sortCaret:h.columnSort,formatter:G},{dataField:"df1",isDummyField:!0,text:"",formatter:T,headerStyle:{width:"30px"}},{dataField:"df2",isDummyField:!0,text:"",formatter:R,headerStyle:{width:"30px"}}]),V=e.records.map((function(e){var t=p.pick(e,["id","name","description","writeAccess","creationDate"]),n=p.get(e,"scope.scope"),r=p.get(e,"scope.owner");return p.assign(t,{level:n,owner:r})})),z=h.getSizePerPage(l,V.length),q=e.records.length||30;return o.default.createElement(s.default,{id:t,filter:c.default(),classes:"table-borderless",bordered:!1,hover:!0,striped:!0,keyField:"id",data:V,columns:L,defaultSorted:[y],pagination:d.default({page:(F=h.getLastPage(e.records,l),r>F?F:r),sizePerPage:z,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:q}],onPageChange:function(e,t){a(e)},onSizePerPageChange:function(n,r){h.storeSizePerPage(n,t,e.user),v(n)}})})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=u(n(19)),f=i(n(20)),p=i(n(4)),m=u(n(392));t.default=function(e){var t=c.useParams(),n=c.useHistory(),r=parseInt(t.templateId,10),a=s.useState(!1),i=a[0],u=a[1],h=s.useRef(null);return s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card mb-2"},s.default.createElement(m.default,{id:r,rights:e.rights,scope:e.scope,scopeId:e.scopeId,maxLevel:e.maxLevel,saving:i,onClose:function(){n.push("/publisherreporttemplates/"+e.scope+"/"+e.scopeId)},onSubmit:function(t,r){return l(void 0,void 0,void 0,(function(){return o(this,(function(a){switch(a.label){case 0:u(!0),a.label=1;case 1:return a.trys.push([1,6,,7]),t>0?[4,p.Put({path:"/api/reportTemplates/"+t,body:r})]:[3,3];case 2:return a.sent(),h.current.addNotification(f.success(s.default.createElement("span",null,"Template ",s.default.createElement("strong",null,r.name)," saved."),!1)),[3,5];case 3:return[4,p.Post({path:"/api/reportTemplates",body:r})];case 4:a.sent(),h.current.addNotification(f.success(s.default.createElement("span",null,"Template ",s.default.createElement("strong",null,r.name)," saved."),!1,(function(){n.push("/publisherreports/"+e.scope+"/"+e.scopeId)}))),a.label=5;case 5:return[3,7];case 6:return a.sent(),h.current.addNotification(f.error("Error saving template.")),[3,7];case 7:return u(!1),[2]}}))}))}}),s.default.createElement(d.default,{ref:h}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(0)),d=n(2),f=n(67),p=n(108),m=i(n(393)),h=i(n(1)),g=n(42),v=i(n(4)),b=i(n(7)),y=i(n(8)),E=i(n(49)),_=i(n(394)),w=s(n(395)),S=s(n(5)),P=s(n(50)),C=s(n(32)),O=s(n(3)),x=s(n(10));t.default=function(e){y.getLevelOptions(e.maxLevel);var t=c.useState(!0),n=t[0],r=t[1],a=c.useState(!1),i=(a[0],a[1]),s=c.useState(""),I=s[0],N=s[1],A=c.useState(""),j=A[0],M=A[1],k=c.useState(!1),F=k[0],D=k[1],T=c.useState(""),R=(T[0],T[1]),B=c.useState(!0),G=B[0],L=B[1],V=c.useState([]),z=V[0],q=V[1],Y=c.useState({}),U=Y[0],H=Y[1],W=c.useState([]),J=W[0],X=W[1],K=c.useState({}),Z=K[0],$=K[1],Q=c.useState([]),ee=Q[0],te=Q[1],ne=c.useState([{value:-1,label:""}]),re=(ne[0],ne[1],c.useState({error:!1,message:""})),ae=re[0],ie=re[1],le=c.useState([]),oe=le[0],ue=le[1],se=c.useState(0),ce=se[0],de=se[1],fe=c.useState(!1),pe=fe[0],me=fe[1],he=c.useState(""),ge=he[0],ve=he[1];function be(e,t){return l(this,void 0,void 0,(function(){var n,r,a;return o(this,(function(i){switch(i.label){case 0:return n=Se(e,t),[4,E.getFilterAttributes(n)];case 1:return r=i.sent(),H(r),[4,_.getStatisticAttributes(n)];case 2:return a=i.sent(),$(a),[2]}}))}))}function ye(e,t,n){return l(this,void 0,void 0,(function(){var r;return o(this,(function(a){switch(a.label){case 0:return e?[4,we(t,n)]:[3,2];case 1:r=a.sent(),X(r),a.label=2;case 2:return[2]}}))}))}function Ee(e){return e.map((function(e){return h.omit(e,"key")}))}function _e(){return l(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,v.Get({path:"/api/reportTemplates/"+e.id})];case 1:return[2,t.sent()];case 2:return t.sent(),[2,null];case 3:return[2]}}))}))}function we(e,t){return l(this,void 0,void 0,(function(){var n,r,a,i,l;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=Se(e,t),[4,v.Get({path:"/api/presets",qs:n})];case 1:return r=o.sent(),a=(r||[]).filter((function(e){return"VideoStatistics"===e.groupName||"DisplayStatistics"===e.groupName})),i=h.flatMap(a,(function(e){return e.metrics})),[2,h.uniqBy(i,"fieldName").map((function(e){return{value:e.fieldName,label:e.displayName}}))];case 2:return l=o.sent(),console.log(l),[2,[]];case 3:return[2]}}))}))}function Se(e,t){var n={scope:e};return"all"!==e&&(n.scopeId=t),n}c.useEffect((function(){e.saving||function(){l(this,void 0,void 0,(function(){var t,n,a,l,u,s,c,d,f;return o(this,(function(o){switch(o.label){case 0:return r(!0),i(!1),ie({error:!1,message:""}),e.id>0?[4,_e()]:[3,6];case 1:return(t=o.sent())?(D(t.writeAccess),N(t.name),M(t.description),n=h.get(t,"scope.owner",""),R(n),d="publisher",f=e.scopeId,[4,be(d,f)]):[3,4];case 2:return o.sent(),[4,ye(t.writeAccess,d,f)];case 3:return o.sent(),a=h.get(t,"template.frontPage",!1),L(a),l=h.get(t,"template.filters",[]),u=E.getStatisticFilters(l||[]),q(u),p=h.get(t,"template.tabs")||[],s=p.map((function(e){return h.assign(e,{key:g.v4()})})),te(s),de(0),c=s.map((function(e){return!0})),ue(c),[3,5];case 4:me(!0),ve("Error loading template."),o.label=5;case 5:return r(!1),[3,9];case 6:return me(!1),ve(""),r(!1),D(!0),N(""),M(""),d="publisher",f=e.scopeId,[4,be(d,f)];case 7:return o.sent(),[4,ye(!0,d,f)];case 8:o.sent(),L(!0),q([]),te([]),ue([]),o.label=9;case 9:return[2]}var p}))}))}()}),[e.id,e.saving]);var Pe=function(e){var t=z.concat();t.length>0&&(t.splice(e,1),q(t))},Ce=function(e,t){var n=z.concat();n[e]=t,q(n)},Oe=function(e,t,n){var r=h.cloneDeep(ee);r[e]=t,te(r);var a=oe.concat();a[e]=n,ue(a)},xe=function(e){var t=h.cloneDeep(ee);if(t.length>0){de(ce>=1?ce-1:0),t.splice(e,1),te(t);var n=oe.concat();n.splice(e,1),ue(n)}},Ie=function(e){de(e)},Ne=[{value:-1,label:"Select dimension"}].concat(y.attributeIdOptions(U)),Ae=_.statisticAttributeOptions(Z);return pe?c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-lg-12"},c.default.createElement(x.default,{message:ge})),c.default.createElement("div",{className:"col-lg-12"},c.default.createElement("div",{className:"pull-right"},c.default.createElement(d.Button,{variant:"light",size:"sm",className:"mr-2",onClick:e.onClose},"CANCEL")))):c.default.createElement(c.Fragment,null,c.default.createElement(S.default,{visible:n}),!n&&c.default.createElement(c.Fragment,null,c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement("div",{className:"pull-left"},c.default.createElement("h3",null,"Template settings: ",I)),c.default.createElement("div",{className:"pull-right"},c.default.createElement(d.Button,{variant:"light",size:"sm",className:"mr-2",onClick:e.onClose},"CANCEL"),c.default.createElement(d.Button,{variant:"primary",size:"sm",className:"mr-3",onClick:function(){var t=b.required(I),n=oe.indexOf(!1)>-1,r=E.getFilters(z);if(t.error||n)ie(t);else if(e.id>0){var a={id:e.id,name:I,description:j,template:{title:I,frontPage:G,filters:r,tabs:Ee(ee)}};e.onSubmit(e.id,a)}else{(a={name:I,description:j,scope:{scope:"publisher",scopeId:e.scopeId},template:{title:I,frontPage:G,filters:r,tabs:Ee(ee)}}).scope.scopeId=e.scopeId,e.onSubmit(e.id,a)}},disabled:e.saving||!F},"SAVE")))),c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Form.Group,{controlId:"template-name"},c.default.createElement(d.Form.Label,null,"Name *"),c.default.createElement(d.Form.Control,{autoFocus:!0,readOnly:!F,isInvalid:ae.error,type:"text",value:I,onChange:function(e){var t=e.target.value,n=b.required(t);N(t),ie(n)}}),ae.error&&c.default.createElement(d.Form.Control.Feedback,{type:"invalid"},ae.message)),c.default.createElement(d.Form.Group,{controlId:"template-description"},c.default.createElement(d.Form.Label,null,"Description"),c.default.createElement(d.Form.Control,{as:"textarea",disabled:!F,type:"text",rows:"3",value:j,onChange:function(e){M(e.target.value)}})))),c.default.createElement("div",{className:"row no-gutters"},c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Form.Group,null,c.default.createElement(C.default,{id:"template-frontpage",disabled:!F,checked:G,onChange:function(e){L(e)}},"Add front tab with settings")),c.default.createElement(d.Form.Group,null,c.default.createElement(d.Form.Label,null,"Filters:"),c.default.createElement("div",null,z.map((function(e,t){return c.default.createElement(P.default,{key:"filter-"+t,index:t,filter:e,writeAccess:F,attributes:Ne,onChange:Ce,onDelete:Pe})}))),c.default.createElement("button",{className:"mr-2 btn btn-primary btn-xs",onClick:function(){q(u(u([],z),[{attributeId:-1,condition:"in",values:[]}]))},disabled:!F},c.default.createElement(O.default,{name:"plus"})," ADD FILTER"),z.length>0&&c.default.createElement("button",{className:"btn btn-primary btn-xs",disabled:!F,onClick:function(){q([])}},c.default.createElement(O.default,{name:"remove"})," CLEAR FILTERS"))),c.default.createElement("div",{className:"col-lg-12 px-1"},c.default.createElement(d.Form.Group,null,c.default.createElement("button",{className:"mr-2 mb-2 btn btn-primary btn-xs",disabled:!F,onClick:function(){var e={name:"New tab",figures:[],key:g.v4()};de(ee.length),te(u(u([],ee),[e]))}},c.default.createElement(O.default,{name:"plus"})," ADD TAB"),ee.length>0&&F&&c.default.createElement("div",{className:"draggable-tabs"},c.default.createElement(f.Tabs,{onTabChange:Ie,activeIndex:ce,customStyle:m,onTabSequenceChange:function(e){var t=e.oldIndex,n=e.newIndex,r=p.simpleSwitch(ee,t,n);te(r),de(n)},showModalButton:!1,showArrowButton:"auto"},c.default.createElement(f.DragTabList,null,ee.map((function(e,t){return c.default.createElement(f.DragTab,{key:e.key},e.name)}))),c.default.createElement(f.PanelList,null,ee.map((function(e,t){return c.default.createElement(f.Panel,{key:e.key},c.default.createElement(w.default,{index:t,tab:e,writeAccess:F,metricOptions:J,dimensionOptions:Ae,onChange:Oe,onDelete:xe}))}))))),ee.length>0&&!F&&c.default.createElement("div",{className:"draggable-tabs readonly"},c.default.createElement(f.Tabs,{onTabChange:Ie,activeIndex:ce,customStyle:m,showModalButton:!1,showArrowButton:"auto"},c.default.createElement(f.TabList,null,ee.map((function(e,t){return c.default.createElement(f.Tab,{key:e.key},e.name)}))),c.default.createElement(f.PanelList,null,ee.map((function(e,t){return c.default.createElement(f.Panel,{key:e.key},c.default.createElement(w.default,{index:t,tab:e,writeAccess:F,metricOptions:J,dimensionOptions:Ae,onChange:Oe,onDelete:xe}))}))))))))))}},function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i,l=a(n(109)),o=n(67),u=o.styled.TabListStyle,s=o.styled.ActionButtonStyle,c=o.styled.TabStyle,d=o.styled.PanelStyle;s=l.default(s)(i||(i=r(["\n  height: 100%;\n  text-align: center;\n  border-radius: 0;\n  background: #f9f9f9;\n  border: solid 1px #eee;\n  > svg {\n    padding-top: 10px;\n    width: 25px;\n    height: auto;\n  }\n"],["\n  height: 100%;\n  text-align: center;\n  border-radius: 0;\n  background: #f9f9f9;\n  border: solid 1px #eee;\n  > svg {\n    padding-top: 10px;\n    width: 25px;\n    height: auto;\n  }\n"]))),e.exports={TabList:u,ActionButton:s,Tab:c,Panel:d}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.statisticAttributeOptions=t.getStatisticAttributes=void 0;var u=i(n(4));t.getStatisticAttributes=function(e){return l(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,u.Get({path:"/api/attributes/statistics",qs:e})];case 1:return[2,n.sent()];case 2:return t=n.sent(),console.log(t),[2,{}];case 3:return[2]}}))}))};t.statisticAttributeOptions=function(e){var t=[];for(var n in e){var r={label:n,options:e[n].map((function(e){return{value:e.name,label:e.displayName}}))};t.push(r)}return[{value:"date",label:"Per day"}].concat(t)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(0)),s=n(2),c=i(n(1)),d=i(n(7)),f=o(n(110)),p=o(n(3));t.default=function(e){var t=u.useState(e.tab.name),n=t[0],r=t[1],a=u.useState({error:!1,message:""}),i=a[0],o=a[1],m=u.useState(e.tab.figures),h=m[0],g=m[1],v=u.useState((e.tab.figures||[]).map((function(e){return!0}))),b=v[0],y=v[1];u.useEffect((function(){var t=b.indexOf(!1)>-1;e.onChange(e.index,{name:n,figures:h,key:e.tab.key},!i.error&&!t)}),[n,h]),u.useEffect((function(){r(e.tab.name),g(e.tab.figures)}),[JSON.stringify(e.tab)]);var E=function(e,t,n){var r=c.cloneDeep(h);r[e]=t,g(r);var a=b.concat();a[e]=n,y(a)},_=function(e){var t=c.cloneDeep(h);if(t.length>0){t.splice(e,1),g(t);var n=b.concat();n.splice(e,1),y(n)}};return u.default.createElement("div",{className:"card mb-3 mt-3"},u.default.createElement("div",{className:"row template-tab-row"},u.default.createElement("div",{className:"col-sm-12"},u.default.createElement(s.Form.Group,{controlId:"tab-name-"+e.index},u.default.createElement(s.Form.Label,null,"Name *"),u.default.createElement(s.Form.Control,{readOnly:!e.writeAccess,type:"text",isInvalid:i.error,value:n,onChange:function(e){var t=e.target.value,n=d.required(t);r(t),o(n)}}),i.error&&u.default.createElement(s.Form.Control.Feedback,{type:"invalid"},i.message)))),h.map((function(t,n){return u.default.createElement(f.default,{tabIndex:e.index,index:n,type:"table"===t.type?"table":"chart",figure:t,metricOptions:e.metricOptions,dimensionOptions:e.dimensionOptions,writeAccess:e.writeAccess,onChange:E,onDelete:_})})),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-12 mt-2"},u.default.createElement("div",{className:"pull-left"},u.default.createElement("button",{className:"btn btn-secondary btn-xs",disabled:!e.writeAccess,onClick:function(){e.onDelete(e.index)}},u.default.createElement(p.default,{name:"remove"})," DELETE TAB")),u.default.createElement("div",{className:"pull-right"},u.default.createElement("button",{className:"mr-2 btn btn-primary btn-xs",disabled:!e.writeAccess,onClick:function(){g(l(l([],h),[{title:"",type:"table",dimensions:["date"],metrics:[],limit:50,includeTotal:!0}]))}},u.default.createElement(p.default,{name:"plus"})," ADD TABLE"),u.default.createElement("button",{className:"btn btn-primary btn-xs",disabled:!e.writeAccess,onClick:function(){g(l(l([],h),[{title:"",type:"barchart",dimensions:["date"],metrics:[],secondaryMetrics:[],limit:50,figureWidth:17,figureHeight:17}]))}},u.default.createElement(p.default,{name:"plus"})," ADD CHART")))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=n(6),s=l(n(29)),c=l(n(30)),d=l(n(31)),f=l(n(26)),p=l(n(397)),m=l(n(41)),h=l(n(28));t.default=function(){var e=u.useHistory(),t=u.useParams(),n=t.scope,r=t.scopeId,a=o.useContext(h.default).daterange,i=a.startDate.format("YYYY-MM-DD"),l=a.endDate.format("YYYY-MM-DD");return o.useEffect((function(){e.push("/changelog/"+n+"/"+r+"?sd="+i+"&ed="+l)}),[]),o.default.createElement(o.Fragment,null,o.default.createElement(s.default,null,o.default.createElement("div",{className:"col-sm-9"},o.default.createElement(c.default,null),o.default.createElement(d.default,{id:"breadcrumb",minScope:"campaign"})),o.default.createElement("div",{className:"col-sm-3"},o.default.createElement("div",{className:"daterange-container"},o.default.createElement(m.default,null)))),o.default.createElement(f.default,{title:"Change log"}),o.default.createElement(p.default,null))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=i(n(1)),f=i(n(13)),p=i(n(4)),m=u(n(28)),h=u(n(12)),g=u(n(16)),v=u(n(10)),b=u(n(5)),y=u(n(398));t.default=function(){var e=c.useParams(),t=e.scope,n=e.scopeId,r=s.useContext(h.default).data,a=f.getRights(r.rights),i=s.useContext(g.default),u=s.useContext(m.default).daterange,E=u.startDate.format("YYYY-MM-DD"),_=u.endDate.format("YYYY-MM-DD"),w=function(){var e={level:R(),startDate:E,endDate:_};"root"!==t&&(e.id=parseInt(n,10));return e}(),S=s.useState([]),P=S[0],C=S[1],O=s.useState(!1),x=O[0],I=O[1],N=s.useState(!1),A=N[0],j=N[1],M=s.useState(""),k=M[0],F=M[1],D=s.useRef(null);function T(){D.current&&D.current.abort()}function R(){switch(t){case"root":return"adscience";case"organization":return"metaAgency";case"agency":return"customer";case"advertiser":return"advertiser";case"campaigngroup":return"cluster";case"campaign":return"campaign"}}return s.useEffect((function(){return T}),[]),s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var e,t,n,r;return o(this,(function(a){switch(a.label){case 0:I(!0),a.label=1;case 1:return a.trys.push([1,3,,4]),T(),D.current=new AbortController,[4,p.Get({path:"/api/campaigns/history",qs:w,signal:D.current.signal})];case 2:return e=a.sent(),t=["TargetingRules","Banners","Campaigns","OptimizationStrategies","CampaignSegments","Segments","Constraints","Qualifications","AttributeValueLists","Deals"],n=d.get(e,"changes",[]).filter((function(e){return t.indexOf(e.tableName)>-1})),C(n),j(!1),F(""),I(!1),[3,4];case 3:return r=a.sent(),console.log(r),"AbortError"===r.name?(j(!1),F("")):(j(!0),F("Error loading change log."),I(!1)),[3,4];case 4:return[2]}}))}))}()}),[JSON.stringify(w)]),A?s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card"},s.default.createElement("h3",null,s.default.createElement(v.default,{message:k}))))):s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12 pt-3"},s.default.createElement("div",{className:"card mb-2"},s.default.createElement("h3",null,"Change log"),s.default.createElement(b.default,{visible:x}),!x&&s.default.createElement(y.default,{user:i,rights:a,records:P,level:w.level}))))}},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},l=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&l(t,e,n);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=u(n(0)),d=n(6),f=s(n(14)),p=u(n(23)),m=s(n(17)),h=u(n(1)),g=u(n(15)),v=u(n(8)),b=n(399),y=s(n(400)),E=s(n(3)),_=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.tableId="changelog-table",r.onSort=function(e,t){r.setState({defaultSorted:{dataField:e,order:t}})},r.onSizePerPageChange=function(e,t){g.storeSizePerPage(e,r.tableId,r.props.user),r.setState({sizePerPage:e})},r.getFormatter=function(e){switch(e){case"agency":return r.agencyFormatter;case"advertiser":return r.advertiserFormatter;case"campaign":return r.campaignFormatter;case"historyAction":return r.actionFormatter;default:return g.undefinedFormatter}},r.agencyFormatter=function(e,t){return t.agencyId&&r.props.rights.VIEW_AGENCY?c.default.createElement(d.Link,{to:"/settings/agency/"+t.agencyId},e):e},r.advertiserFormatter=function(e,t){return t.advertiserId&&r.props.rights.VIEW_ADVERTISER?c.default.createElement(d.Link,{to:"/settings/advertiser/"+t.advertiserId},e):e},r.campaignFormatter=function(e,t){if(t.campaignId&&r.props.rights.VIEW_CAMPAIGN){var n=v.campaignSettingsLink("/settings/campaign/"+t.campaignId+"/general");return c.default.createElement(d.Link,{to:n},e)}return e},r.actionFormatter=function(e,t){var n=r.props.records.find((function(e){return e.id===t.id}));return n&&n.tableName?b.ActionMessage(n):"-"},r.expandRowRenderer=function(e){var t=r.props.records.find((function(t){return t.id===e.id}));return c.default.createElement(y.default,{record:t})},r.state={page:1,sizePerPage:g.getInitialSizePerPage(r.tableId,r.props.user),defaultSorted:{dataField:"timestamp",order:"desc"}},r}return a(t,e),t.prototype.metrics=function(){return"adscience"===this.props.level||"metaAgency"===this.props.level?[{col:"timestamp",label:"date"},{col:"user",label:"user"},{col:"agencyName",label:"agency",type:"agency"},{col:"advertiserName",label:"advertiser",type:"advertiser"},{col:"campaignName",label:"campaign",type:"campaign"},{col:"tableName",label:"action",type:"historyAction"}]:"customer"===this.props.level?[{col:"timestamp",label:"date"},{col:"user",label:"user"},{col:"advertiserName",label:"advertiser",type:"advertiser"},{col:"campaignName",label:"campaign",type:"campaign"},{col:"tableName",label:"action",type:"historyAction"}]:[{col:"timestamp",label:"date"},{col:"user",label:"user"},{col:"campaignName",label:"campaign",type:"campaign"},{col:"tableName",label:"action",type:"historyAction"}]},t.prototype.hiddenMetrics=function(){return[{col:"id"},{col:"agencyId"},{col:"advertiserId"},{col:"campaignId"}]},t.prototype.getColumns=function(){var e=this,t=this.hiddenMetrics().map((function(e){return{dataField:e.col,text:"#",hidden:!0}})),n=this.metrics().map((function(t){return{dataField:t.col,text:t.label||t.col,align:t.align||"left",headerAlign:t.align||"left",sort:!0,onSort:e.onSort,sortCaret:g.columnSort,formatter:e.getFormatter(t.type)}}));return t.concat(n)},t.prototype.getRows=function(){var e=this.hiddenMetrics().concat(this.metrics()).map((function(e){return e.col}));return this.props.records.map((function(t){return h.pick(t,e)}))},t.prototype.getNonExpandableRows=function(){return this.props.records.filter((function(e){return["TargetingRules","AttributeValueLists"].indexOf(e.tableName)<0})).map((function(e){return e.id}))},t.prototype.getCurrentPage=function(){var e=g.getLastPage(this.getRows(),this.state.sizePerPage);return this.state.page>e?e:this.state.page},t.prototype.getExpandRow=function(){var e=this.getNonExpandableRows();return{renderer:this.expandRowRenderer,showExpandColumn:!0,expandColumnPosition:"right",expandColumnRenderer:function(e){var t=e.expanded;e.rowKey;return e.expandable?t?c.default.createElement(E.default,{name:"chevron-up"}):c.default.createElement(E.default,{name:"chevron-down"}):null},nonExpandable:e}},t.prototype.render=function(){var e=this,t=p.Search.SearchBar,n=this.getRows(),r=this.getColumns(),a=g.getSizePerPage(this.state.sizePerPage,n.length),l=this.getExpandRow();return c.default.createElement(p.default,{keyField:"id",data:n,columns:r,search:!0},(function(o){return c.default.createElement("div",null,c.default.createElement("div",{className:"search-label-container"},c.default.createElement(E.default,{name:"search"}),c.default.createElement(t,i({},o.searchProps,{placeholder:"Filter records",tableId:e.tableId}))),c.default.createElement(f.default,i({},o.baseProps,{id:e.tableId,classes:"table-borderless",bordered:!1,hover:!0,striped:!0,keyField:"id",data:n,columns:r,expandRow:l,defaultSorted:[e.state.defaultSorted],pagination:m.default({page:e.getCurrentPage(),sizePerPage:a,showTotal:!0,prePageText:"Previous",nextPageText:"Next",sizePerPageList:[{text:"30",value:30},{text:"50",value:50},{text:"100",value:100},{text:"All",value:e.props.records.length}],onPageChange:function(t,n){e.setState({page:t})},onSizePerPageChange:e.onSizePerPageChange})})))}))},t}(c.Component);t.default=_},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionMessage=void 0;var a=r(n(11));t.ActionMessage=function(e){switch(e.tableName){case"TargetingRules":return i(e);case"Banners":return l(e);case"Campaigns":return o(e);case"OptimizationStrategies":return u(e);case"CampaignSegments":case"Segments":return s(e);case"Constraints":return c(e);case"Qualifications":return d(e);case"AttributeValueLists":return f(e);case"Deals":return p(e)}return""};var i=function(e){switch(e.type){case"create":return m(e,"created");case"update":return m(e,"updated");case"delete":return m(e,"deleted")}return""},l=function(e){switch(e.type){case"create":return h(e,"Ad","created");case"delete":return h(e,"Ad","deleted");case"field_changed":return v(e);case"field_set":return b(e)}return""},o=function(e){switch(e.type){case"create":return h(e,"Campaign","created");case"delete":return h(e,"Campaign","archived");case"restore":return h(e,"Campaign","restored");case"field_set":return y(e,"campaign");case"field_unset":return E(e,"campaign");case"field_changed":return _(e,"campaign");case"activate":return"Campaign activated";case"deactivate":return"Campaign deactivated"}return""},u=function(e){switch(e.type){case"create":return g(e,"created");case"update":return g(e,"updated");case"delete":return g(e,"deleted")}return""},s=function(e){switch(e.type){case"create":return h(e,"Segment","created");case"delete":return h(e,"Segment","deleted");case"field_set":return y(e,"segment");case"field_unset":return E(e,"segment");case"field_changed":return _(e,"segment")}return""},c=function(e){switch(e.type){case"field_set":return y(e,"constraint");case"field_unset":return E(e,"constraint");case"field_changed":return _(e,"constraint")}return""},d=function(e){switch(e.type){case"field_set":return y(e,"qualification");case"field_changed":return _(e,"qualification")}return""},f=function(e){switch(e.type){case"create":return h(e,"List","created");case"update":return h(e,"List","updated");case"delete":return h(e,"List","deleted")}return""},p=function(e){switch(e.type){case"create":return h(e,"Deal","created");case"update":return h(e,"Deal","updated");case"delete":return h(e,"Deal","deleted")}return""},m=function(e,t){var n={entity:{"-1":"Advanced rule","-2":"Rule",other:"Substrategy rule"},attribute:"for attribute"},r=[];return-10==e.data.optimizationStrategyId?"":(r.push(-1==e.data.optimizationStrategyId||-2==e.data.optimizationStrategyId?n.entity[e.data.optimizationStrategyId]:n.entity.other),r.push(n.attribute),r.push(e.data.attributeName),r.push(t),r.join(" "))},h=function(e,t,n){var r=[];return r.push(t),r.push(e.objectName),r.push(n),r.join(" ")},g=function(e,t){var n=[];return n.push("Strategy"),n.push(e.objectName),n.push(t),n.push("applying to"),n.push(e.data.percentage),n.push("% of remaining bids"),n.join(" ")},v=function(e){var t="";return t="approved"==e.data.name?"0"==e.data.value?"rejected":"approved":"active"==e.data.name?"0"==e.data.value?"activated":"deactivated":(e.data.name,void 0!==e.data.oldValue?"field "+e.data.name+" changed from "+e.data.oldValue+" to "+e.data.value:"field "+e.data.name+" changed to "+e.data.value),h(e,"Ad",t)},b=function(e){var t="";return t="approved"==e.data.name?"0"==e.data.value?"rejected":"approved":"active"==e.data.name?"0"==e.data.value?"activated":"deactivated":(e.data.name,"field "+e.data.name+" set to "+e.data.value),h(e,"Ad",t)},y=function(e,t){var n=N(e.data.name),r=O[t](e.data.name,e.data.value);return h(e,t,n+" is set to "+r)},E=function(e,t){var n=N(e.data.name);e.data.oldValue;var r=O[t](e.data.name,e.data.oldValue);return h(e,t,n+" with value "+r+" was unset")},_=function(e,t){var n=N(e.data.name),r=O[t](e.data.name,e.data.value),a=O[t](e.data.name,e.data.oldValue);return h(e,t,n+" changed from "+a+" to "+r)},w={1:"CPM",2:"CPC",3:"CPA",4:"Percentage of Ad spent"},S={1:"Image",3:"Flash",4:"HTML5",5:"Video",6:"VAST",7:"VAST"},P={8:"Conversion",9:"Subscription Page",10:"Ad Retargeting",11:"Home Page",12:"Landing Page",13:"Site Retargeting"},C={0:"impressions",1:"clicks",2:"conversions",3:"completion cost",4:"viewable impressions"},O={campaign:function(e,t){switch(e){case"mediaAgencyRevenueModel":case"revenueType":t=w[t];break;case"startTime":case"endTime":t=a.default.unix(t).format("DD/MM/YYYY HH:mm:ss");break;case"isRetargeting":t="0"===t?"Prospecting":"Retargeting";break;case"bid":t="1"===t?"Bid on everything":"Don't bid on anything";default:t=x(e,t)}return this.checkifempty(t)},banner:function(e,t){switch(e){case"approved":t="1"===t?"approved":"rejected";break;case"active":t="1"===t?"activated":"deactivated";break;case"type":t=S[t];break;default:t=x(e,t)}return this.checkifempty(t)},pixel:function(e,t){switch(e){case"type":t=P[t];break;default:t=x(e,t)}return this.checkifempty(t)},segment:function(e,t){return this.checkifempty(t)},constraint:function(e,t){return t=x(e,t),this.checkifempty(t)},qualification:function(e,t){switch(e){case"optimizationMetric":t=C[t];break;default:t=x(e,t)}return this.checkifempty(t)},goal:function(e,t){return t=x(e,t),this.checkifempty(t)},checkifempty:function(e){return""===e||"[]"===e?"-":e}},x=function(e,t){var n=t;return!0==={dailyBudget:!0,mediaAgencyRevenuePerClick:!0,mediaAgencyRevenuePerImpression:!0,mediaAgencyRevenuePerSale:!0,mediaAgencyRevenuePerLead:!0,maxBidPrice:!0,minBidPrice:!0,minBudgetPerDay:!0,minBudgetPerCampaign:!0,maxBudgetPerDay:!0,maxBudgetPerWeek:!0,maxBudgetPerMonth:!0,maxBudgetPerCampaign:!0,minRevenue:!0,minProfit:!0,maxCpm:!0,maxCpc:!0,maxCpo:!0}[e]&&(n="â‚¬"+Math.round(1e3*t/10)/100),!0==={mediaAgencyFee:!0,mediaAgencyMargin:!0,minCtr:!0,minConversionRate:!0}[e]&&(n=t+"%"),!0==={conversionsPostView:!0,conversionsPostClick:!0}[e]&&(n=t+" days"),!0==={minAgoAlreadyConverted:!0}[e]&&(n=I(t)),n},I=function(e){var t=e%1440;return Math.floor(e/1440)+" days "+Math.floor(t/60)+" hours "+t%60+" minutes"},N=function(e){var t={conversionsPostClick:"conversions post click window",conversionsPostView:"conversions post view window",minImpressions:"impressions",minClicks:"clicks",minConversions:"conversions",minRevenue:"revenue",minProfit:"profit",maxCpm:"average CPM",maxCpc:"average CPC",minCtr:"average CTR",minConversionRate:"average Conversion rate",maxCpo:"average CPO",minAgoAlreadyConverted:"unique conversions window",bid:"default action",isRetargeting:"campaign type"}[e];return void 0===t&&(t=e.replace(/([A-Z])/g," $1").toLowerCase()),t}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(0)),u=i(n(1)),s=l(n(401));t.default=function(e){var t=e.record.data,n=u.get(e.record,"data.attributeValues",[]),r=u.get(e.record,"data.addedValues",[]),a=u.get(e.record,"data.removedValues",[]);return o.default.createElement("table",{className:"action-details-table"},n.length>0&&o.default.createElement("tr",null,o.default.createElement("td",null,"Values"),o.default.createElement(s.default,{values:n})),r.length>0&&o.default.createElement("tr",null,o.default.createElement("td",null,"Added values"),o.default.createElement(s.default,{values:r})),a.length>0&&o.default.createElement("tr",null,o.default.createElement("td",null,"Removed values"),o.default.createElement(s.default,{values:a})),t&&t.consequence&&o.default.createElement("tr",null,o.default.createElement("td",null,"Consequence"),o.default.createElement("td",null,function(e){switch(e.consequence){case"0":return"No bid";case"1":return"Set bid at â‚¬"+e.minBidPrice;case"2":return"Increase bid by "+e.increaseBidBy+"%";case"3":return"Set bid range â‚¬"+e.minBidPrice+" to â‚¬"+e.maxBidPrice;case"4":return"Decrease bid by "+Math.abs(e.increaseBidBy)+"%";case"5":return"Required for  Bid"}return""}(t))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(0));t.default=function(e){var t=l.useState(!1),n=t[0],r=t[1],a=function(e){e.preventDefault(),r(!n)},i={visibleValues:e.values.slice(0,3),hiddenValues:e.values.slice(3)},o=i.visibleValues,u=i.hiddenValues;return l.default.createElement("td",null,o.map((function(e,t){return l.default.createElement("p",{key:t},e)})),e.values.length>3&&!n&&l.default.createElement("a",{href:"",onClick:a},"..."),e.values.length>3&&n&&l.default.createElement("div",null,u.map((function(e,t){return l.default.createElement("p",{key:t},e)})),l.default.createElement("a",{href:"",onClick:a},"Show less")))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(0)),l=n(2),o=n(403),u=a(n(3)),s=function(){return i.default.createElement("a",{className:"theme-adsciencelogo-container",href:""},i.default.createElement("div",{className:"ortec-logo"}),i.default.createElement("div",{className:"adscience-logo"}))};t.default=function(e){var t=e.open?"":" mini",n=e.open?"fa fa-angle-double-left":"fa fa-angle-double-right",a=function(t){(window.innerWidth||document.documentElement.clientWidth)>992&&!t.target.closest(".nav-link")&&e.onClick()};return i.default.createElement("div",{className:"sidebar clickable"+t,onClick:a},i.default.createElement(l.Navbar,{expand:"lg"},i.default.createElement(s,null),i.default.createElement(l.Navbar.Toggle,{"aria-controls":"basic-navbar-nav"},i.default.createElement(u.default,{names:["bars","lg"]})),i.default.createElement(l.Navbar.Collapse,{id:"basic-navbar-nav"},i.default.createElement(l.Nav,{as:"ul"},e.items.map((function(e,t){return i.default.createElement(l.Nav.Item,{key:t,as:"li"},i.default.createElement(o.MenuItem,r({},e)))}))),i.default.createElement(s,null)),i.default.createElement("div",{className:"sidebar-expand",onClick:a},i.default.createElement("i",{className:n,"aria-hidden":"true"}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MenuItem=void 0;var l=i(n(0)),o=n(6),u=n(2);t.MenuItem=function(e){var t=l.createElement(o.NavLink,{activeClassName:"active",className:"nav-link ripple",to:e.href},l.createElement("i",{className:e.icon,"aria-hidden":"true"}),e.child,e.name);return e.showtooltip?l.createElement(u.OverlayTrigger,{placement:"right",overlay:l.createElement(u.Tooltip,{id:"tooltip-"+e.id},e.name)},t):t}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),c=n(6),d=i(n(4)),f=u(n(39));t.default=function(e){var t=c.useParams(),n=t.page,r=t.scope,a=t.scopeId,i=s.useState([]),u=i[0],p=i[1],m=s.useState({error:!0,message:""}),h=m[0],g=m[1];return s.useEffect((function(){!function(){l(this,void 0,void 0,(function(){var e,t;return o(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),"root"!==r?[3,1]:(p([]),[3,3]);case 1:return[4,d.Get({path:"/api/frontend/navigation/"+n+"/"+r+"/"+a})];case 2:e=i.sent(),p(e),i.label=3;case 3:return g({error:!1,message:""}),[3,5];case 4:return t=i.sent(),console.log(t),p([]),g({error:!0,message:"Error loading data."}),[3,5];case 5:return[2]}}))}))}()}),[n,r,a]),s.default.createElement(f.default.Provider,{value:{items:u,loadError:h}},e.children)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),u=l(n(11)),s=l(n(28)),c=n(6),d=l(n(16));t.default=function(e){var t=c.useLocation(),n=new URLSearchParams(t.search),r=o.useContext(d.default),a=function(){var e=n.get("sd"),t=n.get("ed");if(e&&t)return{startDate:u.default(e),endDate:u.default(t)};return{startDate:u.default().startOf("month"),endDate:u.default()}}(),i=function(){var e=n.get("listattribute");if(!e){var t=r.email+"-listattribute";try{e=localStorage.getItem(t)}catch(t){e=""}}return e||""}(),l=o.useState(a),f=l[0],p=l[1],m=o.useState(parseInt(n.get("attributeId")||"0",10)),h=m[0],g=m[1],v=o.useState(parseInt(n.get("attributeId2")||"-1",10)),b=v[0],y=v[1],E=o.useState(n.getAll("filters[]")||[]),_=E[0],w=E[1],S=o.useState(n.getAll("opfilters[]")||[]),P=S[0],C=S[1],O=o.useState(n.get("opgranularity")||"P1D"),x=O[0],I=O[1],N=o.useState(n.get("tgranularity")||"PT10M"),A=N[0],j=N[1],M=o.useState(n.get("opmetric")||"impressions"),k=M[0],F=M[1],D=o.useState(n.get("tperiod")||"24h"),T=D[0],R=D[1],B=o.useState(i),G=B[0],L=B[1];var V={daterange:f,updateDaterange:function(e){p(e)},attributeId:h,updateAttributeId:function(e){g(e)},attributeId2:b,updateAttributeId2:function(e){y(e)},filters:_,updateFilters:function(e){w(e)},opfilters:P,updateOpFilters:function(e){C(e)},opgranularity:x,updateOpGranularity:function(e){I(e)},tgranularity:A,updateTGranularity:function(e){j(e)},opmetric:k,updateOpMetric:function(e){F(e)},tperiod:T,updateTPeriod:function(e){R(e)},listattribute:G,updateListattribute:function(e){L(e);var t=r.email+"-listattribute";localStorage.setItem(t,e)}};return o.default.createElement(s.default.Provider,{value:V},e.children)}},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NOAX=void 0;var l,o=n(18),u=i(n(408)),s=i(n(409)),c=i(n(410)),d=i(n(411)),f=i(n(412)),p=i(n(413)),m=i(n(414)),h=i(n(415)),g=i(n(416)),v=i(n(417)),b=i(n(418)),y=i(n(419)),E=i(n(420)),_=i(n(421)),w=i(n(422)),S=i(n(423)),P=i(n(424)),C=i(n(425)),O=i(n(426)),x=i(n(427)),I=i(n(428)),N=i(n(429)),A=i(n(430)),j=i(n(431)),M=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t}(o.Api);t.NOAX=M,l=M,[o.Api,u.default,s.default,c.default,E.default,d.default,f.default,p.default,m.default,S.default,P.default,h.default,g.default,v.default,b.default,y.default,_.default,w.default,N.default,C.default,O.default,x.default,I.default,j.default,A.default].forEach((function(e){Object.getOwnPropertyNames(e.prototype).forEach((function(t){Object.defineProperty(l.prototype,t,Object.getOwnPropertyDescriptor(e.prototype,t))}))}))},function(e,t){e.exports=require("request")},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.resetPassword=function(e){return this.Post({path:"/login/resetpassword",qs:e,contentType:"text/plain"}).then(this.handleErrors).then((function(e){return e.text()}))},t.prototype.setPassword=function(e){return this.Post({path:"/login/setpassword",body:e}).then(this.handleErrors).then((function(e){return e.text()}))},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getUser=function(e){return this.Get({path:"/users/me",credentials:e})},t.prototype.changePassword=function(e,t){return this.PostForm({path:"/users/me/password",credentials:e,body:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.twofactor=function(e,t){return this.PostForm({path:"/users/me/2fa",credentials:e,body:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.verifyCode=function(e,t){return this.PostForm({path:"/users/me/verifyCode",credentials:e,body:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getUsers=function(e,t){return this.Get({path:"/users",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.userInvite=function(e,t){return this.Post({path:"/users/invite",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.userBan=function(e,t){return this.Post({path:"/users/ban",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getOrganizations=function(e,t){return this.Get({path:"/organizations",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getOrganization=function(e,t){return this.Get({path:"/organizations/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.createOrganization=function(e,t){return this.Post({path:"/organizations",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateOrganization=function(e,t){return this.Put({path:"/organizations/"+t.id,credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.deleteOrganization=function(e,t){return this.Delete({path:"/organizations/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getAgencies=function(e,t){return this.Get({path:"/agencies",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getAgency=function(e,t){return this.Get({path:"/agencies/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.createAgency=function(e,t){return this.Post({path:"/agencies",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateAgency=function(e,t){return this.Put({path:"/agencies/"+t.id,credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.deleteAgency=function(e,t){return this.Delete({path:"/agencies/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getAdvertisers=function(e,t){return this.Get({path:"/advertisers",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getAdvertiser=function(e,t){return this.Get({path:"/advertisers/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.createAdvertiser=function(e,t){return this.Post({path:"/advertisers",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateAdvertiser=function(e,t){return this.Put({path:"/advertisers/"+t.id,credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.deleteAdvertiser=function(e,t){return this.Delete({path:"/advertisers/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getThirdPartyHosts=function(e,t){return this.Get({path:"/advertisers/"+t.id+"/banners/thirdpartyhosts",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getRetailBranches=function(e,t){return this.Get({path:"/advertisers/"+t.id+"/retailbranches",credentials:e,qs:t.data||{}}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.importRetailBranches=function(e,t){return this.Post({path:"/advertisers/"+t.id+"/retailbranches",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateRetailBranch=function(e,t){return this.Put({path:"/advertisers/"+t.id+"/retailbranches/"+t.retailBranchId,credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.deleteRetailBranch=function(e,t){return this.Delete({path:"/advertisers/"+t.id+"/retailbranches/"+t.retailBranchId,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getCampaignGroups=function(e,t){return this.Get({path:"/campaigngroups",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getCampaignGroup=function(e,t){return this.Get({path:"/campaigngroups/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.createCampaignGroup=function(e,t){return this.Post({path:"/campaigngroups",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateCampaignGroup=function(e,t){return this.Put({path:"/campaigngroups/"+t.id,credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.restoreCampaignGroup=function(e,t){return this.Put({path:"/campaigngroups/"+t.id+"/restore",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.deleteCampaignGroup=function(e,t){return this.Delete({path:"/campaigngroups/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var u=n(18),s=o(n(8)),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getCampaigns=function(e,t){return this.Get({path:"/campaigns",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getCampaign=function(e,t){return this.Get({path:"/campaigns/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.createCampaign=function(e,t){return this.Post({path:"/campaigns",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateCampaign=function(e,t){return this.Put({path:"/campaigns/"+t.id,credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.cloneCampaign=function(e,t){return this.Post({path:"/campaigns/"+t.id+"/clone",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getCampaignSegmentStatistics=function(e,t){return this.Get({path:"/campaigns/"+t.id+"/segmentstats",credentials:e,qs:{startDate:t.startDate,endDate:t.endDate}}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getCampaignSettingsHistory=function(e,t){return this.Get({path:"/CampaignSettingsHistory",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.restoreCampaign=function(e,t){return this.Put({path:"/campaigns/"+t.id+"/restore",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.deleteCampaign=function(e,t){return this.Delete({path:"/campaigns/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getCampaignPacingBudget=function(e,t){return this.Get({path:"/campaigns/"+t.id+"/pacing/budget",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getCampaignPacingImpressions=function(e,t){return this.Get({path:"/campaigns/"+t.id+"/pacing/impressions",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getCampaignConstraints=function(e,t){return this.Get({path:"/campaigns/"+t.id+"/constraint",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateCampaignConstraints=function(e,t){return this.Put({path:"/campaigns/"+t.id+"/constraint",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getCampaignMetricTargets=function(e,t){return this.Get({path:"/campaigns/"+t.id+"/metrictargets",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateCampaignMetricTargets=function(e,t){return this.Put({path:"/campaigns/"+t.id+"/metrictargets",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getCampaignTargeting=function(e,t){return this.Get({path:"/campaigns/"+t.id+"/targeting",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateCampaignTargeting=function(e,t){return this.Put({path:"/campaigns/"+t.id+"/targeting",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getCampaignDeals=function(e,t){return this.Get({path:"/campaigns/"+t.id+"/deals/all",credentials:e,qs:{includedeals:t.includedeals}}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateCampaignDeals=function(e,t){return this.Put({path:"/campaigns/"+t.id+"/deals/all",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getCampaignAds=function(e,t){return this.Get({path:"/campaigns/"+t.id+"/campaignbanners",credentials:e,qs:{includebanner:t.includebanner}}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.createCampaignAd=function(e,t){return this.Post({path:"/campaigns/"+t.id+"/campaignbanners",credentials:e,body:t.data}).then(this.handleErrors).then(this.handlePostResponseType)},t.prototype.updateCampaignAd=function(e,t){return this.Put({path:"/campaigns/"+t.id+"/campaignbanners/"+t.campaignAdId,credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.deleteCampaignAd=function(e,t){return this.Delete({path:"/campaigns/"+t.id+"/campaignbanners/"+t.campaignAdId,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getCampaignTags=function(e,t){return this.Get({path:"/campaigns/"+t.id+"/tags",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.createCampaignTag=function(e,t){return this.Post({path:"/campaigns/"+t.id+"/tags",credentials:e,body:t.data}).then(this.handleErrors).then(this.getIdFromHeader)},t.prototype.updateCampaignTag=function(e,t){return this.Put({path:"/campaigns/"+t.id+"/tags/"+t.tagId,credentials:e,body:t.data}).then(this.handleErrors).then(this.getIdFromHeader)},t.prototype.getDataFeeds=function(e,t){var n=s.scopedParam({scope:"campaign",scopeId:t.id});return this.Get({path:"/dynamicfeeds",credentials:e,qs:n}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getCampaignRetailStrategies=function(e,t){return this.Get({path:"/campaigns/"+t.id+"/retailstrategies",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateCampaignRetailStrategies=function(e,t){return this.Post({path:"/campaigns/"+t.id+"/retailstrategies",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateCampaignStatus=function(e,t){return this.Post({path:"/campaigns/"+t.id+"/"+t.action,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t}(u.Api);t.default=c},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var u=n(18),s=o(n(1)),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getAdqueue=function(e){return this.Get({path:"/bannerqueue",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.createAds=function(e,t){return this.PostMultipartForm({path:"/advertisers/"+t.advertiserId+"/banners",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateAd=function(e,t){return this.Put({path:"/advertisers/"+t.advertiserId+"/banners/"+t.id,credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.deleteAd=function(e,t){return this.Delete({path:"/advertisers/"+t.advertiserId+"/banners/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getBanners=function(e,t){return this.Get({path:"/advertisers/"+t.scopeId+"/banners",credentials:e,qs:{active:t.active||!1}}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getVideos=function(e,t){return this.Get({path:"/advertisers/"+t.scopeId+"/videos",credentials:e,qs:{active:t.active||!1}}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getAd=function(e,t){return this.Get({path:"/ads/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getAdPreview=function(e,t){var n="/advertisers/"+t.advertiserId+"/banners/"+t.id+"/preview/";(null==t?void 0:t.campaignId)&&(n+="campaign/"+t.campaignId+"/"),(null==t?void 0:t.branchId)&&(n+="branch/"+t.branchId+"/"),(null==t?void 0:t.campaignBannerId)&&(n+="campaignbanner/"+t.campaignBannerId+"/"),(null==t?void 0:t.datafeedId)&&(n+="datafeed/"+t.datafeedId+"/");var r={path:n,credentials:e};return t.dataFeedOptions&&Object.keys(t.dataFeedOptions).length>0&&(r=s.assign(r,{qs:t.dataFeedOptions})),this.Get(r).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getAds=function(e,t){return this.Get({path:"/ads",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t}(u.Api);t.default=c},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.search=function(e,t){return this.Get({path:"/names/search",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.navigation=function(e,t){return this.Get({path:"/frontend/navigation/"+t.page+"/"+t.scope+"/"+t.scopeId,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.navigationDropdown=function(e,t){return this.Get({path:"/frontend/navigation/"+t.page+"/"+t.scope+"/"+t.scopeId+"/dropdown/"+t.targetScope,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.navigationItems=function(e,t){return this.Get({path:"/frontend/navigation/"+t.page+"/"+t.scope,credentials:e,qs:{manage:t.manage}}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.navigationLevel=function(e,t){return this.Get({path:"/frontend/navigation/"+t.page+"/"+t.scope+"/"+t.scopeId+"/level/"+t.level,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getCampaignAlerts=function(e){return this.Get({path:"/alerts/campaigns",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getStatistics=function(e,t){return this.Get({path:"/statistics/partial",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getSummary=function(e,t){return this.Get({path:"/statistics/summary",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getTimeseries=function(e,t){return this.Get({path:"/statistics/timeseries",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getTimeseriesTechnical=function(e,t){return this.Get({path:"/statistics/timeseries/technical",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getPublishers=function(e,t){return this.Get({path:"/sell/publishers",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getPublisher=function(e,t){return this.Get({path:"/sell/publishers/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updatePublisher=function(e,t){return this.Put({path:"/sell/publishers/"+t.id,credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getPublisherNames=function(e){return this.Get({path:"/sell/publishers/names",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getPublisherDealRequests=function(e,t){return this.Get({path:"/sell/publishers/"+t.id+"/dealrequests",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getPublisherDeals=function(e,t){return this.Get({path:"/sell/publishers/"+t.id+"/deals",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updatePublisherDeal=function(e,t){return this.Put({path:"/sell/publishers/"+t.id+"/deals/"+t.dealId,credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.deletePublisherDeal=function(e,t){return this.Delete({path:"/sell/publishers/"+t.id+"/deals/"+t.dealId,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.approveDealRequest=function(e,t){return this.Post({path:"/sell/publishers/"+t.id+"/dealrequests/"+t.dealRequestId+"/approve",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.rejectDealRequest=function(e,t){return this.Post({path:"/sell/publishers/"+t.id+"/dealrequests/"+t.dealRequestId+"/reject",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getPresets=function(e,t){return this.Get({path:"/presets",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getAttributeValues=function(e,t){return this.Get({path:"/Attributes/"+t.attributeId+"/AttributeValues",credentials:e,qs:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getFilterAttributeValues=function(e,t){return this.Get({path:"/Attributes/"+t.attributeId+"/AttributeValues/filter",credentials:e,qs:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.postAttributeValues=function(e,t){return this.Post({path:"/Attributes/"+t.attributeId+"/AttributeValues",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getListAttributes=function(e){return this.Get({path:"/allowedattributes/lists",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getStatisticsAttributes=function(e,t){return this.Get({path:"/allowedattributes/statistics",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getFilterAttributes=function(e,t){return this.Get({path:"/allowedattributes/filters",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getCustomAttributes=function(e,t){return this.Get({path:"/allowedattributes/customs",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getTargetingAttributes=function(e,t){return this.Get({path:"/allowedattributes/targeting",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.DATargeting=function(e){return this.Get({path:"/da-targeting",credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getLists=function(e,t){return this.Get({path:"/lists",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getList=function(e,t){return this.Get({path:"/lists/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.createList=function(e,t){return this.Post({path:"/lists",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateList=function(e,t){return this.Put({path:"/lists/"+t.id,credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.deleteList=function(e,t){return this.Delete({path:"/lists/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getDeals=function(e,t){return this.Get({path:"/deals",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getDeal=function(e,t){return this.Get({path:"/deals/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.createDeal=function(e,t){return this.Post({path:"/deals",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.createDealRequest=function(e,t){return this.Post({path:"/deals/request",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateDeal=function(e,t){return this.Put({path:"/deals/"+t.id,credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.deleteDeal=function(e,t){return this.Delete({path:"/deals/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getSegments=function(e,t){return this.Get({path:"/segments",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getSegmentStatistics=function(e,t){return this.Get({path:"/segmentstats",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.createSegment=function(e,t){return this.Post({path:"/advertisers/"+t.advertiserId+"/segments",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateSegment=function(e,t){return this.Put({path:"/advertisers/"+t.advertiserId+"/segments/"+t.segmentId,credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.deleteSegment=function(e,t){return this.Delete({path:"/advertisers/"+t.advertiserId+"/segments/"+t.segmentId,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.ssp=function(e,t){return this.Get({path:"/reporting/ssp",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.financials=function(e,t){return this.Get({path:"/reporting/financials",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getReports=function(e,t){return this.Get({path:"/reports",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getPublisherReports=function(e,t){return this.Get({path:"/reports/publisher",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getReport=function(e,t){return this.Get({path:"/reports/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.createReport=function(e,t){return this.Post({path:"/reports",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateReport=function(e,t){return this.Put({path:"/reports/"+t.id,credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.deleteReport=function(e,t){return this.Delete({path:"/reports/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getReportInstances=function(e,t){return this.Get({path:"/reports/"+t.id+"/instances",credentials:e,qs:{limit:t.limit}}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.downloadReportInstance=function(e,t){return this.GetFile({path:"/reports/"+t.id+"/instances/"+t.instanceId+"/download",credentials:e})},t.prototype.createReportToken=function(e,t){return this.Post({path:"/reports/"+t.id+"/token",credentials:e})},t.prototype.getReportToken=function(e,t){var n=this;return this.Get({path:"/reports/"+t.id+"/token",credentials:e}).then((function(e){return e.ok?n.handleResponseType(e):{token:null}}))},t.prototype.deleteReportToken=function(e,t){return this.Delete({path:"/reports/"+t.id+"/token",credentials:e})},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getReportTemplates=function(e,t){return this.Get({path:"/reportTemplates",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getPublisherReportTemplates=function(e,t){return this.Get({path:"/reportTemplates/publisher",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getReportTemplate=function(e,t){return this.Get({path:"/reportTemplates/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.createReportTemplate=function(e,t){return this.Post({path:"/reportTemplates",credentials:e,body:t.data}).then(this.handleErrors).then(this.handlePostResponseType)},t.prototype.updateReportTemplate=function(e,t){return this.Put({path:"/reportTemplates/"+t.id,credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.deleteReportTemplate=function(e,t){return this.Delete({path:"/reportTemplates/"+t.id,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getSuggestion=function(e,t){return this.Get({path:"/targeting/suggestion"+t.path,qs:t.qs,credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getCreativeFeeds=function(e,t){return this.Get({path:"/dynamicfeeds",credentials:e,qs:t}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.getSpecificCreativeFeed=function(e,t,n){return this.Get({path:"/dynamicfeeds/"+t,credentials:e,qs:n}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.createCreativeFeed=function(e,t){return this.Post({path:"/dynamicfeeds",credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.updateCreativeFeed=function(e,t,n){return this.Put({path:"/dynamicfeeds/"+t,credentials:e,body:n.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.deleteCreativeFeed=function(e,t,n){return this.Delete({path:"/dynamicfeeds/"+t,credentials:e,body:n.data}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.GetPublisherCategories=function(e,t){return this.Get({path:["/sell","publishers",t.publisherId,"categories"].join("/"),credentials:e,qs:t.siteId?{siteId:t.siteId}:{}}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.CreatePublisherCategory=function(e,t){return this.Post({path:["/sell","publishers",t.publisherId,"categories"].join("/"),credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.UpdatePublisherCategory=function(e,t){return this.Put({path:["/sell","publishers",t.publisherId,"categories",t.id].join("/"),credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.DeletePublisherCategory=function(e,t){return this.Delete({path:["/sell","publishers",t.publisherId,"categories",t.id].join("/"),credentials:e})},t.prototype.GetPublisherAdslots=function(e,t){return this.Get({path:["/sell","publishers",t.publisherId,"adslots"].join("/"),credentials:e,qs:t.siteId?{siteId:t.siteId}:{}}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.CreatePublisherAdslot=function(e,t){return this.Post({path:["/sell","publishers",t.publisherId,"adslots"].join("/"),credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.UpdatePublisherAdslot=function(e,t){return this.Put({path:["/sell","publishers",t.publisherId,"adslots",t.id].join("/"),credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.DeletePublisherAdslot=function(e,t){return this.Delete({path:["/sell","publishers",t.publisherId,"adslots",t.id].join("/"),credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.GetPublisherSites=function(e,t){return this.Get({path:["/sell","publishers",t.publisherId,"sites"].join("/"),credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.CreatePublisherSite=function(e,t){return this.Post({path:["/sell","publishers",t.publisherId,"sites"].join("/"),credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.UpdatePublisherSite=function(e,t){return this.Put({path:["/sell","publishers",t.publisherId,"sites",t.id].join("/"),credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.DeletePublisherSite=function(e,t){return this.Delete({path:["/sell","publishers",t.publisherId,"sites",t.id].join("/"),credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.GetPublisherAdslotSettings=function(e,t){return this.Get({path:["/sell","publishers",t.publisherId,"adslotsettings"].join("/"),credentials:e}).then(this.handleErrors).then(this.handleResponseType)},t.prototype.UpdatePublisherSettings=function(e,t){return this.Put({path:["/sell","publishers",t.publisherId,"adslotsettings"].join("/"),credentials:e,body:t.data}).then(this.handleErrors).then(this.handleResponseType)},t}(n(18).Api);t.default=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(1)),f=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.resetPassword=function(e,t){return u(n,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.API.resetPassword({email:e.body.email})];case 1:return r.sent(),t.json({msg:"An email was send to the e-mail address you provided. Follow the instructions and create a new password."}),[3,3];case 2:return n=r.sent(),console.log("err",n),t.status(500).json(n),[3,3];case 3:return[2]}}))}))},n.setPassword=function(e,t){return u(n,void 0,void 0,(function(){var n,r;return s(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),n=d.pick(e.body,["email","hash","password"]),[4,this.API.setPassword(n)];case 1:return a.sent(),t.json({msg:"ok"}),[3,3];case 2:return r=a.sent(),console.log("err",r),t.status(500).json(r),[3,3];case 3:return[2]}}))}))},n.router.post("/resetpassword",n.resetPassword),n.router.post("/setpassword",n.setPassword),n}return a(t,e),t}(c(n(24)).default);t.default=f},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var f=d(n(24)),p=o(n(1)),m=d(n(25)),h=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.changePassword=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=p.pick(e.body,["oldpass","newpass"]),[4,this.API.changePassword(n,r)];case 1:return l.sent(),e.user.password=e.body.newpass,a=e.user,e.logIn(a,(function(e){e?t.redirect("/logout"):t.json({msg:"ok"})})),[3,3];case 2:return i=l.sent(),console.log(i),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getRoles=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o,u,c;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),n=this.getCredentials(e),[4,this.API.getUsers(n,e.query)];case 1:return r=s.sent(),a=r.users,i=this.getUserRows(a),l=p.uniqBy(i,"level").map((function(e){return e.level})),[4,this.getEntities(n,l)];case 2:return o=s.sent(),u=this.transformRoles(i,o),t.json(u),[3,4];case 3:return c=s.sent(),t.status(500).json(c),[3,4];case 4:return[2]}}))}))},n.invite=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.body,[4,this.API.userInvite(n,{data:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.ban=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.body,[4,this.API.userBan(n,{data:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.twofactor=function(e,t){return u(n,void 0,void 0,(function(){var n,r;return s(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),n=this.getCredentials(e),[4,this.API.twofactor(n,e.body)];case 1:return a.sent(),t.json({msg:"ok"}),[3,3];case 2:return r=a.sent(),t.status(500).json(r),[3,3];case 3:return[2]}}))}))},n.verifyCode=function(e,t){return u(n,void 0,void 0,(function(){var n,r;return s(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),n=this.getCredentials(e),[4,this.API.verifyCode(n,e.body)];case 1:return a.sent(),t.json({msg:"ok"}),[3,3];case 2:return r=a.sent(),t.status(500).json(r),[3,3];case 3:return[2]}}))}))},n.router.get("/roles",n.getRoles),n.router.post("/password",n.changePassword),n.router.post("/invite",n.invite),n.router.post("/ban",n.ban),n.router.post("/twofactor",n.twofactor),n.router.post("/verifyCode",n.verifyCode),n}return a(t,e),t.prototype.getEntities=function(e,t){return u(this,void 0,void 0,(function(){var n,r,a,i,l,o;return s(this,(function(u){switch(u.label){case 0:return n={limit:m.default.MAX_API_LIMIT},r=t.includes("organization")?this.API.getOrganizations(e,n):Promise.resolve({organizations:[]}),a=t.includes("agency")?this.API.getAgencies(e,n):Promise.resolve({agencies:[]}),i=t.includes("advertiser")?this.API.getAdvertisers(e,n):Promise.resolve({advertisers:[]}),l=t.includes("publisher")?this.API.getPublishers(e,n):Promise.resolve({publishers:[]}),[4,Promise.all([r,a,i,l])];case 1:return o=u.sent(),[2,Object.assign.apply(Object,c([{}],o))]}}))}))},t.prototype.getUserRows=function(e){return p.flatMap(e,(function(e){return e.roles.map((function(t){return p.assign({},t,{userId:e.id,email:e.email,lastLogin:e.lastLogin,twoFactorEnabled:e.twoFactorEnabled})}))}))},t.prototype.transformRoles=function(e,t){return e.map((function(e,n){var r="";if("organization"===e.level){var a=t.organizations.find((function(t){return t.organization.id===e.entityId}));a&&(r=a.organization.name)}else if("agency"===e.level){var i=t.agencies.find((function(t){return t.agency.id===e.entityId}));i&&(r=i.agency.name)}else if("advertiser"===e.level){var l=t.advertisers.find((function(t){return t.advertiser.id===e.entityId}));l&&(r=l.advertiser.name)}else if("publisher"===e.level){var o=t.publishers.find((function(t){return t.publisher.id===e.entityId}));o&&(r=o.publisher.settings.name)}return p.assign({},e,{id:n,entityName:r})}))},t}(f.default);t.default=h},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(1)),f=c(n(25)),p=o(n(13)),m=c(n(24)),h=n(18),g=n(40),v=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.getAll=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=d.assign({},{limit:f.default.MAX_API_LIMIT},e.query),[4,this.API.getOrganizations(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getStatistics=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o,u,c,m,v;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),n=this.getCredentials(e),r=h.Api.ScopedParam({scope:e.query.scope,scopeId:e.query.scopeId}),a=d.assign({},r,{limit:f.default.MAX_API_LIMIT}),i=void 0,"true"!==e.query.statistics?[3,2]:(l={scope:e.query.scope,attributeId:g.Attributes.ORGANIZATION,startDate:e.query.startDate,endDate:e.query.endDate,limit:f.default.MAX_API_LIMIT,videoMetrics:e.query.videoMetrics,simple:"true",aggregator:"name"},e.query.scopeId&&(l.scopeId=parseInt(e.query.scopeId,10)),o=this.API.getOrganizations(n,a),u=this.API.getStatistics(n,l),[4,Promise.all([o,u])]);case 1:return i=s.sent(),[3,4];case 2:return[4,this.API.getOrganizations(n,a)];case 3:c=s.sent(),i=[c],s.label=4;case 4:return m=function(e){var t,n=e[0]?d.get(e[0],"organizations",[]):[],r=e[1]?d.get(e[1],"statisticList",[]):[],a=[];return n.forEach((function(e){var n=e.organization;r.length>0?(t=r.find((function(e){return e.name===n.id.toString()})),d.isUndefined(t)&&(t={name:n.id,displayName:n.name})):t={name:n.id,displayName:n.name},t.organization=n,t.rights=p.getChildrenRights(e.rights),a.push(t)})),a}(i),t.json(m),[3,6];case 5:return v=s.sent(),t.status(500).json(v),[3,6];case 6:return[2]}}))}))},n.get=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getOrganization(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.post=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.body,[4,this.API.createOrganization(n,{data:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.put=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.body,[4,this.API.updateOrganization(n,{id:r,data:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.delete=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.deleteOrganization(n,{id:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.router.get("",n.getAll),n.router.get("/statistics",n.getStatistics),n.router.get("/:id",n.get),n.router.post("",n.post),n.router.put("/:id",n.put),n.router.delete("/:id",n.delete),n}return a(t,e),t}(m.default);t.default=v},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(1)),f=c(n(25)),p=n(40),m=o(n(13)),h=c(n(24)),g=n(18),v=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.get=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getPublisher(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getStatistics=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o,u,c,h,v;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),n=this.getCredentials(e),r=g.Api.ScopedParam({scope:e.query.scope,scopeId:e.query.scopeId}),a=d.assign({},r,{limit:f.default.MAX_API_LIMIT}),i=void 0,"true"!==e.query.statistics?[3,2]:(l={scope:e.query.scope,attributeId:p.Attributes.PUBLISHER,startDate:e.query.startDate,endDate:e.query.endDate,limit:f.default.MAX_API_LIMIT,videoMetrics:e.query.videoMetrics,simple:"true",aggregator:"name"},e.query.scopeId&&(l.scopeId=parseInt(e.query.scopeId,10)),o=this.API.getPublishers(n,a),u=this.API.getStatistics(n,l),[4,Promise.all([o,u])]);case 1:return i=s.sent(),[3,4];case 2:return[4,this.API.getPublishers(n,a)];case 3:c=s.sent(),i=[c],s.label=4;case 4:return h=function(e){var t,n=e[0]?d.get(e[0],"publishers",[]):[],r=e[1]?d.get(e[1],"statisticList",[]):[],a=[];return n.forEach((function(e){var n=e.publisher;r.length>0?(t=r.find((function(e){return e.name===n.id.toString()})),d.isUndefined(t)&&(t={name:n.id,displayName:n.settings.name})):t={name:n.id,displayName:n.settings.name},t.publisher=n,t.rights=m.getChildrenRights(e.rights),a.push(t)})),a}(i),t.json(h),[3,6];case 5:return v=s.sent(),t.status(500).json(v),[3,6];case 6:return[2]}}))}))},n.put=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.body,[4,this.API.updatePublisher(n,{id:r,data:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getAll=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=d.assign({},{limit:f.default.MAX_API_LIMIT},e.query),[4,this.API.getPublishers(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getNames=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),[4,this.API.getPublisherNames(n)];case 1:return r=i.sent(),t.json(r),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.getDealRequests=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r={id:parseInt(e.params.id,10)},[4,this.API.getPublisherDealRequests(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getDeals=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r={id:parseInt(e.params.id,10)},[4,this.API.getPublisherDeals(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.updateDeal=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=parseInt(e.params.dealId,10),i=e.body,[4,this.API.updatePublisherDeal(n,{id:r,dealId:a,data:i})];case 1:return o.sent(),t.json({msg:"ok"}),[3,3];case 2:return l=o.sent(),t.status(500).json(l),[3,3];case 3:return[2]}}))}))},n.deleteDeal=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=parseInt(e.params.dealId,10),[4,this.API.deletePublisherDeal(n,{id:r,dealId:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.approveDealRequest=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=parseInt(e.params.dealRequestId,10),i=e.body,[4,this.API.approveDealRequest(n,{id:r,dealRequestId:a,data:i})];case 1:return o.sent(),t.json({msg:"ok"}),[3,3];case 2:return l=o.sent(),t.status(500).json(l),[3,3];case 3:return[2]}}))}))},n.rejectDealRequest=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=parseInt(e.params.dealRequestId,10),[4,this.API.rejectDealRequest(n,{id:r,dealRequestId:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.router.get("",n.getAll),n.router.get("/statistics",n.getStatistics),n.router.get("/names",n.getNames),n.router.get("/:id/dealrequests",n.getDealRequests),n.router.get("/:id/deals",n.getDeals),n.router.get("/:id",n.get),n.router.put("/:id",n.put),n.router.put("/:id/deals/:dealId",n.updateDeal),n.router.delete("/:id/deals/:dealId",n.deleteDeal),n.router.post("/:id/dealrequests/:dealRequestId/approve",n.approveDealRequest),n.router.post("/:id/dealrequests/:dealRequestId/reject",n.rejectDealRequest),n}return a(t,e),t}(h.default);t.default=v},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(1)),f=c(n(25)),p=o(n(13)),m=c(n(24)),h=n(18),g=n(40),v=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.getAll=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=d.assign({},{limit:f.default.MAX_API_LIMIT},e.query),[4,this.API.getAgencies(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getStatistics=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o,u,c,m,v;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),n=this.getCredentials(e),r=h.Api.ScopedParam({scope:e.query.scope,scopeId:e.query.scopeId}),a=d.assign({},r,{limit:f.default.MAX_API_LIMIT}),i=void 0,"true"!==e.query.statistics?[3,2]:(l={scope:e.query.scope,attributeId:g.Attributes.AGENCY,startDate:e.query.startDate,endDate:e.query.endDate,limit:f.default.MAX_API_LIMIT,videoMetrics:e.query.videoMetrics,simple:"true",aggregator:"name"},e.query.scopeId&&(l.scopeId=parseInt(e.query.scopeId,10)),o=this.API.getAgencies(n,a),u=this.API.getStatistics(n,l),[4,Promise.all([o,u])]);case 1:return i=s.sent(),[3,4];case 2:return[4,this.API.getAgencies(n,a)];case 3:c=s.sent(),i=[c],s.label=4;case 4:return m=function(e){var t,n=e[0]?d.get(e[0],"agencies",[]):[],r=e[1]?d.get(e[1],"statisticList",[]):[],a=[];return n.forEach((function(e){var n=e.agency;r.length>0?(t=r.find((function(e){return e.name===n.id.toString()})),d.isUndefined(t)&&(t={name:n.id,displayName:n.name})):t={name:n.id,displayName:n.name},t.agency=n,t.rights=p.getChildrenRights(e.rights),a.push(t)})),a}(i),t.json(m),[3,6];case 5:return v=s.sent(),t.status(500).json(v),[3,6];case 6:return[2]}}))}))},n.get=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getAgency(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.post=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.body,[4,this.API.createAgency(n,{data:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.put=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.body,[4,this.API.updateAgency(n,{id:r,data:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.delete=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.deleteAgency(n,{id:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.router.get("",n.getAll),n.router.get("/statistics",n.getStatistics),n.router.get("/:id",n.get),n.router.post("",n.post),n.router.put("/:id",n.put),n.router.delete("/:id",n.delete),n}return a(t,e),t}(m.default);t.default=v},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(1)),f=c(n(25)),p=o(n(13)),m=c(n(24)),h=n(18),g=n(40),v=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.get=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getAdvertiser(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getAll=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=d.assign({},{limit:f.default.MAX_API_LIMIT},e.query),[4,this.API.getAdvertisers(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getAdsNames=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getBanners(n,{scopeId:r,active:!0})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getStatistics=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o,u,c,m,v;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),n=this.getCredentials(e),r=h.Api.ScopedParam({scope:e.query.scope,scopeId:e.query.scopeId}),a=d.assign({},r,{limit:f.default.MAX_API_LIMIT}),i=void 0,"true"!==e.query.statistics?[3,2]:(l={scope:e.query.scope,attributeId:g.Attributes.ADVERTISER,startDate:e.query.startDate,endDate:e.query.endDate,limit:f.default.MAX_API_LIMIT,videoMetrics:e.query.videoMetrics,simple:"true",aggregator:"name"},e.query.scopeId&&(l.scopeId=parseInt(e.query.scopeId,10)),o=this.API.getAdvertisers(n,a),u=this.API.getStatistics(n,l),[4,Promise.all([o,u])]);case 1:return i=s.sent(),[3,4];case 2:return[4,this.API.getAdvertisers(n,a)];case 3:c=s.sent(),i=[c],s.label=4;case 4:return m=function(e){var t,n=e[0]?d.get(e[0],"advertisers",[]):[],r=e[1]?d.get(e[1],"statisticList",[]):[],a=[];return n.forEach((function(e){var n=e.advertiser;r.length>0?(t=r.find((function(e){return e.name==n.id.toString()})),d.isUndefined(t)&&(t={name:n.id,displayName:n.name})):t={name:n.id,displayName:n.name},t.advertiser=n,t.rights=p.getChildrenRights(e.rights),a.push(t)})),a}(i),t.json(m),[3,6];case 5:return v=s.sent(),t.status(500).json(v),[3,6];case 6:return[2]}}))}))},n.getThirdPartyHosts=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getThirdPartyHosts(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getRetailBranches=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o;return s(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.query,[4,this.API.getRetailBranches(n,{id:r,data:a})];case 1:return i=u.sent(),l=d.get(i,"retailBranches",[]),t.json(l),[3,3];case 2:return o=u.sent(),t.status(500).json(o),[3,3];case 3:return[2]}}))}))},n.post=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.body,[4,this.API.createAdvertiser(n,{data:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.put=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.body,[4,this.API.updateAdvertiser(n,{id:r,data:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.importRetailBranches=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.body,[4,this.API.importRetailBranches(n,{id:r,data:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.updateRetailBranch=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=parseInt(e.params.retailBranchId,10),i=e.body,[4,this.API.updateRetailBranch(n,{id:r,retailBranchId:a,data:i})];case 1:return o.sent(),t.json({msg:"ok"}),[3,3];case 2:return l=o.sent(),t.status(500).json(l),[3,3];case 3:return[2]}}))}))},n.delete=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.deleteAdvertiser(n,{id:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.deleteRetailBranch=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=parseInt(e.params.retailBranchId,10),[4,this.API.deleteRetailBranch(n,{id:r,retailBranchId:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.router.get("",n.getAll),n.router.get("/statistics",n.getStatistics),n.router.get("/:id/ads",n.getAdsNames),n.router.get("/:id/banners/thirdpartyhosts",n.getThirdPartyHosts),n.router.get("/:id/retailbranches",n.getRetailBranches),n.router.get("/:id",n.get),n.router.post("",n.post),n.router.post("/:id/retailbranches",n.importRetailBranches),n.router.put("/:id",n.put),n.router.put("/:id/retailbranches/:retailBranchId",n.updateRetailBranch),n.router.delete("/:id",n.delete),n.router.delete("/:id/retailbranches/:retailBranchId",n.deleteRetailBranch),n}return a(t,e),t}(m.default);t.default=v},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=n(58),f=c(n(24)),p=c(n(25)),m=o(n(59)),h=o(n(1)),g=o(n(81)),v=o(n(439)),b=c(n(440)),y=c(n(441)),E=c(n(442)),_=n(111),w=n(42),S=c(n(443)),P=c(n(112)),C=P.default.memoryStorage(),O=P.default({storage:C}),x=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.getAll=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=h.assign({},e.query,{limit:p.default.MAX_API_LIMIT}),[4,this.API.getAds(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),console.log(i),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.get=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r={id:parseInt(e.params.id,10)},[4,this.API.getAd(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),console.log(i),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.put=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.body.advertiserId,i=e.body.data,[4,this.API.updateAd(n,{id:r,advertiserId:a,data:i})];case 1:return o.sent(),t.json({msg:"ok"}),[3,3];case 2:return l=o.sent(),t.status(500).json(l),[3,3];case 3:return[2]}}))}))},n.delete=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.body.advertiserId,[4,this.API.deleteAd(n,{id:r,advertiserId:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.deleteInactive=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o,u=this;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),n=this.getCredentials(e),r=h.assign({},e.query,{limit:p.default.MAX_API_LIMIT}),[4,this.API.getAds(n,r)];case 1:return a=s.sent(),i=a.filter((function(e){return 0===e.active})),l=i.map((function(e){return u.API.deleteAd(n,{id:e.id,advertiserId:e.advertiserId})})),[4,Promise.all(l)];case 2:return s.sent(),t.json({msg:"ok"}),[3,4];case 3:return o=s.sent(),console.log(o),t.status(500).json(o),[3,4];case 4:return[2]}}))}))},n.create=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o,u,c,d;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,8,,9]),n=this.getCredentials(e),r=e.body.ads||[],a=parseInt(e.body.advertiserId,10),r.length>0?(i=function(e){var t=new b.default,n={};return e.forEach((function(e){if(e.local){if(1==e.type){var r=e.id.toString();n[r]=D(e),t.append(r,v.createReadStream(e.path))}else if(4==e.type){r=e.id.toString();n[r]=D(e);var a=new y.default;try{a.addLocalFolder(e.path),a.writeZip(e.path+".zip"),t.append(r,v.createReadStream(e.path+".zip"))}catch(t){console.log("could not create html5 zip: ",e.id)}}else if(5==e.type){var i=T(e.filename),l=""+p.default.LOCAL_VIDEOS_DIR+e.name+i;v.renameSync(""+p.default.LOCAL_VIDEOS_DIR+e.uuid+"-"+e.filename,l),n[e.name]=D(e),t.append(e.name,v.createReadStream(l))}}else n[e.name]=D(e)})),t.append("data",JSON.stringify(n)),t}(r),[4,this.API.createAds(n,{advertiserId:a,data:i})]):[3,6];case 1:l=s.sent(),o=function(e){var t=[];return h.forEach(e,(function(e,n){isNaN(e)&&t.push({key:n,msg:e})})),t}(l),s.label=2;case 2:return s.trys.push([2,4,,5]),u=function(e){return e.filter((function(e){return e.local&&5===e.type})).map((function(e){var t=T(e.filename);return""+p.default.LOCAL_VIDEOS_DIR+e.name+t}))}(r),[4,(f=u,m=f.map((function(e){return v.remove(e)})),Promise.all(m))];case 3:return s.sent(),[3,5];case 4:return c=s.sent(),console.log("Error deleting ads files after save: ",c),[3,5];case 5:return t.json(o),[3,7];case 6:t.json([]),s.label=7;case 7:return[3,9];case 8:return d=s.sent(),console.log(d),t.status(500).json(d),[3,9];case 9:return[2]}var f,m}))}))},n.getPreview=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o,u,c,d;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),n=this.getCredentials(e),r={advertiserId:parseInt(e.params.advertiserId,10),id:parseInt(e.params.id,10)},(null===(o=e.params)||void 0===o?void 0:o.campaignId)&&(r=h.assign(r,{campaignId:parseInt(e.params.campaignId,10)})),(null===(u=e.params)||void 0===u?void 0:u.branchId)&&(r=h.assign(r,{branchId:parseInt(e.params.branchId,10)})),(null===(c=e.params)||void 0===c?void 0:c.campaignBannerId)&&(r=h.assign(r,{campaignBannerId:parseInt(e.params.campaignBannerId,10)})),(null===(d=e.params)||void 0===d?void 0:d.datafeedId)&&(r=h.assign(r,{datafeedId:parseInt(e.params.datafeedId,10)})),a={},a=h.assign(a,e.query),r=h.assign(r,{dataFeedOptions:a}),[4,this.API.getAdPreview(n,r)];case 1:return[4,i=s.sent()];case 2:return s.sent(),console.log(i),t.json(i),[3,4];case 3:return l=s.sent(),console.log(l),t.status(500).json(l),[3,4];case 4:return[2]}}))}))},n.getAdqueue=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),[4,this.API.getAdqueue(n)];case 1:return r=i.sent(),t.json(r),[3,3];case 2:return a=i.sent(),console.log(a),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.getAdqueueCount=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),[4,this.API.getAdqueue(n)];case 1:return r=i.sent(),t.json({count:r.length}),[3,3];case 2:return a=i.sent(),console.log(a),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.fileExists=function(e,t){return u(n,void 0,void 0,(function(){var n,r;return s(this,(function(a){switch(a.label){case 0:return n=e.body.url,[4,d(n,{method:"GET"})];case 1:return(r=a.sent()).ok?t.json({fileExists:!0}):404===r.status?t.json({fileExists:!1}):t.status(500).json("Internal server error"),[2]}}))}))},n.bannerSession=function(e,t){e.session.bannerHtml='<!DOCTYPE html><html><body style="margin:0;padding:0">'+e.body.tag+"</body></html>",t.json({msg:"OK"})},n.bannerPreview=function(e,t){var n=e.session.bannerHtml;t.send(n)},n.deleteDirs=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:n=e.body.toDelete||[],r=n.map((function(e){return new Promise((function(t,n){E.default(e,(function(e){e?n(e):t()}))}))})),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return i.sent(),t.json({msg:"ok"}),[3,4];case 3:return a=i.sent(),console.log("err",a),t.status(500).json("Failed to delete banner files: "+a),[3,4];case 4:return[2]}}))}))},n.localBanners=function(e,t){var n=e.files;!function(e,t,n){var r=t,a=[];h.forEach(e,(function(e,t){var i=w.v4();a.push(i),h.forEach(e,(function(e){return u(this,void 0,void 0,(function(){var t,l;return s(this,(function(o){switch(o.label){case 0:t=function(e,t){var n=[p.default.LOCAL_BANNERS_DIR,e].concat(t.split("/"));return n.pop(),g.join.apply(null,n)}(i,e.path),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,S.default(t)];case 2:return o.sent(),v.writeFileSync(g.join(t,e.file.originalname),e.file.buffer,"utf8"),0===--r&&n(a),[3,4];case 3:return l=o.sent(),console.log(l),0===--r&&n(a),[3,4];case 4:return[2]}}))}))}))}))}(function(e,t,n){var r=e.map((function(e,r){return{file:e,path:n[r],key:t[r]}}));return h.groupBy(r,"key")}(n,e.body.keys,e.body.paths),n.length,(function(e){var n=e.map((function(e){return g.join(p.default.LOCAL_BANNERS_DIR,e)})),r={banners:[],invalid:[],zip:[],toDelete:n};n.length>0&&n.forEach((function(e){I(e,r)})),t.json(r)}))},n.localVideo=function(e,t){var r;e.pipe(e.busboy);var a={};e.busboy.on("field",(function(e,t){a[e]="thirdPartyImpressions"===e||"thirdPartyClicks"===e||"thirdPartyTracking"===e?""==t?[]:t.split(","):t})),e.busboy.on("file",(function(e,i,l){return u(n,void 0,void 0,(function(){var e,n;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,S.default(p.default.LOCAL_VIDEOS_DIR)];case 1:return o.sent(),e=w.v4(),r=v.createWriteStream(""+p.default.LOCAL_VIDEOS_DIR+e+"-"+l),i.pipe(r),r.on("close",(function(){a.filename=l,a.uuid=e,t.json(a)})),[3,3];case 2:return n=o.sent(),console.log("err",n),[2,t.status(500).json({message:"Error while creating directory to write zip file. Description:"+n})];case 3:return[2]}}))}))}))},n.router.get("/adqueue",n.getAdqueue),n.router.get("/adqueue-count",n.getAdqueueCount),n.router.post("/file-exists",n.fileExists),n.router.post("/banner-session",n.bannerSession),n.router.get("/banner-preview",n.bannerPreview),n.router.post("/local-banners",O.array("files"),n.localBanners),n.router.post("/local-video",n.localVideo),n.router.post("/delete-dirs",n.deleteDirs),n.router.get("/preview/:advertiserId/ad/:id",n.getPreview),n.router.get("/preview/:advertiserId/ad/:id/campaign/:campaignId",n.getPreview),n.router.get("/preview/:advertiserId/ad/:id/campaign/:campaignId/branch/:branchId",n.getPreview),n.router.get("/preview/:advertiserId/ad/:id/campaign/:campaignId/branch/:branchId/campaignbanner/:campaignBannerId",n.getPreview),n.router.get("/preview/:advertiserId/ad/:id/datafeed/:datafeedId",n.getPreview),n.router.get("/preview/:advertiserId/ad/:id/campaign/:campaignId/campaignbanner/:campaignBannerId",n.getPreview),n.router.get("/previewRetail/:advertiserId/ad/:id/branch/:branchId",n.getPreview),n.router.get("",n.getAll),n.router.get("/:id",n.get),n.router.put("/:id",n.put),n.router.post("/:id",n.delete),n.router.post("/",n.create),n.router.delete("/delete-inactive",n.deleteInactive),n}return a(t,e),t}(f.default);function I(e,t){v.readdirSync(e).forEach((function(n){(function(e){return-1===["__MACOSX",".DS_Store","thumbs.db"].indexOf(e)})(n)&&(v.statSync(g.join(e,n)).isDirectory()?function(e,t,n){var r=/(\d+)\s*[xX]\s*(\d+)/g.exec(t);if(r){var a=function(e,t,n){var r=g.join(e,t),a=v.readdirSync(r),i=N(a),l=n.input;if(i){var o=g.join(r,i);return A(o),function e(t,n){n.forEach((function(n){var r=g.join(t,n);if(v.statSync(r).isDirectory()){var a=v.readdirSync(r);e(r,a)}else{".js"===g.parse(r).ext&&A(r)}}))}(r,a),{preview:F(o),path:r,name:l,width:n[1]||"",height:n[2]||"",type:4}}return null}(e,t,r);a?n.banners.push(a):n.invalid.push({name:t,type:"dir",msg:"html file missing"})}else{var i=g.join(e,t);N(v.readdirSync(i))?n.invalid.push({name:t,type:"dir",msg:"html banner directory name is missing dimensions"}):I(i,n)}}(e,n,t):function(e,t,n){var r=[".zip",".png",".jpg",".jpeg",".gif"],a=g.parse(t);if(r.indexOf(a.ext.toLowerCase())>-1)if(".zip"===a.ext){if(s=n.zip,c=e,d=g.relative(p.default.LOCAL_BANNERS_DIR,c).split(g.sep),h.intersection(s,d).length<p.default.ZIP_LEVEL){var i=new y.default(g.join(e,t)),l=w.v4(),o=g.join(e,l);n.zip.push(l),i.extractAllTo(o),function(e,t){var n=v.readdirSync(e);if(N(n)){var r=g.parse(t),a=g.join(e,r.name);v.mkdirpSync(a),n.forEach((function(t){var n=g.join(e,t),r=g.join(a,t);v.moveSync(n,r)}))}}(o,t),I(o,n)}else n.invalid.push({name:t,type:"file",msg:"maximum zip level exceeded"})}else{var u=function(e,t){var n=g.join(e,t),r=g.parse(t);try{var a=_(n),i=r.name+" "+a.width+"x"+a.height;return{preview:F(n),path:n,name:i,width:a.width,height:a.height,type:1}}catch(e){return null}}(e,t);u?n.banners.push(u):n.invalid.push({name:t,type:"file",msg:"invalid image file"})}else n.invalid.push({name:t,type:"file",msg:"file should be of types "+r.join(", ")});var s,c,d}(e,n,t))}))}function N(e){return e.find((function(e){return".html"===g.parse(e).ext}))}function A(e){j(e,"window.open(","ADSCIENCE_CLICK()"),j(e,"mraid.open(","ADSCIENCE_CLICK()")}function j(e,t,n){try{for(var r=v.readFileSync(e,"utf8").toString(),a=new RegExp(h.escapeRegExp(t),"g"),i=t.length,l=r,o=void 0;null!==(o=a.exec(l));){var u=o.index,s=M(u+i,l);-1!==s&&(l=k(u,s+1,n,l))}v.writeFileSync(e,l,"utf8")}catch(e){console.log("Failed to write file: "+e)}}function M(e,t){for(var n=e+1,r=t.length-1,a=1;a>0&&n<=r;)"("===t.charAt(n)?a++:")"===t.charAt(n)&&a--,n++;return n===r+1&&")"!==t.charAt(n-1)?-1:n-1}function k(e,t,n,r){return r.substring(0,e)+n+r.substring(t)}function F(e){return m.serverUrl+e.replace(p.default.LOCAL_BANNERS_DIR,p.default.LOCAL_ADS_PREVIEW)}function D(e){var t=h.assign({},e);return delete t.id,delete t.path,delete t.uuid,h.mapValues(t,(function(e){return Number.isInteger(e)?e.toString():e}))}function T(e){var t=e.lastIndexOf(".");return t<0?"":e.substr(t)}t.default=x},function(e,t){e.exports=require("fs-extra")},function(e,t){e.exports=require("form-data")},function(e,t){e.exports=require("adm-zip")},function(e,t){e.exports=require("rimraf")},function(e,t){e.exports=require("mkdirp")},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.search=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a;return l(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),[4,this.API.search(n,e.query)];case 1:return r=i.sent(),t.json(r),[3,3];case 2:return a=i.sent(),console.log(a),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.router.get("/search",n.search),n}return a(t,e),t}(o(n(24)).default);t.default=u},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.navigationItems=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r={page:e.params.page,scope:e.params.scope,manage:e.query.manage},[4,this.API.navigationItems(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),console.log(i),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.navigation=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r={page:e.params.page,scope:e.params.scope,scopeId:parseInt(e.params.scopeId,10)},[4,this.API.navigation(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),console.log(i),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.navigationDropdown=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r={page:e.params.page,scope:e.params.scope,scopeId:parseInt(e.params.scopeId,10),targetScope:e.params.targetScope},[4,this.API.navigationDropdown(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),console.log(i),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.navigationLevel=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r={page:e.params.page,scope:e.params.scope,scopeId:parseInt(e.params.scopeId,10),level:e.params.level},[4,this.API.navigationLevel(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),console.log(i),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.router.get("/navigation/:page/:scope",n.navigationItems),n.router.get("/navigation/:page/:scope/:scopeId",n.navigation),n.router.get("/navigation/:page/:scope/:scopeId/dropdown/:targetScope",n.navigationDropdown),n.router.get("/navigation/:page/:scope/:scopeId/level/:level",n.navigationLevel),n}return a(t,e),t}(o(n(24)).default);t.default=u},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(1)),f=c(n(11)),p=c(n(25)),m=o(n(13)),h=c(n(24)),g=n(18),v=n(40),b=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.get=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getCampaignGroup(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getAll=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=d.assign({},{limit:p.default.MAX_API_LIMIT},e.query),[4,this.API.getCampaignGroups(n,r)];case 1:return a=l.sent(),t.json(a.campaignGroups||[]),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getStatistics=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o,u,c,f,h;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),n=this.getCredentials(e),r=g.Api.ScopedParam({scope:e.query.scope,scopeId:e.query.scopeId}),a=d.assign({},r,{limit:p.default.MAX_API_LIMIT,includeArchived:!0}),i=void 0,"true"!==e.query.statistics?[3,2]:(l={scope:e.query.scope,attributeId:v.Attributes.CLUSTER,startDate:e.query.startDate,endDate:e.query.endDate,limit:p.default.MAX_API_LIMIT,videoMetrics:e.query.videoMetrics,simple:"true",aggregator:"name"},e.query.scopeId&&(l.scopeId=parseInt(e.query.scopeId,10)),o=this.API.getCampaignGroups(n,a),u=this.API.getStatistics(n,l),[4,Promise.all([o,u])]);case 1:return i=s.sent(),[3,4];case 2:return[4,this.API.getCampaignGroups(n,a)];case 3:c=s.sent(),i=[c],s.label=4;case 4:return f=function(e){var t,n=e[0]?d.get(e[0],"campaignGroups",[]):[],r=e[1]?d.get(e[1],"statisticList",[]):[],a=[];return n.forEach((function(e){var n=e.campaignGroup;r.length>0?(t=r.find((function(e){return e.name==n.id.toString()})),d.isUndefined(t)&&(t={name:n.id,displayName:n.name})):t={name:n.id,displayName:n.name},t.campaignGroup=n,t.rights=m.getChildrenRights(e.rights),a.push(t)})),a}(i),t.json(f),[3,6];case 5:return h=s.sent(),t.status(500).json(h),[3,6];case 6:return[2]}}))}))},n.post=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.body,[4,this.API.createCampaignGroup(n,{data:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.put=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.body,[4,this.API.updateCampaignGroup(n,{id:r,data:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.restore=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.restoreCampaignGroup(n,{id:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.delete=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.deleteCampaignGroup(n,{id:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.deleteAll=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o,u,c,m,h,v,b,y=this;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),n=this.getCredentials(e),r=e.query,a=r.scope,i=r.scopeId,l=r.endDate,o=g.Api.ScopedParam({scope:a,scopeId:i}),u=d.assign({},o,{limit:p.default.MAX_API_LIMIT}),[4,this.API.getCampaignGroups(n,u)];case 1:return c=s.sent(),m=c.campaignGroups||[],h=function(e,t){return e.filter((function(e){if(e.campaignGroup.isRecent)return!1;var n=f.default(t),r=f.default(e.campaignGroup.endDate);return n.diff(r,"days")>=0})).map((function(e){return e.campaignGroup.id}))}(m,l),v=h.map((function(e){return y.API.deleteCampaignGroup(n,{id:e})})),[4,Promise.all(v)];case 2:return s.sent(),t.json({msg:"ok"}),[3,4];case 3:return b=s.sent(),console.log("err",b),t.status(500).json(b),[3,4];case 4:return[2]}}))}))},n.router.get("",n.getAll),n.router.get("/statistics",n.getStatistics),n.router.get("/:id",n.get),n.router.post("",n.post),n.router.put("/:id",n.put),n.router.put("/:id/restore",n.restore),n.router.delete("/",n.deleteAll),n.router.delete("/:id",n.delete),n}return a(t,e),t}(h.default);t.default=b},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(1)),f=c(n(11)),p=c(n(24)),m=c(n(25)),h=n(18),g=o(n(13)),v=n(40),b=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.get=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getCampaign(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getHistory=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),[4,this.API.getCampaignSettingsHistory(n,e.query)];case 1:return r=i.sent(),t.json(r),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.getAll=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=d.assign({},{limit:m.default.MAX_API_LIMIT},e.query),[4,this.API.getCampaigns(n,r)];case 1:return a=l.sent(),t.json(a.campaigns||[]),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.postSettings=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o,u,c,f,p,m,h,g,v,b;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.body,i=d.get(a,"campaign"),l=d.get(a,"targeting"),o=d.get(a,"constraints"),u=d.get(a,"deals"),c=d.get(a,"metricTargets"),f=d.get(a,"retailStrategies"),[4,this.API.updateCampaign(n,{id:r,data:i})];case 1:return s.sent(),[4,this.API.updateCampaignConstraints(n,{id:r,data:o})];case 2:return s.sent(),p=this.API.updateCampaignTargeting(n,{id:r,data:l}),m=d.isNull(u)?Promise.resolve():this.API.updateCampaignDeals(n,{id:r,data:u}),h=this.API.updateCampaignMetricTargets(n,{id:r,data:c}),g=d.isNull(d.get(a,"ads"))?Promise.resolve():this.saveAds(n,r,a),v=a.isRetail?this.API.updateCampaignRetailStrategies(n,{id:r,data:f}):Promise.resolve(),[4,Promise.all([p,m,h,g,v])];case 3:return s.sent(),t.json({msg:"ok"}),[3,5];case 4:return b=s.sent(),console.log("post-settings error",b),t.status(500).json(b),[3,5];case 5:return[2]}}))}))},n.getSettings=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o,u,c,f,p;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getCampaign(n,{id:r})];case 1:return a=s.sent(),i="Adserving"===d.get(a,"campaign.biddingType"),l=d.get(a,"campaign.structure"),o="RETAIL_GPS"===l||"RETAIL_ZIP"===l,u=g.getRights(d.get(a,"rights")),[4,this.getCampaignData(n,r,i,o,u)];case 2:return c=s.sent(),f={campaign:d.get(a,"campaign"),settings:{constraints:d.get(c,"constraints"),targeting:d.get(c,"targeting"),metricTargets:d.get(c,"metricTargets"),deals:d.get(c,"deals"),ads:d.get(c,"ads",[]),tags:d.get(c,"tags",[]),dataFeeds:d.get(c,"dataFeeds",[]),retailStrategies:d.get(c,"retailStrategies",[])},rights:d.get(a,"rights"),parents:d.get(a,"parents")},t.json(f),[3,4];case 3:return p=s.sent(),console.log("err",p),t.status(500).json(p),[3,4];case 4:return[2]}}))}))},n.getStatistics=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o,u,c,p,g,b,E;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,8,,9]),n=this.getCredentials(e),r=h.Api.ScopedParam({scope:e.query.scope,scopeId:e.query.scopeId}),a=function(e){var t=f.default().format("YYYY-MM-DD");if("recent"===e)return{endsAfter:t};if("older"===e)return{endsBefore:t};if("archived"===e)return{archived:"true"};return{}}(e.query.type),i=d.assign({},r,a,{limit:m.default.MAX_API_LIMIT,includeConstraints:!0}),l=d.assign({},r,{limit:m.default.MAX_API_LIMIT}),o=this.API.getCampaigns(n,i),u=this.API.getAdvertisers(n,l),[4,Promise.all([o,u])];case 1:if(c=s.sent(),"true"!==e.query.statistics)return[3,6];s.label=2;case 2:return s.trys.push([2,4,,5]),p={scope:e.query.scope,attributeId:v.Attributes.CAMPAIGN,startDate:e.query.startDate,endDate:e.query.endDate,limit:m.default.MAX_API_LIMIT,videoMetrics:e.query.videoMetrics,simple:"true",aggregator:"name"},e.query.scopeId&&(p.scopeId=parseInt(e.query.scopeId,10)),[4,this.API.getStatistics(n,p)];case 3:return g=s.sent(),b=y(c.concat(g)),t.json({warning:null,statistics:b}),[3,5];case 4:return s.sent(),b=y(c),t.json({warning:"Error loading statistics.",statistics:b}),[3,5];case 5:return[3,7];case 6:b=y(c),t.json({warning:null,statistics:b}),s.label=7;case 7:return[3,9];case 8:return E=s.sent(),t.status(500).json(E),[3,9];case 9:return[2]}}))}))},n.getSegmentStats=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r={id:e.params.id,startDate:e.query.startDate,endDate:e.query.endDate},[4,this.API.getCampaignSegmentStatistics(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.post=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.body,[4,this.API.createCampaign(n,{data:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.clone=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.body,[4,this.API.cloneCampaign(n,{id:r,data:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.updateStatus=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.params.action,[4,this.API.updateCampaignStatus(n,{id:r,action:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.put=function(e,t){return u(n,void 0,void 0,(function(){return s(this,(function(e){return[2]}))}))},n.restore=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.restoreCampaign(n,{id:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.delete=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.deleteCampaign(n,{id:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.deleteAll=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o,u,c,p,g,v,b,y=this;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),n=this.getCredentials(e),r=e.query,a=r.scope,i=r.scopeId,l=r.endDate,o=h.Api.ScopedParam({scope:a,scopeId:i}),u=d.assign({},o,{limit:m.default.MAX_API_LIMIT}),[4,this.API.getCampaigns(n,u)];case 1:return c=s.sent(),p=c.campaigns||[],g=function(e,t){return e.filter((function(e){if(e.campaign.isRecent)return!1;var n=f.default(t),r=f.default(e.campaign.endDate);return n.diff(r,"days")>=0})).map((function(e){return e.campaign.id}))}(p,l),v=g.map((function(e){return y.API.deleteCampaign(n,{id:e})})),[4,Promise.all(v)];case 2:return s.sent(),t.json({msg:"ok"}),[3,4];case 3:return b=s.sent(),console.log("err",b),t.status(500).json(b),[3,4];case 4:return[2]}}))}))},n.getPacingBudget=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getCampaignPacingBudget(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getPacingImpressions=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getCampaignPacingImpressions(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getConstraints=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getCampaignConstraints(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getMetricTargets=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getCampaignMetricTargets(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getTargeting=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getCampaignTargeting(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.router.get("",n.getAll),n.router.get("/statistics",n.getStatistics),n.router.get("/history",n.getHistory),n.router.get("/:id",n.get),n.router.post("",n.post),n.router.post("/:id/clone",n.clone),n.router.put("/:id",n.put),n.router.put("/:id/restore",n.restore),n.router.delete("/",n.deleteAll),n.router.delete("/:id",n.delete),n.router.get("/:id/pacing/budget",n.getPacingBudget),n.router.get("/:id/pacing/impressions",n.getPacingImpressions),n.router.get("/:id/segmentstats",n.getSegmentStats),n.router.post("/:id/settings",n.postSettings),n.router.get("/:id/settings",n.getSettings),n.router.get("/:id/constraint",n.getConstraints),n.router.post("/:id/:action",n.updateStatus),n}return a(t,e),t.prototype.saveAds=function(e,t,n){return u(this,void 0,void 0,(function(){var r;return s(this,(function(a){switch(a.label){case 0:return(r=d.get(n,"ads.adsToDelete")||[]).length>0?[4,this.deleteAds(e,t,r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return n.isAdserving?[4,this.saveAdsAdserving(e,t,n.ads)]:[3,4];case 3:return a.sent(),[3,6];case 4:return[4,this.saveAdsRTB(e,t,n.ads)];case 5:a.sent(),a.label=6;case 6:return[2]}}))}))},t.prototype.saveAdsRTB=function(e,t,n){var r=this,a=n.adsToUpdate,i=n.adsToCreate,l=a.map((function(n){return r.API.updateCampaignAd(e,{id:t,campaignAdId:n.id,data:n})})),o=i.map((function(n){return r.API.createCampaignAd(e,{id:t,data:d.omit(n,"id")})}));return Promise.all(l.concat(o))},t.prototype.saveAdsAdserving=function(e,t,n){return u(this,void 0,void 0,(function(){var r,a,i,l,o,c,f=this;return s(this,(function(p){switch(p.label){case 0:return r=n.adsToUpdate,a=n.adsToCreate,i=n.tagsToUpdate,l=n.tagsToCreate,i.forEach((function(n){return u(f,void 0,void 0,(function(){var r,i,l;return s(this,(function(o){switch(o.label){case 0:return n.defaultCampaignBannerId?[3,2]:[4,this.API.updateCampaignTag(e,{id:t,tagId:n.id,data:d.pick(n,["name","supportedSizes","iframe","javascript","tracking"])})];case 1:return o.sent(),[3,7];case 2:return n.defaultCampaignBannerId>0?(l={name:n.name,defaultCampaignBannerId:n.defaultCampaignBannerId,supportedSizes:n.supportedSizes,iframe:n.iframe,javascript:n.javascript,tracking:n.tracking,finalized:!0},[4,this.API.updateCampaignTag(e,{id:t,tagId:n.id,data:l})]):[3,4];case 3:return o.sent(),[3,7];case 4:return r=d.remove(a,(function(e){return e.id===n.defaultCampaignBannerId}))[0],[4,this.API.createCampaignAd(e,{id:t,data:d.omit(r,"id")})];case 5:return i=o.sent(),l={name:n.name,defaultCampaignBannerId:i,supportedSizes:n.supportedSizes,iframe:n.iframe,javascript:n.javascript,tracking:n.tracking,finalized:!0},[4,this.API.updateCampaignTag(e,{id:t,tagId:n.id,data:l})];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))})),[4,Promise.all(l.map((function(n){return u(f,void 0,void 0,(function(){var r,i,l,o,u,c,f,p=this;return s(this,(function(s){switch(s.label){case 0:return r=n.id,i={name:n.name,campaignId:t,supportedSizes:n.supportedSizes,iframe:n.iframe,javascript:n.javascript,tracking:n.tracking,finalized:!1},[4,this.API.createCampaignTag(e,{id:t,data:i})];case 1:return l=s.sent(),n.defaultCampaignBannerId&&n.defaultCampaignBannerId<0?((o=d.remove(a,(function(e){return e.id===n.defaultCampaignBannerId}))[0]).tagId=l,[4,this.API.createCampaignAd(e,{id:t,data:d.omit(o,"id")})]):[3,5];case 2:return u=s.sent(),[4,this.API.updateCampaignTag(e,{id:t,tagId:l,data:{defaultCampaignBannerId:u,finalized:!0}})];case 3:return s.sent(),c=d.remove(a,(function(e){return e.tagId===r})).map((function(e){return d.assign(e,{tagId:l})})),f=c.map((function(n){return p.API.createCampaignAd(e,{id:t,data:d.omit(n,"id")})})),[4,Promise.all(f)];case 4:return[2,s.sent()];case 5:return[2]}}))}))})))];case 1:return p.sent(),o=r.map((function(n){return f.API.updateCampaignAd(e,{id:t,campaignAdId:n.id,data:n})})),c=a.map((function(n){return f.API.createCampaignAd(e,{id:t,data:d.omit(n,"id")})})),[2,Promise.all(o.concat(c))]}}))}))},t.prototype.deleteAds=function(e,t,n){var r=this,a=n.map((function(n){return r.API.deleteCampaignAd(e,{id:t,campaignAdId:n})}));return Promise.all(a)},t.prototype.getCampaignData=function(e,t,n,r,a){return u(this,void 0,void 0,(function(){var i,l,o,u,c,f,p,m,h,g,v,b,y,E,_,w,S;return s(this,(function(s){switch(s.label){case 0:return i=this.API.getCampaignConstraints(e,{id:t}),l=this.API.getCampaignTargeting(e,{id:t}),o=this.API.getCampaignMetricTargets(e,{id:t}),u=a.VIEW_DEALS?this.API.getCampaignDeals(e,{id:t,includedeals:"true"}):Promise.resolve(),c=a.VIEW_ADS?this.API.getCampaignAds(e,{id:t,includebanner:"true"}):Promise.resolve(),f=n&&a.VIEW_ADS?this.API.getCampaignTags(e,{id:t}):Promise.resolve(),p=r?this.API.getCampaignRetailStrategies(e,{id:t}):Promise.resolve(),m=this.API.getDataFeeds(e,{id:t}),[4,Promise.all([i,l,o,u,c,f,m,p])];case 1:return h=s.sent(),g=h[0],v=h[1],b=h[2],y=h[3],E=h[4],_=h[5],w=h[6],S=h[7],[2,{constraints:g,targeting:v,metricTargets:b,deals:d.get(y,"deals")||[],ads:E,tags:_,dataFeeds:w,retailStrategies:S}]}}))}))},t}(p.default);function y(e){var t,n=e[0]?d.get(e[0],"campaigns",[]):[],r=e[1]?d.get(e[1],"advertisers",[]):[],a=e[2]?d.get(e[2],"statisticList",[]):[],i=[],l={};return r.forEach((function(e){l[e.advertiser.id]=e.advertiser.name})),n.forEach((function(e){var n=l[e.campaign.advertiserId],r=d.assign({},e.campaign,{advertiser:n});a.length>0?(t=a.find((function(e){return e.name===r.id.toString()})),d.isUndefined(t)&&(t={name:r.id,displayName:r.name})):t={name:r.id,displayName:r.name},t.campaign=r,t.rights=g.getChildrenRights(e.rights),i.push(t)})),i}t.default=b},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(1)),f=c(n(25)),p=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.get=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getList(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getAll=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=d.assign({},{limit:f.default.MAX_API_LIMIT},e.query),[4,this.API.getLists(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.post=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.body,[4,this.API.createList(n,{data:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.put=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.body,[4,this.API.updateList(n,{id:r,data:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.delete=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.deleteList(n,{id:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.router.get("",n.getAll),n.router.get("/:id",n.get),n.router.post("",n.post),n.router.put("/:id",n.put),n.router.delete("/:id",n.delete),n}return a(t,e),t}(c(n(24)).default);t.default=p},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(1)),f=c(n(25)),p=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.get=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getDeal(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getAll=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=d.assign({},{limit:f.default.MAX_API_LIMIT},e.query),[4,this.API.getDeals(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.post=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.body,[4,this.API.createDeal(n,{data:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.postRequest=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.body,[4,this.API.createDealRequest(n,{data:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.put=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.body,[4,this.API.updateDeal(n,{id:r,data:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.delete=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.deleteDeal(n,{id:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.router.get("",n.getAll),n.router.get("/:id",n.get),n.router.post("",n.post),n.router.post("/request",n.postRequest),n.router.put("/:id",n.put),n.router.delete("/:id",n.delete),n}return a(t,e),t}(c(n(24)).default);t.default=p},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(1)),f=c(n(24)),p=c(n(25)),m=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.getAll=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=d.assign({},e.query,{limit:p.default.MAX_API_LIMIT}),[4,this.API.getSegments(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getStatistics=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o,u,c,f;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),n=this.getCredentials(e),r=d.assign({},e.query,{limit:p.default.MAX_API_LIMIT}),a=d.omit(r,["startDate","endDate","statistics"]),i=void 0,"true"!==e.query.statistics?[3,2]:(l=this.API.getSegments(n,a),o=this.API.getSegmentStatistics(n,r),[4,Promise.all([l,o])]);case 1:return i=s.sent(),[3,4];case 2:return[4,this.API.getSegments(n,{scopeId:r.scopeId})];case 3:u=s.sent(),i=[u,[]],s.label=4;case 4:return c=function(e){var t=e[0],n=e[1];return t.map((function(e){var t=n.find((function(t){return e.id===t.segmentId}))||{segmentId:e.id,segmentName:e.name};return d.assign({},e,t)}))}(i),t.json(c),[3,6];case 5:return f=s.sent(),console.log(f),t.status(500).json(f),[3,6];case 6:return[2]}}))}))},n.post=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.body,a=parseInt(e.query.advertiserId,10),[4,this.API.createSegment(n,{advertiserId:a,data:r})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.put=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.body,a=parseInt(e.query.advertiserId,10),i=parseInt(e.params.id,10),[4,this.API.updateSegment(n,{segmentId:i,advertiserId:a,data:r})];case 1:return o.sent(),t.json({msg:"ok"}),[3,3];case 2:return l=o.sent(),t.status(500).json(l),[3,3];case 3:return[2]}}))}))},n.delete=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.query.advertiserId,10),a=parseInt(e.params.id,10),[4,this.API.deleteSegment(n,{segmentId:a,advertiserId:r})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.router.get("",n.getAll),n.router.get("/statistics",n.getStatistics),n.router.post("",n.post),n.router.put("/:id",n.put),n.router.delete("/:id",n.delete),n}return a(t,e),t}(f.default);t.default=m},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.getCampaignAlerts=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a;return l(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),[4,this.API.getCampaignAlerts(n)];case 1:return r=i.sent(),t.json(r),[3,3];case 2:return a=i.sent(),console.log(a),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.router.get("/campaigns",n.getCampaignAlerts),n}return a(t,e),t}(o(n(24)).default);t.default=u},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.getAll=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.query,[4,this.API.getPresets(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),console.log(i),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.router.get("",n.getAll),n}return a(t,e),t}(o(n(24)).default);t.default=u},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(1)),f=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.getValues=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.params.attributeid,a={count:d.get(e.query,"count",500),substrings:d.get(e.query,"substrings",""),start:d.get(e.query,"start",0)},e.query.campaignId&&(a.campaignId=e.query.campaignId),[4,this.API.getAttributeValues(n,{attributeId:r,data:a})];case 1:return i=o.sent(),t.json(i),[3,3];case 2:return l=o.sent(),console.log(l),t.status(500).json(l),[3,3];case 3:return[2]}}))}))},n.getFilterValues=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o;return s(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.params.attributeid,a={count:5e3,substrings:d.get(e.query,"substrings",""),start:0},[4,this.API.getFilterAttributeValues(n,{attributeId:r,data:a})];case 1:return i=u.sent(),(l=i.map((function(e){return{value:e.value,label:e.name}}))).unshift({value:-1,label:"Select all"}),t.json(l),[3,3];case 2:return o=u.sent(),console.log(o),t.status(500).json(o),[3,3];case 3:return[2]}}))}))},n.postValues=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o,u;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.params.attributeid,a=e.body,[4,this.API.postAttributeValues(n,{attributeId:r,data:a})];case 1:return i=s.sent(),l=i.map((function(e){return e.value})),o=d.difference(a.values,l),t.json({invalid:o,valid:l}),[3,3];case 2:return u=s.sent(),console.log(u),t.status(500).json({err:"Attribute values could not be retrieved. API call failed."}),[3,3];case 3:return[2]}}))}))},n.getListAttributes=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),[4,this.API.getListAttributes(n)];case 1:return r=i.sent(),t.json(r),[3,3];case 2:return a=i.sent(),console.log(a),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.getStatisticsAttributes=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r={scope:e.query.scope,video:e.query.video},e.query.scopeId&&(r.scopeId=parseInt(e.query.scopeId,10)),[4,this.API.getStatisticsAttributes(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),console.log(i),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getFilterAttributes=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r={scope:e.query.scope,video:e.query.video},e.query.scopeId&&(r.scopeId=parseInt(e.query.scopeId,10)),[4,this.API.getFilterAttributes(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),console.log(i),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getTargetingAttributes=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r={scope:e.query.scope,video:e.query.video},e.query.scopeId&&(r.scopeId=parseInt(e.query.scopeId,10)),[4,this.API.getTargetingAttributes(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),console.log(i),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getCustomAttributes=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r={scope:e.query.scope,video:e.query.video},e.query.scopeId&&(r.scopeId=parseInt(e.query.scopeId,10)),[4,this.API.getCustomAttributes(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),console.log(i),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getDATargeting=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),[4,this.API.DATargeting(n)];case 1:return r=i.sent(),t.json(r),[3,3];case 2:return a=i.sent(),console.log(a),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.router.get("/:attributeid/values",n.getValues),n.router.get("/:attributeid/values/filter",n.getFilterValues),n.router.post("/:attributeid/values",n.postValues),n.router.get("/lists",n.getListAttributes),n.router.get("/statistics",n.getStatisticsAttributes),n.router.get("/filters",n.getFilterAttributes),n.router.get("/customs",n.getCustomAttributes),n.router.get("/targeting",n.getTargetingAttributes),n.router.get("/da-targeting",n.getDATargeting),n}return a(t,e),t}(c(n(24)).default);t.default=f},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.getStatistics=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a;return l(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),[4,this.API.getStatistics(n,e.query)];case 1:return r=i.sent(),t.json(r),[3,3];case 2:return a=i.sent(),console.log(a),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.getSummary=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a;return l(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),[4,this.API.getSummary(n,e.query)];case 1:return r=i.sent(),t.json(r),[3,3];case 2:return a=i.sent(),console.log(a),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.getTimeseries=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a;return l(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),[4,this.API.getTimeseries(n,e.query)];case 1:return r=i.sent(),t.json(r),[3,3];case 2:return a=i.sent(),console.log(a),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.getTimeseriesTechnical=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a;return l(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),[4,this.API.getTimeseriesTechnical(n,e.query)];case 1:return r=i.sent(),t.json(r),[3,3];case 2:return a=i.sent(),console.log(a),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.router.get("/",n.getStatistics),n.router.get("/summary",n.getSummary),n.router.get("/timeseries",n.getTimeseries),n.router.get("/timeseries/technical",n.getTimeseriesTechnical),n}return a(t,e),t}(o(n(24)).default);t.default=u},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.ssp=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r={startDate:e.query.startDate,endDate:e.query.endDate},[4,this.API.ssp(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),console.log(i),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.financials=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r={startDate:e.query.startDate,endDate:e.query.endDate},[4,this.API.financials(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),console.log(i),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.router.get("/ssp",n.ssp),n.router.get("/financials",n.financials),n}return a(t,e),t}(o(n(24)).default);t.default=u},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(1)),f=c(n(25)),p=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.createToken=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.createReportToken(n,{id:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.getToken=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getReportToken(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.deleteToken=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.deleteReportToken(n,{id:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.get=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getReport(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getAll=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=d.assign({},{limit:f.default.MAX_API_LIMIT},e.query),[4,this.API.getReports(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.post=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.body,[4,this.API.createReport(n,{data:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.put=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.body,[4,this.API.updateReport(n,{id:r,data:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.delete=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.deleteReport(n,{id:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.getInstances=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a={id:r,limit:f.default.MAX_API_LIMIT},[4,this.API.getReportInstances(n,a)];case 1:return i=o.sent(),t.json(i),[3,3];case 2:return l=o.sent(),t.status(500).json(l),[3,3];case 3:return[2]}}))}))},n.downloadInstance=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){try{n=this.getCredentials(e),r=parseInt(e.params.id,10),a=parseInt(e.params.instanceId,10),i=this.API.downloadReportInstance(n,{id:r,instanceId:a}),e.pipe(i).pipe(t)}catch(e){t.status(500).json(e)}return[2]}))}))},n.router.get("",n.getAll),n.router.get("/:id",n.get),n.router.post("",n.post),n.router.put("/:id",n.put),n.router.delete("/:id",n.delete),n.router.get("/:id/instances",n.getInstances),n.router.get("/:id/instances/:instanceId/download",n.downloadInstance),n.router.post("/:id/token",n.createToken),n.router.get("/:id/token",n.getToken),n.router.delete("/:id/token",n.deleteToken),n}return a(t,e),t}(c(n(24)).default);t.default=p},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(1)),f=c(n(25)),p=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.createToken=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.createReportToken(n,{id:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.getToken=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getReportToken(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.deleteToken=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.deleteReportToken(n,{id:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.get=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getReport(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getAll=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=parseInt(e.params.publisherId,10),console.log("publisher Id"+n),r=this.getCredentials(e),a=d.assign({},{id:n,limit:f.default.MAX_API_LIMIT}),[4,this.API.getPublisherReports(r,a)];case 1:return i=o.sent(),t.json(i),[3,3];case 2:return l=o.sent(),t.status(500).json(l),[3,3];case 3:return[2]}}))}))},n.post=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.body,[4,this.API.createReport(n,{data:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.put=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.body,[4,this.API.updateReport(n,{id:r,data:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.delete=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.deleteReport(n,{id:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.getInstances=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a={id:r,limit:f.default.MAX_API_LIMIT},[4,this.API.getReportInstances(n,a)];case 1:return i=o.sent(),t.json(i),[3,3];case 2:return l=o.sent(),t.status(500).json(l),[3,3];case 3:return[2]}}))}))},n.downloadInstance=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){try{n=this.getCredentials(e),r=parseInt(e.params.id,10),a=parseInt(e.params.instanceId,10),i=this.API.downloadReportInstance(n,{id:r,instanceId:a}),e.pipe(i).pipe(t)}catch(e){t.status(500).json(e)}return[2]}))}))},n.router.get("/:publisherId/",n.getAll),n.router.get("/:publisherId/:id",n.get),n.router.post("/:publisherId",n.post),n.router.put("/:publisherId/:id",n.put),n.router.delete("/:publisherId/:id",n.delete),n.router.get("/:publisherId/:id/instances",n.getInstances),n.router.get("/:publisherId/:id/instances/:instanceId/download",n.downloadInstance),n.router.post("/:publisherId/:id/token",n.createToken),n.router.get("/:publisherId/:id/token",n.getToken),n.router.delete("/:publisherId/:id/token",n.deleteToken),n}return a(t,e),t}(c(n(24)).default);t.default=p},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(1)),f=c(n(25)),p=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.get=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getReportTemplate(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getAll=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=d.assign({},{limit:f.default.MAX_API_LIMIT},e.query),[4,this.API.getReportTemplates(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.post=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.body,[4,this.API.createReportTemplate(n,{data:r})];case 1:return a=l.sent(),t.json({id:a}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.put=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.body,[4,this.API.updateReportTemplate(n,{id:r,data:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.delete=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.deleteReportTemplate(n,{id:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.router.get("",n.getAll),n.router.get("/:id",n.get),n.router.post("",n.post),n.router.put("/:id",n.put),n.router.delete("/:id",n.delete),n}return a(t,e),t}(c(n(24)).default);t.default=p},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(1)),f=c(n(25)),p=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.get=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.getReportTemplate(n,{id:r})];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getAll=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=e.params.publisherId,r=this.getCredentials(e),a=d.assign({},{limit:f.default.MAX_API_LIMIT},{id:n}),[4,this.API.getPublisherReportTemplates(r,a)];case 1:return i=o.sent(),t.json(i),[3,3];case 2:return l=o.sent(),t.status(500).json(l),[3,3];case 3:return[2]}}))}))},n.post=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.body,[4,this.API.createReportTemplate(n,{data:r})];case 1:return a=l.sent(),t.json({id:a}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.put=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=e.body,[4,this.API.updateReportTemplate(n,{id:r,data:a})];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.delete=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),[4,this.API.deleteReportTemplate(n,{id:r})];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.router.get("/:publisherId",n.getAll),n.router.get("/:publisherId/:id",n.get),n.router.post("/:publisherId",n.post),n.router.put("/:publisherId/:id",n.put),n.router.delete("/:publisherId/:id",n.delete),n}return a(t,e),t}(c(n(24)).default);t.default=p},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(n(1)),f=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.get=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l,o,u;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),n=this.getCredentials(e),r=e.path,a={count:d.get(e.query,"count",5e3),search:d.get(e.query,"search",""),start:d.get(e.query,"start",0)},(i=d.get(e.query,"campaignId"))&&(a.campaignId=i),[4,this.API.getSuggestion(n,{path:r,qs:a})];case 1:return l=s.sent(),o=(l||[]).map((function(e){return{value:e.value,label:e.name}})),"true"===d.get(e.query,"all","true")&&o.unshift({value:-1,label:"Select all"}),t.json(o),[3,3];case 2:return u=s.sent(),t.status(500).json(u),[3,3];case 3:return[2]}}))}))},n.router.get("/*",n.get),n}return a(t,e),t}(c(n(24)).default);t.default=f},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});n(58);var d=c(n(24)),f=c(n(25)),p=o(n(1)),m=(n(111),c(n(112))),h=m.default.memoryStorage(),g=(m.default({storage:h}),function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.getAll=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=p.assign({},e.query,{limit:f.default.MAX_API_LIMIT}),[4,this.API.getCreativeFeeds(n,r)];case 1:return a=l.sent(),t.json(a),[3,3];case 2:return i=l.sent(),console.log(i),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.create=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getCredentials(e),r=p.assign({},e.query,{data:e.body}),[4,this.API.createCreativeFeed(n,r)];case 1:return i.sent(),t.json({msg:"ok"}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.update=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=p.assign({},e.query,{data:e.body}),[4,this.API.updateCreativeFeed(n,r,a)];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.delete=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i;return s(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=this.getCredentials(e),r=parseInt(e.params.id,10),a=p.assign({},e.query,{data:e.body}),[4,this.API.deleteCreativeFeed(n,r,a)];case 1:return l.sent(),t.json({msg:"ok"}),[3,3];case 2:return i=l.sent(),t.status(500).json(i),[3,3];case 3:return[2]}}))}))},n.getOne=function(e,t){return u(n,void 0,void 0,(function(){var n,r,a,i,l;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=this.getCredentials(e),r=p.assign({},e.query,{limit:f.default.MAX_API_LIMIT}),a=parseInt(e.params.id,10),[4,this.API.getSpecificCreativeFeed(n,a,r)];case 1:return i=o.sent(),t.json(i),[3,3];case 2:return l=o.sent(),console.log(l),t.status(500).json(l),[3,3];case 3:return[2]}}))}))},n.router.get("",n.getAll),n.router.get("/:id",n.getOne),n.router.put("/:id",n.update),n.router.delete("/:id",n.delete),n.router.post("",n.create),n}return a(t,e),t}(d.default));t.default=g},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.getCategories=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n={publisherId:Number(e.params.id),siteId:Number(e.query.siteId)},r=this.getCredentials(e),[4,this.API.GetPublisherCategories(r,n)];case 1:return a=l.sent(),t.json(a||[]),[3,3];case 2:return i=l.sent(),t.json({err:i}),[3,3];case 3:return[2]}}))}))},n.updateCategory=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n={publisherId:Number(e.params.id),id:Number(e.params.categoryId),data:e.body},r=this.getCredentials(e),[4,this.API.UpdatePublisherCategory(r,n)];case 1:return a=l.sent(),t.json(a||[]),[3,3];case 2:return i=l.sent(),t.json({err:i}),[3,3];case 3:return[2]}}))}))},n.createCategories=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n={publisherId:Number(e.params.id),id:Number(e.params.categoryId),data:e.body},r=this.getCredentials(e),[4,this.API.CreatePublisherCategory(r,n)];case 1:return a=l.sent(),t.json(a||[]),[3,3];case 2:return i=l.sent(),t.json({err:i}),[3,3];case 3:return[2]}}))}))},n.deleteCategory=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n={publisherId:Number(e.params.id),id:Number(e.params.categoryId)},r=this.getCredentials(e),[4,this.API.DeletePublisherCategory(r,n)];case 1:return a=l.sent(),t.json(a||[]),[3,3];case 2:return i=l.sent(),t.json({err:i}),[3,3];case 3:return[2]}}))}))},n.getAdslots=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n={publisherId:Number(e.params.id),siteId:Number(e.query.siteId)},r=this.getCredentials(e),[4,this.API.GetPublisherAdslots(r,n)];case 1:return a=l.sent(),t.json(a||[]),[3,3];case 2:return i=l.sent(),t.json({err:i}),[3,3];case 3:return[2]}}))}))},n.createAdslot=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n={publisherId:Number(e.params.id),data:e.body},r=this.getCredentials(e),[4,this.API.CreatePublisherAdslot(r,n)];case 1:return a=l.sent(),t.json(a||[]),[3,3];case 2:return i=l.sent(),t.json({err:i}),[3,3];case 3:return[2]}}))}))},n.updateAdslot=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n={publisherId:Number(e.params.id),id:Number(e.params.slotId),data:e.body},r=this.getCredentials(e),[4,this.API.UpdatePublisherAdslot(r,n)];case 1:return a=l.sent(),t.json(a||[]),[3,3];case 2:return i=l.sent(),t.json({err:i}),[3,3];case 3:return[2]}}))}))},n.deleteAdslot=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n={publisherId:Number(e.params.id),id:Number(e.params.slotId)},r=this.getCredentials(e),[4,this.API.DeletePublisherAdslot(r,n)];case 1:return a=l.sent(),t.json(a||[]),[3,3];case 2:return i=l.sent(),t.json({err:i}),[3,3];case 3:return[2]}}))}))},n.getSites=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n={publisherId:Number(e.params.id)},r=this.getCredentials(e),[4,this.API.GetPublisherSites(r,n)];case 1:return a=l.sent(),t.json(a||[]),[3,3];case 2:return i=l.sent(),t.json({err:i}),[3,3];case 3:return[2]}}))}))},n.createSite=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n={publisherId:Number(e.params.id),data:e.body},r=this.getCredentials(e),[4,this.API.CreatePublisherSite(r,n)];case 1:return a=l.sent(),t.json(a||[]),[3,3];case 2:return i=l.sent(),t.json({err:i}),[3,3];case 3:return[2]}}))}))},n.updateSite=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n={publisherId:Number(e.params.id),id:Number(e.params.siteId),data:e.body},r=this.getCredentials(e),[4,this.API.UpdatePublisherSite(r,n)];case 1:return a=l.sent(),t.json(a||[]),[3,3];case 2:return i=l.sent(),t.json({err:i}),[3,3];case 3:return[2]}}))}))},n.deleteSite=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n={publisherId:Number(e.params.id),id:Number(e.params.siteId)},r=this.getCredentials(e),[4,this.API.DeletePublisherSite(r,n)];case 1:return a=l.sent(),t.json(a||[]),[3,3];case 2:return i=l.sent(),t.json({err:i}),[3,3];case 3:return[2]}}))}))},n.getPublisherAdslotSettings=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a;return l(this,(function(i){switch(i.label){case 0:return n={publisherId:Number(e.params.id)},r=this.getCredentials(e),[4,this.API.GetPublisherAdslotSettings(r,n)];case 1:return a=i.sent(),t.json(a||[]),[2]}}))}))},n.updatePublisherAdslotSettings=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a,i;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n={publisherId:Number(e.params.id),data:e.body},r=this.getCredentials(e),[4,this.API.UpdatePublisherSettings(r,n)];case 1:return a=l.sent(),t.json(a||[]),[3,3];case 2:return i=l.sent(),t.json({err:i}),[3,3];case 3:return[2]}}))}))},n.router.get("/publishers/:id/categories",n.getCategories),n.router.post("/publishers/:id/categories",n.createCategories),n.router.put("/publishers/:id/categories/:categoryId",n.updateCategory),n.router.delete("/publishers/:id/categories/:categoryId",n.deleteCategory),n.router.get("/publishers/:id/adslots",n.getAdslots),n.router.post("/publishers/:id/adslots",n.createAdslot),n.router.put("/publishers/:id/adslots/:slotId",n.updateAdslot),n.router.delete("/publishers/:id/adslots/:slotId",n.deleteAdslot),n.router.get("/publishers/:id/sites",n.getSites),n.router.post("/publishers/:id/sites",n.createSite),n.router.put("/publishers/:id/sites/:siteId",n.updateSite),n.router.delete("/publishers/:id/sites/:siteId",n.deleteSite),n.router.get("/publishers/:id/adslotSettings",n.getPublisherAdslotSettings),n.router.put("/publishers/:id/adslotSettings",n.updatePublisherAdslotSettings),n}return a(t,e),t}(o(n(24)).default);t.default=u},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}u((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(58),s=function(e){function t(t){var n=e.call(this,t)||this;return n.API=t,n.getXML=function(e,t){return i(n,void 0,void 0,(function(){var n,r,a;return l(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=e.body.url,[4,u(n,{method:"GET"}).then((function(e){return e.text()}))];case 1:return r=i.sent(),t.json({xml:r}),[3,3];case 2:return a=i.sent(),t.status(500).json(a),[3,3];case 3:return[2]}}))}))},n.router.post("/",n.getXML),n}return a(t,e),t}(o(n(24)).default);t.default=s}]);